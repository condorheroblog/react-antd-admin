var Dt=n=>{throw TypeError(n)};var rt=(n,e,t)=>e.has(n)||Dt("Cannot "+t);var Q=(n,e,t)=>(rt(n,e,"read from private field"),t?t.call(n):e.get(n)),Ne=(n,e,t)=>e.has(n)?Dt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),xe=(n,e,t,r)=>(rt(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ie=(n,e,t)=>(rt(n,e,"access private method"),t);import{m as Qr,d as dr,n as Xr,o as Jr,p as Yr,q as Zr,s as _t,j as u,S as Ot,t as zt,v as ea,w as Vt,x as Xe,y as dt,z as Hn,A as na,C as ft,D as Wt,E as ta,F as ra,G as aa,H as Ht,J as fr,K as la,u as oa,B as Ut}from"./index-nmBK9a8B.js";import{i as vr,D as ia,s as sa,n as ua,u as at,a as ca,f as da,b as fa,c as va,d as ma}from"./detail-wX4DtFlT.js";import{u as ha,r as h,R as se,d as vt}from"./react-BBS6oWoz.js";import{B as pa}from"./index-BnEVuDZn.js";import{ay as ga,az as Et,aA as jt,aB as Nt,aC as S,d as Je,b as Mt,ac as ya,ar as i,aq as we,ao as Ze,aD as en,ap as ue,ab as Ae,P as mr,aE as Bt,w as hr,M as ba,aF as Sa,aG as Ee,aH as dn,a3 as Gt,at as be,au as le,e as Oe,aI as ze,aJ as pr,aK as Ca,aL as Qn,aM as Se,aN as gr,ae as rn,af as Me,aO as Yn,O as En,aP as Lt,aQ as xa,aR as Ra,z as Nn,as as yr,aS as wa,a6 as Ta,N as mt,aT as br,aU as qt,B as Un,p as Pa,aV as cn,aw as Ia,T as Sn,l as Fa,aW as Ea,H as ja,J as Na,G as Ma,q as Sr,aX as Ba,C as La,E as Aa,aY as Ka,aZ as $a,ad as ka}from"./antd-C28nsxeG.js";import{L as jn,a as Da,P as Zn}from"./index-BkALjVyU.js";import{u as We,a as _a,o as Cr,r as Ge,b as et,g as Oa,d as Ye,e as De,f as xr,h as Re,i as Rr,P as wr,m as Tr,j as lt,k as Ve,c as za,l as Va,F as Wa,n as Ha,p as Cn,q as Pr,s as Ir,t as Ua,v as Qt,w as wn,x as Ga,y as Fr,z as Gn,A as ht,B as qa,C as Qa,G as Xa}from"./index-DFTwcVFC.js";import{u as qn,B as nt,m as pt,b as Er,P as Xn,i as Ja,c as gt,d as yt,e as jr,f as Ya,g as bt,h as Za,j as el,M as nl,k as tl,U as Xt,l as Jt,S as ot,p as rl}from"./BaseForm-MRmtaKLr.js";import"./faker-CiQWN7dT.js";function al(){const n=ha(),e=n[n.length-1];return r=>{var l;if(!r)return!1;const a=(l=e==null?void 0:e.handle)==null?void 0:l.permissions;return a?(r=Qr(r)?[r]:r,r=r.map(o=>`permission:button:${o.toLowerCase()}`),a.some(o=>r.includes(o))):!1}}function ll(n){var e=h.useRef(0),t=dr(h.useState(n),2),r=t[0],a=t[1],s=h.useCallback(function(l){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){a(l)})},[]);return Xr(function(){cancelAnimationFrame(e.current)}),[r,s]}var ol=Jr(h.useLayoutEffect),il=Yr?ol:Zr;function sl(n){var e=dr(ll(function(){var a=_t(n);return a?{width:a.clientWidth,height:a.clientHeight}:void 0}),2),t=e[0],r=e[1];return il(function(){var a=_t(n);if(a){var s=new ga(function(l){l.forEach(function(o){var c=o.target,d=c.clientWidth,v=c.clientHeight;r({width:d,height:v})})});return s.observe(a),function(){s.disconnect()}}},[],n),t}function ul(n,e,t,r){if(!Array.isArray(n))return console.warn("data must be an array"),[];const a={id:"id",parentId:"parentId",childrenList:"children"},s={},l={},o=[];for(const d of n){const v=d[a.parentId];s[v]==null&&(s[v]=[]),l[d[a.id]]=d,s[v].push(d)}for(const d of n){const v=d[a.parentId];l[v]==null&&o.push(d)}for(const d of o)c(d);function c(d){if(s[d[a.id]]!==null&&(d[a.childrenList]=s[d[a.id]]),d[a.childrenList])for(const v of d[a.childrenList])c(v)}return o}var cl=function(n){Et(t,n);var e=jt(t);function t(){var r;Nt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Je(r),"state",{hasError:!1,errorInfo:""}),r}return Mt(t,[{key:"componentDidCatch",value:function(a,s){console.log(a,s)}},{key:"render",value:function(){return this.state.hasError?u.jsx(ya,{status:"error",title:"Something went wrong.",extra:this.state.errorInfo}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(a){return{hasError:!0,errorInfo:a.message}}}]),t}(se.Component),dl=function(e){var t="".concat(e.antCls,"-progress-bg");return S({},e.componentCls,{"&-multiple":{paddingBlockStart:6,paddingBlockEnd:12,paddingInline:8},"&-progress":{"&-success":S({},t,{backgroundColor:e.colorSuccess}),"&-error":S({},t,{backgroundColor:e.colorError}),"&-warning":S({},t,{backgroundColor:e.colorWarning})},"&-rule":{display:"flex",alignItems:"center","&-icon":{"&-default":{display:"flex",alignItems:"center",justifyContent:"center",width:"14px",height:"22px","&-circle":{width:"6px",height:"6px",backgroundColor:e.colorTextSecondary,borderRadius:"4px"}},"&-loading":{color:e.colorPrimary},"&-error":{color:e.colorError},"&-success":{color:e.colorSuccess}},"&-text":{color:e.colorText}}})};function fl(n){return We("InlineErrorFormItem",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[dl(t)]})}var vl=["rules","name","children","popoverProps"],ml=["errorType","rules","name","popoverProps","children"],Nr={marginBlockStart:-5,marginBlockEnd:-5,marginInlineStart:0,marginInlineEnd:0},hl=function(e){var t=e.inputProps,r=e.input,a=e.extra,s=e.errorList,l=e.popoverProps,o=h.useState(!1),c=ue(o,2),d=c[0],v=c[1],f=h.useState([]),y=ue(f,2),b=y[0],m=y[1],x=h.useContext(Ae.ConfigContext),R=x.getPrefixCls,g=R(),p=_a(),C=fl("".concat(g,"-form-item-with-help")),w=C.wrapSSR,k=C.hashId;h.useEffect(function(){t.validateStatus!=="validating"&&m(t.errors)},[t.errors,t.validateStatus]);var z=Cr(b.length<1?!1:d,function(E){E!==d&&v(E)}),M=t.validateStatus==="validating";return u.jsx(mr,i(i(i({trigger:(l==null?void 0:l.trigger)||["click"],placement:(l==null?void 0:l.placement)||"topLeft"},z),{},{getPopupContainer:l==null?void 0:l.getPopupContainer,getTooltipContainer:l==null?void 0:l.getTooltipContainer,content:w(u.jsx("div",{className:"".concat(g,"-form-item ").concat(k," ").concat(p.hashId).trim(),style:{margin:0,padding:0},children:u.jsxs("div",{className:"".concat(g,"-form-item-with-help ").concat(k," ").concat(p.hashId).trim(),children:[M?u.jsx(Bt,{}):null,s]})}))},l),{},{children:u.jsxs(u.Fragment,{children:[r,a]})}),"popover")},pl=function(e){var t=e.rules,r=e.name,a=e.children,s=e.popoverProps,l=we(e,vl);return u.jsx(Ze.Item,i(i({name:r,rules:t,hasFeedback:!1,shouldUpdate:function(c,d){if(c===d)return!1;var v=[r].flat(1);v.length>1&&v.pop();try{return JSON.stringify(en(c,v))!==JSON.stringify(en(d,v))}catch{return!0}},_internalItemRender:{mark:"pro_table_render",render:function(c,d){return u.jsx(hl,i({inputProps:c,popoverProps:s},d))}}},l),{},{style:i(i({},Nr),l==null?void 0:l.style),children:a}))},gl=function(e){var t=e.errorType,r=e.rules,a=e.name,s=e.popoverProps,l=e.children,o=we(e,ml);return a&&r!==null&&r!==void 0&&r.length&&t==="popover"?u.jsx(pl,i(i({name:a,rules:r,popoverProps:s},o),{},{children:l})):u.jsx(Ze.Item,i(i({rules:r,shouldUpdate:a?function(c,d){if(c===d)return!1;var v=[a].flat(1);v.length>1&&v.pop();try{return JSON.stringify(en(c,v))!==JSON.stringify(en(d,v))}catch{return!0}}:void 0},o),{},{style:i(i({},Nr),o.style),name:a,children:l}))},yl=function(e){var t;return!!(e!=null&&(t=e.valueType)!==null&&t!==void 0&&t.toString().startsWith("date")||(e==null?void 0:e.valueType)==="select"||e!=null&&e.valueEnum)},bl=function(e){var t;return((t=e.ellipsis)===null||t===void 0?void 0:t.showTitle)===!1?!1:e.ellipsis},Sl=function(e,t,r){if(t.copyable||t.ellipsis){var a=t.copyable&&r?{text:r,tooltips:["",""]}:void 0,s=yl(t),l=bl(t)&&r?{tooltip:(t==null?void 0:t.tooltip)!==!1&&s?u.jsx("div",{className:"pro-table-tooltip-text",children:e}):r}:!1;return u.jsx(hr.Text,{style:{width:"100%",margin:0,padding:0},title:"",copyable:a,ellipsis:l,children:e})}return e},St=function(e,t,r){return t===void 0?e:Ge(e,t,r)},Mr=function(e){var t=et(Oa(),"4.24.0")>-1?{menu:e}:{overlay:u.jsx(ba,i({},e))};return Ye(t)};function Cl(){var n=h.useState(!0),e=ue(n,2),t=e[1],r=h.useCallback(function(){return t(function(a){return!a})},[]);return r}function xl(n,e){var t=h.useMemo(function(){var r={current:e};return new Proxy(r,{set:function(s,l,o){return Object.is(s[l],o)||(s[l]=o,n(t)),!0}})},[]);return t}function Rl(n){var e=Cl(),t=xl(e,n);return t}var Br=function(e){if(e&&e!==!0)return e},wl=function(e){var t={};return Object.keys(e||{}).forEach(function(r){var a;Array.isArray(e[r])&&((a=e[r])===null||a===void 0?void 0:a.length)===0||e[r]!==void 0&&(t[r]=e[r])}),t},Tl=["map_row_parentKey"],Pl=["map_row_parentKey","map_row_key"],Il=["map_row_key"],it=function(e){return(Gt.warn||Gt.warning)(e)},$e=function(e){return Array.isArray(e)?e.join(","):e};function An(n,e){var t,r=n.getRowKey,a=n.row,s=n.data,l=n.childrenColumnName,o=l===void 0?"children":l,c=(t=$e(n.key))===null||t===void 0?void 0:t.toString(),d=new Map;function v(y,b,m){y.forEach(function(x,R){var g=(m||0)*10+R,p=r(x,g).toString();x&&ze(x)==="object"&&o in x&&v(x[o]||[],p,g);var C=i(i({},x),{},{map_row_key:p,children:void 0,map_row_parentKey:b});delete C.children,b||delete C.map_row_parentKey,d.set(p,C)})}e==="top"&&d.set(c,i(i({},d.get(c)),a)),v(s),e==="update"&&d.set(c,i(i({},d.get(c)),a)),e==="delete"&&d.delete(c);var f=function(b){var m=new Map,x=[],R=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;b.forEach(function(C){if(C.map_row_parentKey&&!C.map_row_key){var w=C.map_row_parentKey,k=we(C,Tl);if(m.has(w)||m.set(w,[]),p){var z;(z=m.get(w))===null||z===void 0||z.push(k)}}})};return R(e==="top"),b.forEach(function(g){if(g.map_row_parentKey&&g.map_row_key){var p,C=g.map_row_parentKey,w=g.map_row_key,k=we(g,Pl);m.has(w)&&(k[o]=m.get(w)),m.has(C)||m.set(C,[]),(p=m.get(C))===null||p===void 0||p.push(k)}}),R(e==="update"),b.forEach(function(g){if(!g.map_row_parentKey){var p=g.map_row_key,C=we(g,Il);if(p&&m.has(p)){var w=i(i({},C),{},S({},o,m.get(p)));x.push(w);return}x.push(C)}}),x};return f(d)}function Fl(n,e){var t=n.recordKey,r=n.onSave,a=n.row,s=n.children,l=n.newLineConfig,o=n.editorType,c=n.tableName,d=h.useContext(wr),v=Ze.useFormInstance(),f=Ee(!1),y=ue(f,2),b=y[0],m=y[1],x=Re(be(le().mark(function R(){var g,p,C,w,k,z,M,E,K;return le().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,p=o==="Map",C=[c,Array.isArray(t)?t[0]:t].map(function(N){return N==null?void 0:N.toString()}).flat(1).filter(Boolean),m(!0),T.next=6,v.validateFields(C,{recursive:!0});case 6:return w=(d==null||(g=d.getFieldFormatValue)===null||g===void 0?void 0:g.call(d,C))||v.getFieldValue(C),Array.isArray(t)&&t.length>1&&(k=Ca(t),z=k.slice(1),M=en(w,z),Qn(w,z,M)),E=p?Qn({},C,w):w,T.next=11,r==null?void 0:r(t,Tr({},a,E),a,l);case 11:return K=T.sent,m(!1),T.abrupt("return",K);case 16:throw T.prev=16,T.t0=T.catch(0),console.log(T.t0),m(!1),T.t0;case 21:case"end":return T.stop()}},R,null,[[0,16]])})));return h.useImperativeHandle(e,function(){return{save:x}},[x]),u.jsxs("a",{onClick:function(){var R=be(le().mark(function g(p){return le().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p.stopPropagation(),p.preventDefault(),w.prev=2,w.next=5,x();case 5:w.next=9;break;case 7:w.prev=7,w.t0=w.catch(2);case 9:case"end":return w.stop()}},g,null,[[2,7]])}));return function(g){return R.apply(this,arguments)}}(),children:[b?u.jsx(Bt,{style:{marginInlineEnd:8}}):null,s||"保存"]},"save")}var El=function(e){var t=e.recordKey,r=e.onDelete,a=e.preEditRowRef,s=e.row,l=e.children,o=e.deletePopconfirmMessage,c=Ee(function(){return!1}),d=ue(c,2),v=d[0],f=d[1],y=Re(be(le().mark(function b(){var m;return le().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,f(!0),R.next=4,r==null?void 0:r(t,s);case 4:return m=R.sent,f(!1),R.abrupt("return",m);case 9:return R.prev=9,R.t0=R.catch(0),console.log(R.t0),f(!1),R.abrupt("return",null);case 14:return R.prev=14,a&&(a.current=null),R.finish(14);case 17:case"end":return R.stop()}},b,null,[[0,9,14,17]])})));return l!==!1?u.jsx(pr,{title:o,onConfirm:function(){return y()},children:u.jsxs("a",{children:[v?u.jsx(Bt,{style:{marginInlineEnd:8}}):null,l||"删除"]})},"delete"):null},jl=function(e){var t=e.recordKey,r=e.tableName,a=e.newLineConfig,s=e.editorType,l=e.onCancel,o=e.cancelEditable,c=e.row,d=e.cancelText,v=e.preEditRowRef,f=h.useContext(wr),y=Ze.useFormInstance();return u.jsx("a",{onClick:function(){var b=be(le().mark(function m(x){var R,g,p,C,w,k,z;return le().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return x.stopPropagation(),x.preventDefault(),g=s==="Map",p=[r,t].flat(1).filter(Boolean),C=(f==null||(R=f.getFieldFormatValue)===null||R===void 0?void 0:R.call(f,p))||(y==null?void 0:y.getFieldValue(p)),w=g?Qn({},p,C):C,E.next=8,l==null?void 0:l(t,w,c,a);case 8:return k=E.sent,E.next=11,o(t);case 11:if((v==null?void 0:v.current)===null){E.next=15;break}y.setFieldsValue(Qn({},p,v==null?void 0:v.current)),E.next=17;break;case 15:return E.next=17,(z=e.onDelete)===null||z===void 0?void 0:z.call(e,t,c);case 17:return v&&(v.current=null),E.abrupt("return",k);case 19:case"end":return E.stop()}},m)}));return function(m){return b.apply(this,arguments)}}(),children:d||"取消"},"cancel")};function Nl(n,e){var t=e.recordKey,r=e.newLineConfig,a=e.saveText,s=e.deleteText,l=h.forwardRef(Fl),o=h.createRef();return{save:u.jsx(l,i(i({},e),{},{row:n,ref:o,children:a}),"save"+t),saveRef:o,delete:(r==null?void 0:r.options.recordKey)!==t?u.jsx(El,i(i({},e),{},{row:n,children:s}),"delete"+t):void 0,cancel:u.jsx(jl,i(i({},e),{},{row:n}),"cancel"+t)}}function Ml(n){var e=De(),t=h.useRef(null),r=h.useState(void 0),a=ue(r,2),s=a[0],l=a[1],o=function(){var I=new Map,j=function B(F,V){F==null||F.forEach(function(Y,X){var J,G=V==null?X.toString():V+"_"+X.toString();I.set(G,$e(n.getRowKey(Y,-1))),I.set((J=$e(n.getRowKey(Y,-1)))===null||J===void 0?void 0:J.toString(),G),n.childrenColumnName&&Y!==null&&Y!==void 0&&Y[n.childrenColumnName]&&B(Y[n.childrenColumnName],G)})};return j(n.dataSource),I},c=h.useMemo(function(){return o()},[]),d=h.useRef(c),v=h.useRef(void 0);xr(function(){d.current=o()},[n.dataSource]),v.current=s;var f=n.type||"single",y=Sa(n.dataSource,"children",n.getRowKey),b=ue(y,1),m=b[0],x=Ee([],{value:n.editableKeys,onChange:n.onChange?function(D){var I,j,B;n==null||(I=n.onChange)===null||I===void 0||I.call(n,(j=D==null?void 0:D.filter(function(F){return F!==void 0}))!==null&&j!==void 0?j:[],(B=D==null?void 0:D.map(function(F){return m(F)}).filter(function(F){return F!==void 0}))!==null&&B!==void 0?B:[])}:void 0}),R=ue(x,2),g=R[0],p=R[1],C=h.useMemo(function(){var D=f==="single"?g==null?void 0:g.slice(0,1):g;return new Set(D)},[(g||[]).join(","),f]),w=qn(g),k=Re(function(D){var I,j,B,F,V=(I=n.getRowKey(D,D.index))===null||I===void 0||(j=I.toString)===null||j===void 0?void 0:j.call(I),Y=(B=n.getRowKey(D,-1))===null||B===void 0||(F=B.toString)===null||F===void 0?void 0:F.call(B),X=g==null?void 0:g.map(function(ce){return ce==null?void 0:ce.toString()}),J=(w==null?void 0:w.map(function(ce){return ce==null?void 0:ce.toString()}))||[],G=n.tableName&&!!(J!=null&&J.includes(Y))||!!(J!=null&&J.includes(V));return{recordKey:Y,isEditable:n.tableName&&(X==null?void 0:X.includes(Y))||(X==null?void 0:X.includes(V)),preIsEditable:G}}),z=Re(function(D,I){var j,B;return C.size>0&&f==="single"&&n.onlyOneLineEditorAlertMessage!==!1?(it(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1):(C.add(D),p(Array.from(C)),t.current=(j=I??((B=n.dataSource)===null||B===void 0?void 0:B.find(function(F,V){return n.getRowKey(F,V)===D})))!==null&&j!==void 0?j:null,!0)}),M=Re(function(){var D=be(le().mark(function I(j,B){var F,V;return le().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(F=$e(j).toString(),V=d.current.get(F),!(!C.has(F)&&V&&(B??!0)&&n.tableName)){X.next=5;break}return M(V,!1),X.abrupt("return");case 5:return s&&s.options.recordKey===j&&l(void 0),C.delete(F),C.delete($e(j)),p(Array.from(C)),X.abrupt("return",!0);case 10:case"end":return X.stop()}},I)}));return function(I,j){return D.apply(this,arguments)}}()),E=Rr(be(le().mark(function D(){var I,j,B,F,V=arguments;return le().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:for(j=V.length,B=new Array(j),F=0;F<j;F++)B[F]=V[F];(I=n.onValuesChange)===null||I===void 0||I.call.apply(I,[n].concat(B));case 2:case"end":return X.stop()}},D)})),64),K=Re(function(D,I){var j;if(n.onValuesChange){var B=n.dataSource;g==null||g.forEach(function(J){if((s==null?void 0:s.options.recordKey)!==J){var G=J.toString(),ce=en(I,[n.tableName||"",G].flat(1).filter(function(ne){return ne||ne===0}));ce&&(B=An({data:B,getRowKey:n.getRowKey,row:ce,key:G,childrenColumnName:n.childrenColumnName||"children"},"update"))}});var F=D,V=(j=Object.keys(F||{}).pop())===null||j===void 0?void 0:j.toString(),Y=i(i({},s==null?void 0:s.defaultValue),en(I,[n.tableName||"",V.toString()].flat(1).filter(function(J){return J||J===0}))),X=d.current.has($e(V))?B.find(function(J,G){var ce,ne=(ce=n.getRowKey(J,G))===null||ce===void 0?void 0:ce.toString();return ne===V}):Y;E.run(X||Y,B)}}),$=h.useRef(new Map);h.useEffect(function(){$.current.forEach(function(D,I){C.has(I)||$.current.delete(I)})},[$,C]);var T=Re(function(){var D=be(le().mark(function I(j,B){var F,V,Y,X;return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(F=$e(j),V=d.current.get(j.toString()),!(!C.has(F)&&V&&(B??!0)&&n.tableName)){G.next=6;break}return G.next=5,T(V,!1);case 5:return G.abrupt("return",G.sent);case 6:return Y=$.current.get(F)||$.current.get(F.toString()),G.prev=7,G.next=10,Y==null||(X=Y.current)===null||X===void 0?void 0:X.save();case 10:G.next=15;break;case 12:return G.prev=12,G.t0=G.catch(7),G.abrupt("return",!1);case 15:return C.delete(F),C.delete(F.toString()),p(Array.from(C)),G.abrupt("return",!0);case 19:case"end":return G.stop()}},I,null,[[7,12]])}));return function(I,j){return D.apply(this,arguments)}}()),N=Re(function(D,I){if(I!=null&&I.parentKey&&!d.current.has($e(I==null?void 0:I.parentKey).toString()))return console.warn("can't find record by key",I==null?void 0:I.parentKey),!1;if(v.current&&n.onlyAddOneLineAlertMessage!==!1)return it(n.onlyAddOneLineAlertMessage||e.getMessage("editableTable.onlyAddOneLine","只能新增一行")),!1;if(C.size>0&&f==="single"&&n.onlyOneLineEditorAlertMessage!==!1)return it(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1;var j=n.getRowKey(D,-1);if(!j&&j!==0)throw dn(!!j,`请设置 recordCreatorProps.record 并返回一个唯一的key  
  https://procomponents.ant.design/components/editable-table#editable-%E6%96%B0%E5%BB%BA%E8%A1%8C`),new Error("请设置 recordCreatorProps.record 并返回一个唯一的key");if(C.add(j),p(Array.from(C)),(I==null?void 0:I.newRecordType)==="dataSource"||n.tableName){var B,F={data:n.dataSource,getRowKey:n.getRowKey,row:i(i({},D),{},{map_row_parentKey:I!=null&&I.parentKey?(B=$e(I==null?void 0:I.parentKey))===null||B===void 0?void 0:B.toString():void 0}),key:j,childrenColumnName:n.childrenColumnName||"children"};n.setDataSource(An(F,(I==null?void 0:I.position)==="top"?"top":"update"))}else l({defaultValue:D,options:i(i({},I),{},{recordKey:j})});return!0}),H=(n==null?void 0:n.saveText)||e.getMessage("editableTable.action.save","保存"),L=(n==null?void 0:n.deleteText)||e.getMessage("editableTable.action.delete","删除"),P=(n==null?void 0:n.cancelText)||e.getMessage("editableTable.action.cancel","取消"),O=Re(function(){var D=be(le().mark(function I(j,B,F,V){var Y,X,J,G,ce,ne,he;return le().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,n==null||(Y=n.onSave)===null||Y===void 0?void 0:Y.call(n,j,B,F,V);case 2:return G=re.sent,re.next=5,M(j);case 5:if(ce=V||v.current||{},ne=ce.options,!(!(ne!=null&&ne.parentKey)&&(ne==null?void 0:ne.recordKey)===j)){re.next=9;break}return(ne==null?void 0:ne.position)==="top"?n.setDataSource([B].concat(Oe(n.dataSource))):n.setDataSource([].concat(Oe(n.dataSource),[B])),re.abrupt("return",G);case 9:return he={data:n.dataSource,getRowKey:n.getRowKey,row:ne?i(i({},B),{},{map_row_parentKey:(X=$e((J=ne==null?void 0:ne.parentKey)!==null&&J!==void 0?J:""))===null||X===void 0?void 0:X.toString()}):B,key:j,childrenColumnName:n.childrenColumnName||"children"},n.setDataSource(An(he,(ne==null?void 0:ne.position)==="top"?"top":"update")),re.next=13,M(j);case 13:return re.abrupt("return",G);case 14:case"end":return re.stop()}},I)}));return function(I,j,B,F){return D.apply(this,arguments)}}()),A=Re(function(){var D=be(le().mark(function I(j,B){var F,V,Y;return le().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return V={data:n.dataSource,getRowKey:n.getRowKey,row:B,key:j,childrenColumnName:n.childrenColumnName||"children"},J.next=3,n==null||(F=n.onDelete)===null||F===void 0?void 0:F.call(n,j,B);case 3:return Y=J.sent,J.next=6,M(j,!1);case 6:return n.setDataSource(An(V,"delete")),J.abrupt("return",Y);case 8:case"end":return J.stop()}},I)}));return function(I,j){return D.apply(this,arguments)}}()),q=Re(function(){var D=be(le().mark(function I(j,B,F,V){var Y,X;return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,n==null||(Y=n.onCancel)===null||Y===void 0?void 0:Y.call(n,j,B,F,V);case 2:return X=G.sent,G.abrupt("return",X);case 4:case"end":return G.stop()}},I)}));return function(I,j,B,F){return D.apply(this,arguments)}}()),ee=n.actionRender&&typeof n.actionRender=="function",_=ee?n.actionRender:function(){},W=Re(_),U=function(I){var j=n.getRowKey(I,I.index),B={saveText:H,cancelText:P,deleteText:L,addEditRecord:N,recordKey:j,cancelEditable:M,index:I.index,tableName:n.tableName,newLineConfig:s,onCancel:q,onDelete:A,onSave:O,editableKeys:g,setEditableRowKeys:p,preEditRowRef:t,deletePopconfirmMessage:n.deletePopconfirmMessage||"".concat(e.getMessage("deleteThisLine","删除此项"),"?")},F=Nl(I,B);return n.tableName?$.current.set(d.current.get($e(j))||$e(j),F.saveRef):$.current.set($e(j),F.saveRef),ee?W(I,B,{save:F.save,delete:F.delete,cancel:F.cancel}):[F.save,F.delete,F.cancel]};return{editableKeys:g,setEditableRowKeys:p,isEditable:k,actionRender:U,startEditable:z,cancelEditable:M,addEditRecord:N,saveEditable:T,newLineRecord:s,preEditableKeys:w,onValuesChange:K,getRealIndex:n.getRealIndex}}var Bl=function(e){var t=e.componentCls,r=e.antCls;return S({},"".concat(t,"-actions"),S(S({marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,listStyle:"none",display:"flex",gap:e.marginXS,background:e.colorBgContainer,borderBlockStart:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit),minHeight:42},"& > *",{alignItems:"center",justifyContent:"center",flex:1,display:"flex",cursor:"pointer",color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),"& > li > div",{flex:1,width:"100%",marginBlock:e.marginSM,marginInline:0,color:e.colorTextSecondary,textAlign:"center",a:{color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}},div:S(S({position:"relative",display:"block",minWidth:32,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimaryHover,transition:"color 0.3s"}},"a:not(".concat(r,`-btn),
            > .anticon`),{display:"inline-block",width:"100%",color:e.colorTextSecondary,lineHeight:"22px",transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),".anticon",{fontSize:e.cardActionIconSize,lineHeight:"22px"}),"&:not(:last-child)":{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}}))};function Ll(n){return We("ProCardActions",function(e){var t=i(i({},e),{},{componentCls:".".concat(n),cardActionIconSize:16});return[Bl(t)]})}var Al=function(e){var t=e.actions,r=e.prefixCls,a=Ll(r),s=a.wrapSSR,l=a.hashId;return Array.isArray(t)&&t!==null&&t!==void 0&&t.length?s(u.jsx("ul",{className:Se("".concat(r,"-actions"),l),children:t.map(function(o,c){return u.jsx("li",{style:{width:"".concat(100/t.length,"%"),padding:0,margin:0},className:Se("".concat(r,"-actions-item"),l),children:o},"action-".concat(c))})})):s(u.jsx("ul",{className:Se("".concat(r,"-actions"),l),children:t}))},Kl=new gr("card-loading",{"0%":{backgroundPosition:"0 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),$l=function(e){return S({},e.componentCls,S(S({"&-loading":{overflow:"hidden"},"&-loading &-body":{userSelect:"none"}},"".concat(e.componentCls,"-loading-content"),{width:"100%",p:{marginBlock:0,marginInline:0}}),"".concat(e.componentCls,"-loading-block"),{height:"14px",marginBlock:"4px",background:"linear-gradient(90deg, rgba(54, 61, 64, 0.2), rgba(54, 61, 64, 0.4), rgba(54, 61, 64, 0.2))",backgroundSize:"600% 600%",borderRadius:e.borderRadius,animationName:Kl,animationDuration:"1.4s",animationTimingFunction:"ease",animationIterationCount:"infinite"}))};function kl(n){return We("ProCardLoading",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[$l(t)]})}var Dl=function(e){var t=e.style,r=e.prefix,a=kl(r||"ant-pro-card"),s=a.wrapSSR;return s(u.jsxs("div",{className:"".concat(r,"-loading-content"),style:t,children:[u.jsx(rn,{gutter:8,children:u.jsx(Me,{span:22,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})}),u.jsxs(rn,{gutter:8,children:[u.jsx(Me,{span:8,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:15,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(rn,{gutter:8,children:[u.jsx(Me,{span:6,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:18,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(rn,{gutter:8,children:[u.jsx(Me,{span:13,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:9,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(rn,{gutter:8,children:[u.jsx(Me,{span:4,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:3,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:16,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]})]}))},_l=["tab","children"],Ol=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"];function zl(n){return n.filter(function(e){return e})}function Vl(n,e,t){if(n)return n.map(function(a){return i(i({},a),{},{children:u.jsx($n,i(i({},t==null?void 0:t.cardProps),{},{children:a.children}))})});dn(!t,"Tabs.TabPane is deprecated. Please use `items` directly.");var r=Lt(e).map(function(a){if(se.isValidElement(a)){var s=a.key,l=a.props,o=l||{},c=o.tab,d=o.children,v=we(o,_l),f=i(i({key:String(s)},v),{},{children:u.jsx($n,i(i({},t==null?void 0:t.cardProps),{},{children:d})),label:c});return f}return null});return zl(r)}var Wl=function(e){var t=h.useContext(Ae.ConfigContext),r=t.getPrefixCls;if(Yn.startsWith("5"))return u.jsx(u.Fragment,{});var a=e.key,s=e.tab,l=e.tabKey,o=e.disabled,c=e.destroyInactiveTabPane,d=e.children,v=e.className,f=e.style,y=e.cardProps,b=we(e,Ol),m=r("pro-card-tabpane"),x=Se(m,v);return u.jsx(En.TabPane,i(i({tabKey:l,tab:s,className:x,style:f,disabled:o,destroyInactiveTabPane:c},b),{},{children:u.jsx($n,i(i({},y),{},{children:d}))}),a)};var Yt=function(e){return{backgroundColor:e.controlItemBgActive,borderColor:e.controlOutline}},Hl=function(e){var t=e.componentCls;return S(S(S({},t,i(i({position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box",width:"100%",marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,backgroundColor:e.colorBgContainer,borderRadius:e.borderRadius,transition:"all 0.3s"},lt===null||lt===void 0?void 0:lt(e)),{},S(S(S(S(S(S(S(S(S(S({"&-box-shadow":{boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017",borderColor:"transparent"},"&-col":{width:"100%"},"&-border":{border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-hoverable":S({cursor:"pointer",transition:"box-shadow 0.3s, border-color 0.3s","&:hover":{borderColor:"transparent",boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017"}},"&".concat(t,"-checked:hover"),{borderColor:e.controlOutline}),"&-checked":i(i({},Yt(e)),{},{"&::after":{visibility:"visible",position:"absolute",insetBlockStart:2,insetInlineEnd:2,opacity:1,width:0,height:0,border:"6px solid ".concat(e.colorPrimary),borderBlockEnd:"6px solid transparent",borderInlineStart:"6px solid transparent",borderStartEndRadius:2,content:'""'}}),"&:focus":i({},Yt(e)),"&&-ghost":S({backgroundColor:"transparent"},"> ".concat(t),{"&-header":{paddingInlineEnd:0,paddingBlockEnd:e.padding,paddingInlineStart:0},"&-body":{paddingBlock:0,paddingInline:0,backgroundColor:"transparent"}}),"&&-split > &-body":{paddingBlock:0,paddingInline:0},"&&-contain-card > &-body":{display:"flex"}},"".concat(t,"-body-direction-column"),{flexDirection:"column"}),"".concat(t,"-body-wrap"),{flexWrap:"wrap"}),"&&-collapse",S({},"> ".concat(t),{"&-header":{paddingBlockEnd:e.padding,borderBlockEnd:0},"&-body":{display:"none"}})),"".concat(t,"-header"),{display:"flex",alignItems:"center",justifyContent:"space-between",paddingInline:e.paddingLG,paddingBlock:e.padding,paddingBlockEnd:0,"&-border":{"&":{paddingBlockEnd:e.padding},borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-collapsible":{cursor:"pointer"}}),"".concat(t,"-title"),{color:e.colorText,fontWeight:500,fontSize:e.fontSizeLG,lineHeight:e.lineHeight}),"".concat(t,"-extra"),{color:e.colorText}),"".concat(t,"-type-inner"),S({},"".concat(t,"-header"),{backgroundColor:e.colorFillAlter})),"".concat(t,"-collapsible-icon"),{marginInlineEnd:e.marginXS,color:e.colorIconHover,":hover":{color:e.colorPrimaryHover},"& svg":{transition:"transform ".concat(e.motionDurationMid)}}),"".concat(t,"-body"),{display:"block",boxSizing:"border-box",height:"100%",paddingInline:e.paddingLG,paddingBlock:e.padding,"&-center":{display:"flex",alignItems:"center",justifyContent:"center"}}),"&&-size-small",S(S({},t,{"&-header":{paddingInline:e.paddingSM,paddingBlock:e.paddingXS,paddingBlockEnd:0,"&-border":{paddingBlockEnd:e.paddingXS}},"&-title":{fontSize:e.fontSize},"&-body":{paddingInline:e.paddingSM,paddingBlock:e.paddingSM}}),"".concat(t,"-header").concat(t,"-header-collapsible"),{paddingBlock:e.paddingXS})))),"".concat(t,"-col"),S(S({},"&".concat(t,"-split-vertical"),{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),"&".concat(t,"-split-horizontal"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)})),"".concat(t,"-tabs"),S(S(S(S(S(S({},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:e.marginXS,paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-bottom > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-left"),S({},"".concat(e.antCls,"-tabs-content-holder"),S({},"".concat(e.antCls,"-tabs-content"),S({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-left > ").concat(e.antCls,"-tabs-nav"),S({marginInlineEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})),"".concat(e.antCls,"-tabs-right"),S({},"".concat(e.antCls,"-tabs-content-holder"),S({},"".concat(e.antCls,"-tabs-content"),S({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-right > ").concat(e.antCls,"-tabs-nav"),S({},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})))},Lr=24,Ul=function(e,t){var r=t.componentCls;return e===0?S({},"".concat(r,"-col-0"),{display:"none"}):S({},"".concat(r,"-col-").concat(e),{flexShrink:0,width:"".concat(e/Lr*100,"%")})},Gl=function(e){return Array(Lr+1).fill(1).map(function(t,r){return Ul(r,e)})};function ql(n){return We("ProCard",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Hl(t),Gl(t)]})}var Ql=["className","style","bodyStyle","headStyle","title","subTitle","extra","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","boxShadow","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","colStyle","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],$n=se.forwardRef(function(n,e){var t,r=n.className,a=n.style,s=n.bodyStyle,l=n.headStyle,o=n.title,c=n.subTitle,d=n.extra,v=n.wrap,f=v===void 0?!1:v,y=n.layout,b=n.loading,m=n.gutter,x=m===void 0?0:m,R=n.tooltip,g=n.split,p=n.headerBordered,C=p===void 0?!1:p,w=n.bordered,k=w===void 0?!1:w,z=n.boxShadow,M=z===void 0?!1:z,E=n.children,K=n.size,$=n.actions,T=n.ghost,N=T===void 0?!1:T,H=n.hoverable,L=H===void 0?!1:H,P=n.direction,O=n.collapsed,A=n.collapsible,q=A===void 0?!1:A,ee=n.collapsibleIconRender,_=n.colStyle,W=n.defaultCollapsed,U=W===void 0?!1:W,D=n.onCollapse,I=n.checked,j=n.onChecked,B=n.tabs,F=n.type,V=we(n,Ql),Y=h.useContext(Ae.ConfigContext),X=Y.getPrefixCls,J=xa()||{lg:!0,md:!0,sm:!0,xl:!1,xs:!1,xxl:!1},G=Ee(U,{value:O,onChange:D}),ce=ue(G,2),ne=ce[0],he=ce[1],ae=["xxl","xl","lg","md","sm","xs"],re=Vl(B==null?void 0:B.items,E,B),me=function(ye){var Pe=[0,0],nn=Array.isArray(ye)?ye:[ye,0];return nn.forEach(function(je,He){if(ze(je)==="object")for(var qe=0;qe<ae.length;qe+=1){var on=ae[qe];if(J[on]&&je[on]!==void 0){Pe[He]=je[on];break}}else Pe[He]=je||0}),Pe},de=function(ye,Pe){return ye?Pe:{}},Be=function(ye){var Pe=ye;if(ze(ye)==="object")for(var nn=0;nn<ae.length;nn+=1){var je=ae[nn];if(J!=null&&J[je]&&(ye==null?void 0:ye[je])!==void 0){Pe=ye[je];break}}var He=de(typeof Pe=="string"&&/\d%|\dpx/i.test(Pe),{width:Pe,flexShrink:0});return{span:Pe,colSpanStyle:He}},ie=X("pro-card"),vn=ql(ie),oe=vn.wrapSSR,Le=vn.hashId,mn=me(x),Bn=ue(mn,2),an=Bn[0],hn=Bn[1],xn=!1,Ln=se.Children.toArray(E),Te=Ln.map(function(Fe,ye){var Pe;if(Fe!=null&&(Pe=Fe.type)!==null&&Pe!==void 0&&Pe.isProCard){xn=!0;var nn=Fe.props.colSpan,je=Be(nn),He=je.span,qe=je.colSpanStyle,on=Se(["".concat(ie,"-col")],Le,S(S(S({},"".concat(ie,"-split-vertical"),g==="vertical"&&ye!==Ln.length-1),"".concat(ie,"-split-horizontal"),g==="horizontal"&&ye!==Ln.length-1),"".concat(ie,"-col-").concat(He),typeof He=="number"&&He>=0&&He<=24)),Vn=oe(u.jsx("div",{style:i(i(i(i({},qe),de(an>0,{paddingInlineEnd:an/2,paddingInlineStart:an/2})),de(hn>0,{paddingBlockStart:hn/2,paddingBlockEnd:hn/2})),_),className:on,children:se.cloneElement(Fe)}));return se.cloneElement(Vn,{key:"pro-card-col-".concat((Fe==null?void 0:Fe.key)||ye)})}return Fe}),On=Se("".concat(ie),r,Le,(t={},S(S(S(S(S(S(S(S(S(S(t,"".concat(ie,"-border"),k),"".concat(ie,"-box-shadow"),M),"".concat(ie,"-contain-card"),xn),"".concat(ie,"-loading"),b),"".concat(ie,"-split"),g==="vertical"||g==="horizontal"),"".concat(ie,"-ghost"),N),"".concat(ie,"-hoverable"),L),"".concat(ie,"-size-").concat(K),K),"".concat(ie,"-type-").concat(F),F),"".concat(ie,"-collapse"),ne),S(t,"".concat(ie,"-checked"),I))),pe=Se("".concat(ie,"-body"),Le,S(S(S({},"".concat(ie,"-body-center"),y==="center"),"".concat(ie,"-body-direction-column"),g==="horizontal"||P==="column"),"".concat(ie,"-body-wrap"),f&&xn)),zn=s,pn=se.isValidElement(b)?b:u.jsx(Dl,{prefix:ie,style:(s==null?void 0:s.padding)===0||(s==null?void 0:s.padding)==="0px"?{padding:24}:void 0}),ln=q&&O===void 0&&(ee?ee({collapsed:ne}):u.jsx(Ra,{rotate:ne?void 0:90,className:"".concat(ie,"-collapsible-icon ").concat(Le).trim()}));return oe(u.jsxs("div",i(i({className:On,style:a,ref:e,onClick:function(ye){var Pe;j==null||j(ye),V==null||(Pe=V.onClick)===null||Pe===void 0||Pe.call(V,ye)}},Ve(V,["prefixCls","colSpan"])),{},{children:[(o||d||ln)&&u.jsxs("div",{className:Se("".concat(ie,"-header"),Le,S(S({},"".concat(ie,"-header-border"),C||F==="inner"),"".concat(ie,"-header-collapsible"),ln)),style:l,onClick:function(){ln&&he(!ne)},children:[u.jsxs("div",{className:"".concat(ie,"-title ").concat(Le).trim(),children:[ln,u.jsx(jn,{label:o,tooltip:R,subTitle:c})]}),d&&u.jsx("div",{className:"".concat(ie,"-extra ").concat(Le).trim(),onClick:function(ye){return ye.stopPropagation()},children:d})]}),B?u.jsx("div",{className:"".concat(ie,"-tabs ").concat(Le).trim(),children:u.jsx(En,i(i({onChange:B.onChange},Ve(B,["cardProps"])),{},{items:re,children:b?pn:E}))}):u.jsx("div",{className:pe,style:zn,children:b?pn:Te}),$?u.jsx(Al,{actions:$,prefixCls:ie}):null]})))}),Xl=function(e){var t=e.componentCls;return S({},t,{"&-divider":{flex:"none",width:e.lineWidth,marginInline:e.marginXS,marginBlock:e.marginLG,backgroundColor:e.colorSplit,"&-horizontal":{width:"initial",height:e.lineWidth,marginInline:e.marginLG,marginBlock:e.marginXS}},"&&-size-small &-divider":{marginBlock:e.marginLG,marginInline:e.marginXS,"&-horizontal":{marginBlock:e.marginXS,marginInline:e.marginLG}}})};function Jl(n){return We("ProCardDivider",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Xl(t)]})}var Yl=function(e){var t=h.useContext(Ae.ConfigContext),r=t.getPrefixCls,a=r("pro-card"),s="".concat(a,"-divider"),l=Jl(a),o=l.wrapSSR,c=l.hashId,d=e.className,v=e.style,f=v===void 0?{}:v,y=e.type,b=Se(s,d,c,S({},"".concat(s,"-").concat(y),y));return o(u.jsx("div",{className:b,style:f}))},Zl=function(e){return u.jsx($n,i({bodyStyle:{padding:0}},e))},_n=$n;_n.isProCard=!0;_n.Divider=Yl;_n.TabPane=Wl;_n.Group=Zl;var eo=["children","value","valuePropName","onChange","fieldProps","space","type","transform","convertValue","lightProps"],no=["children","space","valuePropName"],to={space:Nn,group:yr.Group};function ro(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&n in e.target?e.target[n]:e}var ao=function(e){var t=e.children,r=e.value,a=r===void 0?[]:r,s=e.valuePropName,l=e.onChange,o=e.fieldProps,c=e.space,d=e.type,v=d===void 0?"space":d;e.transform,e.convertValue,e.lightProps;var f=we(e,eo),y=Re(function(w,k){var z,M=Oe(a);M[k]=ro(s||"value",w),l==null||l(M),o==null||(z=o.onChange)===null||z===void 0||z.call(o,M)}),b=-1,m=Lt(Ge(t,a,e)).map(function(w){if(se.isValidElement(w)){var k,z,M;b+=1;var E=b,K=(w==null||(k=w.type)===null||k===void 0?void 0:k.displayName)==="ProFormComponent"||(w==null||(z=w.props)===null||z===void 0?void 0:z.readonly),$=K?i(i({key:E,ignoreFormItem:!0},w.props||{}),{},{fieldProps:i(i({},w==null||(M=w.props)===null||M===void 0?void 0:M.fieldProps),{},{onChange:function(){y(arguments.length<=0?void 0:arguments[0],E)}}),value:a==null?void 0:a[E],onChange:void 0}):i(i({key:E},w.props||{}),{},{value:a==null?void 0:a[E],onChange:function(N){var H,L;y(N,E),(H=(L=w.props).onChange)===null||H===void 0||H.call(L,N)}});return se.cloneElement(w,$)}return w}),x=to[v],R=Va(f),g=R.RowWrapper,p=h.useMemo(function(){return i({},v==="group"?{compact:!0}:{})},[v]),C=h.useCallback(function(w){var k=w.children;return u.jsx(x,i(i(i({},p),c),{},{align:"start",wrap:!0,children:k}))},[x,c,p]);return u.jsx(g,{Wrapper:C,children:m})},lo=se.forwardRef(function(n,e){var t=n.children,r=n.space,a=n.valuePropName,s=we(n,no);return h.useImperativeHandle(e,function(){return{}}),u.jsx(ao,i(i(i({space:r,valuePropName:a},s.fieldProps),{},{onChange:void 0},s),{},{children:t}))}),oo=za(lo),io=function(e){return S({},e.componentCls,{lineHeight:"30px","&::before":{display:"block",height:0,visibility:"hidden",content:"'.'"},"&-small":{lineHeight:e.lineHeight},"&-container":{display:"flex",flexWrap:"wrap",gap:e.marginXS},"&-item":S({whiteSpace:"nowrap"},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"&-line":{minWidth:"198px"},"&-line:not(:first-child)":{marginBlockStart:"16px",marginBlockEnd:8},"&-collapse-icon":{width:e.controlHeight,height:e.controlHeight,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},"&-effective":S({},"".concat(e.componentCls,"-collapse-icon"),{backgroundColor:e.colorBgTextHover})})};function so(n){return We("LightFilter",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[io(t)]})}var uo=["size","collapse","collapseLabel","initialValues","onValuesChange","form","placement","formRef","bordered","ignoreRules","footerRender"],co=function(e){var t=e.items,r=e.prefixCls,a=e.size,s=a===void 0?"middle":a,l=e.collapse,o=e.collapseLabel,c=e.onValuesChange,d=e.bordered,v=e.values,f=e.footerRender,y=e.placement,b=De(),m="".concat(r,"-light-filter"),x=so(m),R=x.wrapSSR,g=x.hashId,p=h.useState(!1),C=ue(p,2),w=C[0],k=C[1],z=h.useState(function(){return i({},v)}),M=ue(z,2),E=M[0],K=M[1];h.useEffect(function(){K(i({},v))},[v]);var $=h.useMemo(function(){var L=[],P=[];return t.forEach(function(O){var A=O.props||{},q=A.secondary;q||l?L.push(O):P.push(O)}),{collapseItems:L,outsideItems:P}},[e.items]),T=$.collapseItems,N=$.outsideItems,H=function(){return o||(l?u.jsx(wa,{className:"".concat(m,"-collapse-icon ").concat(g).trim()}):u.jsx(Ha,{size:s,label:b.getMessage("form.lightFilter.more","更多筛选")}))};return R(u.jsx("div",{className:Se(m,g,"".concat(m,"-").concat(s),S({},"".concat(m,"-effective"),Object.keys(v).some(function(L){return Array.isArray(v[L])?v[L].length>0:v[L]}))),children:u.jsxs("div",{className:"".concat(m,"-container ").concat(g).trim(),children:[N.map(function(L,P){var O=L.key,A=L.props.fieldProps,q=A!=null&&A.placement?A==null?void 0:A.placement:y;return u.jsx("div",{className:"".concat(m,"-item ").concat(g).trim(),children:se.cloneElement(L,{fieldProps:i(i({},L.props.fieldProps),{},{placement:q}),proFieldProps:i(i({},L.props.proFieldProps),{},{light:!0,label:L.props.label,bordered:d}),bordered:d})},O||P)}),T.length?u.jsx("div",{className:"".concat(m,"-item ").concat(g).trim(),children:u.jsx(Wa,{padding:24,open:w,onOpenChange:function(P){k(P)},placement:y,label:H(),footerRender:f,footer:{onConfirm:function(){c(i({},E)),k(!1)},onClear:function(){var P={};T.forEach(function(O){var A=O.props.name;P[A]=void 0}),c(P)}},children:T.map(function(L){var P=L.key,O=L.props,A=O.name,q=O.fieldProps,ee=i(i({},q),{},{onChange:function(U){return K(i(i({},E),{},S({},A,U!=null&&U.target?U.target.value:U))),!1}});E.hasOwnProperty(A)&&(ee[L.props.valuePropName||"value"]=E[A]);var _=q!=null&&q.placement?q==null?void 0:q.placement:y;return u.jsx("div",{className:"".concat(m,"-line ").concat(g).trim(),children:se.cloneElement(L,{fieldProps:i(i({},ee),{},{placement:_})})},P)})})},"more"):null]})}))};function fo(n){var e=n.size,t=n.collapse,r=n.collapseLabel,a=n.initialValues,s=n.onValuesChange,l=n.form,o=n.placement,c=n.formRef,d=n.bordered;n.ignoreRules;var v=n.footerRender,f=we(n,uo),y=h.useContext(Ae.ConfigContext),b=y.getPrefixCls,m=b("pro-form"),x=h.useState(function(){return i({},a)}),R=ue(x,2),g=R[0],p=R[1],C=h.useRef();return h.useImperativeHandle(c,function(){return C.current},[C.current]),u.jsx(nt,i(i({size:e,initialValues:a,form:l,contentRender:function(k){return u.jsx(co,{prefixCls:m,items:k==null?void 0:k.flatMap(function(z){return(z==null?void 0:z.type.displayName)==="ProForm-Group"?z.props.children:z}),size:e,bordered:d,collapse:t,collapseLabel:r,placement:o,values:g||{},footerRender:v,onValuesChange:function(M){var E,K,$=i(i({},g),M);p($),(E=C.current)===null||E===void 0||E.setFieldsValue($),(K=C.current)===null||K===void 0||K.submit(),s&&s(M,$)}})},formRef:C,formItemProps:{colon:!1,labelAlign:"left"},fieldProps:{style:{width:void 0}}},Ve(f,["labelWidth"])),{},{onValuesChange:function(k,z){var M;p(z),s==null||s(k,z),(M=C.current)===null||M===void 0||M.submit()}}))}var vo=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function mo(n){var e,t,r=n.children,a=n.trigger,s=n.onVisibleChange,l=n.onOpenChange,o=n.modalProps,c=n.onFinish,d=n.submitTimeout,v=n.title,f=n.width,y=n.visible,b=n.open,m=we(n,vo);dn(!m.footer||!(o!=null&&o.footer),"ModalForm 是一个 ProForm 的特殊布局，如果想自定义按钮，请使用 submit.render 自定义。");var x=h.useContext(Ae.ConfigContext),R=h.useState([]),g=ue(R,2),p=g[1],C=h.useState(!1),w=ue(C,2),k=w[0],z=w[1],M=Ee(!!y,{value:b||y,onChange:l||s}),E=ue(M,2),K=E[0],$=E[1],T=h.useRef(null),N=h.useCallback(function(_){T.current===null&&_&&p([]),T.current=_},[]),H=h.useRef(),L=h.useCallback(function(){var _,W,U,D=(_=(W=m.form)!==null&&W!==void 0?W:(U=m.formRef)===null||U===void 0?void 0:U.current)!==null&&_!==void 0?_:H.current;D&&o!==null&&o!==void 0&&o.destroyOnClose&&D.resetFields()},[o==null?void 0:o.destroyOnClose,m.form,m.formRef]);h.useImperativeHandle(m.formRef,function(){return H.current},[H.current]),h.useEffect(function(){(b||y)&&(l==null||l(!0),s==null||s(!0))},[y,b]);var P=h.useMemo(function(){return a?se.cloneElement(a,i(i({key:"trigger"},a.props),{},{onClick:function(){var _=be(le().mark(function U(D){var I,j;return le().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:$(!K),(I=a.props)===null||I===void 0||(j=I.onClick)===null||j===void 0||j.call(I,D);case 2:case"end":return F.stop()}},U)}));function W(U){return _.apply(this,arguments)}return W}()})):null},[$,a,K]),O=h.useMemo(function(){var _,W,U,D,I,j;return m.submitter===!1?!1:pt({searchConfig:{submitText:(_=(W=o==null?void 0:o.okText)!==null&&W!==void 0?W:(U=x.locale)===null||U===void 0||(U=U.Modal)===null||U===void 0?void 0:U.okText)!==null&&_!==void 0?_:"确认",resetText:(D=(I=o==null?void 0:o.cancelText)!==null&&I!==void 0?I:(j=x.locale)===null||j===void 0||(j=j.Modal)===null||j===void 0?void 0:j.cancelText)!==null&&D!==void 0?D:"取消"},resetButtonProps:{preventDefault:!0,disabled:d?k:void 0,onClick:function(F){var V;$(!1),o==null||(V=o.onCancel)===null||V===void 0||V.call(o,F)}}},m.submitter)},[(e=x.locale)===null||e===void 0||(e=e.Modal)===null||e===void 0?void 0:e.cancelText,(t=x.locale)===null||t===void 0||(t=t.Modal)===null||t===void 0?void 0:t.okText,o,m.submitter,$,k,d]),A=h.useCallback(function(_,W){return u.jsxs(u.Fragment,{children:[_,T.current&&W?u.jsx(se.Fragment,{children:vt.createPortal(W,T.current)},"submitter"):W]})},[]),q=h.useCallback(function(){var _=be(le().mark(function W(U){var D,I,j;return le().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return D=c==null?void 0:c(U),d&&D instanceof Promise&&(z(!0),I=setTimeout(function(){return z(!1)},d),D.finally(function(){clearTimeout(I),z(!1)})),F.next=4,D;case 4:return j=F.sent,j&&$(!1),F.abrupt("return",j);case 7:case"end":return F.stop()}},W)}));return function(W){return _.apply(this,arguments)}}(),[c,$,d]),ee=Cr(K);return u.jsxs(u.Fragment,{children:[u.jsx(Ta,i(i(i({title:v,width:f||800},o),ee),{},{onCancel:function(W){var U;d&&k||($(!1),o==null||(U=o.onCancel)===null||U===void 0||U.call(o,W))},afterClose:function(){var W;L(),K&&$(!1),o==null||(W=o.afterClose)===null||W===void 0||W.call(o)},footer:m.submitter!==!1?u.jsx("div",{ref:N,style:{display:"flex",justifyContent:"flex-end"}}):null,children:u.jsx(nt,i(i({formComponentType:"ModalForm",layout:"vertical"},m),{},{onInit:function(W,U){var D;m.formRef&&(m.formRef.current=U),m==null||(D=m.onInit)===null||D===void 0||D.call(m,W,U),H.current=U},formRef:H,submitter:O,onFinish:function(){var _=be(le().mark(function W(U){var D;return le().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,q(U);case 2:return D=j.sent,j.abrupt("return",D);case 4:case"end":return j.stop()}},W)}));return function(W){return _.apply(this,arguments)}}(),contentRender:A,children:r}))})),P]})}var ho=function(e,t,r,a){return e?u.jsxs(u.Fragment,{children:[r.getMessage("tableForm.collapsed","展开"),a&&"(".concat(a,")"),u.jsx(mt,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]}):u.jsxs(u.Fragment,{children:[r.getMessage("tableForm.expand","收起"),u.jsx(mt,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]})},po=function(e){var t=e.setCollapsed,r=e.collapsed,a=r===void 0?!1:r,s=e.submitter,l=e.style,o=e.hiddenNum,c=h.useContext(Ae.ConfigContext),d=c.getPrefixCls,v=De(),f=h.useContext(Cn),y=f.hashId,b=Br(e.collapseRender)||ho;return u.jsxs(Nn,{style:l,size:16,children:[s,e.collapseRender!==!1&&u.jsx("a",{className:"".concat(d("pro-query-filter-collapse-button")," ").concat(y).trim(),onClick:function(){return t(!a)},children:b==null?void 0:b(a,e,v,o)})]})},go=function(e){return S({},e.componentCls,S(S(S(S({"&&":{padding:24}},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"".concat(e.proComponentsCls,"-form-group-title"),{marginBlock:0}),"&-row",{rowGap:24,"&-split":S(S({},"".concat(e.proComponentsCls,"-form-group"),{display:"flex",alignItems:"center",gap:e.marginXS}),"&:last-child",{marginBlockEnd:12}),"&-split-line":{"&:after":{position:"absolute",width:"100%",content:'""',height:1,insetBlockEnd:-12,borderBlockEnd:"1px dashed ".concat(e.colorSplit)}}}),"&-collapse-button",{display:"flex",alignItems:"center",color:e.colorPrimary}))};function yo(n){return We("QueryFilter",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[go(t)]})}var bo=["collapsed","layout","defaultCollapsed","defaultColsNumber","span","searchGutter","searchText","resetText","optionRender","collapseRender","onReset","onCollapse","labelWidth","style","split","preserve","ignoreRules","showHiddenNum","submitterColSpanProps"],Rn,So={xs:513,sm:513,md:785,lg:992,xl:1057,xxl:1/0},Zt={vertical:[[513,1,"vertical"],[785,2,"vertical"],[1057,3,"vertical"],[1/0,4,"vertical"]],default:[[513,1,"vertical"],[701,2,"vertical"],[1062,3,"horizontal"],[1352,3,"horizontal"],[1/0,4,"horizontal"]]},Co=function(e,t,r){if(r&&typeof r=="number")return{span:r,layout:e};var a=r?["xs","sm","md","lg","xl","xxl"].map(function(l){return[So[l],24/r[l],"horizontal"]}):Zt[e||"default"],s=(a||Zt.default).find(function(l){return t<l[0]+16});return s?{span:24/s[1],layout:s==null?void 0:s[2]}:{span:8,layout:"horizontal"}},xo=function(e,t){return e==null?void 0:e.flatMap(function(r){var a;if((r==null?void 0:r.type.displayName)==="ProForm-Group"&&!((a=r.props)!==null&&a!==void 0&&a.title))return r.props.children;if(t&&se.isValidElement(r)){var s;return se.cloneElement(r,i(i({},r.props),{},{formItemProps:i(i({},(s=r.props)===null||s===void 0?void 0:s.formItemProps),{},{rules:[]})}))}return r})},Ro=function(e){var t,r,a,s,l=De(),o=h.useContext(Cn),c=o.hashId,d=e.resetText||l.getMessage("tableForm.reset","重置"),v=e.searchText||l.getMessage("tableForm.search","搜索"),f=Ee(function(){return e.defaultCollapsed&&!!e.submitter},{value:e.collapsed,onChange:e.onCollapse}),y=ue(f,2),b=y[0],m=y[1],x=e.optionRender,R=e.collapseRender,g=e.split,p=e.items,C=e.spanSize,w=e.showLength,k=e.searchGutter,z=e.showHiddenNum,M=h.useMemo(function(){return!e.submitter||x===!1?null:se.cloneElement(e.submitter,i({searchConfig:{resetText:d,submitText:v},render:x&&function(_,W){return x(i(i({},e),{},{resetText:d,searchText:v}),e,W)}},e.submitter.props))},[e,d,v,x]),E=0,K=0,$=!1,T=0,N=0,H=xo(p,e.ignoreRules).map(function(_,W){var U,D,I,j,B=se.isValidElement(_)&&(U=_==null||(D=_.props)===null||D===void 0?void 0:D.colSize)!==null&&U!==void 0?U:1,F=Math.min(C.span*(B||1),24);if(E+=F,T+=B,W===0){var V;$=F===24&&!(_!=null&&(V=_.props)!==null&&V!==void 0&&V.hidden)}var Y=(_==null||(I=_.props)===null||I===void 0?void 0:I.hidden)||b&&($||T>w-1)&&!!W&&E>=24;K+=1;var X=se.isValidElement(_)&&(_.key||"".concat((j=_.props)===null||j===void 0?void 0:j.name))||W;return se.isValidElement(_)&&Y?e.preserve?{itemDom:se.cloneElement(_,{hidden:!0,key:X||W}),hidden:!0,colSpan:F}:{itemDom:null,colSpan:0,hidden:!0}:{itemDom:_,colSpan:F,hidden:!1}}),L=H.map(function(_,W){var U,D,I=_.itemDom,j=_.colSpan,B=I==null||(U=I.props)===null||U===void 0?void 0:U.hidden;if(B)return I;var F=se.isValidElement(I)&&(I.key||"".concat((D=I.props)===null||D===void 0?void 0:D.name))||W;return 24-N%24<j&&(E+=24-N%24,N+=24-N%24),N+=j,g&&N%24===0&&W<K-1?u.jsx(Me,{span:j,className:"".concat(e.baseClassName,"-row-split-line ").concat(e.baseClassName,"-row-split ").concat(c).trim(),children:I},F):u.jsx(Me,{className:"".concat(e.baseClassName,"-row-split ").concat(c).trim(),span:j,children:I},F)}),P=z&&H.filter(function(_){return _.hidden}).length,O=h.useMemo(function(){return!(E<24||T<=w)},[T,w,E]),A=h.useMemo(function(){var _,W,U=N%24+((_=(W=e.submitterColSpanProps)===null||W===void 0?void 0:W.span)!==null&&_!==void 0?_:C.span);if(U>24){var D,I;return 24-((D=(I=e.submitterColSpanProps)===null||I===void 0?void 0:I.span)!==null&&D!==void 0?D:C.span)}return 24-U},[N,N%24+((t=(r=e.submitterColSpanProps)===null||r===void 0?void 0:r.span)!==null&&t!==void 0?t:C.span),(a=e.submitterColSpanProps)===null||a===void 0?void 0:a.span]),q=h.useContext(Ae.ConfigContext),ee=q.getPrefixCls("pro-query-filter");return u.jsxs(rn,{gutter:k,justify:"start",className:Se("".concat(ee,"-row"),c),children:[L,M&&u.jsx(Me,i(i({span:C.span,offset:A,className:Se((s=e.submitterColSpanProps)===null||s===void 0?void 0:s.className)},e.submitterColSpanProps),{},{style:{textAlign:"end"},children:u.jsx(Ze.Item,{label:" ",colon:!1,shouldUpdate:!1,className:"".concat(ee,"-actions ").concat(c).trim(),children:u.jsx(po,{hiddenNum:P,collapsed:b,collapseRender:O?R:!1,submitter:M,setCollapsed:m},"pro-form-query-filter-actions")})}),"submitter")]},"resize-observer-row")},wo=vr()?(Rn=document)===null||Rn===void 0||(Rn=Rn.body)===null||Rn===void 0?void 0:Rn.clientWidth:1024;function To(n){var e=n.collapsed,t=n.layout,r=n.defaultCollapsed,a=r===void 0?!0:r,s=n.defaultColsNumber,l=n.span,o=n.searchGutter,c=o===void 0?24:o;n.searchText,n.resetText;var d=n.optionRender,v=n.collapseRender,f=n.onReset,y=n.onCollapse,b=n.labelWidth,m=b===void 0?"80":b,x=n.style,R=n.split,g=n.preserve,p=g===void 0?!0:g,C=n.ignoreRules,w=n.showHiddenNum,k=w===void 0?!1:w,z=n.submitterColSpanProps,M=we(n,bo),E=h.useContext(Ae.ConfigContext),K=E.getPrefixCls("pro-query-filter"),$=yo(K),T=$.wrapSSR,N=$.hashId,H=Ee(function(){return typeof(x==null?void 0:x.width)=="number"?x==null?void 0:x.width:wo}),L=ue(H,2),P=L[0],O=L[1],A=h.useMemo(function(){return Co(t,P+16,l)},[t,P,l]),q=h.useMemo(function(){return s!==void 0?s-1:Math.max(1,24/A.span-1)},[s,A.span]),ee=h.useMemo(function(){if(m&&A.layout!=="vertical"&&m!=="auto")return{labelCol:{flex:"0 0 ".concat(m,"px")},wrapperCol:{style:{maxWidth:"calc(100% - ".concat(m,"px)")}},style:{flexWrap:"nowrap"}}},[A.layout,m]);return T(u.jsx(br,{onResize:function(W){P!==W.width&&W.width>17&&O(W.width)},children:u.jsx(nt,i(i({isKeyPressSubmit:!0,preserve:p},M),{},{className:Se(K,N,M.className),onReset:f,style:x,layout:A.layout,fieldProps:{style:{width:"100%"}},formItemProps:ee,groupProps:{titleStyle:{display:"inline-block",marginInlineEnd:16}},contentRender:function(W,U,D){return u.jsx(Ro,{spanSize:A,collapsed:e,form:D,submitterColSpanProps:z,collapseRender:v,defaultCollapsed:a,onCollapse:y,optionRender:d,submitter:U,items:W,split:R,baseClassName:K,resetText:n.resetText,searchText:n.searchText,searchGutter:c,preserve:p,ignoreRules:C,showLength:q,showHiddenNum:k})}}))},"resize-observer"))}var Po=["onFinish","step","formRef","title","stepProps"];function Io(n){var e=h.useRef(),t=h.useContext(Ar),r=h.useContext(Kr),a=i(i({},n),r),s=a.onFinish,l=a.step,o=a.formRef;a.title,a.stepProps;var c=we(a,Po);return dn(!c.submitter,"StepForm 不包含提交按钮，请在 StepsForm 上"),h.useImperativeHandle(o,function(){return e.current},[o==null?void 0:o.current]),h.useEffect(function(){if(a.name||a.step){var d=(a.name||a.step).toString();return t==null||t.regForm(d,a),function(){t==null||t.unRegForm(d)}}},[]),t&&t!==null&&t!==void 0&&t.formArrayRef&&(t.formArrayRef.current[l||0]=e),u.jsx(nt,i({formRef:e,onFinish:function(){var d=be(le().mark(function v(f){var y;return le().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c.name&&(t==null||t.onFormFinish(c.name,f)),!s){m.next=9;break}return t==null||t.setLoading(!0),m.next=5,s==null?void 0:s(f);case 5:return y=m.sent,y&&(t==null||t.next()),t==null||t.setLoading(!1),m.abrupt("return");case 9:t!=null&&t.lastStep||t==null||t.next();case 10:case"end":return m.stop()}},v)}));return function(v){return d.apply(this,arguments)}}(),onInit:function(v,f){var y;e.current=f,t&&t!==null&&t!==void 0&&t.formArrayRef&&(t.formArrayRef.current[l||0]=e),c==null||(y=c.onInit)===null||y===void 0||y.call(c,v,f)},layout:"vertical"},Ve(c,["layoutType","columns"])))}var Fo=function(e){return S({},e.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":S({maxWidth:"1160px",margin:"auto"},"".concat(e.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}})};function Eo(n){return We("StepsForm",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Fo(t)]})}var jo=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],Ar=se.createContext(void 0),No={horizontal:function(e){var t=e.stepsDom,r=e.formDom;return u.jsxs(u.Fragment,{children:[u.jsx(rn,{gutter:{xs:8,sm:16,md:24},children:u.jsx(Me,{span:24,children:t})}),u.jsx(rn,{gutter:{xs:8,sm:16,md:24},children:u.jsx(Me,{span:24,children:r})})]})},vertical:function(e){var t=e.stepsDom,r=e.formDom;return u.jsxs(rn,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[u.jsx(Me,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:se.cloneElement(t,{style:{height:"100%"}})}),u.jsx(Me,{children:u.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:r})})]})}},Kr=se.createContext(null);function Mo(n){var e=h.useContext(Ae.ConfigContext),t=e.getPrefixCls,r=t("pro-steps-form"),a=Eo(r),s=a.wrapSSR,l=a.hashId;n.current,n.onCurrentChange;var o=n.submitter,c=n.stepsFormRender,d=n.stepsRender,v=n.stepFormRender,f=n.stepsProps,y=n.onFinish,b=n.formProps,m=n.containerStyle,x=n.formRef,R=n.formMapRef,g=n.layoutRender,p=we(n,jo),C=h.useRef(new Map),w=h.useRef(new Map),k=h.useRef([]),z=h.useState([]),M=ue(z,2),E=M[0],K=M[1],$=h.useState(!1),T=ue($,2),N=T[0],H=T[1],L=De(),P=Ee(0,{value:n.current,onChange:n.onCurrentChange}),O=ue(P,2),A=O[0],q=O[1],ee=h.useMemo(function(){return No[(f==null?void 0:f.direction)||"horizontal"]},[f==null?void 0:f.direction]),_=h.useMemo(function(){return A===E.length-1},[E.length,A]),W=h.useCallback(function(ae,re){w.current.has(ae)||K(function(me){return[].concat(Oe(me),[ae])}),w.current.set(ae,re)},[]),U=h.useCallback(function(ae){K(function(re){return re.filter(function(me){return me!==ae})}),w.current.delete(ae),C.current.delete(ae)},[]);h.useImperativeHandle(R,function(){return k.current},[k.current]),h.useImperativeHandle(x,function(){var ae;return(ae=k.current[A||0])===null||ae===void 0?void 0:ae.current},[A,k.current]);var D=h.useCallback(function(){var ae=be(le().mark(function re(me,de){var Be,ie;return le().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(C.current.set(me,de),!(!_||!y)){oe.next=3;break}return oe.abrupt("return");case 3:return H(!0),Be=Tr.apply(void 0,[{}].concat(Oe(Array.from(C.current.values())))),oe.prev=5,oe.next=8,y(Be);case 8:ie=oe.sent,ie&&(q(0),k.current.forEach(function(Le){var mn;return(mn=Le.current)===null||mn===void 0?void 0:mn.resetFields()})),oe.next=15;break;case 12:oe.prev=12,oe.t0=oe.catch(5),console.log(oe.t0);case 15:return oe.prev=15,H(!1),oe.finish(15);case 18:case"end":return oe.stop()}},re,null,[[5,12,15,18]])}));return function(re,me){return ae.apply(this,arguments)}}(),[_,y,H,q]),I=h.useMemo(function(){var ae=et(Yn,"4.24.0")>-1,re=ae?{items:E.map(function(me){var de=w.current.get(me);return i({key:me,title:de==null?void 0:de.title},de==null?void 0:de.stepProps)})}:{};return u.jsx("div",{className:"".concat(r,"-steps-container ").concat(l).trim(),style:{maxWidth:Math.min(E.length*320,1160)},children:u.jsx(qt,i(i(i({},f),re),{},{current:A,onChange:void 0,children:!ae&&E.map(function(me){var de=w.current.get(me);return u.jsx(qt.Step,i({title:de==null?void 0:de.title},de==null?void 0:de.stepProps),me)})}))})},[E,l,r,A,f]),j=Re(function(){var ae,re=k.current[A];(ae=re.current)===null||ae===void 0||ae.submit()}),B=Re(function(){A<1||q(A-1)}),F=h.useMemo(function(){return o!==!1&&u.jsx(Un,i(i({type:"primary",loading:N},o==null?void 0:o.submitButtonProps),{},{onClick:function(){var re;o==null||(re=o.onSubmit)===null||re===void 0||re.call(o),j()},children:L.getMessage("stepsForm.next","下一步")}),"next")},[L,N,j,o]),V=h.useMemo(function(){return o!==!1&&u.jsx(Un,i(i({},o==null?void 0:o.resetButtonProps),{},{onClick:function(){var re;B(),o==null||(re=o.onReset)===null||re===void 0||re.call(o)},children:L.getMessage("stepsForm.prev","上一步")}),"pre")},[L,B,o]),Y=h.useMemo(function(){return o!==!1&&u.jsx(Un,i(i({type:"primary",loading:N},o==null?void 0:o.submitButtonProps),{},{onClick:function(){var re;o==null||(re=o.onSubmit)===null||re===void 0||re.call(o),j()},children:L.getMessage("stepsForm.submit","提交")}),"submit")},[L,N,j,o]),X=Re(function(){A>E.length-2||q(A+1)}),J=h.useMemo(function(){var ae=[],re=A||0;if(re<1?E.length===1?ae.push(Y):ae.push(F):re+1===E.length?ae.push(V,Y):ae.push(V,F),ae=ae.filter(se.isValidElement),o&&o.render){var me,de={form:(me=k.current[A])===null||me===void 0?void 0:me.current,onSubmit:j,step:A,onPre:B};return o.render(de,ae)}return o&&(o==null?void 0:o.render)===!1?null:ae},[E.length,F,j,V,B,A,Y,o]),G=h.useMemo(function(){return Lt(n.children).map(function(ae,re){var me=ae.props,de=me.name||"".concat(re),Be=A===re,ie=Be?{contentRender:v,submitter:!1}:{};return u.jsx("div",{className:Se("".concat(r,"-step"),l,S({},"".concat(r,"-step-active"),Be)),children:u.jsx(Kr.Provider,{value:i(i(i(i({},ie),b),me),{},{name:de,step:re}),children:ae})},de)})},[b,l,r,n.children,A,v]),ce=h.useMemo(function(){return d?d(E.map(function(ae){var re;return{key:ae,title:(re=w.current.get(ae))===null||re===void 0?void 0:re.title}}),I):I},[E,I,d]),ne=h.useMemo(function(){return u.jsxs("div",{className:"".concat(r,"-container ").concat(l).trim(),style:m,children:[G,c?null:u.jsx(Nn,{children:J})]})},[m,G,l,r,c,J]),he=h.useMemo(function(){var ae={stepsDom:ce,formDom:ne};return c?c(g?g(ae):ee(ae),J):g?g(ae):ee(ae)},[ce,ne,ee,c,J,g]);return s(u.jsx("div",{className:Se(r,l),children:u.jsx(Ze.Provider,i(i({},p),{},{children:u.jsx(Ar.Provider,{value:{loading:N,setLoading:H,regForm:W,keyArray:E,next:X,formArrayRef:k,formMapRef:w,lastStep:_,unRegForm:U,onFormFinish:D},children:he})}))}))}function tt(n){return u.jsx(Pr,{needDeps:!0,children:u.jsx(Mo,i({},n))})}tt.StepForm=Io;tt.useForm=Ze.useForm;var Bo=function(e){var t=e.children;return u.jsx(u.Fragment,{children:t})},Lo=["steps","columns","forceUpdate","grid"],Ao=function(e){var t=e.steps,r=e.columns,a=e.forceUpdate,s=e.grid,l=we(e,Lo),o=Er(l),c=h.useCallback(function(v){var f,y;(f=(y=o.current).onCurrentChange)===null||f===void 0||f.call(y,v),a([])},[a,o]),d=h.useMemo(function(){return t==null?void 0:t.map(function(v,f){return h.createElement($r,i(i({grid:s},v),{},{key:f,layoutType:"StepForm",columns:r[f]}))})},[r,s,t]);return u.jsx(tt,i(i({},l),{},{onCurrentChange:c,children:d}))},Ko=function(e,t){if(e.valueType==="dependency"){var r,a,s,l=(r=e.getFieldProps)===null||r===void 0?void 0:r.call(e);return dn(Array.isArray((a=e.name)!==null&&a!==void 0?a:l==null?void 0:l.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),dn(typeof e.columns=="function",'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray((s=e.name)!==null&&s!==void 0?s:l==null?void 0:l.name)?h.createElement(Ir,i(i({name:e.name},l),{},{key:e.key}),function(o){return!e.columns||typeof e.columns!="function"?null:t.genItems(e.columns(o))}):null}return!0},$o=function(e){if(e.valueType==="divider"){var t;return h.createElement(Pa,i(i({},(t=e.getFieldProps)===null||t===void 0?void 0:t.call(e)),{},{key:e.key}))}return!0},ko=function(e,t){var r=t.action,a=t.formRef,s=t.type,l=t.originItem,o=i(i({},Ve(e,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:e.name||e.key||e.dataIndex,width:e.width,render:e!=null&&e.render?function(f,y,b){var m,x,R,g;return e==null||(m=e.render)===null||m===void 0?void 0:m.call(e,f,y,b,r==null?void 0:r.current,i(i({type:s},e),{},{key:(x=e.key)===null||x===void 0?void 0:x.toString(),formItemProps:(R=e.getFormItemProps)===null||R===void 0?void 0:R.call(e),fieldProps:(g=e.getFieldProps)===null||g===void 0?void 0:g.call(e)}))}:void 0}),c=function(){return u.jsx(Xn,i(i({},o),{},{ignoreFormItem:!0}))},d=e!=null&&e.renderFormItem?function(f,y){var b,m,x,R,g=Ye(i(i({},y),{},{onChange:void 0}));return e==null||(b=e.renderFormItem)===null||b===void 0?void 0:b.call(e,i(i({type:s},e),{},{key:(m=e.key)===null||m===void 0?void 0:m.toString(),formItemProps:(x=e.getFormItemProps)===null||x===void 0?void 0:x.call(e),fieldProps:(R=e.getFieldProps)===null||R===void 0?void 0:R.call(e),originProps:l}),i(i({},g),{},{defaultRender:c,type:s}),a.current)}:void 0,v=function(){if(e!=null&&e.renderFormItem){var y=d==null?void 0:d(null,{});if(!y||e.ignoreFormItem)return y}return h.createElement(Xn,i(i({},o),{},{key:[e.key,e.index||0].join("-"),renderFormItem:d}))};return e.dependencies?u.jsx(Ir,{name:e.dependencies||[],children:v},e.key):v()},Do=function(e,t){var r=t.genItems;if(e.valueType==="formList"&&e.dataIndex){var a,s;return!e.columns||!Array.isArray(e.columns)?null:h.createElement(Ua,i(i({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,name:e.dataIndex,label:e.label,initialValue:e.initialValue,colProps:e.colProps,rowProps:e.rowProps},(s=e.getFieldProps)===null||s===void 0?void 0:s.call(e)),r(e.columns))}return!0},_o=function(e,t){var r=t.genItems;if(e.valueType==="formSet"&&e.dataIndex){var a,s;return!e.columns||!Array.isArray(e.columns)?null:h.createElement(oo,i(i({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,initialValue:e.initialValue,name:e.dataIndex,label:e.label,colProps:e.colProps,rowProps:e.rowProps},(s=e.getFieldProps)===null||s===void 0?void 0:s.call(e)),r(e.columns))}return!0},Oo=function(e,t){var r=t.genItems;if(e.valueType==="group"){var a;return!e.columns||!Array.isArray(e.columns)?null:u.jsx(Da,i(i({label:e.label,colProps:e.colProps,rowProps:e.rowProps},(a=e.getFieldProps)===null||a===void 0?void 0:a.call(e)),{},{children:r(e.columns)}),e.key)}return!0},zo=function(e){return e.valueType&&typeof e.valueType=="string"&&["index","indexBorder","option"].includes(e==null?void 0:e.valueType)?null:!0},er=[zo,Oo,Do,_o,$o,Ko],Vo=function(e,t){for(var r=0;r<er.length;r++){var a=er[r],s=a(e,t);if(s!==!0)return s}return ko(e,t)},Wo=["columns","layoutType","type","action","shouldUpdate","formRef"],Ho={DrawerForm:ia,QueryFilter:To,LightFilter:fo,StepForm:tt.StepForm,StepsForm:Ao,ModalForm:mo,Embed:Bo,Form:Zn};function $r(n){var e=n.columns,t=n.layoutType,r=t===void 0?"Form":t,a=n.type,s=a===void 0?"form":a,l=n.action,o=n.shouldUpdate,c=o===void 0?function(L,P){return wn(L)!==wn(P)}:o,d=n.formRef,v=we(n,Wo),f=Ho[r]||Zn,y=Ze.useForm(),b=ue(y,1),m=b[0],x=Ze.useFormInstance(),R=h.useState([]),g=ue(R,2),p=g[1],C=h.useState(function(){return[]}),w=ue(C,2),k=w[0],z=w[1],M=Rl(n.form||x||m),E=h.useRef(),K=Er(n),$=Re(function(L){return L.filter(function(P){return!(P.hideInForm&&s==="form")}).sort(function(P,O){return O.order||P.order?(O.order||0)-(P.order||0):(O.index||0)-(P.index||0)}).map(function(P,O){var A=Ge(P.title,P,"form",u.jsx(jn,{label:P.title,tooltip:P.tooltip||P.tip})),q=Ye({title:A,label:A,name:P.name,valueType:Ge(P.valueType,{}),key:P.key||P.dataIndex||O,columns:P.columns,valueEnum:P.valueEnum,dataIndex:P.dataIndex||P.key,initialValue:P.initialValue,width:P.width,index:P.index,readonly:P.readonly,colSize:P.colSize,colProps:P.colProps,rowProps:P.rowProps,className:P.className,tooltip:P.tooltip||P.tip,dependencies:P.dependencies,proFieldProps:P.proFieldProps,ignoreFormItem:P.ignoreFormItem,getFieldProps:P.fieldProps?function(){return Ge(P.fieldProps,M.current,P)}:void 0,getFormItemProps:P.formItemProps?function(){return Ge(P.formItemProps,M.current,P)}:void 0,render:P.render,renderFormItem:P.renderFormItem,renderText:P.renderText,request:P.request,params:P.params,transform:P.transform,convertValue:P.convertValue,debounceTime:P.debounceTime,defaultKeyWords:P.defaultKeyWords});return Vo(q,{action:l,type:s,originItem:P,formRef:M,genItems:$})}).filter(function(P){return!!P})}),T=h.useCallback(function(L,P){var O=K.current.onValuesChange;(c===!0||typeof c=="function"&&c(P,E.current))&&z([]),E.current=P,O==null||O(L,P)},[K,c]),N=Qt(function(){if(M.current&&!(e.length&&Array.isArray(e[0])))return $(e)},[e,v==null?void 0:v.open,l,s,k,!!M.current]),H=Qt(function(){return r==="StepsForm"?{forceUpdate:p,columns:e}:{}},[e,r]);return h.useImperativeHandle(d,function(){return M.current},[M.current]),u.jsx(f,i(i(i({},H),v),{},{onInit:function(P,O){var A;d&&(d.current=O),v==null||(A=v.onInit)===null||A===void 0||A.call(v,P,O),M.current=O},form:n.form||m,formRef:M,onValuesChange:T,children:N}))}var Uo="[object Map]",Go="[object Set]",qo=Object.prototype,Qo=qo.hasOwnProperty;function Xo(n){if(n==null)return!0;if(Ja(n)&&(gt(n)||typeof n=="string"||typeof n.splice=="function"||yt(n)||jr(n)||Ya(n)))return!n.length;var e=bt(n);if(e==Uo||e==Go)return!n.size;if(Za(n))return!el(n).length;for(var t in n)if(Qo.call(n,t))return!1;return!0}var Jo="__lodash_hash_undefined__";function Yo(n){return this.__data__.set(n,Jo),this}function Zo(n){return this.__data__.has(n)}function Jn(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new nl;++e<t;)this.add(n[e])}Jn.prototype.add=Jn.prototype.push=Yo;Jn.prototype.has=Zo;function ei(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function ni(n,e){return n.has(e)}var ti=1,ri=2;function kr(n,e,t,r,a,s){var l=t&ti,o=n.length,c=e.length;if(o!=c&&!(l&&c>o))return!1;var d=s.get(n),v=s.get(e);if(d&&v)return d==e&&v==n;var f=-1,y=!0,b=t&ri?new Jn:void 0;for(s.set(n,e),s.set(e,n);++f<o;){var m=n[f],x=e[f];if(r)var R=l?r(x,m,f,e,n,s):r(m,x,f,n,e,s);if(R!==void 0){if(R)continue;y=!1;break}if(b){if(!ei(e,function(g,p){if(!ni(b,p)&&(m===g||a(m,g,t,r,s)))return b.push(p)})){y=!1;break}}else if(!(m===x||a(m,x,t,r,s))){y=!1;break}}return s.delete(n),s.delete(e),y}function ai(n){var e=-1,t=Array(n.size);return n.forEach(function(r,a){t[++e]=[a,r]}),t}function li(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var oi=1,ii=2,si="[object Boolean]",ui="[object Date]",ci="[object Error]",di="[object Map]",fi="[object Number]",vi="[object RegExp]",mi="[object Set]",hi="[object String]",pi="[object Symbol]",gi="[object ArrayBuffer]",yi="[object DataView]",nr=Ot?Ot.prototype:void 0,st=nr?nr.valueOf:void 0;function bi(n,e,t,r,a,s,l){switch(t){case yi:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case gi:return!(n.byteLength!=e.byteLength||!s(new Xt(n),new Xt(e)));case si:case ui:case fi:return tl(+n,+e);case ci:return n.name==e.name&&n.message==e.message;case vi:case hi:return n==e+"";case di:var o=ai;case mi:var c=r&oi;if(o||(o=li),n.size!=e.size&&!c)return!1;var d=l.get(n);if(d)return d==e;r|=ii,l.set(n,e);var v=kr(o(n),o(e),r,a,s,l);return l.delete(n),v;case pi:if(st)return st.call(n)==st.call(e)}return!1}var Si=1,Ci=Object.prototype,xi=Ci.hasOwnProperty;function Ri(n,e,t,r,a,s){var l=t&Si,o=Jt(n),c=o.length,d=Jt(e),v=d.length;if(c!=v&&!l)return!1;for(var f=c;f--;){var y=o[f];if(!(l?y in e:xi.call(e,y)))return!1}var b=s.get(n),m=s.get(e);if(b&&m)return b==e&&m==n;var x=!0;s.set(n,e),s.set(e,n);for(var R=l;++f<c;){y=o[f];var g=n[y],p=e[y];if(r)var C=l?r(p,g,y,e,n,s):r(g,p,y,n,e,s);if(!(C===void 0?g===p||a(g,p,t,r,s):C)){x=!1;break}R||(R=y=="constructor")}if(x&&!R){var w=n.constructor,k=e.constructor;w!=k&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof k=="function"&&k instanceof k)&&(x=!1)}return s.delete(n),s.delete(e),x}var wi=1,tr="[object Arguments]",rr="[object Array]",Wn="[object Object]",Ti=Object.prototype,ar=Ti.hasOwnProperty;function Pi(n,e,t,r,a,s){var l=gt(n),o=gt(e),c=l?rr:bt(n),d=o?rr:bt(e);c=c==tr?Wn:c,d=d==tr?Wn:d;var v=c==Wn,f=d==Wn,y=c==d;if(y&&yt(n)){if(!yt(e))return!1;l=!0,v=!1}if(y&&!v)return s||(s=new ot),l||jr(n)?kr(n,e,t,r,a,s):bi(n,e,c,t,r,a,s);if(!(t&wi)){var b=v&&ar.call(n,"__wrapped__"),m=f&&ar.call(e,"__wrapped__");if(b||m){var x=b?n.value():n,R=m?e.value():e;return s||(s=new ot),a(x,R,t,r,s)}}return y?(s||(s=new ot),Ri(n,e,t,r,a,s)):!1}function Dr(n,e,t,r,a){return n===e?!0:n==null||e==null||!zt(n)&&!zt(e)?n!==n&&e!==e:Pi(n,e,t,r,Dr,a)}function Ii(n,e){return Dr(n,e)}function Fi(n,e,t){var r,a;if(n===!1)return!1;var s=e.total,l=e.current,o=e.pageSize,c=e.setPageInfo,d=ze(n)==="object"?n:{};return i(i({showTotal:function(f,y){return"".concat(t.getMessage("pagination.total.range","第")," ").concat(y[0],"-").concat(y[1]," ").concat(t.getMessage("pagination.total.total","条/总共")," ").concat(f," ").concat(t.getMessage("pagination.total.item","条"))},total:s},d),{},{current:n!==!0&&n&&(r=n.current)!==null&&r!==void 0?r:l,pageSize:n!==!0&&n&&(a=n.pageSize)!==null&&a!==void 0?a:o,onChange:function(f,y){var b=n,m=b.onChange;m==null||m(f,y||20),(y!==o||l!==f)&&c({pageSize:y,current:f})}})}function Ei(n,e,t){var r=i(i({},t.editableUtils),{},{pageInfo:e.pageInfo,reload:function(){var a=be(le().mark(function l(o){return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!o){d.next=3;break}return d.next=3,e.setPageInfo({current:1});case 3:return d.next=5,e==null?void 0:e.reload();case 5:case"end":return d.stop()}},l)}));function s(l){return a.apply(this,arguments)}return s}(),reloadAndRest:function(){var a=be(le().mark(function l(){return le().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t.onCleanSelected(),c.next=3,e.setPageInfo({current:1});case 3:return c.next=5,e==null?void 0:e.reload();case 5:case"end":return c.stop()}},l)}));function s(){return a.apply(this,arguments)}return s}(),reset:function(){var a=be(le().mark(function l(){var o;return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.resetAll();case 2:return d.next=4,e==null||(o=e.reset)===null||o===void 0?void 0:o.call(e);case 4:return d.next=6,e==null?void 0:e.reload();case 6:case"end":return d.stop()}},l)}));function s(){return a.apply(this,arguments)}return s}(),fullScreen:function(){return t.fullScreen()},clearSelected:function(){return t.onCleanSelected()},setPageInfo:function(s){return e.setPageInfo(s)}});n.current=r}function ji(n,e){return e.filter(function(t){return t}).length<1?n:e.reduce(function(t,r){return r(t)},n)}var _r=function(e,t){return t===void 0?!1:typeof t=="boolean"?t:t[e]},Ni=function(e){var t;return e&&ze(e)==="object"&&(e==null||(t=e.props)===null||t===void 0?void 0:t.colSpan)},Mn=function(e,t){return e?Array.isArray(e)?e.join("-"):e.toString():"".concat(t)};function Mi(n){return Array.isArray(n)?n.join(","):n==null?void 0:n.toString()}function Bi(n){var e={},t={};return n.forEach(function(r){var a=Mi(r.dataIndex);if(a){if(r.filters){var s=r.defaultFilteredValue;s===void 0?e[a]=null:e[a]=r.defaultFilteredValue}r.sorter&&r.defaultSortOrder&&(t[a]=r.defaultSortOrder)}}),{sort:t,filter:e}}function Li(){var n,e,t,r,a,s,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=h.useRef(),c=h.useRef(null),d=h.useRef(),v=h.useRef(),f=h.useState(""),y=ue(f,2),b=y[0],m=y[1],x=h.useRef([]),R=Ee(function(){return l.size||l.defaultSize||"middle"},{value:l.size,onChange:l.onSizeChange}),g=ue(R,2),p=g[0],C=g[1],w=h.useMemo(function(){var T,N;if(l!=null&&(T=l.columnsState)!==null&&T!==void 0&&T.defaultValue)return l.columnsState.defaultValue;var H={};return(N=l.columns)===null||N===void 0||N.forEach(function(L,P){var O=L.key,A=L.dataIndex,q=L.fixed,ee=L.disable,_=Mn(O??A,P);_&&(H[_]={show:!0,fixed:q,disable:ee})}),H},[l.columns]),k=Ee(function(){var T,N,H=l.columnsState||{},L=H.persistenceType,P=H.persistenceKey;if(P&&L&&typeof window<"u"){var O=window[L];try{var A=O==null?void 0:O.getItem(P);if(A){var q;if(l!=null&&(q=l.columnsState)!==null&&q!==void 0&&q.defaultValue){var ee;return pt({},l==null||(ee=l.columnsState)===null||ee===void 0?void 0:ee.defaultValue,JSON.parse(A))}return JSON.parse(A)}}catch(_){console.warn(_)}}return l.columnsStateMap||((T=l.columnsState)===null||T===void 0?void 0:T.value)||((N=l.columnsState)===null||N===void 0?void 0:N.defaultValue)||w},{value:((n=l.columnsState)===null||n===void 0?void 0:n.value)||l.columnsStateMap,onChange:((e=l.columnsState)===null||e===void 0?void 0:e.onChange)||l.onColumnsStateChange}),z=ue(k,2),M=z[0],E=z[1];h.useEffect(function(){var T=l.columnsState||{},N=T.persistenceType,H=T.persistenceKey;if(H&&N&&typeof window<"u"){var L=window[N];try{var P=L==null?void 0:L.getItem(H);if(P){var O;if(l!=null&&(O=l.columnsState)!==null&&O!==void 0&&O.defaultValue){var A;E(pt({},l==null||(A=l.columnsState)===null||A===void 0?void 0:A.defaultValue,JSON.parse(P)))}else E(JSON.parse(P))}else E(w)}catch(q){console.warn(q)}}},[(t=l.columnsState)===null||t===void 0?void 0:t.persistenceKey,(r=l.columnsState)===null||r===void 0?void 0:r.persistenceType,w]),dn(!l.columnsStateMap,"columnsStateMap已经废弃，请使用 columnsState.value 替换"),dn(!l.columnsStateMap,"columnsStateMap has been discarded, please use columnsState.value replacement");var K=h.useCallback(function(){var T=l.columnsState||{},N=T.persistenceType,H=T.persistenceKey;if(!(!H||!N||typeof window>"u")){var L=window[N];try{L==null||L.removeItem(H)}catch(P){console.warn(P)}}},[l.columnsState]);h.useEffect(function(){var T,N;if(!(!((T=l.columnsState)!==null&&T!==void 0&&T.persistenceKey)||!((N=l.columnsState)!==null&&N!==void 0&&N.persistenceType))&&!(typeof window>"u")){var H=l.columnsState,L=H.persistenceType,P=H.persistenceKey,O=window[L];try{O==null||O.setItem(P,JSON.stringify(M))}catch(A){console.warn(A),K()}}},[(a=l.columnsState)===null||a===void 0?void 0:a.persistenceKey,M,(s=l.columnsState)===null||s===void 0?void 0:s.persistenceType]);var $={action:o.current,setAction:function(N){o.current=N},sortKeyColumns:x.current,setSortKeyColumns:function(N){x.current=N},propsRef:v,columnsMap:M,keyWords:b,setKeyWords:function(N){return m(N)},setTableSize:C,tableSize:p,prefixName:d.current,setPrefixName:function(N){d.current=N},setColumnsMap:E,columns:l.columns,rootDomRef:c,clearPersistenceStorage:K,defaultColumnKeyMap:w};return Object.defineProperty($,"prefixName",{get:function(){return d.current}}),Object.defineProperty($,"sortKeyColumns",{get:function(){return x.current}}),Object.defineProperty($,"action",{get:function(){return o.current}}),$}var fn=h.createContext({}),Ai=function(e){var t=Li(e.initValue);return u.jsx(fn.Provider,{value:t,children:e.children})},Ki=function(e){return S({},e.componentCls,{marginBlockEnd:16,backgroundColor:Ga(e.colorTextBase,.02),borderRadius:e.borderRadius,border:"none","&-container":{paddingBlock:e.paddingSM,paddingInline:e.paddingLG},"&-info":{display:"flex",alignItems:"center",transition:"all 0.3s",color:e.colorTextTertiary,"&-content":{flex:1},"&-option":{minWidth:48,paddingInlineStart:16}}})};function $i(n){return We("ProTableAlert",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Ki(t)]})}var ki=function(e){var t=e.intl,r=e.onCleanSelected;return[u.jsx("a",{onClick:r,children:t.getMessage("alert.clear","清空")},"0")]};function Di(n){var e=n.selectedRowKeys,t=e===void 0?[]:e,r=n.onCleanSelected,a=n.alwaysShowAlert,s=n.selectedRows,l=n.alertInfoRender,o=l===void 0?function(C){var w=C.intl;return u.jsxs(Nn,{children:[w.getMessage("alert.selected","已选择"),t.length,w.getMessage("alert.item","项"),"  "]})}:l,c=n.alertOptionRender,d=c===void 0?ki:c,v=De(),f=d&&d({onCleanSelected:r,selectedRowKeys:t,selectedRows:s,intl:v}),y=h.useContext(Ae.ConfigContext),b=y.getPrefixCls,m=b("pro-table-alert"),x=$i(m),R=x.wrapSSR,g=x.hashId;if(o===!1)return null;var p=o({intl:v,selectedRowKeys:t,selectedRows:s,onCleanSelected:r});return p===!1||t.length<1&&!a?null:R(u.jsx("div",{className:"".concat(m," ").concat(g).trim(),children:u.jsx("div",{className:"".concat(m,"-container ").concat(g).trim(),children:u.jsxs("div",{className:"".concat(m,"-info ").concat(g).trim(),children:[u.jsx("div",{className:"".concat(m,"-info-content ").concat(g).trim(),children:p}),f?u.jsx("div",{className:"".concat(m,"-info-option ").concat(g).trim(),children:f}):null]})})}))}function _i(n){var e=n.replace(/[A-Z]/g,function(t){return"-".concat(t.toLowerCase())});return e.startsWith("-")&&(e=e.slice(1)),e}var Oi=function(e,t){return!e&&t!==!1?(t==null?void 0:t.filterType)==="light"?"LightFilter":"QueryFilter":"Form"},zi=function(e,t,r){return!e&&r==="LightFilter"?Ve(i({},t),["labelWidth","defaultCollapsed","filterType"]):e?{}:Ve(i({labelWidth:t?t==null?void 0:t.labelWidth:void 0,defaultCollapsed:!0},t),["filterType"])},Vi=function(e,t){return e?Ve(t,["ignoreRules"]):i({ignoreRules:!0},t)},Wi=function(e){var t=e.onSubmit,r=e.formRef,a=e.dateFormatter,s=a===void 0?"string":a,l=e.type,o=e.columns,c=e.action,d=e.ghost,v=e.manualRequest,f=e.onReset,y=e.submitButtonLoading,b=e.search,m=e.form,x=e.bordered,R=h.useContext(Cn),g=R.hashId,p=l==="form",C=function(){var T=be(le().mark(function N(H,L){return le().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:t&&t(H,L);case 1:case"end":return O.stop()}},N)}));return function(H,L){return T.apply(this,arguments)}}(),w=h.useContext(Ae.ConfigContext),k=w.getPrefixCls,z=h.useMemo(function(){return o.filter(function(T){return!(T===cn.EXPAND_COLUMN||T===cn.SELECTION_COLUMN||(T.hideInSearch||T.search===!1)&&l!=="form"||l==="form"&&T.hideInForm)}).map(function(T){var N,H=!T.valueType||["textarea","jsonCode","code"].includes(T==null?void 0:T.valueType)&&l==="table"?"text":T==null?void 0:T.valueType,L=(T==null?void 0:T.key)||(T==null||(N=T.dataIndex)===null||N===void 0?void 0:N.toString());return i(i(i({},T),{},{width:void 0},T.search&&ze(T.search)==="object"?T.search:{}),{},{valueType:H,proFieldProps:i(i({},T.proFieldProps),{},{proFieldKey:L?"table-field-".concat(L):void 0})})})},[o,l]),M=k("pro-table-search"),E=k("pro-table-form"),K=h.useMemo(function(){return Oi(p,b)},[b,p]),$=h.useMemo(function(){return{submitter:{submitButtonProps:{loading:y}}}},[y]);return u.jsx("div",{className:Se(g,S(S(S(S(S(S(S(S(S({},k("pro-card"),!0),"".concat(k("pro-card"),"-border"),!!x),"".concat(k("pro-card"),"-bordered"),!!x),"".concat(k("pro-card"),"-ghost"),!!d),M,!0),E,p),k("pro-table-search-".concat(_i(K))),!0),"".concat(M,"-ghost"),d),b==null?void 0:b.className,b!==!1&&(b==null?void 0:b.className))),children:u.jsx($r,i(i(i(i({layoutType:K,columns:z,type:l},$),zi(p,b,K)),Vi(p,m||{})),{},{formRef:r,action:c,dateFormatter:s,onInit:function(N,H){if(r.current=H,l!=="form"){var L,P,O,A=(L=c.current)===null||L===void 0?void 0:L.pageInfo,q=N,ee=q.current,_=ee===void 0?A==null?void 0:A.current:ee,W=q.pageSize,U=W===void 0?A==null?void 0:A.pageSize:W;if((P=c.current)===null||P===void 0||(O=P.setPageInfo)===null||O===void 0||O.call(P,i(i({},A),{},{current:parseInt(_,10),pageSize:parseInt(U,10)})),v)return;C(N,!0)}},onReset:function(N){f==null||f(N)},onFinish:function(N){C(N,!1)},initialValues:m==null?void 0:m.initialValues}))})},Hi=function(n){Et(t,n);var e=jt(t);function t(){var r;Nt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Je(r),"onSubmit",function(o,c){var d=r.props,v=d.pagination,f=d.beforeSearchSubmit,y=f===void 0?function(k){return k}:f,b=d.action,m=d.onSubmit,x=d.onFormSearchSubmit,R=v?Ye({current:v.current,pageSize:v.pageSize}):{},g=i(i({},o),{},{_timestamp:Date.now()},R),p=Ve(y(g),Object.keys(R));if(x(p),!c){var C,w;(C=b.current)===null||C===void 0||(w=C.setPageInfo)===null||w===void 0||w.call(C,{current:1})}m&&!c&&(m==null||m(o))}),S(Je(r),"onReset",function(o){var c,d,v=r.props,f=v.pagination,y=v.beforeSearchSubmit,b=y===void 0?function(C){return C}:y,m=v.action,x=v.onFormSearchSubmit,R=v.onReset,g=f?Ye({current:f.current,pageSize:f.pageSize}):{},p=Ve(b(i(i({},o),g)),Object.keys(g));x(p),(c=m.current)===null||c===void 0||(d=c.setPageInfo)===null||d===void 0||d.call(c,{current:1}),R==null||R()}),S(Je(r),"isEqual",function(o){var c=r.props,d=c.columns,v=c.loading,f=c.formRef,y=c.type,b=c.cardBordered,m=c.dateFormatter,x=c.form,R=c.search,g=c.manualRequest,p={columns:d,loading:v,formRef:f,type:y,cardBordered:b,dateFormatter:m,form:x,search:R,manualRequest:g};return!Fr(p,{columns:o.columns,formRef:o.formRef,loading:o.loading,type:o.type,cardBordered:o.cardBordered,dateFormatter:o.dateFormatter,form:o.form,search:o.search,manualRequest:o.manualRequest})}),S(Je(r),"shouldComponentUpdate",function(o){return r.isEqual(o)}),S(Je(r),"render",function(){var o=r.props,c=o.columns,d=o.loading,v=o.formRef,f=o.type,y=o.action,b=o.cardBordered,m=o.dateFormatter,x=o.form,R=o.search,g=o.pagination,p=o.ghost,C=o.manualRequest,w=g?Ye({current:g.current,pageSize:g.pageSize}):{};return u.jsx(Wi,{submitButtonLoading:d,columns:c,type:f,ghost:p,formRef:v,onSubmit:r.onSubmit,manualRequest:C,onReset:r.onReset,dateFormatter:m,search:R,form:i(i({autoFocusFirstInput:!1},x),{},{extraUrlParams:i(i({},w),x==null?void 0:x.extraUrlParams)}),action:y,bordered:_r("search",b)})}),r}return Mt(t)}(se.Component),Ui=function(e){return S(S(S({},e.componentCls,{width:"auto","&-title":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px"},"&-overlay":S(S(S(S({},"".concat(e.antCls,"-popover-inner-content"),{width:"200px",paddingBlock:0,paddingInline:0,paddingBlockEnd:8}),"".concat(e.antCls,"-tree-node-content-wrapper:hover"),{backgroundColor:"transparent"}),"".concat(e.antCls,"-tree-draggable-icon"),{cursor:"grab"}),"".concat(e.antCls,"-tree-treenode"),S(S({alignItems:"center","&:hover":S({},"".concat(e.componentCls,"-list-item-option"),{display:"block"})},"".concat(e.antCls,"-tree-checkbox"),{marginInlineEnd:"4px"}),"".concat(e.antCls,"-tree-title"),{width:"100%"}))}),"".concat(e.componentCls,"-action-rest-button"),{color:e.colorPrimary}),"".concat(e.componentCls,"-list"),S(S(S({display:"flex",flexDirection:"column",width:"100%",paddingBlockStart:8},"&".concat(e.componentCls,"-list-group"),{paddingBlockStart:0}),"&-title",{marginBlockStart:"6px",marginBlockEnd:"6px",paddingInlineStart:"24px",color:e.colorTextSecondary,fontSize:"12px"}),"&-item",{display:"flex",alignItems:"center",maxHeight:24,justifyContent:"space-between","&-title":{flex:1,maxWidth:80,textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"},"&-option":{display:"none",float:"right",cursor:"pointer","> span":{"> span.anticon":{color:e.colorPrimary}},"> span + span":{marginInlineStart:4}}}))};function Gi(n){return We("ColumnSetting",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Ui(t)]})}var qi=["key","dataIndex","children"],Qi=["disabled"],ut=function(e){var t=e.title,r=e.show,a=e.children,s=e.columnKey,l=e.fixed,o=h.useContext(fn),c=o.columnsMap,d=o.setColumnsMap;return r?u.jsx(Sn,{title:t,children:u.jsx("span",{onClick:function(f){f.stopPropagation(),f.preventDefault();var y=c[s]||{},b=i(i({},c),{},S({},s,i(i({},y),{},{fixed:l})));d(b)},children:a})}):null},Xi=function(e){var t=e.columnKey,r=e.isLeaf,a=e.title,s=e.className,l=e.fixed,o=e.showListItemOption,c=De(),d=h.useContext(Cn),v=d.hashId,f=u.jsxs("span",{className:"".concat(s,"-list-item-option ").concat(v).trim(),children:[u.jsx(ut,{columnKey:t,fixed:"left",title:c.getMessage("tableToolBar.leftPin","固定在列首"),show:l!=="left",children:u.jsx(ja,{})}),u.jsx(ut,{columnKey:t,fixed:void 0,title:c.getMessage("tableToolBar.noPin","不固定"),show:!!l,children:u.jsx(Na,{})}),u.jsx(ut,{columnKey:t,fixed:"right",title:c.getMessage("tableToolBar.rightPin","固定在列尾"),show:l!=="right",children:u.jsx(Ma,{})})]});return u.jsxs("span",{className:"".concat(s,"-list-item ").concat(v).trim(),children:[u.jsx("div",{className:"".concat(s,"-list-item-title ").concat(v).trim(),children:a}),o&&!r?f:null]},t)},ct=function(e){var t,r,a,s=e.list,l=e.draggable,o=e.checkable,c=e.showListItemOption,d=e.className,v=e.showTitle,f=v===void 0?!0:v,y=e.title,b=e.listHeight,m=b===void 0?280:b,x=h.useContext(Cn),R=x.hashId,g=h.useContext(fn),p=g.columnsMap,C=g.setColumnsMap,w=g.sortKeyColumns,k=g.setSortKeyColumns,z=s&&s.length>0,M=h.useMemo(function(){if(!z)return{};var T=[],N=new Map,H=function L(P,O){return P.map(function(A){var q,ee=A.key;A.dataIndex;var _=A.children,W=we(A,qi),U=Mn(ee,[O==null?void 0:O.columnKey,W.index].filter(Boolean).join("-")),D=p[U||"null"]||{show:!0};D.show!==!1&&!_&&T.push(U);var I=i(i({key:U},Ve(W,["className"])),{},{selectable:!1,disabled:D.disable===!0,disableCheckbox:typeof D.disable=="boolean"?D.disable:(q=D.disable)===null||q===void 0?void 0:q.checkbox,isLeaf:O?!0:void 0});if(_){var j;I.children=L(_,i(i({},D),{},{columnKey:U})),(j=I.children)!==null&&j!==void 0&&j.every(function(B){return T==null?void 0:T.includes(B.key)})&&T.push(U)}return N.set(ee,I),I})};return{list:H(s),keys:T,map:N}},[p,s,z]),E=Re(function(T,N,H){var L=i({},p),P=Oe(w),O=P.findIndex(function(_){return _===T}),A=P.findIndex(function(_){return _===N}),q=H>=O;if(!(O<0)){var ee=P[O];P.splice(O,1),H===0?P.unshift(ee):P.splice(q?A:A+1,0,ee),P.forEach(function(_,W){L[_]=i(i({},L[_]||{}),{},{order:W})}),C(L),k(P)}}),K=Re(function(T){var N=i({},p),H=function L(P){var O,A=i({},N[P]);if(A.show=T.checked,(O=M.map)!==null&&O!==void 0&&(O=O.get(P))!==null&&O!==void 0&&O.children){var q;(q=M.map.get(P))===null||q===void 0||(q=q.children)===null||q===void 0||q.forEach(function(ee){return L(ee.key)})}N[P]=A};H(T.node.key),C(i({},N))});if(!z)return null;var $=u.jsx(Ea,{itemHeight:24,draggable:l&&!!((t=M.list)!==null&&t!==void 0&&t.length)&&((r=M.list)===null||r===void 0?void 0:r.length)>1,checkable:o,onDrop:function(N){var H=N.node.key,L=N.dragNode.key,P=N.dropPosition,O=N.dropToGap,A=P===-1||!O?P+1:P;E(L,H,A)},blockNode:!0,onCheck:function(N,H){return K(H)},checkedKeys:M.keys,showLine:!1,titleRender:function(N){var H=i(i({},N),{},{children:void 0});if(!H.title)return null;var L=Ge(H.title,H),P=u.jsx(hr.Text,{style:{width:80},ellipsis:{tooltip:L},children:L});return u.jsx(Xi,i(i({className:d},Ve(H,["key"])),{},{showListItemOption:c,title:P,columnKey:H.key}))},height:m,treeData:(a=M.list)===null||a===void 0?void 0:a.map(function(T){T.disabled;var N=we(T,Qi);return N})});return u.jsxs(u.Fragment,{children:[f&&u.jsx("span",{className:"".concat(d,"-list-title ").concat(R).trim(),children:y}),$]})},Ji=function(e){var t=e.localColumns,r=e.className,a=e.draggable,s=e.checkable,l=e.showListItemOption,o=e.listsHeight,c=h.useContext(Cn),d=c.hashId,v=[],f=[],y=[],b=De();t.forEach(function(R){if(!R.hideInSetting){var g=R.fixed;if(g==="left"){f.push(R);return}if(g==="right"){v.push(R);return}y.push(R)}});var m=v&&v.length>0,x=f&&f.length>0;return u.jsxs("div",{className:Se("".concat(r,"-list"),d,S({},"".concat(r,"-list-group"),m||x)),children:[u.jsx(ct,{title:b.getMessage("tableToolBar.leftFixedTitle","固定在左侧"),list:f,draggable:a,checkable:s,showListItemOption:l,className:r,listHeight:o}),u.jsx(ct,{list:y,draggable:a,checkable:s,showListItemOption:l,title:b.getMessage("tableToolBar.noFixedTitle","不固定"),showTitle:x||m,className:r,listHeight:o}),u.jsx(ct,{title:b.getMessage("tableToolBar.rightFixedTitle","固定在右侧"),list:v,draggable:a,checkable:s,showListItemOption:l,className:r,listHeight:o})]})};function Yi(n){var e,t,r,a,s=h.useRef(null),l=h.useContext(fn),o=n.columns,c=n.checkedReset,d=c===void 0?!0:c,v=l.columnsMap,f=l.setColumnsMap,y=l.clearPersistenceStorage;h.useEffect(function(){var K;if((K=l.propsRef.current)!==null&&K!==void 0&&(K=K.columnsState)!==null&&K!==void 0&&K.value){var $;s.current=JSON.parse(JSON.stringify((($=l.propsRef.current)===null||$===void 0||($=$.columnsState)===null||$===void 0?void 0:$.value)||{}))}},[]);var b=Re(function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,$={},T=function N(H){H.forEach(function(L){var P=L.key,O=L.fixed,A=L.index,q=L.children,ee=L.disable,_=Mn(P,A);if(_){var W,U;$[_]={show:ee?(W=v[_])===null||W===void 0?void 0:W.show:K,fixed:O,disable:ee,order:(U=v[_])===null||U===void 0?void 0:U.order}}q&&N(q)})};T(o),f($)}),m=Re(function(K){K.target.checked?b():b(!1)}),x=Re(function(){var K;y==null||y(),f(((K=l.propsRef.current)===null||K===void 0||(K=K.columnsState)===null||K===void 0?void 0:K.defaultValue)||s.current||l.defaultColumnKeyMap)}),R=Object.values(v).filter(function(K){return!K||K.show===!1}),g=R.length>0&&R.length!==o.length,p=De(),C=h.useContext(Ae.ConfigContext),w=C.getPrefixCls,k=w("pro-table-column-setting"),z=Gi(k),M=z.wrapSSR,E=z.hashId;return M(u.jsx(mr,{arrow:!1,title:u.jsxs("div",{className:"".concat(k,"-title ").concat(E).trim(),children:[n.checkable===!1?u.jsx("div",{}):u.jsx(Ia,{indeterminate:g,checked:R.length===0&&R.length!==o.length,onChange:function($){m($)},children:p.getMessage("tableToolBar.columnDisplay","列展示")}),d?u.jsx("a",{onClick:x,className:"".concat(k,"-action-rest-button ").concat(E).trim(),children:p.getMessage("tableToolBar.reset","重置")}):null,n!=null&&n.extra?u.jsx(Nn,{size:12,align:"center",children:n.extra}):null]}),overlayClassName:"".concat(k,"-overlay ").concat(E).trim(),trigger:"click",placement:"bottomRight",content:u.jsx(Ji,{checkable:(e=n.checkable)!==null&&e!==void 0?e:!0,draggable:(t=n.draggable)!==null&&t!==void 0?t:!0,showListItemOption:(r=n.showListItemOption)!==null&&r!==void 0?r:!0,className:k,localColumns:o,listsHeight:n.listsHeight}),children:n.children||u.jsx(Sn,{title:p.getMessage("tableToolBar.columnSetting","列设置"),children:(a=n.settingIcon)!==null&&a!==void 0?a:u.jsx(Fa,{})})}))}var Zi=function(e){var t=h.useContext(Cn),r=t.hashId,a=e.items,s=a===void 0?[]:a,l=e.type,o=l===void 0?"inline":l,c=e.prefixCls,d=e.activeKey,v=e.defaultActiveKey,f=Ee(d||v,{value:d,onChange:e.onChange}),y=ue(f,2),b=y[0],m=y[1];if(s.length<1)return null;var x=s.find(function(g){return g.key===b})||s[0];if(o==="inline")return u.jsx("div",{className:Se("".concat(c,"-menu"),"".concat(c,"-inline-menu"),r),children:s.map(function(g,p){return u.jsx("div",{onClick:function(){m(g.key)},className:Se("".concat(c,"-inline-menu-item"),x.key===g.key?"".concat(c,"-inline-menu-item-active"):void 0,r),children:g.label},g.key||p)})});if(o==="tab")return u.jsx(En,{items:s.map(function(g){var p;return i(i({},g),{},{key:(p=g.key)===null||p===void 0?void 0:p.toString()})}),activeKey:x.key,onTabClick:function(p){return m(p)},children:et(Yn,"4.23.0")<0?s==null?void 0:s.map(function(g,p){return h.createElement(En.TabPane,i(i({},g),{},{key:g.key||p,tab:g.label}))}):null});var R=Mr({selectedKeys:[x.key],onClick:function(p){m(p.key)},items:s.map(function(g,p){return{key:g.key||p,disabled:g.disabled,label:g.label}})});return u.jsx("div",{className:Se("".concat(c,"-menu"),"".concat(c,"-dropdownmenu")),children:u.jsx(Sr,i(i({trigger:["click"]},R),{},{children:u.jsxs(Nn,{className:"".concat(c,"-dropdownmenu-label"),children:[x.label,u.jsx(mt,{})]})}))})},es=function(e){return S({},e.componentCls,S(S(S({lineHeight:"1","&-container":{display:"flex",justifyContent:"space-between",paddingBlock:e.padding,paddingInline:0,"&-mobile":{flexDirection:"column"}},"&-title":{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.colorTextHeading,fontWeight:"500",fontSize:e.fontSizeLG},"&-search:not(:last-child)":{display:"flex",alignItems:"center",justifyContent:"flex-start"},"&-setting-item":{marginBlock:0,marginInline:4,color:e.colorIconHover,fontSize:e.fontSizeLG,cursor:"pointer","> span":{display:"block",width:"100%",height:"100%"},"&:hover":{color:e.colorPrimary}},"&-left":S(S({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.marginXS,justifyContent:"flex-start",maxWidth:"calc(100% - 200px)"},"".concat(e.antCls,"-tabs"),{width:"100%"}),"&-has-tabs",{overflow:"hidden"}),"&-right":{flex:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:e.marginXS},"&-extra-line":{marginBlockEnd:e.margin},"&-setting-items":{display:"flex",gap:e.marginXS,lineHeight:"32px",alignItems:"center"},"&-filter":S({"&:not(:last-child)":{marginInlineEnd:e.margin},display:"flex",alignItems:"center"},"div$".concat(e.antCls,"-pro-table-search"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0}),"&-inline-menu-item":{display:"inline-block",marginInlineEnd:e.marginLG,cursor:"pointer",opacity:"0.75","&-active":{fontWeight:"bold",opacity:"1"}}},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0,"&::before":{borderBlockEnd:0}},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:0,"${token.antCls}-tabs-tab":{paddingBlockStart:0}})),"&-dropdownmenu-label",{fontWeight:"bold",fontSize:e.fontSizeIcon,textAlign:"center",cursor:"pointer"}),"@media (max-width: 768px)",S({},e.componentCls,{"&-container":{display:"flex",flexWrap:"wrap",flexDirection:"column"},"&-left":{marginBlockEnd:"16px",maxWidth:"100%"}})))};function ns(n){return We("ProTableListToolBar",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[es(t)]})}function ts(n){if(se.isValidElement(n))return n;if(n){var e=n,t=e.icon,r=e.tooltip,a=e.onClick,s=e.key;return t&&r?u.jsx(Sn,{title:r,children:u.jsx("span",{onClick:function(){a&&a(s)},children:t},s)}):u.jsx("span",{onClick:function(){a&&a(s)},children:t},s)}return null}var rs=function(e){var t,r=e.prefixCls,a=e.tabs,s=e.multipleLine,l=e.filtersNode;return s?u.jsx("div",{className:"".concat(r,"-extra-line"),children:a!=null&&a.items&&a!==null&&a!==void 0&&a.items.length?u.jsx(En,{style:{width:"100%"},defaultActiveKey:a.defaultActiveKey,activeKey:a.activeKey,items:a.items.map(function(o,c){var d;return i(i({label:o.tab},o),{},{key:((d=o.key)===null||d===void 0?void 0:d.toString())||(c==null?void 0:c.toString())})}),onChange:a.onChange,tabBarExtraContent:l,children:(t=a.items)===null||t===void 0?void 0:t.map(function(o,c){return et(Yn,"4.23.0")<0?h.createElement(En.TabPane,i(i({},o),{},{key:o.key||c,tab:o.tab})):null})}):l}):null},as=function(e){var t=e.prefixCls,r=e.title,a=e.subTitle,s=e.tooltip,l=e.className,o=e.style,c=e.search,d=e.onSearch,v=e.multipleLine,f=v===void 0?!1:v,y=e.filter,b=e.actions,m=b===void 0?[]:b,x=e.settings,R=x===void 0?[]:x,g=e.tabs,p=e.menu,C=h.useContext(Ae.ConfigContext),w=C.getPrefixCls,k=Gn.useToken(),z=k.token,M=w("pro-table-list-toolbar",t),E=ns(M),K=E.wrapSSR,$=E.hashId,T=De(),N=h.useState(!1),H=ue(N,2),L=H[0],P=H[1],O=T.getMessage("tableForm.inputPlaceholder","请输入"),A=h.useMemo(function(){return c?se.isValidElement(c)?c:u.jsx(yr.Search,i(i({style:{width:200},placeholder:O},c),{},{onSearch:be(le().mark(function B(){var F,V,Y,X,J,G,ce=arguments;return le().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:for(Y=ce.length,X=new Array(Y),J=0;J<Y;J++)X[J]=ce[J];return he.next=3,(F=(V=c).onSearch)===null||F===void 0?void 0:F.call.apply(F,[V].concat(X));case 3:G=he.sent,G!==!1&&(d==null||d(X==null?void 0:X[0]));case 5:case"end":return he.stop()}},B)}))})):null},[O,d,c]),q=h.useMemo(function(){return y?u.jsx("div",{className:"".concat(M,"-filter ").concat($).trim(),children:y}):null},[y,$,M]),ee=h.useMemo(function(){return p||r||a||s},[p,a,r,s]),_=h.useMemo(function(){return Array.isArray(m)?m.length<1?null:u.jsx("div",{style:{display:"flex",alignItems:"center",gap:z.marginXS},children:m.map(function(B,F){return se.isValidElement(B)?se.cloneElement(B,i({key:F},B==null?void 0:B.props)):u.jsx(se.Fragment,{children:B},F)})}):m},[m]),W=h.useMemo(function(){return!!(ee&&A||!f&&q||_||R!=null&&R.length)},[_,q,ee,f,A,R==null?void 0:R.length]),U=h.useMemo(function(){return s||r||a||p||!ee&&A},[ee,p,A,a,r,s]),D=h.useMemo(function(){return!U&&W?u.jsx("div",{className:"".concat(M,"-left ").concat($).trim()}):!p&&(ee||!A)?u.jsx("div",{className:"".concat(M,"-left ").concat($).trim(),children:u.jsx("div",{className:"".concat(M,"-title ").concat($).trim(),children:u.jsx(jn,{tooltip:s,label:r,subTitle:a})})}):u.jsxs("div",{className:Se("".concat(M,"-left"),$,S(S(S({},"".concat(M,"-left-has-tabs"),(p==null?void 0:p.type)==="tab"),"".concat(M,"-left-has-dropdown"),(p==null?void 0:p.type)==="dropdown"),"".concat(M,"-left-has-inline-menu"),(p==null?void 0:p.type)==="inline")),children:[ee&&!p&&u.jsx("div",{className:"".concat(M,"-title ").concat($).trim(),children:u.jsx(jn,{tooltip:s,label:r,subTitle:a})}),p&&u.jsx(Zi,i(i({},p),{},{prefixCls:M})),!ee&&A?u.jsx("div",{className:"".concat(M,"-search ").concat($).trim(),children:A}):null]})},[U,W,ee,$,p,M,A,a,r,s]),I=h.useMemo(function(){return W?u.jsxs("div",{className:"".concat(M,"-right ").concat($).trim(),style:L?{}:{alignItems:"center"},children:[f?null:q,ee&&A?u.jsx("div",{className:"".concat(M,"-search ").concat($).trim(),children:A}):null,_,R!=null&&R.length?u.jsx("div",{className:"".concat(M,"-setting-items ").concat($).trim(),children:R.map(function(B,F){var V=ts(B);return u.jsx("div",{className:"".concat(M,"-setting-item ").concat($).trim(),children:V},F)})}):null]}):null},[W,M,$,L,ee,A,f,q,_,R]),j=h.useMemo(function(){if(!W&&!U)return null;var B=Se("".concat(M,"-container"),$,S({},"".concat(M,"-container-mobile"),L));return u.jsxs("div",{className:B,children:[D,I]})},[U,W,$,L,D,M,I]);return K(u.jsx(br,{onResize:function(F){F.width<375!==L&&P(F.width<375)},children:u.jsxs("div",{style:o,className:Se(M,$,l),children:[j,u.jsx(rs,{filtersNode:q,prefixCls:M,tabs:g,multipleLine:f})]})}))},ls=function(e){var t=e.icon,r=t===void 0?u.jsx(Ba,{}):t,a=h.useContext(fn),s=De(),l=Mr({selectedKeys:[a.tableSize],onClick:function(c){var d,v=c.key;(d=a.setTableSize)===null||d===void 0||d.call(a,v)},style:{width:80},items:[{key:"large",label:s.getMessage("tableToolBar.densityLarger","宽松")},{key:"middle",label:s.getMessage("tableToolBar.densityMiddle","中等")},{key:"small",label:s.getMessage("tableToolBar.densitySmall","紧凑")}]});return u.jsx(Sr,i(i({},l),{},{trigger:["click"],children:u.jsx(Sn,{title:s.getMessage("tableToolBar.density","表格密度"),children:r})}))};const os=se.memo(ls);var is=function(){var e=De(),t=h.useState(!1),r=ue(t,2),a=r[0],s=r[1];return h.useEffect(function(){vr()&&(document.onfullscreenchange=function(){s(!!document.fullscreenElement)})},[]),a?u.jsx(Sn,{title:e.getMessage("tableToolBar.exitFullScreen","全屏"),children:u.jsx(La,{})}):u.jsx(Sn,{title:e.getMessage("tableToolBar.fullScreen","全屏"),children:u.jsx(Aa,{})})};const Or=se.memo(is);var ss=["headerTitle","tooltip","toolBarRender","action","options","selectedRowKeys","selectedRows","toolbar","onSearch","columns","optionsRender"];function us(n,e){var t,r=n.intl;return{reload:{text:r.getMessage("tableToolBar.reload","刷新"),icon:(t=e.reloadIcon)!==null&&t!==void 0?t:u.jsx(Ka,{})},density:{text:r.getMessage("tableToolBar.density","表格密度"),icon:u.jsx(os,{icon:e.densityIcon})},fullScreen:{text:r.getMessage("tableToolBar.fullScreen","全屏"),icon:u.jsx(Or,{})}}}function cs(n,e,t,r){return Object.keys(n).filter(function(a){return a}).map(function(a){var s=n[a];if(!s)return null;var l=s===!0?e[a]:function(c){s==null||s(c,t.current)};if(typeof l!="function"&&(l=function(){}),a==="setting")return h.createElement(Yi,i(i({},n[a]),{},{columns:r,key:a}));if(a==="fullScreen")return u.jsx("span",{onClick:l,children:u.jsx(Or,{})},a);var o=us(e,n)[a];return o?u.jsx("span",{onClick:l,children:u.jsx(Sn,{title:o.text,children:o.icon})},a):null}).filter(function(a){return a})}function ds(n){var e=n.headerTitle,t=n.tooltip,r=n.toolBarRender,a=n.action,s=n.options,l=n.selectedRowKeys,o=n.selectedRows,c=n.toolbar,d=n.onSearch,v=n.columns,f=n.optionsRender,y=we(n,ss),b=h.useContext(fn),m=De(),x=h.useMemo(function(){var p={reload:function(){var z;return a==null||(z=a.current)===null||z===void 0?void 0:z.reload()},density:!0,setting:!0,search:!1,fullScreen:function(){var z,M;return a==null||(z=a.current)===null||z===void 0||(M=z.fullScreen)===null||M===void 0?void 0:M.call(z)}};if(s===!1)return[];var C=i(i({},p),{},{fullScreen:!1},s),w=cs(C,i(i({},p),{},{intl:m}),a,v);return f?f(i({headerTitle:e,tooltip:t,toolBarRender:r,action:a,options:s,selectedRowKeys:l,selectedRows:o,toolbar:c,onSearch:d,columns:v,optionsRender:f},y),w):w},[a,v,e,m,d,f,s,y,l,o,r,c,t]),R=r?r(a==null?void 0:a.current,{selectedRowKeys:l,selectedRows:o}):[],g=h.useMemo(function(){if(!s||!s.search)return!1;var p={value:b.keyWords,onChange:function(w){return b.setKeyWords(w.target.value)}};return s.search===!0?p:i(i({},p),s.search)},[b,s]);return h.useEffect(function(){b.keyWords===void 0&&(d==null||d(""))},[b.keyWords,d]),u.jsx(as,i({title:e,tooltip:t||y.tip,search:g,onSearch:d,actions:R,settings:x},c))}var fs=function(n){Et(t,n);var e=jt(t);function t(){var r;Nt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Je(r),"onSearch",function(o){var c,d,v,f,y=r.props,b=y.options,m=y.onFormSearchSubmit,x=y.actionRef;if(!(!b||!b.search)){var R=b.search===!0?{}:b.search,g=R.name,p=g===void 0?"keyword":g,C=(c=b.search)===null||c===void 0||(d=c.onSearch)===null||d===void 0?void 0:d.call(c,o);C!==!1&&(x==null||(v=x.current)===null||v===void 0||(f=v.setPageInfo)===null||f===void 0||f.call(v,{current:1}),m(Ye(S({_timestamp:Date.now()},p,o))))}}),S(Je(r),"isEquals",function(o){var c=r.props,d=c.hideToolbar,v=c.tableColumn,f=c.options,y=c.tooltip,b=c.toolbar,m=c.selectedRows,x=c.selectedRowKeys,R=c.headerTitle,g=c.actionRef,p=c.toolBarRender;return Fr({hideToolbar:d,tableColumn:v,options:f,tooltip:y,toolbar:b,selectedRows:m,selectedRowKeys:x,headerTitle:R,actionRef:g,toolBarRender:p},{hideToolbar:o.hideToolbar,tableColumn:o.tableColumn,options:o.options,tooltip:o.tooltip,toolbar:o.toolbar,selectedRows:o.selectedRows,selectedRowKeys:o.selectedRowKeys,headerTitle:o.headerTitle,actionRef:o.actionRef,toolBarRender:o.toolBarRender},["render","renderFormItem"])}),S(Je(r),"shouldComponentUpdate",function(o){return o.searchNode?!0:!r.isEquals(o)}),S(Je(r),"render",function(){var o=r.props,c=o.hideToolbar,d=o.tableColumn,v=o.options,f=o.searchNode,y=o.tooltip,b=o.toolbar,m=o.selectedRows,x=o.selectedRowKeys,R=o.headerTitle,g=o.actionRef,p=o.toolBarRender,C=o.optionsRender;return c?null:u.jsx(ds,{tooltip:y,columns:d,options:v,headerTitle:R,action:g,onSearch:r.onSearch,selectedRows:m,selectedRowKeys:x,toolBarRender:p,toolbar:i({filter:f},b),optionsRender:C})}),r}return Mt(t)}(se.Component),vs=new gr("turn",{"0%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(90deg)"},"50%":{transform:"rotate(180deg)"},"75%":{transform:"rotate(270deg)"},"100%":{transform:"rotate(360deg)"}}),ms=function(e){return S(S(S({},e.componentCls,S(S(S(S(S(S(S(S(S({zIndex:1},"".concat(e.antCls,"-table-wrapper ").concat(e.antCls,"-table-pagination").concat(e.antCls,"-pagination"),{marginBlockEnd:0}),"&:not(:root):fullscreen",{minHeight:"100vh",overflow:"auto",background:e.colorBgContainer}),"&-extra",{marginBlockEnd:16}),"&-polling",S({},"".concat(e.componentCls,"-list-toolbar-setting-item"),{".anticon.anticon-reload":{transform:"rotate(0deg)",animationName:vs,animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite"}})),"td".concat(e.antCls,"-table-cell"),{">a":{fontSize:e.fontSize}}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-tbody").concat(e.antCls,"-table-wrapper:only-child").concat(e.antCls,"-table"),{marginBlock:0,marginInline:0}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-middle ").concat(e.componentCls),S({marginBlock:0,marginInline:-8},"".concat(e.proComponentsCls,"-card"),{backgroundColor:"initial"})),"& &-search",S(S(S(S({marginBlockEnd:"16px",background:e.colorBgContainer,"&-ghost":{background:"transparent"}},"&".concat(e.componentCls,"-form"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:16,overflow:"unset"}),"&-light-filter",{marginBlockEnd:0,paddingBlock:0,paddingInline:0}),"&-form-option",S(S(S({},"".concat(e.antCls,"-form-item"),{}),"".concat(e.antCls,"-form-item-label"),{}),"".concat(e.antCls,"-form-item-control-input"),{})),"@media (max-width: 575px)",S({},e.componentCls,S({height:"auto !important",paddingBlockEnd:"24px"},"".concat(e.antCls,"-form-item-label"),{minWidth:"80px",textAlign:"start"})))),"&-toolbar",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"64px",paddingInline:24,paddingBlock:0,"&-option":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"&-title":{flex:"1",color:e.colorTextLabel,fontWeight:"500",fontSize:"16px",lineHeight:"24px",opacity:"0.85"}})),"@media (max-width: ".concat(e.screenXS,")px"),S({},e.componentCls,S({},"".concat(e.antCls,"-table"),{width:"100%",overflowX:"auto","&-thead > tr,&-tbody > tr":{"> th,> td":{whiteSpace:"pre",">span":{display:"block"}}}}))),"@media (max-width: 575px)",S({},"".concat(e.componentCls,"-toolbar"),{flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",height:"auto",marginBlockEnd:"16px",marginInlineStart:"16px",paddingBlock:8,paddingInline:8,paddingBlockStart:"16px",lineHeight:"normal","&-title":{marginBlockEnd:16},"&-option":{display:"flex",justifyContent:"space-between",width:"100%"},"&-default-option":{display:"flex",flex:"1",alignItems:"center",justifyContent:"flex-end"}}))};function hs(n){return We("ProTable",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[ms(t)]})}var ps=["data","success","total"],gs=function(e){var t=e.pageInfo;if(t){var r=t.current,a=t.defaultCurrent,s=t.pageSize,l=t.defaultPageSize;return{current:r||a||1,total:0,pageSize:s||l||20}}return{current:1,total:0,pageSize:20}},ys=function(e,t,r){var a,s=h.useRef(!1),l=h.useRef(null),o=r||{},c=o.onLoad,d=o.manual,v=o.polling,f=o.onRequestError,y=o.debounceTime,b=y===void 0?20:y,m=o.effects,x=m===void 0?[]:m,R=h.useRef(d),g=h.useRef(),p=Ee(t,{value:r==null?void 0:r.dataSource,onChange:r==null?void 0:r.onDataSourceChange}),C=ue(p,2),w=C[0],k=C[1],z=Ee(!1,{value:ze(r==null?void 0:r.loading)==="object"?r==null||(a=r.loading)===null||a===void 0?void 0:a.spinning:r==null?void 0:r.loading,onChange:r==null?void 0:r.onLoadingChange}),M=ue(z,2),E=M[0],K=M[1],$=Ee(function(){return gs(r)},{onChange:r==null?void 0:r.onPageInfoChange}),T=ue($,2),N=T[0],H=T[1],L=Re(function(F){(F.current!==N.current||F.pageSize!==N.pageSize||F.total!==N.total)&&H(F)}),P=Ee(!1),O=ue(P,2),A=O[0],q=O[1],ee=function(V,Y){vt.unstable_batchedUpdates(function(){k(V),(N==null?void 0:N.total)!==Y&&L(i(i({},N),{},{total:Y||V.length}))})},_=qn(N==null?void 0:N.current),W=qn(N==null?void 0:N.pageSize),U=qn(v),D=Re(function(){vt.unstable_batchedUpdates(function(){K(!1),q(!1)})}),I=function(){var F=be(le().mark(function V(Y){var X,J,G,ce,ne,he,ae,re,me,de,Be,ie;return le().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!R.current){oe.next=3;break}return R.current=!1,oe.abrupt("return");case 3:return Y?q(!0):K(!0),X=N||{},J=X.pageSize,G=X.current,oe.prev=5,ce=(r==null?void 0:r.pageInfo)!==!1?{current:G,pageSize:J}:void 0,oe.next=9,e==null?void 0:e(ce);case 9:if(oe.t0=oe.sent,oe.t0){oe.next=12;break}oe.t0={};case 12:if(ne=oe.t0,he=ne.data,ae=he===void 0?[]:he,re=ne.success,me=ne.total,de=me===void 0?0:me,Be=we(ne,ps),re!==!1){oe.next=21;break}return oe.abrupt("return",[]);case 21:return ie=ji(ae,[r.postData].filter(function(Le){return Le})),ee(ie,de),c==null||c(ie,Be),oe.abrupt("return",ie);case 27:if(oe.prev=27,oe.t1=oe.catch(5),f!==void 0){oe.next=31;break}throw new Error(oe.t1);case 31:w===void 0&&k([]),f(oe.t1);case 33:return oe.prev=33,D(),oe.finish(33);case 36:return oe.abrupt("return",[]);case 37:case"end":return oe.stop()}},V,null,[[5,27,33,36]])}));return function(Y){return F.apply(this,arguments)}}(),j=Rr(function(){var F=be(le().mark(function V(Y){var X,J,G;return le().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(g.current&&clearTimeout(g.current),e){ne.next=3;break}return ne.abrupt("return");case 3:return X=new AbortController,l.current=X,ne.prev=5,ne.next=8,Promise.race([I(Y),new Promise(function(he,ae){var re,me;(re=l.current)===null||re===void 0||(re=re.signal)===null||re===void 0||(me=re.addEventListener)===null||me===void 0||me.call(re,"abort",function(){ae("aborted"),j.cancel(),D()})})]);case 8:if(J=ne.sent,!X.signal.aborted){ne.next=11;break}return ne.abrupt("return");case 11:return G=Ge(v,J),G&&!s.current&&(g.current=setTimeout(function(){j.run(G)},Math.max(G,2e3))),ne.abrupt("return",J);case 16:if(ne.prev=16,ne.t0=ne.catch(5),ne.t0!=="aborted"){ne.next=20;break}return ne.abrupt("return");case 20:throw ne.t0;case 21:case"end":return ne.stop()}},V,null,[[5,16]])}));return function(V){return F.apply(this,arguments)}}(),b||30),B=function(){var V;(V=l.current)===null||V===void 0||V.abort(),j.cancel(),D()};return h.useEffect(function(){return v||clearTimeout(g.current),!U&&v&&j.run(!0),function(){clearTimeout(g.current)}},[v]),h.useEffect(function(){return s.current=!1,function(){s.current=!0}},[]),h.useEffect(function(){var F=N||{},V=F.current,Y=F.pageSize;(!_||_===V)&&(!W||W===Y)||r.pageInfo&&w&&(w==null?void 0:w.length)>Y||V!==void 0&&w&&w.length<=Y&&(B(),j.run(!1))},[N==null?void 0:N.current]),h.useEffect(function(){W&&(B(),j.run(!1))},[N==null?void 0:N.pageSize]),ht(function(){return B(),j.run(!1),d||(R.current=!1),function(){B()}},[].concat(Oe(x),[d])),{dataSource:w,setDataSource:k,loading:ze(r==null?void 0:r.loading)==="object"?i(i({},r==null?void 0:r.loading),{},{spinning:E}):E,reload:function(){var F=be(le().mark(function Y(){return le().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return B(),J.abrupt("return",j.run(!1));case 2:case"end":return J.stop()}},Y)}));function V(){return F.apply(this,arguments)}return V}(),pageInfo:N,pollingLoading:A,reset:function(){var F=be(le().mark(function Y(){var X,J,G,ce,ne,he,ae,re;return le().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:X=r||{},J=X.pageInfo,G=J||{},ce=G.defaultCurrent,ne=ce===void 0?1:ce,he=G.defaultPageSize,ae=he===void 0?20:he,re={current:ne,total:0,pageSize:ae},L(re);case 4:case"end":return de.stop()}},Y)}));function V(){return F.apply(this,arguments)}return V}(),setPageInfo:function(){var F=be(le().mark(function Y(X){return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:L(i(i({},N),X));case 1:case"end":return G.stop()}},Y)}));function V(Y){return F.apply(this,arguments)}return V}()}},bs=function(e){return function(t,r){var a,s,l=t.fixed,o=t.index,c=r.fixed,d=r.index;if(l==="left"&&c!=="left"||c==="right"&&l!=="right")return-2;if(c==="left"&&l!=="left"||l==="right"&&c!=="right")return 2;var v=t.key||"".concat(o),f=r.key||"".concat(d);if((a=e[v])!==null&&a!==void 0&&a.order||(s=e[f])!==null&&s!==void 0&&s.order){var y,b;return(((y=e[v])===null||y===void 0?void 0:y.order)||0)-(((b=e[f])===null||b===void 0?void 0:b.order)||0)}return(t.index||0)-(r.index||0)}},Ss=["children"],Cs=["",null,void 0],lr=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(a){return a!==void 0}).map(function(a){return typeof a=="number"?a.toString():a}).flat(1)},xs=function(e){var t=h.useContext(qa),r=e.columnProps,a=e.prefixName,s=e.text,l=e.counter,o=e.rowData,c=e.index,d=e.recordKey,v=e.subName,f=e.proFieldProps,y=e.editableUtils,b=Zn.useFormInstance(),m=d||c,x=h.useMemo(function(){var E,K;return(E=y==null||(K=y.getRealIndex)===null||K===void 0?void 0:K.call(y,o))!==null&&E!==void 0?E:c},[y,c,o]),R=h.useState(function(){var E,K;return lr(a,a?v:[],a?x:m,(E=(K=r==null?void 0:r.key)!==null&&K!==void 0?K:r==null?void 0:r.dataIndex)!==null&&E!==void 0?E:c)}),g=ue(R,2),p=g[0],C=g[1],w=h.useMemo(function(){return p.slice(0,-1)},[p]);h.useEffect(function(){var E,K,$=lr(a,a?v:[],a?x:m,(E=(K=r==null?void 0:r.key)!==null&&K!==void 0?K:r==null?void 0:r.dataIndex)!==null&&E!==void 0?E:c);$.join("-")!==p.join("-")&&C($)},[r==null?void 0:r.dataIndex,r==null?void 0:r.key,c,d,a,m,v,p,x]);var k=h.useMemo(function(){return[b,i(i({},r),{},{rowKey:w,rowIndex:c,isEditable:!0})]},[r,b,c,w]),z=h.useCallback(function(E){var K=E.children,$=we(E,Ss);return u.jsx(gl,i(i({popoverProps:{getPopupContainer:t.getPopupContainer||function(){return l.rootDomRef.current||document.body}},errorType:"popover",name:p},$),{},{children:K}),m)},[m,p]),M=h.useCallback(function(){var E,K,$=i({},St.apply(void 0,[r==null?void 0:r.formItemProps].concat(Oe(k))));$.messageVariables=i({label:(r==null?void 0:r.title)||"此项",type:(r==null?void 0:r.valueType)||"文本"},$==null?void 0:$.messageVariables),$.initialValue=(E=(K=a?null:s)!==null&&K!==void 0?K:$==null?void 0:$.initialValue)!==null&&E!==void 0?E:r==null?void 0:r.initialValue;var T=u.jsx(Xn,i({cacheForSwr:!0,name:p,proFormFieldKey:m,ignoreFormItem:!0,fieldProps:St.apply(void 0,[r==null?void 0:r.fieldProps].concat(Oe(k)))},f),p.join("-"));return r!=null&&r.renderFormItem&&(T=r.renderFormItem(i(i({},r),{},{index:c,isEditable:!0,type:"table"}),{defaultRender:function(){return u.jsx(u.Fragment,{children:T})},type:"form",recordKey:d,record:i(i({},o),b==null?void 0:b.getFieldValue([m])),isEditable:!0},b,e.editableUtils),r.ignoreFormItem)?u.jsx(u.Fragment,{children:T}):u.jsx(z,i(i({},$),{},{children:T}),p.join("-"))},[r,k,a,s,m,p,f,z,c,d,o,b,e.editableUtils]);return p.length===0?null:typeof(r==null?void 0:r.renderFormItem)=="function"||typeof(r==null?void 0:r.fieldProps)=="function"||typeof(r==null?void 0:r.formItemProps)=="function"?u.jsx(Ze.Item,{noStyle:!0,shouldUpdate:function(K,$){if(K===$)return!1;var T=[w].flat(1);try{return JSON.stringify(en(K,T))!==JSON.stringify(en($,T))}catch{return!0}},children:function(){return M()}}):M()};function zr(n){var e,t,r=n.text,a=n.valueType,s=n.rowData,l=n.columnProps,o=n.index;if((!a||["textarea","text"].includes(a.toString()))&&!(l!=null&&l.valueEnum)&&n.mode==="read")return Cs.includes(r)?n.columnEmptyText:r;if(typeof a=="function"&&s)return zr(i(i({},n),{},{valueType:a(s,n.type)||"text"}));var c=(l==null?void 0:l.key)||(l==null||(e=l.dataIndex)===null||e===void 0?void 0:e.toString()),d=l!=null&&l.dependencies?[n.prefixName,n.prefixName?o==null?void 0:o.toString():(t=n.recordKey)===null||t===void 0?void 0:t.toString(),l==null?void 0:l.dependencies].filter(Boolean).flat(1):[],v={valueEnum:Ge(l==null?void 0:l.valueEnum,s),request:l==null?void 0:l.request,dependencies:l!=null&&l.dependencies?[d]:void 0,originDependencies:l!=null&&l.dependencies?[l==null?void 0:l.dependencies]:void 0,params:Ge(l==null?void 0:l.params,s,l),readonly:l==null?void 0:l.readonly,text:a==="index"||a==="indexBorder"?n.index:r,mode:n.mode,renderFormItem:void 0,valueType:a,record:s,proFieldProps:{emptyText:n.columnEmptyText,proFieldKey:c?"table-field-".concat(c):void 0}};return n.mode!=="edit"?u.jsx(Xn,i({mode:"read",ignoreFormItem:!0,fieldProps:St(l==null?void 0:l.fieldProps,null,l)},v)):u.jsx(xs,i(i({},n),{},{proFieldProps:v}),n.recordKey)}var Rs=function(e){var t,r=e.title,a=typeof(e==null?void 0:e.ellipsis)=="boolean"?e==null?void 0:e.ellipsis:e==null||(t=e.ellipsis)===null||t===void 0?void 0:t.showTitle;return r&&typeof r=="function"?r(e,"table",u.jsx(jn,{label:null,tooltip:e.tooltip||e.tip})):u.jsx(jn,{label:r,tooltip:e.tooltip||e.tip,ellipsis:a})};function ws(n,e,t,r){return typeof r=="boolean"?r===!1:(r==null?void 0:r(n,e,t))===!1}var Ts=function(e,t,r){var a=Array.isArray(r)?en(t,r):t[r],s=String(a);return String(s)===String(e)};function Ps(n){var e=n.columnProps,t=n.text,r=n.rowData,a=n.index,s=n.columnEmptyText,l=n.counter,o=n.type,c=n.subName,d=n.marginSM,v=n.editableUtils,f=l.action,y=l.prefixName,b=v.isEditable(i(i({},r),{},{index:a})),m=b.isEditable,x=b.recordKey,R=e.renderText,g=R===void 0?function(E){return E}:R,p=g(t,r,a,f),C=m&&!ws(t,r,a,e==null?void 0:e.editable)?"edit":"read",w=zr({text:p,valueType:e.valueType||"text",index:a,rowData:r,subName:c,columnProps:i(i({},e),{},{entry:r,entity:r}),counter:l,columnEmptyText:s,type:o,recordKey:x,mode:C,prefixName:y,editableUtils:v}),k=C==="edit"?w:Sl(w,e,p);if(C==="edit")return e.valueType==="option"?u.jsx("div",{style:{display:"flex",alignItems:"center",gap:d,justifyContent:e.align==="center"?"center":"flex-start"},children:v.actionRender(i(i({},r),{},{index:e.index||a}))}):k;if(!e.render){var z=se.isValidElement(k)||["string","number"].includes(ze(k));return!Qa(k)&&z?k:null}var M=e.render(k,r,a,i(i({},f),v),i(i({},e),{},{isEditable:m,type:"table"}));return Ni(M)?M:M&&e.valueType==="option"&&Array.isArray(M)?u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8},children:M}):M}function Vr(n,e){var t,r=n.columns,a=n.counter,s=n.columnEmptyText,l=n.type,o=n.editableUtils,c=n.marginSM,d=n.rowKey,v=d===void 0?"id":d,f=n.childrenColumnName,y=f===void 0?"children":f,b=new Map;return r==null||(t=r.map(function(m,x){if(m===cn.EXPAND_COLUMN||m===cn.SELECTION_COLUMN)return m;var R=m,g=R.key,p=R.dataIndex,C=R.valueEnum,w=R.valueType,k=w===void 0?"text":w,z=R.children,M=R.onFilter,E=R.filters,K=E===void 0?[]:E,$=Mn(g||(p==null?void 0:p.toString()),[e==null?void 0:e.key,x].filter(Boolean).join("-")),T=!C&&!k&&!z;if(T)return i({index:x},m);var N=m===cn.EXPAND_COLUMN||m===cn.SELECTION_COLUMN;if(N)return{index:x,isExtraColumns:!0,hideInSearch:!0,hideInTable:!1,hideInForm:!0,hideInSetting:!0,extraColumn:m};var H=a.columnsMap[$]||{fixed:m.fixed},L=function(){return M===!0?function(q,ee){return Ts(q,ee,p)}:Br(M)},P=v,O=i(i({index:x,key:$},m),{},{title:Rs(m),valueEnum:C,filters:K===!0?rl(Ge(C,void 0)).filter(function(A){return A&&A.value!=="all"}):K,onFilter:L(),fixed:H.fixed,width:m.width||(m.fixed?200:void 0),children:m.children?Vr(i(i({},n),{},{columns:(m==null?void 0:m.children)||[]}),i(i({},m),{},{key:$})):void 0,render:function(q,ee,_){typeof v=="function"&&(P=v(ee,_));var W;if(ze(ee)==="object"&&ee!==null&&Reflect.has(ee,P)){var U;W=ee[P];var D=b.get(W)||[];(U=ee[y])===null||U===void 0||U.forEach(function(j){var B=j[P];b.has(B)||b.set(B,D.concat([_,y]))})}var I={columnProps:m,text:q,rowData:ee,index:_,columnEmptyText:s,counter:a,type:l,marginSM:c,subName:b.get(W),editableUtils:o};return Ps(I)}});return wl(O)}))===null||t===void 0?void 0:t.filter(function(m){return!m.hideInTable})}var Is=["rowKey","tableClassName","defaultClassName","action","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","hideToolbar","searchNode","style","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey"],Fs=["cardBordered","request","className","params","defaultData","headerTitle","postData","ghost","pagination","actionRef","columns","toolBarRender","optionsRender","onLoad","onRequestError","style","cardProps","tableStyle","tableClassName","columnsStateMap","onColumnsStateChange","options","search","name","onLoadingChange","rowSelection","beforeSearchSubmit","tableAlertRender","defaultClassName","formRef","type","columnEmptyText","toolbar","rowKey","manualRequest","polling","tooltip","revalidateOnFocus","searchFormRender"];function Es(n){var e=n.rowKey,t=n.tableClassName,r=n.defaultClassName,a=n.action,s=n.tableColumn,l=n.type,o=n.pagination,c=n.rowSelection,d=n.size;n.defaultSize;var v=n.tableStyle,f=n.toolbarDom,y=n.hideToolbar,b=n.searchNode,m=n.style,x=n.cardProps,R=n.alertDom;n.name;var g=n.onSortChange,p=n.onFilterChange,C=n.options,w=n.isLightFilter,k=n.className,z=n.cardBordered,M=n.editableUtils,E=n.getRowKey,K=we(n,Is),$=h.useContext(fn),T=h.useMemo(function(){var D=function I(j){return j.map(function(B){var F=Mn(B.key,B.index),V=$.columnsMap[F];return V&&V.show===!1?!1:B.children?i(i({},B),{},{children:I(B.children)}):B}).filter(Boolean)};return D(s)},[$.columnsMap,s]),N=h.useMemo(function(){var D=[],I=function j(B){for(var F=0;F<B.length;F++){var V=B[F];V.children?j(V.children):D.push(V)}};return I(T),D==null?void 0:D.every(function(j){return!!j.filters&&!!j.onFilter||j.filters===void 0&&j.onFilter===void 0})},[T]),H=function(I){var j=M.newLineRecord||{},B=j.options,F=j.defaultValue,V=(B==null?void 0:B.position)==="top";if(B!=null&&B.parentKey){var Y,X,J={data:I,getRowKey:E,row:i(i({},F),{},{map_row_parentKey:(Y=$e(B.parentKey))===null||Y===void 0?void 0:Y.toString()}),key:B==null?void 0:B.recordKey,childrenColumnName:((X=n.expandable)===null||X===void 0?void 0:X.childrenColumnName)||"children"};return An(J,V?"top":"update")}if(V)return[F].concat(Oe(a.dataSource));if(o&&o!==null&&o!==void 0&&o.current&&o!==null&&o!==void 0&&o.pageSize){var G=Oe(a.dataSource);return(o==null?void 0:o.pageSize)>G.length?(G.push(F),G):(G.splice((o==null?void 0:o.current)*(o==null?void 0:o.pageSize)-1,0,F),G)}return[].concat(Oe(a.dataSource),[F])},L=function(){return i(i({},K),{},{size:d,rowSelection:c===!1?void 0:c,className:t,style:v,columns:T.map(function(I){return I.isExtraColumns?I.extraColumn:I}),loading:a.loading,dataSource:M.newLineRecord?H(a.dataSource):a.dataSource,pagination:o,onChange:function(j,B,F,V){var Y;if((Y=K.onChange)===null||Y===void 0||Y.call(K,j,B,F,V),N||p(Ye(B)),Array.isArray(F)){var X=F.reduce(function(ne,he){return i(i({},ne),{},S({},"".concat(he.field),he.order))},{});g(Ye(X))}else{var J,G=(J=F.column)===null||J===void 0?void 0:J.sorter,ce=(G==null?void 0:G.toString())===G;g(Ye(S({},"".concat(ce?G:F.field),F.order)))}}})},P=h.useMemo(function(){return n.search===!1&&!n.headerTitle&&n.toolBarRender===!1},[]),O=u.jsx(Xa.Provider,{value:{grid:!1,colProps:void 0,rowProps:void 0},children:u.jsx(cn,i(i({},L()),{},{rowKey:e}))}),A=n.tableViewRender?n.tableViewRender(i(i({},L()),{},{rowSelection:c!==!1?c:void 0}),O):O,q=h.useMemo(function(){if(n.editable&&!n.name){var D,I,j;return u.jsxs(u.Fragment,{children:[f,R,h.createElement(Zn,i(i({},(D=n.editable)===null||D===void 0?void 0:D.formProps),{},{formRef:(I=n.editable)===null||I===void 0||(I=I.formProps)===null||I===void 0?void 0:I.formRef,component:!1,form:(j=n.editable)===null||j===void 0?void 0:j.form,onValuesChange:M.onValuesChange,key:"table",submitter:!1,omitNil:!1,dateFormatter:n.dateFormatter}),A)]})}return u.jsxs(u.Fragment,{children:[f,R,A]})},[R,n.loading,!!n.editable,A,f]),ee=h.useMemo(function(){return x===!1||P===!0||n.name?{}:y?{padding:0}:f?{paddingBlockStart:0}:f&&o===!1?{paddingBlockStart:0}:{padding:0}},[P,o,n.name,x,f,y]),_=x===!1||P===!0||n.name?q:u.jsx(_n,i(i({ghost:n.ghost,bordered:_r("table",z),bodyStyle:ee},x),{},{children:q})),W=function(){return n.tableRender?n.tableRender(n,_,{toolbar:f||void 0,alert:R||void 0,table:A||void 0}):_},U=u.jsxs("div",{className:Se(k,S({},"".concat(r,"-polling"),a.pollingLoading)),style:m,ref:$.rootDomRef,children:[w?null:b,l!=="form"&&n.tableExtraRender&&u.jsx("div",{className:Se(k,"".concat(r,"-extra")),children:n.tableExtraRender(n,a.dataSource||[])}),l!=="form"&&W()]});return!C||!(C!=null&&C.fullScreen)?U:u.jsx(Ae,{getPopupContainer:function(){return $.rootDomRef.current||document.body},children:U})}var js={},Ns=function(e){var t;e.cardBordered;var r=e.request,a=e.className,s=e.params,l=s===void 0?js:s,o=e.defaultData,c=e.headerTitle,d=e.postData,v=e.ghost,f=e.pagination,y=e.actionRef,b=e.columns,m=b===void 0?[]:b,x=e.toolBarRender,R=e.optionsRender,g=e.onLoad,p=e.onRequestError;e.style,e.cardProps,e.tableStyle,e.tableClassName,e.columnsStateMap,e.onColumnsStateChange;var C=e.options,w=e.search,k=e.name,z=e.onLoadingChange,M=e.rowSelection,E=M===void 0?!1:M,K=e.beforeSearchSubmit,$=e.tableAlertRender,T=e.defaultClassName,N=e.formRef,H=e.type,L=H===void 0?"table":H,P=e.columnEmptyText,O=P===void 0?"-":P,A=e.toolbar,q=e.rowKey,ee=e.manualRequest,_=e.polling,W=e.tooltip,U=e.revalidateOnFocus,D=U===void 0?!1:U,I=e.searchFormRender,j=we(e,Fs),B=hs(e.defaultClassName),F=B.wrapSSR,V=B.hashId,Y=Se(T,a,V),X=h.useRef(),J=h.useRef(),G=N||J;h.useImperativeHandle(y,function(){return X.current});var ce=Ee(E?(E==null?void 0:E.defaultSelectedRowKeys)||[]:void 0,{value:E?E.selectedRowKeys:void 0}),ne=ue(ce,2),he=ne[0],ae=ne[1],re=Ee(function(){if(!(ee||w!==!1))return{}}),me=ue(re,2),de=me[0],Be=me[1],ie=Ee({}),vn=ue(ie,2),oe=vn[0],Le=vn[1],mn=Ee({}),Bn=ue(mn,2),an=Bn[0],hn=Bn[1];h.useEffect(function(){var Z=Bi(m),te=Z.sort,fe=Z.filter;Le(fe),hn(te)},[]);var xn=De(),Ln=ze(f)==="object"?f:{defaultCurrent:1,defaultPageSize:20,pageSize:20,current:1},Te=h.useContext(fn),On=h.useMemo(function(){if(r)return function(){var Z=be(le().mark(function te(fe){var Ce,_e;return le().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ce=i(i(i({},fe||{}),de),l),delete Ce._timestamp,Ue.next=4,r(Ce,an,oe);case 4:return _e=Ue.sent,Ue.abrupt("return",_e);case 6:case"end":return Ue.stop()}},te)}));return function(te){return Z.apply(this,arguments)}}()},[de,l,oe,an,r]),pe=ys(On,o,{pageInfo:f===!1?!1:Ln,loading:e.loading,dataSource:e.dataSource,onDataSourceChange:e.onDataSourceChange,onLoad:g,onLoadingChange:z,onRequestError:p,postData:d,revalidateOnFocus:D,manual:de===void 0,polling:_,effects:[wn(l),wn(de),wn(oe),wn(an)],debounceTime:e.debounceTime,onPageInfoChange:function(te){var fe,Ce;!f||!On||(f==null||(fe=f.onChange)===null||fe===void 0||fe.call(f,te.current,te.pageSize),f==null||(Ce=f.onShowSizeChange)===null||Ce===void 0||Ce.call(f,te.current,te.pageSize))}});h.useEffect(function(){var Z;if(!(e.manualRequest||!e.request||!D||(Z=e.form)!==null&&Z!==void 0&&Z.ignoreRules)){var te=function(){document.visibilityState==="visible"&&pe.reload()};return document.addEventListener("visibilitychange",te),function(){return document.removeEventListener("visibilitychange",te)}}},[]);var zn=se.useRef(new Map),pn=se.useMemo(function(){return typeof q=="function"?q:function(Z,te){var fe;return te===-1?Z==null?void 0:Z[q]:e.name?te==null?void 0:te.toString():(fe=Z==null?void 0:Z[q])!==null&&fe!==void 0?fe:te==null?void 0:te.toString()}},[e.name,q]);h.useMemo(function(){var Z;if((Z=pe.dataSource)!==null&&Z!==void 0&&Z.length){var te=pe.dataSource.map(function(fe){var Ce=pn(fe,-1);return zn.current.set(Ce,fe),Ce});return te}return[]},[pe.dataSource,pn]);var ln=h.useMemo(function(){var Z=f===!1?!1:i({},f),te=i(i({},pe.pageInfo),{},{setPageInfo:function(Ce){var _e=Ce.pageSize,tn=Ce.current,Ue=pe.pageInfo;if(_e===Ue.pageSize||Ue.current===1){pe.setPageInfo({pageSize:_e,current:tn});return}r&&pe.setDataSource([]),pe.setPageInfo({pageSize:_e,current:L==="list"?tn:1})}});return r&&Z&&(delete Z.onChange,delete Z.onShowSizeChange),Fi(Z,te,xn)},[f,pe,xn]);ht(function(){var Z;e.request&&!Xo(l)&&pe.dataSource&&!Ii(pe.dataSource,o)&&(pe==null||(Z=pe.pageInfo)===null||Z===void 0?void 0:Z.current)!==1&&pe.setPageInfo({current:1})},[l]),Te.setPrefixName(e.name);var Fe=h.useCallback(function(){E&&E.onChange&&E.onChange([],[],{type:"none"}),ae([])},[E,ae]);Te.propsRef.current=e;var ye=Ml(i(i({},e.editable),{},{tableName:e.name,getRowKey:pn,childrenColumnName:((t=e.expandable)===null||t===void 0?void 0:t.childrenColumnName)||"children",dataSource:pe.dataSource||[],setDataSource:function(te){var fe,Ce;(fe=e.editable)===null||fe===void 0||(Ce=fe.onValuesChange)===null||Ce===void 0||Ce.call(fe,void 0,te),pe.setDataSource(te)}})),Pe=Gn===null||Gn===void 0?void 0:Gn.useToken(),nn=Pe.token;Ei(X,pe,{fullScreen:function(){var te;if(!(!((te=Te.rootDomRef)!==null&&te!==void 0&&te.current)||!document.fullscreenEnabled))if(document.fullscreenElement)document.exitFullscreen();else{var fe;(fe=Te.rootDomRef)===null||fe===void 0||fe.current.requestFullscreen()}},onCleanSelected:function(){Fe()},resetAll:function(){var te;Fe(),Le({}),hn({}),Te.setKeyWords(void 0),pe.setPageInfo({current:1}),G==null||(te=G.current)===null||te===void 0||te.resetFields(),Be({})},editableUtils:ye}),Te.setAction(X.current);var je=h.useMemo(function(){var Z;return Vr({columns:m,counter:Te,columnEmptyText:O,type:L,marginSM:nn.marginSM,editableUtils:ye,rowKey:q,childrenColumnName:(Z=e.expandable)===null||Z===void 0?void 0:Z.childrenColumnName}).sort(bs(Te.columnsMap))},[m,Te==null?void 0:Te.sortKeyColumns,Te==null?void 0:Te.columnsMap,O,L,ye.editableKeys&&ye.editableKeys.join(",")]);xr(function(){if(je&&je.length>0){var Z=je.map(function(te){return Mn(te.key,te.index)});Te.setSortKeyColumns(Z)}},[je],["render","renderFormItem"],100),ht(function(){var Z=pe.pageInfo,te=f||{},fe=te.current,Ce=fe===void 0?Z==null?void 0:Z.current:fe,_e=te.pageSize,tn=_e===void 0?Z==null?void 0:Z.pageSize:_e;f&&(Ce||tn)&&(tn!==(Z==null?void 0:Z.pageSize)||Ce!==(Z==null?void 0:Z.current))&&pe.setPageInfo({pageSize:tn||Z.pageSize,current:Ce||Z.current})},[f&&f.pageSize,f&&f.current]);var He=i(i({selectedRowKeys:he},E),{},{onChange:function(te,fe,Ce){E&&E.onChange&&E.onChange(te,fe,Ce),ae(te)}}),qe=w!==!1&&(w==null?void 0:w.filterType)==="light",on=h.useCallback(function(Z){if(C&&C.search){var te,fe,Ce=C.search===!0?{}:C.search,_e=Ce.name,tn=_e===void 0?"keyword":_e,Ue=(te=C.search)===null||te===void 0||(fe=te.onSearch)===null||fe===void 0?void 0:fe.call(te,Te.keyWords);if(Ue!==!1){Be(i(i({},Z),{},S({},tn,Te.keyWords)));return}}Be(Z)},[Te.keyWords,C,Be]),Vn=h.useMemo(function(){if(ze(pe.loading)==="object"){var Z;return((Z=pe.loading)===null||Z===void 0?void 0:Z.spinning)||!1}return pe.loading},[pe.loading]),Kt=h.useMemo(function(){var Z=w===!1&&L!=="form"?null:u.jsx(Hi,{pagination:ln,beforeSearchSubmit:K,action:X,columns:m,onFormSearchSubmit:function(fe){on(fe)},ghost:v,onReset:e.onReset,onSubmit:e.onSubmit,loading:!!Vn,manualRequest:ee,search:w,form:e.form,formRef:G,type:e.type||"table",cardBordered:e.cardBordered,dateFormatter:e.dateFormatter});return I&&Z?u.jsx(u.Fragment,{children:I(e,Z)}):Z},[K,G,v,Vn,ee,on,ln,e,m,w,I,L]),$t=h.useMemo(function(){return he==null?void 0:he.map(function(Z){var te;return(te=zn.current)===null||te===void 0?void 0:te.get(Z)})},[pe.dataSource,he]),kt=h.useMemo(function(){return C===!1&&!c&&!x&&!A&&!qe},[C,c,x,A,qe]),Gr=x===!1?null:u.jsx(fs,{headerTitle:c,hideToolbar:kt,selectedRows:$t,selectedRowKeys:he,tableColumn:je,tooltip:W,toolbar:A,onFormSearchSubmit:function(te){Be(i(i({},de),te))},searchNode:qe?Kt:null,options:C,optionsRender:R,actionRef:X,toolBarRender:x}),qr=E!==!1?u.jsx(Di,{selectedRowKeys:he,selectedRows:$t,onCleanSelected:Fe,alertOptionRender:j.tableAlertOptionRender,alertInfoRender:$,alwaysShowAlert:E==null?void 0:E.alwaysShowAlert}):null;return F(u.jsx(Es,i(i({},e),{},{name:k,defaultClassName:T,size:Te.tableSize,onSizeChange:Te.setTableSize,pagination:ln,searchNode:Kt,rowSelection:E!==!1?He:void 0,className:Y,tableColumn:je,isLightFilter:qe,action:pe,alertDom:qr,toolbarDom:Gr,hideToolbar:kt,onSortChange:function(te){an!==te&&hn(te??{})},onFilterChange:function(te){te!==oe&&Le(te)},editableUtils:ye,getRowKey:pn})))},Wr=function(e){var t=h.useContext(Ae.ConfigContext),r=t.getPrefixCls,a=e.ErrorBoundary===!1?se.Fragment:e.ErrorBoundary||cl;return u.jsx(Ai,{initValue:e,children:u.jsx(Pr,{needDeps:!0,children:u.jsx(a,{children:u.jsx(Ns,i({defaultClassName:"".concat(r("pro-table"))},e))})})})};Wr.Summary=cn.Summary;const or="basic-table";function Ms(n){const e=h.useRef(null),t=sl(e);return h.useEffect(()=>{if(e.current&&(t!=null&&t.height)){const r=t.height,a=e.current.getElementsByClassName(or)[0];if(!a)return;const s=a.querySelector("div.ant-table-body");if(!s)return;const l=s.getBoundingClientRect(),o=e.current.getBoundingClientRect(),c=l.top-o.top,v=Math.max(200,r-c-56);s.setAttribute("style",`overflow-y: scroll;height: ${v}px;max-height: ${v}px;`)}},[t]),u.jsx("div",{className:"h-full",ref:e,children:u.jsx(Wr,{...n,rootClassName:or,scroll:{y:"0"}})})}var ke,ve,kn,Ke,gn,Tn,sn,Qe,Dn,Pn,In,yn,bn,un,Fn,ge,Kn,Ct,xt,Rt,wt,Tt,Pt,It,Hr,cr,Bs=(cr=class extends ea{constructor(e,t){super();Ne(this,ge);Ne(this,ke);Ne(this,ve);Ne(this,kn);Ne(this,Ke);Ne(this,gn);Ne(this,Tn);Ne(this,sn);Ne(this,Qe);Ne(this,Dn);Ne(this,Pn);Ne(this,In);Ne(this,yn);Ne(this,bn);Ne(this,un);Ne(this,Fn,new Set);this.options=t,xe(this,ke,e),xe(this,Qe,null),xe(this,sn,Vt()),this.options.experimental_prefetchInRender||Q(this,sn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,ve).addObserver(this),ir(Q(this,ve),this.options)?Ie(this,ge,Kn).call(this):this.updateResult(),Ie(this,ge,wt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ft(Q(this,ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ft(Q(this,ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ie(this,ge,Tt).call(this),Ie(this,ge,Pt).call(this),Q(this,ve).removeObserver(this)}setOptions(e,t){const r=this.options,a=Q(this,ve);if(this.options=Q(this,ke).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xe(this.options.enabled,Q(this,ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ie(this,ge,It).call(this),Q(this,ve).setOptions(this.options),r._defaulted&&!dt(this.options,r)&&Q(this,ke).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,ve),observer:this});const s=this.hasListeners();s&&sr(Q(this,ve),a,this.options,r)&&Ie(this,ge,Kn).call(this),this.updateResult(t),s&&(Q(this,ve)!==a||Xe(this.options.enabled,Q(this,ve))!==Xe(r.enabled,Q(this,ve))||Hn(this.options.staleTime,Q(this,ve))!==Hn(r.staleTime,Q(this,ve)))&&Ie(this,ge,Ct).call(this);const l=Ie(this,ge,xt).call(this);s&&(Q(this,ve)!==a||Xe(this.options.enabled,Q(this,ve))!==Xe(r.enabled,Q(this,ve))||l!==Q(this,un))&&Ie(this,ge,Rt).call(this,l)}getOptimisticResult(e){const t=Q(this,ke).getQueryCache().build(Q(this,ke),e),r=this.createResult(t,e);return As(this,r)&&(xe(this,Ke,r),xe(this,Tn,this.options),xe(this,gn,Q(this,ve).state)),r}getCurrentResult(){return Q(this,Ke)}trackResult(e,t){const r={};return Object.keys(e).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),t==null||t(a),e[a])})}),r}trackProp(e){Q(this,Fn).add(e)}getCurrentQuery(){return Q(this,ve)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Q(this,ke).defaultQueryOptions(e),r=Q(this,ke).getQueryCache().build(Q(this,ke),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Ie(this,ge,Kn).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,Ke)))}createResult(e,t){var E;const r=Q(this,ve),a=this.options,s=Q(this,Ke),l=Q(this,gn),o=Q(this,Tn),d=e!==r?e.state:Q(this,kn),{state:v}=e;let f={...v},y=!1,b;if(t._optimisticResults){const K=this.hasListeners(),$=!K&&ir(e,t),T=K&&sr(e,r,t,a);($||T)&&(f={...f,...aa(v.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:m,errorUpdatedAt:x,status:R}=f;if(t.select&&f.data!==void 0)if(s&&f.data===(l==null?void 0:l.data)&&t.select===Q(this,Dn))b=Q(this,Pn);else try{xe(this,Dn,t.select),b=t.select(f.data),b=Ht(s==null?void 0:s.data,b,t),xe(this,Pn,b),xe(this,Qe,null)}catch(K){xe(this,Qe,K)}else b=f.data;if(t.placeholderData!==void 0&&b===void 0&&R==="pending"){let K;if(s!=null&&s.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData))K=s.data;else if(K=typeof t.placeholderData=="function"?t.placeholderData((E=Q(this,In))==null?void 0:E.state.data,Q(this,In)):t.placeholderData,t.select&&K!==void 0)try{K=t.select(K),xe(this,Qe,null)}catch($){xe(this,Qe,$)}K!==void 0&&(R="success",b=Ht(s==null?void 0:s.data,K,t),y=!0)}Q(this,Qe)&&(m=Q(this,Qe),b=Q(this,Pn),x=Date.now(),R="error");const g=f.fetchStatus==="fetching",p=R==="pending",C=R==="error",w=p&&g,k=b!==void 0,M={status:R,fetchStatus:f.fetchStatus,isPending:p,isSuccess:R==="success",isError:C,isInitialLoading:w,isLoading:w,data:b,dataUpdatedAt:f.dataUpdatedAt,error:m,errorUpdatedAt:x,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:g,isRefetching:g&&!p,isLoadingError:C&&!k,isPaused:f.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:C&&k,isStale:At(e,t),refetch:this.refetch,promise:Q(this,sn)};if(this.options.experimental_prefetchInRender){const K=N=>{M.status==="error"?N.reject(M.error):M.data!==void 0&&N.resolve(M.data)},$=()=>{const N=xe(this,sn,M.promise=Vt());K(N)},T=Q(this,sn);switch(T.status){case"pending":e.queryHash===r.queryHash&&K(T);break;case"fulfilled":(M.status==="error"||M.data!==T.value)&&$();break;case"rejected":(M.status!=="error"||M.error!==T.reason)&&$();break}}return M}updateResult(e){const t=Q(this,Ke),r=this.createResult(Q(this,ve),this.options);if(xe(this,gn,Q(this,ve).state),xe(this,Tn,this.options),Q(this,gn).data!==void 0&&xe(this,In,Q(this,ve)),dt(r,t))return;xe(this,Ke,r);const a={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,o=typeof l=="function"?l():l;if(o==="all"||!o&&!Q(this,Fn).size)return!0;const c=new Set(o??Q(this,Fn));return this.options.throwOnError&&c.add("error"),Object.keys(Q(this,Ke)).some(d=>{const v=d;return Q(this,Ke)[v]!==t[v]&&c.has(v)})};(e==null?void 0:e.listeners)!==!1&&s()&&(a.listeners=!0),Ie(this,ge,Hr).call(this,{...a,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ie(this,ge,wt).call(this)}},ke=new WeakMap,ve=new WeakMap,kn=new WeakMap,Ke=new WeakMap,gn=new WeakMap,Tn=new WeakMap,sn=new WeakMap,Qe=new WeakMap,Dn=new WeakMap,Pn=new WeakMap,In=new WeakMap,yn=new WeakMap,bn=new WeakMap,un=new WeakMap,Fn=new WeakMap,ge=new WeakSet,Kn=function(e){Ie(this,ge,It).call(this);let t=Q(this,ve).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(na)),t},Ct=function(){Ie(this,ge,Tt).call(this);const e=Hn(this.options.staleTime,Q(this,ve));if(ft||Q(this,Ke).isStale||!Wt(e))return;const r=ta(Q(this,Ke).dataUpdatedAt,e)+1;xe(this,yn,setTimeout(()=>{Q(this,Ke).isStale||this.updateResult()},r))},xt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,ve)):this.options.refetchInterval)??!1},Rt=function(e){Ie(this,ge,Pt).call(this),xe(this,un,e),!(ft||Xe(this.options.enabled,Q(this,ve))===!1||!Wt(Q(this,un))||Q(this,un)===0)&&xe(this,bn,setInterval(()=>{(this.options.refetchIntervalInBackground||ra.isFocused())&&Ie(this,ge,Kn).call(this)},Q(this,un)))},wt=function(){Ie(this,ge,Ct).call(this),Ie(this,ge,Rt).call(this,Ie(this,ge,xt).call(this))},Tt=function(){Q(this,yn)&&(clearTimeout(Q(this,yn)),xe(this,yn,void 0))},Pt=function(){Q(this,bn)&&(clearInterval(Q(this,bn)),xe(this,bn,void 0))},It=function(){const e=Q(this,ke).getQueryCache().build(Q(this,ke),this.options);if(e===Q(this,ve))return;const t=Q(this,ve);xe(this,ve,e),xe(this,kn,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Hr=function(e){fr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(Q(this,Ke))}),Q(this,ke).getQueryCache().notify({query:Q(this,ve),type:"observerResultsUpdated"})})},cr);function Ls(n,e){return Xe(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function ir(n,e){return Ls(n,e)||n.state.data!==void 0&&Ft(n,e,e.refetchOnMount)}function Ft(n,e,t){if(Xe(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&At(n,e)}return!1}function sr(n,e,t,r){return(n!==e||Xe(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&At(n,t)}function At(n,e){return Xe(e.enabled,n)!==!1&&n.isStaleByTime(Hn(e.staleTime,n))}function As(n,e){return!dt(n.getCurrentResult(),e)}var Ur=h.createContext(!1),Ks=()=>h.useContext(Ur);Ur.Provider;function $s(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var ks=h.createContext($s()),Ds=()=>h.useContext(ks),_s=(n,e)=>{(n.suspense||n.throwOnError)&&(e.isReset()||(n.retryOnMount=!1))},Os=n=>{h.useEffect(()=>{n.clearReset()},[n])},zs=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&sa(t,[n.error,r]),Vs=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},Ws=(n,e)=>n.isLoading&&n.isFetching&&!e,Hs=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,ur=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function Us(n,e,t){var v,f,y,b,m;const r=la(),a=Ks(),s=Ds(),l=r.defaultQueryOptions(n);(f=(v=r.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||f.call(v,l),l._optimisticResults=a?"isRestoring":"optimistic",Vs(l),_s(l,s),Os(s);const o=!r.getQueryCache().get(l.queryHash),[c]=h.useState(()=>new e(r,l)),d=c.getOptimisticResult(l);if(h.useSyncExternalStore(h.useCallback(x=>{const R=a?()=>{}:c.subscribe(fr.batchCalls(x));return c.updateResult(),R},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(l,{listeners:!1})},[l,c]),Hs(l,d))throw ur(l,c,s);if(zs({result:d,errorResetBoundary:s,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash)}))throw d.error;if((b=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||b.call(y,l,d),l.experimental_prefetchInRender&&!ft&&Ws(d,a)){const x=o?ur(l,c,s):(m=r.getQueryCache().get(l.queryHash))==null?void 0:m.promise;x==null||x.catch(ua).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function Gs(n,e){return Us(n,Bs)}const qs=[{dataIndex:"index",title:"角色编号",valueType:"indexBorder"},{title:"角色名称",dataIndex:"name",disable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"此项为必填项"}]}},{disable:!0,title:"角色标识",dataIndex:"code",filters:!0,onFilter:!0,ellipsis:!0},{disable:!0,title:"状态",dataIndex:"status",valueType:"select",render:(n,e)=>u.jsx(ka,{color:e.status===1?"success":"default",children:n}),valueEnum:{1:{text:"启用"},0:{text:"停用"}}},{title:"备注",dataIndex:"remark",search:!1},{title:"创建时间",dataIndex:"createTime",valueType:"date",search:!1}];function lu(){var g;const{t:n}=oa(),e=al(),t=Gs({queryKey:["role-menu"],queryFn:ma}),r=at({mutationFn:da}),a=at({mutationFn:fa}),s=at({mutationFn:va}),[l,o]=h.useState(!1),[c,d]=h.useState(""),[v,f]=h.useState({}),y=h.useRef(),b=async(p,C)=>{var k,z;const w=await s.mutateAsync(p);await((k=C==null?void 0:C.reload)==null?void 0:k.call(C)),(z=window.$message)==null||z.success(`操作成功 userId = ${w.result}`)},m=[...qs,{title:n("common.action"),valueType:"option",key:"option",render:(p,C,w,k)=>[u.jsx(Ut,{type:"link",size:"small",disabled:!e("update"),onClick:async()=>{const z=await a.mutateAsync({id:C.id});o(!0),d("编辑角色"),f({...C,menus:z.result})},children:n("common.edit")},"editable"),u.jsx(pr,{title:n("common.confirmDelete"),onConfirm:()=>b(C.id,k),okText:n("common.confirm"),cancelText:n("common.cancel"),children:u.jsx(Ut,{type:"link",size:"small",disabled:!e("delete"),children:n("common.delete")})},"delete")]}],x=()=>{o(!1),f({})},R=()=>{var p;(p=y.current)==null||p.reload()};return u.jsxs(pa,{className:"h-full",children:[u.jsx(Ms,{columns:m,actionRef:y,cardBordered:!0,request:async p=>{const C=await r.mutateAsync(p);return{...C,data:C.result.list,total:C.result.total}},rowKey:"id",search:{layout:"horizontal",defaultColsNumber:3,showHiddenNum:!0,labelWidth:"auto"},options:{fullScreen:!0},form:{syncToUrl:(p,C)=>C==="get"?{...p}:p},pagination:{position:["bottomRight"],defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:p=>`共 ${p} 条`},dateFormatter:"string",headerTitle:"角色管理（仅演示，操作后不生效）",toolBarRender:()=>[u.jsx(Un,{icon:u.jsx($a,{}),type:"primary",disabled:!e("add"),onClick:()=>{o(!0),d("新增角色")},children:"新增角色"},"add-role")]}),u.jsx(ca,{title:c,open:l,onCloseChange:x,detailData:v,refreshTable:R,treeData:ul(((g=t.data)==null?void 0:g.result)||[])})]})}export{lu as default};
