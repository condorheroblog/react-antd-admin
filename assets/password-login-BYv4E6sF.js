import{u as w,c as f,j as e,B as i}from"./index-DhXLOoLU.js";import{U as P,P as S}from"./rules-ChV9k-MN.js";import{a as d,j as F,u as N}from"./react-UQ1dNgW8.js";import{F as b}from"./form-mode-context-D78nou8v.js";import{aH as r,s as I,S as E,I as u,B as R}from"./antd-BreSrAtA.js";import"./faker-Dcf0Eyuj.js";const k={username:"admin",password:"123456789admin"};function U(){const[h,l]=d.useState(!1),[x]=r.useForm(),{t}=w(),[s,p]=I.useMessage(),[y]=F(),c=N(),g=f(n=>n.login),{setFormMode:a}=d.useContext(b),j=async n=>{l(!0),s==null||s.loading(t("authority.loginInProgress"),0),g(n).then(()=>{var m;s==null||s.destroy(),(m=window.$message)==null||m.success(t("authority.loginSuccess"));const o=y.get("redirect");c(o?`/${o.slice(1)}`:"/home")}).finally(()=>{s==null||s.destroy(),setTimeout(()=>{var o;(o=window.$message)==null||o.destroy(),l(!1)},1e3)})};return e.jsxs(e.Fragment,{children:[p,e.jsxs(E,{direction:"vertical",children:[e.jsxs("h2",{className:"text-color-text mb-3 text-3xl font-bold leading-9 tracking-tight lg:text-4xl",children:[t("authority.welcomeBack"),"Â  ðŸ‘"]}),e.jsx("p",{className:"lg:text-base text-sm text-color-text-secondary",children:t("authority.loginDescription")})]}),e.jsxs(r,{name:"passwordLoginForm",form:x,layout:"vertical",initialValues:k,onFinish:j,children:[e.jsx(r.Item,{label:t("authority.username"),name:"username",rules:P(t),children:e.jsx(u,{placeholder:t("form.username.required")})}),e.jsx(r.Item,{label:t("authority.password"),name:"password",rules:S(t),children:e.jsx(u.Password,{placeholder:t("form.password.required")})}),e.jsxs(r.Item,{children:[e.jsxs("div",{className:"flex justify-between mb-5 -mt-1 text-sm",children:[e.jsx(i,{type:"link",className:"p-0",onPointerDown:()=>{a("codeLogin")},children:t("authority.codeLogin")}),e.jsx(i,{type:"link",className:"p-0",onPointerDown:()=>{a("forgotPassword")},children:t("authority.forgotPassword")})]}),e.jsx(R,{block:!0,type:"primary",htmlType:"submit",loading:h,children:t("authority.login")})]}),e.jsxs("div",{className:"text-sm text-center",children:[t("authority.noAccountYet"),e.jsx(i,{type:"link",className:"px-1",onPointerDown:()=>{a("register")},children:t("authority.goToRegister")})]})]})]})}export{U as PasswordLogin};
