import{u as w,c as f,j as e,B as i}from"./index-BNEG2OEn.js";import{U as S,P}from"./rules-ChV9k-MN.js";import{a as d,j as F,u as N}from"./react-UQ1dNgW8.js";import{F as b}from"./form-mode-context-D78nou8v.js";import{aG as r,s as I,S as E,I as u,B as R}from"./antd-CuXJcghv.js";import"./faker-Dcf0Eyuj.js";const T={username:"admin",password:"123456789admin"};function U(){const[h,l]=d.useState(!1),[x]=r.useForm(),{t:s}=w(),[t,p]=I.useMessage(),[y]=F(),c=N(),g=f(n=>n.login),{setFormMode:a}=d.useContext(b),j=async n=>{l(!0),t==null||t.loading(s("authority.loginInProgress"),0),g(n).then(()=>{var m;t==null||t.destroy(),(m=window.$message)==null||m.success(s("authority.loginSuccess"));const o=y.get("redirect");c(o?`/${o.slice(1)}`:"/home")}).finally(()=>{t==null||t.destroy(),setTimeout(()=>{var o;(o=window.$message)==null||o.destroy(),l(!1)},1e3)})};return e.jsxs(e.Fragment,{children:[p,e.jsxs(E,{direction:"vertical",children:[e.jsxs("h2",{className:"text-colorText mb-3 text-3xl font-bold leading-9 tracking-tight lg:text-4xl",children:[s("authority.welcomeBack"),"Â  ðŸ‘"]}),e.jsx("p",{className:"lg:text-base text-sm text-colorTextSecondary",children:s("authority.loginDescription")})]}),e.jsxs(r,{name:"passwordLoginForm",form:x,layout:"vertical",initialValues:T,onFinish:j,children:[e.jsx(r.Item,{label:s("authority.username"),name:"username",rules:S(s),children:e.jsx(u,{placeholder:s("form.username.required")})}),e.jsx(r.Item,{label:s("authority.password"),name:"password",rules:P(s),children:e.jsx(u.Password,{placeholder:s("form.password.required")})}),e.jsxs(r.Item,{children:[e.jsxs("div",{className:"flex justify-between mb-5 -mt-1 text-sm",children:[e.jsx(i,{type:"link",className:"p-0",onPointerDown:()=>{a("codeLogin")},children:s("authority.codeLogin")}),e.jsx(i,{type:"link",className:"p-0",onPointerDown:()=>{a("forgotPassword")},children:s("authority.forgotPassword")})]}),e.jsx(R,{block:!0,type:"primary",htmlType:"submit",loading:h,children:s("authority.login")})]}),e.jsxs("div",{className:"text-sm text-center",children:[s("authority.noAccountYet"),e.jsx(i,{type:"link",className:"px-1",onPointerDown:()=>{a("register")},children:s("authority.goToRegister")})]})]})]})}export{U as PasswordLogin};
