import{u as w,j as o,B as f,c as i,D as M}from"./index-DCJLHlK_.js";import{f as k,D as R,a as S}from"./detail-BolNr-hW.js";import{u as $}from"./index-BaX6mhwG.js";import{a}from"./react-B2eEhSVY.js";import{B as g}from"./index-BWNyU8Yp.js";import{B as I}from"./index-DZzuXn9x.js";import{getConstantColumns as O}from"./constants-Bn8aQLIV.js";import{aK as P,l as z,aL as A}from"./antd-CVnYY_BH.js";import"./faker-Dcf0Eyuj.js";import"./index-DpdFPTZV.js";import"./index-Cxr5CkKM.js";import"./BaseForm-DTXjb35e.js";import"./index-CIMRJfbF.js";import"./index-5e-8fS5G.js";import"./index-BPh6kG-i.js";import"./index-CvZ4ZaBX.js";function Y(){const{t:e}=w(),{hasAccessByCodes:l}=$(),[h,m]=a.useState(!1),[x,c]=a.useState(""),[y,u]=a.useState({}),[C,D]=a.useState([]),d=a.useRef(null),T=async(n,t)=>{var s,p;const r=await S(n);await((s=t==null?void 0:t.reload)==null?void 0:s.call(t)),(p=window.$message)==null||p.success(`${e("common.deleteSuccess")} userId = ${r.result}`)},j=[...O(e),{title:e("common.action"),valueType:"option",key:"option",width:120,fixed:"right",render:(n,t,r,s)=>[o.jsx(f,{type:"link",size:"small",disabled:!l(i.update),onClick:async()=>{m(!0),c(e("system.menu.editMenu")),u({...t})},children:e("common.edit")},"editable"),o.jsx(P,{title:e("common.confirmDelete"),onConfirm:()=>T(t.id,s),okText:e("common.confirm"),cancelText:e("common.cancel"),children:o.jsx(f,{type:"link",size:"small",disabled:!l(i.delete),children:e("common.delete")})},"delete")]}],B=()=>{m(!1),u({})},b=()=>{var n;(n=d.current)==null||n.reload()};return o.jsxs(g,{className:"h-full",children:[o.jsx(I,{columns:j,actionRef:d,request:async n=>{const t=await k(n),r=M(t.result.list);return D(t.result.list.filter(s=>Number(s.menuType)===0).map(s=>({...s,name:e(s.name)}))),{...t,data:r,total:t.result.total}},headerTitle:`${e("common.menu.menu")} （${e("common.demoOnly")}）`,toolBarRender:()=>[o.jsx(z,{icon:o.jsx(A,{}),type:"primary",disabled:!l(i.add),onClick:()=>{m(!0),c(e("system.menu.addMenu"))},children:e("common.add")},"add-role")]}),o.jsx(R,{title:x,open:h,flatParentMenus:C,onCloseChange:B,detailData:y,refreshTable:b})]})}export{Y as default};
