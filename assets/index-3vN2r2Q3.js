var _t=n=>{throw TypeError(n)};var rt=(n,e,t)=>e.has(n)||_t("Cannot "+t);var J=(n,e,t)=>(rt(n,e,"read from private field"),t?t.call(n):e.get(n)),Ne=(n,e,t)=>e.has(n)?_t("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),xe=(n,e,t,r)=>(rt(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Te=(n,e,t)=>(rt(n,e,"access private method"),t);import{f as ta,g as dt,h as fr,i as ra,j as u,S as aa,p as Ot,k as Ye,s as ft,m as Gn,n as la,o as vt,q as zt,t as oa,v as ia,w as sa,x as Wt,y as vr,z as ua,u as ca,B as Vt}from"./index-DJyEOzCq.js";import{u as _e,a as da,o as mr,r as Qe,c as et,g as fa,b as en,d as Oe,e as hr,f as qn,h as Re,i as pr,P as gr,m as yr,j as at,k as He,l as va,n as br,F as Sr,B as On,p as ma,q as ha,s as mt,t as Rn,v as Cr,w as xr,x as Rr,y as wr,z as Jn,A as pa,C as Ht,D as Tn,E as ga,G as ya,H as ba,I as Sa,J as ht,K as pt,L as Pr,M as Ca,N as gt,O as xa,Q as Ra,R as wa,S as Ut,T as Pa,U as Gt,V as qt,W as lt,X as Qt,Y as Ia,Z as Ir,_ as Qn,$ as yt,a0 as Ta,a1 as Fa,a2 as ja,a3 as Ea,a4 as Ma,a5 as ot,a6 as Na,a7 as La,a8 as $a,a9 as Ba,aa as Aa}from"./detail-T1qGlGN_.js";import{r as h,R as ie,c as bt}from"./react-jQ6qJC49.js";import{ar as Ka,as as Et,at as Mt,au as Nt,av as S,d as Ze,b as Lt,ab as ka,aw as i,ax as we,ao as Ke,ay as nn,az as ue,aa as Me,P as Tr,aA as $t,aB as Da,aC as ge,T as fn,q as Fr,M as _a,aD as Oa,aE as Fe,aF as vn,a3 as Xt,aG as Se,aH as le,e as Ve,aI as Ue,aJ as jr,aK as za,aL as Yn,aM as Er,ad as an,ae as Le,aN as nt,H as Nn,aO as Bt,aP as Wa,aQ as Mr,u as wn,aq as Nr,aR as Va,a6 as Ha,G as St,aS as Lr,aT as Jt,B as Xn,l as Ua,aU as dn,aV as Ga,k as qa,aW as Qa,C as Xa,E as Ja,z as Ya,m as $r,aX as Za,v as el,w as nl,aY as tl,aZ as rl,ac as al}from"./antd-BKx5MvQQ.js";import"./faker-CiQWN7dT.js";function Yt(n,e){if(n===e)return!0;for(var t=0;t<n.length;t++)if(!Object.is(n[t],e[t]))return!1;return!0}var Br=function(n){var e=ta(n);h.useEffect(function(){return function(){e.current()}},[])},Ar=function(n){var e=function(t,r,a){var s=h.useRef(!1),l=h.useRef([]),o=h.useRef([]),c=h.useRef();n(function(){var d,v=Array.isArray(a)?a:[a],f=v.map(function(y){return dt(y)});if(!s.current){s.current=!0,l.current=f,o.current=r,c.current=t();return}(f.length!==l.current.length||!Yt(l.current,f)||!Yt(o.current,r))&&((d=c.current)===null||d===void 0||d.call(c),l.current=f,o.current=r,c.current=t())}),Br(function(){var d;(d=c.current)===null||d===void 0||d.call(c),s.current=!1})};return e},ll=Ar(h.useEffect);function ol(n){var e=h.useRef(0),t=fr(h.useState(n),2),r=t[0],a=t[1],s=h.useCallback(function(l){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){a(l)})},[]);return Br(function(){cancelAnimationFrame(e.current)}),[r,s]}var il=Ar(h.useLayoutEffect),sl=ra?il:ll;function ul(n){var e=fr(ol(function(){var a=dt(n);return a?{width:a.clientWidth,height:a.clientHeight}:void 0}),2),t=e[0],r=e[1];return sl(function(){var a=dt(n);if(a){var s=new Ka(function(l){l.forEach(function(o){var c=o.target,d=c.clientWidth,v=c.clientHeight;r({width:d,height:v})})});return s.observe(a),function(){s.disconnect()}}},[],n),t}function cl(n,e,t,r){if(!Array.isArray(n))return console.warn("data must be an array"),[];const a={id:"id",parentId:"parentId",childrenList:"children"},s={},l={},o=[];for(const d of n){const v=d[a.parentId];s[v]==null&&(s[v]=[]),l[d[a.id]]=d,s[v].push(d)}for(const d of n){const v=d[a.parentId];l[v]==null&&o.push(d)}for(const d of o)c(d);function c(d){if(s[d[a.id]]!==null&&(d[a.childrenList]=s[d[a.id]]),d[a.childrenList])for(const v of d[a.childrenList])c(v)}return o}var dl=function(n){Et(t,n);var e=Mt(t);function t(){var r;Nt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Ze(r),"state",{hasError:!1,errorInfo:""}),r}return Lt(t,[{key:"componentDidCatch",value:function(a,s){console.log(a,s)}},{key:"render",value:function(){return this.state.hasError?u.jsx(ka,{status:"error",title:"Something went wrong.",extra:this.state.errorInfo}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(a){return{hasError:!0,errorInfo:a.message}}}]),t}(ie.Component),fl=function(e){var t="".concat(e.antCls,"-progress-bg");return S({},e.componentCls,{"&-multiple":{paddingBlockStart:6,paddingBlockEnd:12,paddingInline:8},"&-progress":{"&-success":S({},t,{backgroundColor:e.colorSuccess}),"&-error":S({},t,{backgroundColor:e.colorError}),"&-warning":S({},t,{backgroundColor:e.colorWarning})},"&-rule":{display:"flex",alignItems:"center","&-icon":{"&-default":{display:"flex",alignItems:"center",justifyContent:"center",width:"14px",height:"22px","&-circle":{width:"6px",height:"6px",backgroundColor:e.colorTextSecondary,borderRadius:"4px"}},"&-loading":{color:e.colorPrimary},"&-error":{color:e.colorError},"&-success":{color:e.colorSuccess}},"&-text":{color:e.colorText}}})};function vl(n){return _e("InlineErrorFormItem",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[fl(t)]})}var ml=["rules","name","children","popoverProps"],hl=["errorType","rules","name","popoverProps","children"],Kr={marginBlockStart:-5,marginBlockEnd:-5,marginInlineStart:0,marginInlineEnd:0},pl=function(e){var t=e.inputProps,r=e.input,a=e.extra,s=e.errorList,l=e.popoverProps,o=h.useState(!1),c=ue(o,2),d=c[0],v=c[1],f=h.useState([]),y=ue(f,2),b=y[0],m=y[1],x=h.useContext(Me.ConfigContext),R=x.getPrefixCls,p=R(),g=da(),w=vl("".concat(p,"-form-item-with-help")),C=w.wrapSSR,k=w.hashId;h.useEffect(function(){t.validateStatus!=="validating"&&m(t.errors)},[t.errors,t.validateStatus]);var W=mr(b.length<1?!1:d,function(j){j!==d&&v(j)}),N=t.validateStatus==="validating";return u.jsx(Tr,i(i(i({trigger:(l==null?void 0:l.trigger)||["click"],placement:(l==null?void 0:l.placement)||"topLeft"},W),{},{getPopupContainer:l==null?void 0:l.getPopupContainer,getTooltipContainer:l==null?void 0:l.getTooltipContainer,content:C(u.jsx("div",{className:"".concat(p,"-form-item ").concat(k," ").concat(g.hashId).trim(),style:{margin:0,padding:0},children:u.jsxs("div",{className:"".concat(p,"-form-item-with-help ").concat(k," ").concat(g.hashId).trim(),children:[N?u.jsx($t,{}):null,s]})}))},l),{},{children:u.jsxs(u.Fragment,{children:[r,a]})}),"popover")},gl=function(e){var t=e.rules,r=e.name,a=e.children,s=e.popoverProps,l=we(e,ml);return u.jsx(Ke.Item,i(i({name:r,rules:t,hasFeedback:!1,shouldUpdate:function(c,d){if(c===d)return!1;var v=[r].flat(1);v.length>1&&v.pop();try{return JSON.stringify(nn(c,v))!==JSON.stringify(nn(d,v))}catch{return!0}},_internalItemRender:{mark:"pro_table_render",render:function(c,d){return u.jsx(pl,i({inputProps:c,popoverProps:s},d))}}},l),{},{style:i(i({},Kr),l==null?void 0:l.style),children:a}))},yl=function(e){var t=e.errorType,r=e.rules,a=e.name,s=e.popoverProps,l=e.children,o=we(e,hl);return a&&r!==null&&r!==void 0&&r.length&&t==="popover"?u.jsx(gl,i(i({name:a,rules:r,popoverProps:s},o),{},{children:l})):u.jsx(Ke.Item,i(i({rules:r,shouldUpdate:a?function(c,d){if(c===d)return!1;var v=[a].flat(1);v.length>1&&v.pop();try{return JSON.stringify(nn(c,v))!==JSON.stringify(nn(d,v))}catch{return!0}}:void 0},o),{},{style:i(i({},Kr),o.style),name:a,children:l}))},bl=function(e){return S({},e.componentCls,{display:"inline-flex",alignItems:"center",maxWidth:"100%","&-icon":{display:"block",marginInlineStart:"4px",cursor:"pointer","&:hover":{color:e.colorPrimary}},"&-title":{display:"inline-flex",flex:"1"},"&-subtitle ":{marginInlineStart:8,color:e.colorTextSecondary,fontWeight:"normal",fontSize:e.fontSize,whiteSpace:"nowrap"},"&-title-ellipsis":{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",wordBreak:"keep-all"}})};function Sl(n){return _e("LabelIconTip",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[bl(t)]})}var xn=ie.memo(function(n){var e=n.label,t=n.tooltip,r=n.ellipsis,a=n.subTitle,s=h.useContext(Me.ConfigContext),l=s.getPrefixCls,o=l("pro-core-label-tip"),c=Sl(o),d=c.wrapSSR,v=c.hashId;if(!t&&!a)return u.jsx(u.Fragment,{children:e});var f=typeof t=="string"||ie.isValidElement(t)?{title:t}:t,y=(f==null?void 0:f.icon)||u.jsx(Da,{});return d(u.jsxs("div",{className:ge(o,v),onMouseDown:function(m){return m.stopPropagation()},onMouseLeave:function(m){return m.stopPropagation()},onMouseMove:function(m){return m.stopPropagation()},children:[u.jsx("div",{className:ge("".concat(o,"-title"),v,S({},"".concat(o,"-title-ellipsis"),r)),children:e}),a&&u.jsx("div",{className:"".concat(o,"-subtitle ").concat(v).trim(),children:a}),t&&u.jsx(fn,i(i({},f),{},{children:u.jsx("span",{className:"".concat(o,"-icon ").concat(v).trim(),children:y})}))]}))}),Cl=function(e){var t;return!!(e!=null&&(t=e.valueType)!==null&&t!==void 0&&t.toString().startsWith("date")||(e==null?void 0:e.valueType)==="select"||e!=null&&e.valueEnum)},xl=function(e){var t;return((t=e.ellipsis)===null||t===void 0?void 0:t.showTitle)===!1?!1:e.ellipsis},Rl=function(e,t,r){if(t.copyable||t.ellipsis){var a=t.copyable&&r?{text:r,tooltips:["",""]}:void 0,s=Cl(t),l=xl(t)&&r?{tooltip:(t==null?void 0:t.tooltip)!==!1&&s?u.jsx("div",{className:"pro-table-tooltip-text",children:e}):r}:!1;return u.jsx(Fr.Text,{style:{width:"100%",margin:0,padding:0},title:"",copyable:a,ellipsis:l,children:e})}return e},Ct=function(e,t,r){return t===void 0?e:Qe(e,t,r)},kr=function(e){var t=et(fa(),"4.24.0")>-1?{menu:e}:{overlay:u.jsx(_a,i({},e))};return en(t)};function wl(){var n=h.useState(!0),e=ue(n,2),t=e[1],r=h.useCallback(function(){return t(function(a){return!a})},[]);return r}function Pl(n,e){var t=h.useMemo(function(){var r={current:e};return new Proxy(r,{set:function(s,l,o){return Object.is(s[l],o)||(s[l]=o,n(t)),!0}})},[]);return t}function Il(n){var e=wl(),t=Pl(e,n);return t}var Dr=function(e){if(e&&e!==!0)return e},Tl=function(e){var t={};return Object.keys(e||{}).forEach(function(r){var a;Array.isArray(e[r])&&((a=e[r])===null||a===void 0?void 0:a.length)===0||e[r]!==void 0&&(t[r]=e[r])}),t},Fl=["map_row_parentKey"],jl=["map_row_parentKey","map_row_key"],El=["map_row_key"],it=function(e){return(Xt.warn||Xt.warning)(e)},ke=function(e){return Array.isArray(e)?e.join(","):e};function An(n,e){var t,r=n.getRowKey,a=n.row,s=n.data,l=n.childrenColumnName,o=l===void 0?"children":l,c=(t=ke(n.key))===null||t===void 0?void 0:t.toString(),d=new Map;function v(y,b,m){y.forEach(function(x,R){var p=(m||0)*10+R,g=r(x,p).toString();x&&Ue(x)==="object"&&o in x&&v(x[o]||[],g,p);var w=i(i({},x),{},{map_row_key:g,children:void 0,map_row_parentKey:b});delete w.children,b||delete w.map_row_parentKey,d.set(g,w)})}e==="top"&&d.set(c,i(i({},d.get(c)),a)),v(s),e==="update"&&d.set(c,i(i({},d.get(c)),a)),e==="delete"&&d.delete(c);var f=function(b){var m=new Map,x=[],R=function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;b.forEach(function(w){if(w.map_row_parentKey&&!w.map_row_key){var C=w.map_row_parentKey,k=we(w,Fl);if(m.has(C)||m.set(C,[]),g){var W;(W=m.get(C))===null||W===void 0||W.push(k)}}})};return R(e==="top"),b.forEach(function(p){if(p.map_row_parentKey&&p.map_row_key){var g,w=p.map_row_parentKey,C=p.map_row_key,k=we(p,jl);m.has(C)&&(k[o]=m.get(C)),m.has(w)||m.set(w,[]),(g=m.get(w))===null||g===void 0||g.push(k)}}),R(e==="update"),b.forEach(function(p){if(!p.map_row_parentKey){var g=p.map_row_key,w=we(p,El);if(g&&m.has(g)){var C=i(i({},w),{},S({},o,m.get(g)));x.push(C);return}x.push(w)}}),x};return f(d)}function Ml(n,e){var t=n.recordKey,r=n.onSave,a=n.row,s=n.children,l=n.newLineConfig,o=n.editorType,c=n.tableName,d=h.useContext(gr),v=Ke.useFormInstance(),f=Fe(!1),y=ue(f,2),b=y[0],m=y[1],x=Re(Se(le().mark(function R(){var p,g,w,C,k,W,N,j,$;return le().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,g=o==="Map",w=[c,Array.isArray(t)?t[0]:t].map(function(M){return M==null?void 0:M.toString()}).flat(1).filter(Boolean),m(!0),P.next=6,v.validateFields(w,{recursive:!0});case 6:return C=(d==null||(p=d.getFieldFormatValue)===null||p===void 0?void 0:p.call(d,w))||v.getFieldValue(w),Array.isArray(t)&&t.length>1&&(k=za(t),W=k.slice(1),N=nn(C,W),Yn(C,W,N)),j=g?Yn({},w,C):C,P.next=11,r==null?void 0:r(t,yr({},a,j),a,l);case 11:return $=P.sent,m(!1),P.abrupt("return",$);case 16:throw P.prev=16,P.t0=P.catch(0),console.log(P.t0),m(!1),P.t0;case 21:case"end":return P.stop()}},R,null,[[0,16]])})));return h.useImperativeHandle(e,function(){return{save:x}},[x]),u.jsxs("a",{onClick:function(){var R=Se(le().mark(function p(g){return le().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return g.stopPropagation(),g.preventDefault(),C.prev=2,C.next=5,x();case 5:C.next=9;break;case 7:C.prev=7,C.t0=C.catch(2);case 9:case"end":return C.stop()}},p,null,[[2,7]])}));return function(p){return R.apply(this,arguments)}}(),children:[b?u.jsx($t,{style:{marginInlineEnd:8}}):null,s||"保存"]},"save")}var Nl=function(e){var t=e.recordKey,r=e.onDelete,a=e.preEditRowRef,s=e.row,l=e.children,o=e.deletePopconfirmMessage,c=Fe(function(){return!1}),d=ue(c,2),v=d[0],f=d[1],y=Re(Se(le().mark(function b(){var m;return le().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,f(!0),R.next=4,r==null?void 0:r(t,s);case 4:return m=R.sent,f(!1),R.abrupt("return",m);case 9:return R.prev=9,R.t0=R.catch(0),console.log(R.t0),f(!1),R.abrupt("return",null);case 14:return R.prev=14,a&&(a.current=null),R.finish(14);case 17:case"end":return R.stop()}},b,null,[[0,9,14,17]])})));return l!==!1?u.jsx(jr,{title:o,onConfirm:function(){return y()},children:u.jsxs("a",{children:[v?u.jsx($t,{style:{marginInlineEnd:8}}):null,l||"删除"]})},"delete"):null},Ll=function(e){var t=e.recordKey,r=e.tableName,a=e.newLineConfig,s=e.editorType,l=e.onCancel,o=e.cancelEditable,c=e.row,d=e.cancelText,v=e.preEditRowRef,f=h.useContext(gr),y=Ke.useFormInstance();return u.jsx("a",{onClick:function(){var b=Se(le().mark(function m(x){var R,p,g,w,C,k,W;return le().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return x.stopPropagation(),x.preventDefault(),p=s==="Map",g=[r,t].flat(1).filter(Boolean),w=(f==null||(R=f.getFieldFormatValue)===null||R===void 0?void 0:R.call(f,g))||(y==null?void 0:y.getFieldValue(g)),C=p?Yn({},g,w):w,j.next=8,l==null?void 0:l(t,C,c,a);case 8:return k=j.sent,j.next=11,o(t);case 11:if((v==null?void 0:v.current)===null){j.next=15;break}y.setFieldsValue(Yn({},g,v==null?void 0:v.current)),j.next=17;break;case 15:return j.next=17,(W=e.onDelete)===null||W===void 0?void 0:W.call(e,t,c);case 17:return v&&(v.current=null),j.abrupt("return",k);case 19:case"end":return j.stop()}},m)}));return function(m){return b.apply(this,arguments)}}(),children:d||"取消"},"cancel")};function $l(n,e){var t=e.recordKey,r=e.newLineConfig,a=e.saveText,s=e.deleteText,l=h.forwardRef(Ml),o=h.createRef();return{save:u.jsx(l,i(i({},e),{},{row:n,ref:o,children:a}),"save"+t),saveRef:o,delete:(r==null?void 0:r.options.recordKey)!==t?u.jsx(Nl,i(i({},e),{},{row:n,children:s}),"delete"+t):void 0,cancel:u.jsx(Ll,i(i({},e),{},{row:n}),"cancel"+t)}}function Bl(n){var e=Oe(),t=h.useRef(null),r=h.useState(void 0),a=ue(r,2),s=a[0],l=a[1],o=function(){var T=new Map,E=function L(F,z){F==null||F.forEach(function(X,U){var Y,G=z==null?U.toString():z+"_"+U.toString();T.set(G,ke(n.getRowKey(X,-1))),T.set((Y=ke(n.getRowKey(X,-1)))===null||Y===void 0?void 0:Y.toString(),G),n.childrenColumnName&&X!==null&&X!==void 0&&X[n.childrenColumnName]&&L(X[n.childrenColumnName],G)})};return E(n.dataSource),T},c=h.useMemo(function(){return o()},[]),d=h.useRef(c),v=h.useRef(void 0);hr(function(){d.current=o()},[n.dataSource]),v.current=s;var f=n.type||"single",y=Oa(n.dataSource,"children",n.getRowKey),b=ue(y,1),m=b[0],x=Fe([],{value:n.editableKeys,onChange:n.onChange?function(D){var T,E,L;n==null||(T=n.onChange)===null||T===void 0||T.call(n,(E=D==null?void 0:D.filter(function(F){return F!==void 0}))!==null&&E!==void 0?E:[],(L=D==null?void 0:D.map(function(F){return m(F)}).filter(function(F){return F!==void 0}))!==null&&L!==void 0?L:[])}:void 0}),R=ue(x,2),p=R[0],g=R[1],w=h.useMemo(function(){var D=f==="single"?p==null?void 0:p.slice(0,1):p;return new Set(D)},[(p||[]).join(","),f]),C=qn(p),k=Re(function(D){var T,E,L,F,z=(T=n.getRowKey(D,D.index))===null||T===void 0||(E=T.toString)===null||E===void 0?void 0:E.call(T),X=(L=n.getRowKey(D,-1))===null||L===void 0||(F=L.toString)===null||F===void 0?void 0:F.call(L),U=p==null?void 0:p.map(function(ce){return ce==null?void 0:ce.toString()}),Y=(C==null?void 0:C.map(function(ce){return ce==null?void 0:ce.toString()}))||[],G=n.tableName&&!!(Y!=null&&Y.includes(X))||!!(Y!=null&&Y.includes(z));return{recordKey:X,isEditable:n.tableName&&(U==null?void 0:U.includes(X))||(U==null?void 0:U.includes(z)),preIsEditable:G}}),W=Re(function(D,T){var E,L;return w.size>0&&f==="single"&&n.onlyOneLineEditorAlertMessage!==!1?(it(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1):(w.add(D),g(Array.from(w)),t.current=(E=T??((L=n.dataSource)===null||L===void 0?void 0:L.find(function(F,z){return n.getRowKey(F,z)===D})))!==null&&E!==void 0?E:null,!0)}),N=Re(function(){var D=Se(le().mark(function T(E,L){var F,z;return le().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(F=ke(E).toString(),z=d.current.get(F),!(!w.has(F)&&z&&(L??!0)&&n.tableName)){U.next=5;break}return N(z,!1),U.abrupt("return");case 5:return s&&s.options.recordKey===E&&l(void 0),w.delete(F),w.delete(ke(E)),g(Array.from(w)),U.abrupt("return",!0);case 10:case"end":return U.stop()}},T)}));return function(T,E){return D.apply(this,arguments)}}()),j=pr(Se(le().mark(function D(){var T,E,L,F,z=arguments;return le().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:for(E=z.length,L=new Array(E),F=0;F<E;F++)L[F]=z[F];(T=n.onValuesChange)===null||T===void 0||T.call.apply(T,[n].concat(L));case 2:case"end":return U.stop()}},D)})),64),$=Re(function(D,T){var E;if(n.onValuesChange){var L=n.dataSource;p==null||p.forEach(function(Y){if((s==null?void 0:s.options.recordKey)!==Y){var G=Y.toString(),ce=nn(T,[n.tableName||"",G].flat(1).filter(function(ne){return ne||ne===0}));ce&&(L=An({data:L,getRowKey:n.getRowKey,row:ce,key:G,childrenColumnName:n.childrenColumnName||"children"},"update"))}});var F=D,z=(E=Object.keys(F||{}).pop())===null||E===void 0?void 0:E.toString(),X=i(i({},s==null?void 0:s.defaultValue),nn(T,[n.tableName||"",z.toString()].flat(1).filter(function(Y){return Y||Y===0}))),U=d.current.has(ke(z))?L.find(function(Y,G){var ce,ne=(ce=n.getRowKey(Y,G))===null||ce===void 0?void 0:ce.toString();return ne===z}):X;j.run(U||X,L)}}),K=h.useRef(new Map);h.useEffect(function(){K.current.forEach(function(D,T){w.has(T)||K.current.delete(T)})},[K,w]);var P=Re(function(){var D=Se(le().mark(function T(E,L){var F,z,X,U;return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(F=ke(E),z=d.current.get(E.toString()),!(!w.has(F)&&z&&(L??!0)&&n.tableName)){G.next=6;break}return G.next=5,P(z,!1);case 5:return G.abrupt("return",G.sent);case 6:return X=K.current.get(F)||K.current.get(F.toString()),G.prev=7,G.next=10,X==null||(U=X.current)===null||U===void 0?void 0:U.save();case 10:G.next=15;break;case 12:return G.prev=12,G.t0=G.catch(7),G.abrupt("return",!1);case 15:return w.delete(F),w.delete(F.toString()),g(Array.from(w)),G.abrupt("return",!0);case 19:case"end":return G.stop()}},T,null,[[7,12]])}));return function(T,E){return D.apply(this,arguments)}}()),M=Re(function(D,T){if(T!=null&&T.parentKey&&!d.current.has(ke(T==null?void 0:T.parentKey).toString()))return console.warn("can't find record by key",T==null?void 0:T.parentKey),!1;if(v.current&&n.onlyAddOneLineAlertMessage!==!1)return it(n.onlyAddOneLineAlertMessage||e.getMessage("editableTable.onlyAddOneLine","只能新增一行")),!1;if(w.size>0&&f==="single"&&n.onlyOneLineEditorAlertMessage!==!1)return it(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1;var E=n.getRowKey(D,-1);if(!E&&E!==0)throw vn(!!E,`请设置 recordCreatorProps.record 并返回一个唯一的key  
  https://procomponents.ant.design/components/editable-table#editable-%E6%96%B0%E5%BB%BA%E8%A1%8C`),new Error("请设置 recordCreatorProps.record 并返回一个唯一的key");if(w.add(E),g(Array.from(w)),(T==null?void 0:T.newRecordType)==="dataSource"||n.tableName){var L,F={data:n.dataSource,getRowKey:n.getRowKey,row:i(i({},D),{},{map_row_parentKey:T!=null&&T.parentKey?(L=ke(T==null?void 0:T.parentKey))===null||L===void 0?void 0:L.toString():void 0}),key:E,childrenColumnName:n.childrenColumnName||"children"};n.setDataSource(An(F,(T==null?void 0:T.position)==="top"?"top":"update"))}else l({defaultValue:D,options:i(i({},T),{},{recordKey:E})});return!0}),H=(n==null?void 0:n.saveText)||e.getMessage("editableTable.action.save","保存"),A=(n==null?void 0:n.deleteText)||e.getMessage("editableTable.action.delete","删除"),I=(n==null?void 0:n.cancelText)||e.getMessage("editableTable.action.cancel","取消"),_=Re(function(){var D=Se(le().mark(function T(E,L,F,z){var X,U,Y,G,ce,ne,he;return le().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,n==null||(X=n.onSave)===null||X===void 0?void 0:X.call(n,E,L,F,z);case 2:return G=re.sent,re.next=5,N(E);case 5:if(ce=z||v.current||{},ne=ce.options,!(!(ne!=null&&ne.parentKey)&&(ne==null?void 0:ne.recordKey)===E)){re.next=9;break}return(ne==null?void 0:ne.position)==="top"?n.setDataSource([L].concat(Ve(n.dataSource))):n.setDataSource([].concat(Ve(n.dataSource),[L])),re.abrupt("return",G);case 9:return he={data:n.dataSource,getRowKey:n.getRowKey,row:ne?i(i({},L),{},{map_row_parentKey:(U=ke((Y=ne==null?void 0:ne.parentKey)!==null&&Y!==void 0?Y:""))===null||U===void 0?void 0:U.toString()}):L,key:E,childrenColumnName:n.childrenColumnName||"children"},n.setDataSource(An(he,(ne==null?void 0:ne.position)==="top"?"top":"update")),re.next=13,N(E);case 13:return re.abrupt("return",G);case 14:case"end":return re.stop()}},T)}));return function(T,E,L,F){return D.apply(this,arguments)}}()),B=Re(function(){var D=Se(le().mark(function T(E,L){var F,z,X;return le().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return z={data:n.dataSource,getRowKey:n.getRowKey,row:L,key:E,childrenColumnName:n.childrenColumnName||"children"},Y.next=3,n==null||(F=n.onDelete)===null||F===void 0?void 0:F.call(n,E,L);case 3:return X=Y.sent,Y.next=6,N(E,!1);case 6:return n.setDataSource(An(z,"delete")),Y.abrupt("return",X);case 8:case"end":return Y.stop()}},T)}));return function(T,E){return D.apply(this,arguments)}}()),Q=Re(function(){var D=Se(le().mark(function T(E,L,F,z){var X,U;return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,n==null||(X=n.onCancel)===null||X===void 0?void 0:X.call(n,E,L,F,z);case 2:return U=G.sent,G.abrupt("return",U);case 4:case"end":return G.stop()}},T)}));return function(T,E,L,F){return D.apply(this,arguments)}}()),Z=n.actionRender&&typeof n.actionRender=="function",O=Z?n.actionRender:function(){},V=Re(O),q=function(T){var E=n.getRowKey(T,T.index),L={saveText:H,cancelText:I,deleteText:A,addEditRecord:M,recordKey:E,cancelEditable:N,index:T.index,tableName:n.tableName,newLineConfig:s,onCancel:Q,onDelete:B,onSave:_,editableKeys:p,setEditableRowKeys:g,preEditRowRef:t,deletePopconfirmMessage:n.deletePopconfirmMessage||"".concat(e.getMessage("deleteThisLine","删除此项"),"?")},F=$l(T,L);return n.tableName?K.current.set(d.current.get(ke(E))||ke(E),F.saveRef):K.current.set(ke(E),F.saveRef),Z?V(T,L,{save:F.save,delete:F.delete,cancel:F.cancel}):[F.save,F.delete,F.cancel]};return{editableKeys:p,setEditableRowKeys:g,isEditable:k,actionRender:q,startEditable:W,cancelEditable:N,addEditRecord:M,saveEditable:P,newLineRecord:s,preEditableKeys:C,onValuesChange:$,getRealIndex:n.getRealIndex}}var Al=function(e){var t=e.componentCls,r=e.antCls;return S({},"".concat(t,"-actions"),S(S({marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,listStyle:"none",display:"flex",gap:e.marginXS,background:e.colorBgContainer,borderBlockStart:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit),minHeight:42},"& > *",{alignItems:"center",justifyContent:"center",flex:1,display:"flex",cursor:"pointer",color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),"& > li > div",{flex:1,width:"100%",marginBlock:e.marginSM,marginInline:0,color:e.colorTextSecondary,textAlign:"center",a:{color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}},div:S(S({position:"relative",display:"block",minWidth:32,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimaryHover,transition:"color 0.3s"}},"a:not(".concat(r,`-btn),
            > .anticon`),{display:"inline-block",width:"100%",color:e.colorTextSecondary,lineHeight:"22px",transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),".anticon",{fontSize:e.cardActionIconSize,lineHeight:"22px"}),"&:not(:last-child)":{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}}))};function Kl(n){return _e("ProCardActions",function(e){var t=i(i({},e),{},{componentCls:".".concat(n),cardActionIconSize:16});return[Al(t)]})}var kl=function(e){var t=e.actions,r=e.prefixCls,a=Kl(r),s=a.wrapSSR,l=a.hashId;return Array.isArray(t)&&t!==null&&t!==void 0&&t.length?s(u.jsx("ul",{className:ge("".concat(r,"-actions"),l),children:t.map(function(o,c){return u.jsx("li",{style:{width:"".concat(100/t.length,"%"),padding:0,margin:0},className:ge("".concat(r,"-actions-item"),l),children:o},"action-".concat(c))})})):s(u.jsx("ul",{className:ge("".concat(r,"-actions"),l),children:t}))},Dl=new Er("card-loading",{"0%":{backgroundPosition:"0 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),_l=function(e){return S({},e.componentCls,S(S({"&-loading":{overflow:"hidden"},"&-loading &-body":{userSelect:"none"}},"".concat(e.componentCls,"-loading-content"),{width:"100%",p:{marginBlock:0,marginInline:0}}),"".concat(e.componentCls,"-loading-block"),{height:"14px",marginBlock:"4px",background:"linear-gradient(90deg, rgba(54, 61, 64, 0.2), rgba(54, 61, 64, 0.4), rgba(54, 61, 64, 0.2))",backgroundSize:"600% 600%",borderRadius:e.borderRadius,animationName:Dl,animationDuration:"1.4s",animationTimingFunction:"ease",animationIterationCount:"infinite"}))};function Ol(n){return _e("ProCardLoading",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[_l(t)]})}var zl=function(e){var t=e.style,r=e.prefix,a=Ol(r||"ant-pro-card"),s=a.wrapSSR;return s(u.jsxs("div",{className:"".concat(r,"-loading-content"),style:t,children:[u.jsx(an,{gutter:8,children:u.jsx(Le,{span:22,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})}),u.jsxs(an,{gutter:8,children:[u.jsx(Le,{span:8,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Le,{span:15,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(an,{gutter:8,children:[u.jsx(Le,{span:6,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Le,{span:18,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(an,{gutter:8,children:[u.jsx(Le,{span:13,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Le,{span:9,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(an,{gutter:8,children:[u.jsx(Le,{span:4,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Le,{span:3,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Le,{span:16,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]})]}))},Wl=["tab","children"],Vl=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"];function Hl(n){return n.filter(function(e){return e})}function Ul(n,e,t){if(n)return n.map(function(a){return i(i({},a),{},{children:u.jsx(kn,i(i({},t==null?void 0:t.cardProps),{},{children:a.children}))})});vn(!t,"Tabs.TabPane is deprecated. Please use `items` directly.");var r=Bt(e).map(function(a){if(ie.isValidElement(a)){var s=a.key,l=a.props,o=l||{},c=o.tab,d=o.children,v=we(o,Wl),f=i(i({key:String(s)},v),{},{children:u.jsx(kn,i(i({},t==null?void 0:t.cardProps),{},{children:d})),label:c});return f}return null});return Hl(r)}var Gl=function(e){var t=h.useContext(Me.ConfigContext),r=t.getPrefixCls;if(nt.startsWith("5"))return u.jsx(u.Fragment,{});var a=e.key,s=e.tab,l=e.tabKey,o=e.disabled,c=e.destroyInactiveTabPane,d=e.children,v=e.className,f=e.style,y=e.cardProps,b=we(e,Vl),m=r("pro-card-tabpane"),x=ge(m,v);return u.jsx(Nn.TabPane,i(i({tabKey:l,tab:s,className:x,style:f,disabled:o,destroyInactiveTabPane:c},b),{},{children:u.jsx(kn,i(i({},y),{},{children:d}))}),a)};var Zt=function(e){return{backgroundColor:e.controlItemBgActive,borderColor:e.controlOutline}},ql=function(e){var t=e.componentCls;return S(S(S({},t,i(i({position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box",width:"100%",marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,backgroundColor:e.colorBgContainer,borderRadius:e.borderRadius,transition:"all 0.3s"},at===null||at===void 0?void 0:at(e)),{},S(S(S(S(S(S(S(S(S(S({"&-box-shadow":{boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017",borderColor:"transparent"},"&-col":{width:"100%"},"&-border":{border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-hoverable":S({cursor:"pointer",transition:"box-shadow 0.3s, border-color 0.3s","&:hover":{borderColor:"transparent",boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017"}},"&".concat(t,"-checked:hover"),{borderColor:e.controlOutline}),"&-checked":i(i({},Zt(e)),{},{"&::after":{visibility:"visible",position:"absolute",insetBlockStart:2,insetInlineEnd:2,opacity:1,width:0,height:0,border:"6px solid ".concat(e.colorPrimary),borderBlockEnd:"6px solid transparent",borderInlineStart:"6px solid transparent",borderStartEndRadius:2,content:'""'}}),"&:focus":i({},Zt(e)),"&&-ghost":S({backgroundColor:"transparent"},"> ".concat(t),{"&-header":{paddingInlineEnd:0,paddingBlockEnd:e.padding,paddingInlineStart:0},"&-body":{paddingBlock:0,paddingInline:0,backgroundColor:"transparent"}}),"&&-split > &-body":{paddingBlock:0,paddingInline:0},"&&-contain-card > &-body":{display:"flex"}},"".concat(t,"-body-direction-column"),{flexDirection:"column"}),"".concat(t,"-body-wrap"),{flexWrap:"wrap"}),"&&-collapse",S({},"> ".concat(t),{"&-header":{paddingBlockEnd:e.padding,borderBlockEnd:0},"&-body":{display:"none"}})),"".concat(t,"-header"),{display:"flex",alignItems:"center",justifyContent:"space-between",paddingInline:e.paddingLG,paddingBlock:e.padding,paddingBlockEnd:0,"&-border":{"&":{paddingBlockEnd:e.padding},borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-collapsible":{cursor:"pointer"}}),"".concat(t,"-title"),{color:e.colorText,fontWeight:500,fontSize:e.fontSizeLG,lineHeight:e.lineHeight}),"".concat(t,"-extra"),{color:e.colorText}),"".concat(t,"-type-inner"),S({},"".concat(t,"-header"),{backgroundColor:e.colorFillAlter})),"".concat(t,"-collapsible-icon"),{marginInlineEnd:e.marginXS,color:e.colorIconHover,":hover":{color:e.colorPrimaryHover},"& svg":{transition:"transform ".concat(e.motionDurationMid)}}),"".concat(t,"-body"),{display:"block",boxSizing:"border-box",height:"100%",paddingInline:e.paddingLG,paddingBlock:e.padding,"&-center":{display:"flex",alignItems:"center",justifyContent:"center"}}),"&&-size-small",S(S({},t,{"&-header":{paddingInline:e.paddingSM,paddingBlock:e.paddingXS,paddingBlockEnd:0,"&-border":{paddingBlockEnd:e.paddingXS}},"&-title":{fontSize:e.fontSize},"&-body":{paddingInline:e.paddingSM,paddingBlock:e.paddingSM}}),"".concat(t,"-header").concat(t,"-header-collapsible"),{paddingBlock:e.paddingXS})))),"".concat(t,"-col"),S(S({},"&".concat(t,"-split-vertical"),{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),"&".concat(t,"-split-horizontal"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)})),"".concat(t,"-tabs"),S(S(S(S(S(S({},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:e.marginXS,paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-bottom > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-left"),S({},"".concat(e.antCls,"-tabs-content-holder"),S({},"".concat(e.antCls,"-tabs-content"),S({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-left > ").concat(e.antCls,"-tabs-nav"),S({marginInlineEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})),"".concat(e.antCls,"-tabs-right"),S({},"".concat(e.antCls,"-tabs-content-holder"),S({},"".concat(e.antCls,"-tabs-content"),S({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-right > ").concat(e.antCls,"-tabs-nav"),S({},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})))},_r=24,Ql=function(e,t){var r=t.componentCls;return e===0?S({},"".concat(r,"-col-0"),{display:"none"}):S({},"".concat(r,"-col-").concat(e),{flexShrink:0,width:"".concat(e/_r*100,"%")})},Xl=function(e){return Array(_r+1).fill(1).map(function(t,r){return Ql(r,e)})};function Jl(n){return _e("ProCard",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[ql(t),Xl(t)]})}var Yl=["className","style","bodyStyle","headStyle","title","subTitle","extra","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","boxShadow","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","colStyle","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],kn=ie.forwardRef(function(n,e){var t,r=n.className,a=n.style,s=n.bodyStyle,l=n.headStyle,o=n.title,c=n.subTitle,d=n.extra,v=n.wrap,f=v===void 0?!1:v,y=n.layout,b=n.loading,m=n.gutter,x=m===void 0?0:m,R=n.tooltip,p=n.split,g=n.headerBordered,w=g===void 0?!1:g,C=n.bordered,k=C===void 0?!1:C,W=n.boxShadow,N=W===void 0?!1:W,j=n.children,$=n.size,K=n.actions,P=n.ghost,M=P===void 0?!1:P,H=n.hoverable,A=H===void 0?!1:H,I=n.direction,_=n.collapsed,B=n.collapsible,Q=B===void 0?!1:B,Z=n.collapsibleIconRender,O=n.colStyle,V=n.defaultCollapsed,q=V===void 0?!1:V,D=n.onCollapse,T=n.checked,E=n.onChecked,L=n.tabs,F=n.type,z=we(n,Yl),X=h.useContext(Me.ConfigContext),U=X.getPrefixCls,Y=Wa()||{lg:!0,md:!0,sm:!0,xl:!1,xs:!1,xxl:!1},G=Fe(q,{value:_,onChange:D}),ce=ue(G,2),ne=ce[0],he=ce[1],ae=["xxl","xl","lg","md","sm","xs"],re=Ul(L==null?void 0:L.items,j,L),me=function(be){var Ie=[0,0],tn=Array.isArray(be)?be:[be,0];return tn.forEach(function(Ee,Ge){if(Ue(Ee)==="object")for(var Xe=0;Xe<ae.length;Xe+=1){var sn=ae[Xe];if(Y[sn]&&Ee[sn]!==void 0){Ie[Ge]=Ee[sn];break}}else Ie[Ge]=Ee||0}),Ie},de=function(be,Ie){return be?Ie:{}},$e=function(be){var Ie=be;if(Ue(be)==="object")for(var tn=0;tn<ae.length;tn+=1){var Ee=ae[tn];if(Y!=null&&Y[Ee]&&(be==null?void 0:be[Ee])!==void 0){Ie=be[Ee];break}}var Ge=de(typeof Ie=="string"&&/\d%|\dpx/i.test(Ie),{width:Ie,flexShrink:0});return{span:Ie,colSpanStyle:Ge}},se=U("pro-card"),hn=Jl(se),oe=hn.wrapSSR,Be=hn.hashId,pn=me(x),$n=ue(pn,2),ln=$n[0],gn=$n[1],Pn=!1,Bn=ie.Children.toArray(j),Pe=Bn.map(function(je,be){var Ie;if(je!=null&&(Ie=je.type)!==null&&Ie!==void 0&&Ie.isProCard){Pn=!0;var tn=je.props.colSpan,Ee=$e(tn),Ge=Ee.span,Xe=Ee.colSpanStyle,sn=ge(["".concat(se,"-col")],Be,S(S(S({},"".concat(se,"-split-vertical"),p==="vertical"&&be!==Bn.length-1),"".concat(se,"-split-horizontal"),p==="horizontal"&&be!==Bn.length-1),"".concat(se,"-col-").concat(Ge),typeof Ge=="number"&&Ge>=0&&Ge<=24)),Hn=oe(u.jsx("div",{style:i(i(i(i({},Xe),de(ln>0,{paddingInlineEnd:ln/2,paddingInlineStart:ln/2})),de(gn>0,{paddingBlockStart:gn/2,paddingBlockEnd:gn/2})),O),className:sn,children:ie.cloneElement(je)}));return ie.cloneElement(Hn,{key:"pro-card-col-".concat((je==null?void 0:je.key)||be)})}return je}),Wn=ge("".concat(se),r,Be,(t={},S(S(S(S(S(S(S(S(S(S(t,"".concat(se,"-border"),k),"".concat(se,"-box-shadow"),N),"".concat(se,"-contain-card"),Pn),"".concat(se,"-loading"),b),"".concat(se,"-split"),p==="vertical"||p==="horizontal"),"".concat(se,"-ghost"),M),"".concat(se,"-hoverable"),A),"".concat(se,"-size-").concat($),$),"".concat(se,"-type-").concat(F),F),"".concat(se,"-collapse"),ne),S(t,"".concat(se,"-checked"),T))),pe=ge("".concat(se,"-body"),Be,S(S(S({},"".concat(se,"-body-center"),y==="center"),"".concat(se,"-body-direction-column"),p==="horizontal"||I==="column"),"".concat(se,"-body-wrap"),f&&Pn)),Vn=s,yn=ie.isValidElement(b)?b:u.jsx(zl,{prefix:se,style:(s==null?void 0:s.padding)===0||(s==null?void 0:s.padding)==="0px"?{padding:24}:void 0}),on=Q&&_===void 0&&(Z?Z({collapsed:ne}):u.jsx(Mr,{rotate:ne?void 0:90,className:"".concat(se,"-collapsible-icon ").concat(Be).trim()}));return oe(u.jsxs("div",i(i({className:Wn,style:a,ref:e,onClick:function(be){var Ie;E==null||E(be),z==null||(Ie=z.onClick)===null||Ie===void 0||Ie.call(z,be)}},He(z,["prefixCls","colSpan"])),{},{children:[(o||d||on)&&u.jsxs("div",{className:ge("".concat(se,"-header"),Be,S(S({},"".concat(se,"-header-border"),w||F==="inner"),"".concat(se,"-header-collapsible"),on)),style:l,onClick:function(){on&&he(!ne)},children:[u.jsxs("div",{className:"".concat(se,"-title ").concat(Be).trim(),children:[on,u.jsx(xn,{label:o,tooltip:R,subTitle:c})]}),d&&u.jsx("div",{className:"".concat(se,"-extra ").concat(Be).trim(),onClick:function(be){return be.stopPropagation()},children:d})]}),L?u.jsx("div",{className:"".concat(se,"-tabs ").concat(Be).trim(),children:u.jsx(Nn,i(i({onChange:L.onChange},He(L,["cardProps"])),{},{items:re,children:b?yn:j}))}):u.jsx("div",{className:pe,style:Vn,children:b?yn:Pe}),K?u.jsx(kl,{actions:K,prefixCls:se}):null]})))}),Zl=function(e){var t=e.componentCls;return S({},t,{"&-divider":{flex:"none",width:e.lineWidth,marginInline:e.marginXS,marginBlock:e.marginLG,backgroundColor:e.colorSplit,"&-horizontal":{width:"initial",height:e.lineWidth,marginInline:e.marginLG,marginBlock:e.marginXS}},"&&-size-small &-divider":{marginBlock:e.marginLG,marginInline:e.marginXS,"&-horizontal":{marginBlock:e.marginXS,marginInline:e.marginLG}}})};function eo(n){return _e("ProCardDivider",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Zl(t)]})}var no=function(e){var t=h.useContext(Me.ConfigContext),r=t.getPrefixCls,a=r("pro-card"),s="".concat(a,"-divider"),l=eo(a),o=l.wrapSSR,c=l.hashId,d=e.className,v=e.style,f=v===void 0?{}:v,y=e.type,b=ge(s,d,c,S({},"".concat(s,"-").concat(y),y));return o(u.jsx("div",{className:b,style:f}))},to=function(e){return u.jsx(kn,i({bodyStyle:{padding:0}},e))},zn=kn;zn.isProCard=!0;zn.Divider=no;zn.TabPane=Gl;zn.Group=to;var ro=["children","value","valuePropName","onChange","fieldProps","space","type","transform","convertValue","lightProps"],ao=["children","space","valuePropName"],lo={space:wn,group:Nr.Group};function oo(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&n in e.target?e.target[n]:e}var io=function(e){var t=e.children,r=e.value,a=r===void 0?[]:r,s=e.valuePropName,l=e.onChange,o=e.fieldProps,c=e.space,d=e.type,v=d===void 0?"space":d;e.transform,e.convertValue,e.lightProps;var f=we(e,ro),y=Re(function(C,k){var W,N=Ve(a);N[k]=oo(s||"value",C),l==null||l(N),o==null||(W=o.onChange)===null||W===void 0||W.call(o,N)}),b=-1,m=Bt(Qe(t,a,e)).map(function(C){if(ie.isValidElement(C)){var k,W,N;b+=1;var j=b,$=(C==null||(k=C.type)===null||k===void 0?void 0:k.displayName)==="ProFormComponent"||(C==null||(W=C.props)===null||W===void 0?void 0:W.readonly),K=$?i(i({key:j,ignoreFormItem:!0},C.props||{}),{},{fieldProps:i(i({},C==null||(N=C.props)===null||N===void 0?void 0:N.fieldProps),{},{onChange:function(){y(arguments.length<=0?void 0:arguments[0],j)}}),value:a==null?void 0:a[j],onChange:void 0}):i(i({key:j},C.props||{}),{},{value:a==null?void 0:a[j],onChange:function(M){var H,A;y(M,j),(H=(A=C.props).onChange)===null||H===void 0||H.call(A,M)}});return ie.cloneElement(C,K)}return C}),x=lo[v],R=br(f),p=R.RowWrapper,g=h.useMemo(function(){return i({},v==="group"?{compact:!0}:{})},[v]),w=h.useCallback(function(C){var k=C.children;return u.jsx(x,i(i(i({},g),c),{},{align:"start",wrap:!0,children:k}))},[x,c,g]);return u.jsx(p,{Wrapper:w,children:m})},so=ie.forwardRef(function(n,e){var t=n.children,r=n.space,a=n.valuePropName,s=we(n,ao);return h.useImperativeHandle(e,function(){return{}}),u.jsx(io,i(i(i({space:r,valuePropName:a},s.fieldProps),{},{onChange:void 0},s),{},{children:t}))}),uo=va(so),co=function(e){return S({},e.componentCls,{"&-title":{marginBlockEnd:e.marginXL,fontWeight:"bold"},"&-container":S({flexWrap:"wrap",maxWidth:"100%"},"> div".concat(e.antCls,"-space-item"),{maxWidth:"100%"}),"&-twoLine":S(S(S(S({display:"block",width:"100%"},"".concat(e.componentCls,"-title"),{width:"100%",margin:"8px 0"}),"".concat(e.componentCls,"-container"),{paddingInlineStart:16}),"".concat(e.antCls,"-space-item,").concat(e.antCls,"-form-item"),{width:"100%"}),"".concat(e.antCls,"-form-item"),{"&-control":{display:"flex",alignItems:"center",justifyContent:"flex-end","&-input":{alignItems:"center",justifyContent:"flex-end","&-content":{flex:"none"}}}})})};function fo(n){return _e("ProFormGroup",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[co(t)]})}var Or=ie.forwardRef(function(n,e){var t=ie.useContext(Sr),r=t.groupProps,a=i(i({},r),n),s=a.children,l=a.collapsible,o=a.defaultCollapsed,c=a.style,d=a.labelLayout,v=a.title,f=v===void 0?n.label:v,y=a.tooltip,b=a.align,m=b===void 0?"start":b,x=a.direction,R=a.size,p=R===void 0?32:R,g=a.titleStyle,w=a.titleRender,C=a.spaceProps,k=a.extra,W=a.autoFocus,N=Fe(function(){return o||!1},{value:n.collapsed,onChange:n.onCollapse}),j=ue(N,2),$=j[0],K=j[1],P=h.useContext(Me.ConfigContext),M=P.getPrefixCls,H=br(n),A=H.ColWrapper,I=H.RowWrapper,_=M("pro-form-group"),B=fo(_),Q=B.wrapSSR,Z=B.hashId,O=l&&u.jsx(Mr,{style:{marginInlineEnd:8},rotate:$?void 0:90}),V=u.jsx(xn,{label:O?u.jsxs("div",{children:[O,f]}):f,tooltip:y}),q=h.useCallback(function(z){var X=z.children;return u.jsx(wn,i(i({},C),{},{className:ge("".concat(_,"-container ").concat(Z),C==null?void 0:C.className),size:p,align:m,direction:x,style:i({rowGap:0},C==null?void 0:C.style),children:X}))},[m,_,x,Z,p,C]),D=w?w(V,n):V,T=h.useMemo(function(){var z=[],X=ie.Children.toArray(s).map(function(U,Y){var G;return ie.isValidElement(U)&&U!==null&&U!==void 0&&(G=U.props)!==null&&G!==void 0&&G.hidden?(z.push(U),null):Y===0&&ie.isValidElement(U)&&W?ie.cloneElement(U,i(i({},U.props),{},{autoFocus:W})):U});return[u.jsx(I,{Wrapper:q,children:X},"children"),z.length>0?u.jsx("div",{style:{display:"none"},children:z}):null]},[s,I,q,W]),E=ue(T,2),L=E[0],F=E[1];return Q(u.jsx(A,{children:u.jsxs("div",{className:ge(_,Z,S({},"".concat(_,"-twoLine"),d==="twoLine")),style:c,ref:e,children:[F,(f||y||k)&&u.jsx("div",{className:"".concat(_,"-title ").concat(Z).trim(),style:g,onClick:function(){K(!$)},children:k?u.jsxs("div",{style:{display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between"},children:[D,u.jsx("span",{onClick:function(X){return X.stopPropagation()},children:k})]}):D}),u.jsx("div",{style:{display:l&&$?"none":void 0},children:L})]})}))});Or.displayName="ProForm-Group";var vo=function(e){return S({},e.componentCls,{lineHeight:"30px","&::before":{display:"block",height:0,visibility:"hidden",content:"'.'"},"&-small":{lineHeight:e.lineHeight},"&-container":{display:"flex",flexWrap:"wrap",gap:e.marginXS},"&-item":S({whiteSpace:"nowrap"},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"&-line":{minWidth:"198px"},"&-line:not(:first-child)":{marginBlockStart:"16px",marginBlockEnd:8},"&-collapse-icon":{width:e.controlHeight,height:e.controlHeight,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},"&-effective":S({},"".concat(e.componentCls,"-collapse-icon"),{backgroundColor:e.colorBgTextHover})})};function mo(n){return _e("LightFilter",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[vo(t)]})}var ho=["size","collapse","collapseLabel","initialValues","onValuesChange","form","placement","formRef","bordered","ignoreRules","footerRender"],po=function(e){var t=e.items,r=e.prefixCls,a=e.size,s=a===void 0?"middle":a,l=e.collapse,o=e.collapseLabel,c=e.onValuesChange,d=e.bordered,v=e.values,f=e.footerRender,y=e.placement,b=Oe(),m="".concat(r,"-light-filter"),x=mo(m),R=x.wrapSSR,p=x.hashId,g=h.useState(!1),w=ue(g,2),C=w[0],k=w[1],W=h.useState(function(){return i({},v)}),N=ue(W,2),j=N[0],$=N[1];h.useEffect(function(){$(i({},v))},[v]);var K=h.useMemo(function(){var A=[],I=[];return t.forEach(function(_){var B=_.props||{},Q=B.secondary;Q||l?A.push(_):I.push(_)}),{collapseItems:A,outsideItems:I}},[e.items]),P=K.collapseItems,M=K.outsideItems,H=function(){return o||(l?u.jsx(Va,{className:"".concat(m,"-collapse-icon ").concat(p).trim()}):u.jsx(ha,{size:s,label:b.getMessage("form.lightFilter.more","更多筛选")}))};return R(u.jsx("div",{className:ge(m,p,"".concat(m,"-").concat(s),S({},"".concat(m,"-effective"),Object.keys(v).some(function(A){return Array.isArray(v[A])?v[A].length>0:v[A]}))),children:u.jsxs("div",{className:"".concat(m,"-container ").concat(p).trim(),children:[M.map(function(A,I){var _=A.key,B=A.props.fieldProps,Q=B!=null&&B.placement?B==null?void 0:B.placement:y;return u.jsx("div",{className:"".concat(m,"-item ").concat(p).trim(),children:ie.cloneElement(A,{fieldProps:i(i({},A.props.fieldProps),{},{placement:Q}),proFieldProps:i(i({},A.props.proFieldProps),{},{light:!0,label:A.props.label,bordered:d}),bordered:d})},_||I)}),P.length?u.jsx("div",{className:"".concat(m,"-item ").concat(p).trim(),children:u.jsx(ma,{padding:24,open:C,onOpenChange:function(I){k(I)},placement:y,label:H(),footerRender:f,footer:{onConfirm:function(){c(i({},j)),k(!1)},onClear:function(){var I={};P.forEach(function(_){var B=_.props.name;I[B]=void 0}),c(I)}},children:P.map(function(A){var I=A.key,_=A.props,B=_.name,Q=_.fieldProps,Z=i(i({},Q),{},{onChange:function(q){return $(i(i({},j),{},S({},B,q!=null&&q.target?q.target.value:q))),!1}});j.hasOwnProperty(B)&&(Z[A.props.valuePropName||"value"]=j[B]);var O=Q!=null&&Q.placement?Q==null?void 0:Q.placement:y;return u.jsx("div",{className:"".concat(m,"-line ").concat(p).trim(),children:ie.cloneElement(A,{fieldProps:i(i({},Z),{},{placement:O})})},I)})})},"more"):null]})}))};function go(n){var e=n.size,t=n.collapse,r=n.collapseLabel,a=n.initialValues,s=n.onValuesChange,l=n.form,o=n.placement,c=n.formRef,d=n.bordered;n.ignoreRules;var v=n.footerRender,f=we(n,ho),y=h.useContext(Me.ConfigContext),b=y.getPrefixCls,m=b("pro-form"),x=h.useState(function(){return i({},a)}),R=ue(x,2),p=R[0],g=R[1],w=h.useRef();return h.useImperativeHandle(c,function(){return w.current},[w.current]),u.jsx(On,i(i({size:e,initialValues:a,form:l,contentRender:function(k){return u.jsx(po,{prefixCls:m,items:k==null?void 0:k.flatMap(function(W){return(W==null?void 0:W.type.displayName)==="ProForm-Group"?W.props.children:W}),size:e,bordered:d,collapse:t,collapseLabel:r,placement:o,values:p||{},footerRender:v,onValuesChange:function(N){var j,$,K=i(i({},p),N);g(K),(j=w.current)===null||j===void 0||j.setFieldsValue(K),($=w.current)===null||$===void 0||$.submit(),s&&s(N,K)}})},formRef:w,formItemProps:{colon:!1,labelAlign:"left"},fieldProps:{style:{width:void 0}}},He(f,["labelWidth"])),{},{onValuesChange:function(k,W){var N;g(W),s==null||s(k,W),(N=w.current)===null||N===void 0||N.submit()}}))}var yo=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function bo(n){var e,t,r=n.children,a=n.trigger,s=n.onVisibleChange,l=n.onOpenChange,o=n.modalProps,c=n.onFinish,d=n.submitTimeout,v=n.title,f=n.width,y=n.visible,b=n.open,m=we(n,yo);vn(!m.footer||!(o!=null&&o.footer),"ModalForm 是一个 ProForm 的特殊布局，如果想自定义按钮，请使用 submit.render 自定义。");var x=h.useContext(Me.ConfigContext),R=h.useState([]),p=ue(R,2),g=p[1],w=h.useState(!1),C=ue(w,2),k=C[0],W=C[1],N=Fe(!!y,{value:b||y,onChange:l||s}),j=ue(N,2),$=j[0],K=j[1],P=h.useRef(null),M=h.useCallback(function(O){P.current===null&&O&&g([]),P.current=O},[]),H=h.useRef(),A=h.useCallback(function(){var O,V,q,D=(O=(V=m.form)!==null&&V!==void 0?V:(q=m.formRef)===null||q===void 0?void 0:q.current)!==null&&O!==void 0?O:H.current;D&&o!==null&&o!==void 0&&o.destroyOnClose&&D.resetFields()},[o==null?void 0:o.destroyOnClose,m.form,m.formRef]);h.useImperativeHandle(m.formRef,function(){return H.current},[H.current]),h.useEffect(function(){(b||y)&&(l==null||l(!0),s==null||s(!0))},[y,b]);var I=h.useMemo(function(){return a?ie.cloneElement(a,i(i({key:"trigger"},a.props),{},{onClick:function(){var O=Se(le().mark(function q(D){var T,E;return le().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:K(!$),(T=a.props)===null||T===void 0||(E=T.onClick)===null||E===void 0||E.call(T,D);case 2:case"end":return F.stop()}},q)}));function V(q){return O.apply(this,arguments)}return V}()})):null},[K,a,$]),_=h.useMemo(function(){var O,V,q,D,T,E;return m.submitter===!1?!1:mt({searchConfig:{submitText:(O=(V=o==null?void 0:o.okText)!==null&&V!==void 0?V:(q=x.locale)===null||q===void 0||(q=q.Modal)===null||q===void 0?void 0:q.okText)!==null&&O!==void 0?O:"确认",resetText:(D=(T=o==null?void 0:o.cancelText)!==null&&T!==void 0?T:(E=x.locale)===null||E===void 0||(E=E.Modal)===null||E===void 0?void 0:E.cancelText)!==null&&D!==void 0?D:"取消"},resetButtonProps:{preventDefault:!0,disabled:d?k:void 0,onClick:function(F){var z;K(!1),o==null||(z=o.onCancel)===null||z===void 0||z.call(o,F)}}},m.submitter)},[(e=x.locale)===null||e===void 0||(e=e.Modal)===null||e===void 0?void 0:e.cancelText,(t=x.locale)===null||t===void 0||(t=t.Modal)===null||t===void 0?void 0:t.okText,o,m.submitter,K,k,d]),B=h.useCallback(function(O,V){return u.jsxs(u.Fragment,{children:[O,P.current&&V?u.jsx(ie.Fragment,{children:bt.createPortal(V,P.current)},"submitter"):V]})},[]),Q=h.useCallback(function(){var O=Se(le().mark(function V(q){var D,T,E;return le().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return D=c==null?void 0:c(q),d&&D instanceof Promise&&(W(!0),T=setTimeout(function(){return W(!1)},d),D.finally(function(){clearTimeout(T),W(!1)})),F.next=4,D;case 4:return E=F.sent,E&&K(!1),F.abrupt("return",E);case 7:case"end":return F.stop()}},V)}));return function(V){return O.apply(this,arguments)}}(),[c,K,d]),Z=mr($);return u.jsxs(u.Fragment,{children:[u.jsx(Ha,i(i(i({title:v,width:f||800},o),Z),{},{onCancel:function(V){var q;d&&k||(K(!1),o==null||(q=o.onCancel)===null||q===void 0||q.call(o,V))},afterClose:function(){var V;A(),$&&K(!1),o==null||(V=o.afterClose)===null||V===void 0||V.call(o)},footer:m.submitter!==!1?u.jsx("div",{ref:M,style:{display:"flex",justifyContent:"flex-end"}}):null,children:u.jsx(On,i(i({formComponentType:"ModalForm",layout:"vertical"},m),{},{onInit:function(V,q){var D;m.formRef&&(m.formRef.current=q),m==null||(D=m.onInit)===null||D===void 0||D.call(m,V,q),H.current=q},formRef:H,submitter:_,onFinish:function(){var O=Se(le().mark(function V(q){var D;return le().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,Q(q);case 2:return D=E.sent,E.abrupt("return",D);case 4:case"end":return E.stop()}},V)}));return function(V){return O.apply(this,arguments)}}(),contentRender:B,children:r}))})),I]})}var So=function(e,t,r,a){return e?u.jsxs(u.Fragment,{children:[r.getMessage("tableForm.collapsed","展开"),a&&"(".concat(a,")"),u.jsx(St,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]}):u.jsxs(u.Fragment,{children:[r.getMessage("tableForm.expand","收起"),u.jsx(St,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]})},Co=function(e){var t=e.setCollapsed,r=e.collapsed,a=r===void 0?!1:r,s=e.submitter,l=e.style,o=e.hiddenNum,c=h.useContext(Me.ConfigContext),d=c.getPrefixCls,v=Oe(),f=h.useContext(Rn),y=f.hashId,b=Dr(e.collapseRender)||So;return u.jsxs(wn,{style:l,size:16,children:[s,e.collapseRender!==!1&&u.jsx("a",{className:"".concat(d("pro-query-filter-collapse-button")," ").concat(y).trim(),onClick:function(){return t(!a)},children:b==null?void 0:b(a,e,v,o)})]})},xo=function(e){return S({},e.componentCls,S(S(S(S({"&&":{padding:24}},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"".concat(e.proComponentsCls,"-form-group-title"),{marginBlock:0}),"&-row",{rowGap:24,"&-split":S(S({},"".concat(e.proComponentsCls,"-form-group"),{display:"flex",alignItems:"center",gap:e.marginXS}),"&:last-child",{marginBlockEnd:12}),"&-split-line":{"&:after":{position:"absolute",width:"100%",content:'""',height:1,insetBlockEnd:-12,borderBlockEnd:"1px dashed ".concat(e.colorSplit)}}}),"&-collapse-button",{display:"flex",alignItems:"center",color:e.colorPrimary}))};function Ro(n){return _e("QueryFilter",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[xo(t)]})}var wo=["collapsed","layout","defaultCollapsed","defaultColsNumber","span","searchGutter","searchText","resetText","optionRender","collapseRender","onReset","onCollapse","labelWidth","style","split","preserve","ignoreRules","showHiddenNum","submitterColSpanProps"],In,Po={xs:513,sm:513,md:785,lg:992,xl:1057,xxl:1/0},er={vertical:[[513,1,"vertical"],[785,2,"vertical"],[1057,3,"vertical"],[1/0,4,"vertical"]],default:[[513,1,"vertical"],[701,2,"vertical"],[1062,3,"horizontal"],[1352,3,"horizontal"],[1/0,4,"horizontal"]]},Io=function(e,t,r){if(r&&typeof r=="number")return{span:r,layout:e};var a=r?["xs","sm","md","lg","xl","xxl"].map(function(l){return[Po[l],24/r[l],"horizontal"]}):er[e||"default"],s=(a||er.default).find(function(l){return t<l[0]+16});return s?{span:24/s[1],layout:s==null?void 0:s[2]}:{span:8,layout:"horizontal"}},To=function(e,t){return e==null?void 0:e.flatMap(function(r){var a;if((r==null?void 0:r.type.displayName)==="ProForm-Group"&&!((a=r.props)!==null&&a!==void 0&&a.title))return r.props.children;if(t&&ie.isValidElement(r)){var s;return ie.cloneElement(r,i(i({},r.props),{},{formItemProps:i(i({},(s=r.props)===null||s===void 0?void 0:s.formItemProps),{},{rules:[]})}))}return r})},Fo=function(e){var t,r,a,s,l=Oe(),o=h.useContext(Rn),c=o.hashId,d=e.resetText||l.getMessage("tableForm.reset","重置"),v=e.searchText||l.getMessage("tableForm.search","搜索"),f=Fe(function(){return e.defaultCollapsed&&!!e.submitter},{value:e.collapsed,onChange:e.onCollapse}),y=ue(f,2),b=y[0],m=y[1],x=e.optionRender,R=e.collapseRender,p=e.split,g=e.items,w=e.spanSize,C=e.showLength,k=e.searchGutter,W=e.showHiddenNum,N=h.useMemo(function(){return!e.submitter||x===!1?null:ie.cloneElement(e.submitter,i({searchConfig:{resetText:d,submitText:v},render:x&&function(O,V){return x(i(i({},e),{},{resetText:d,searchText:v}),e,V)}},e.submitter.props))},[e,d,v,x]),j=0,$=0,K=!1,P=0,M=0,H=To(g,e.ignoreRules).map(function(O,V){var q,D,T,E,L=ie.isValidElement(O)&&(q=O==null||(D=O.props)===null||D===void 0?void 0:D.colSize)!==null&&q!==void 0?q:1,F=Math.min(w.span*(L||1),24);if(j+=F,P+=L,V===0){var z;K=F===24&&!(O!=null&&(z=O.props)!==null&&z!==void 0&&z.hidden)}var X=(O==null||(T=O.props)===null||T===void 0?void 0:T.hidden)||b&&(K||P>C-1)&&!!V&&j>=24;$+=1;var U=ie.isValidElement(O)&&(O.key||"".concat((E=O.props)===null||E===void 0?void 0:E.name))||V;return ie.isValidElement(O)&&X?e.preserve?{itemDom:ie.cloneElement(O,{hidden:!0,key:U||V}),hidden:!0,colSpan:F}:{itemDom:null,colSpan:0,hidden:!0}:{itemDom:O,colSpan:F,hidden:!1}}),A=H.map(function(O,V){var q,D,T=O.itemDom,E=O.colSpan,L=T==null||(q=T.props)===null||q===void 0?void 0:q.hidden;if(L)return T;var F=ie.isValidElement(T)&&(T.key||"".concat((D=T.props)===null||D===void 0?void 0:D.name))||V;return 24-M%24<E&&(j+=24-M%24,M+=24-M%24),M+=E,p&&M%24===0&&V<$-1?u.jsx(Le,{span:E,className:"".concat(e.baseClassName,"-row-split-line ").concat(e.baseClassName,"-row-split ").concat(c).trim(),children:T},F):u.jsx(Le,{className:"".concat(e.baseClassName,"-row-split ").concat(c).trim(),span:E,children:T},F)}),I=W&&H.filter(function(O){return O.hidden}).length,_=h.useMemo(function(){return!(j<24||P<=C)},[P,C,j]),B=h.useMemo(function(){var O,V,q=M%24+((O=(V=e.submitterColSpanProps)===null||V===void 0?void 0:V.span)!==null&&O!==void 0?O:w.span);if(q>24){var D,T;return 24-((D=(T=e.submitterColSpanProps)===null||T===void 0?void 0:T.span)!==null&&D!==void 0?D:w.span)}return 24-q},[M,M%24+((t=(r=e.submitterColSpanProps)===null||r===void 0?void 0:r.span)!==null&&t!==void 0?t:w.span),(a=e.submitterColSpanProps)===null||a===void 0?void 0:a.span]),Q=h.useContext(Me.ConfigContext),Z=Q.getPrefixCls("pro-query-filter");return u.jsxs(an,{gutter:k,justify:"start",className:ge("".concat(Z,"-row"),c),children:[A,N&&u.jsx(Le,i(i({span:w.span,offset:B,className:ge((s=e.submitterColSpanProps)===null||s===void 0?void 0:s.className)},e.submitterColSpanProps),{},{style:{textAlign:"end"},children:u.jsx(Ke.Item,{label:" ",colon:!1,shouldUpdate:!1,className:"".concat(Z,"-actions ").concat(c).trim(),children:u.jsx(Co,{hiddenNum:I,collapsed:b,collapseRender:_?R:!1,submitter:N,setCollapsed:m},"pro-form-query-filter-actions")})}),"submitter")]},"resize-observer-row")},jo=Cr()?(In=document)===null||In===void 0||(In=In.body)===null||In===void 0?void 0:In.clientWidth:1024;function Eo(n){var e=n.collapsed,t=n.layout,r=n.defaultCollapsed,a=r===void 0?!0:r,s=n.defaultColsNumber,l=n.span,o=n.searchGutter,c=o===void 0?24:o;n.searchText,n.resetText;var d=n.optionRender,v=n.collapseRender,f=n.onReset,y=n.onCollapse,b=n.labelWidth,m=b===void 0?"80":b,x=n.style,R=n.split,p=n.preserve,g=p===void 0?!0:p,w=n.ignoreRules,C=n.showHiddenNum,k=C===void 0?!1:C,W=n.submitterColSpanProps,N=we(n,wo),j=h.useContext(Me.ConfigContext),$=j.getPrefixCls("pro-query-filter"),K=Ro($),P=K.wrapSSR,M=K.hashId,H=Fe(function(){return typeof(x==null?void 0:x.width)=="number"?x==null?void 0:x.width:jo}),A=ue(H,2),I=A[0],_=A[1],B=h.useMemo(function(){return Io(t,I+16,l)},[t,I,l]),Q=h.useMemo(function(){return s!==void 0?s-1:Math.max(1,24/B.span-1)},[s,B.span]),Z=h.useMemo(function(){if(m&&B.layout!=="vertical"&&m!=="auto")return{labelCol:{flex:"0 0 ".concat(m,"px")},wrapperCol:{style:{maxWidth:"calc(100% - ".concat(m,"px)")}},style:{flexWrap:"nowrap"}}},[B.layout,m]);return P(u.jsx(Lr,{onResize:function(V){I!==V.width&&V.width>17&&_(V.width)},children:u.jsx(On,i(i({isKeyPressSubmit:!0,preserve:g},N),{},{className:ge($,M,N.className),onReset:f,style:x,layout:B.layout,fieldProps:{style:{width:"100%"}},formItemProps:Z,groupProps:{titleStyle:{display:"inline-block",marginInlineEnd:16}},contentRender:function(V,q,D){return u.jsx(Fo,{spanSize:B,collapsed:e,form:D,submitterColSpanProps:W,collapseRender:v,defaultCollapsed:a,onCollapse:y,optionRender:d,submitter:q,items:V,split:R,baseClassName:$,resetText:n.resetText,searchText:n.searchText,searchGutter:c,preserve:g,ignoreRules:w,showLength:Q,showHiddenNum:k})}}))},"resize-observer"))}var Mo=["onFinish","step","formRef","title","stepProps"];function No(n){var e=h.useRef(),t=h.useContext(zr),r=h.useContext(Wr),a=i(i({},n),r),s=a.onFinish,l=a.step,o=a.formRef;a.title,a.stepProps;var c=we(a,Mo);return vn(!c.submitter,"StepForm 不包含提交按钮，请在 StepsForm 上"),h.useImperativeHandle(o,function(){return e.current},[o==null?void 0:o.current]),h.useEffect(function(){if(a.name||a.step){var d=(a.name||a.step).toString();return t==null||t.regForm(d,a),function(){t==null||t.unRegForm(d)}}},[]),t&&t!==null&&t!==void 0&&t.formArrayRef&&(t.formArrayRef.current[l||0]=e),u.jsx(On,i({formRef:e,onFinish:function(){var d=Se(le().mark(function v(f){var y;return le().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c.name&&(t==null||t.onFormFinish(c.name,f)),!s){m.next=9;break}return t==null||t.setLoading(!0),m.next=5,s==null?void 0:s(f);case 5:return y=m.sent,y&&(t==null||t.next()),t==null||t.setLoading(!1),m.abrupt("return");case 9:t!=null&&t.lastStep||t==null||t.next();case 10:case"end":return m.stop()}},v)}));return function(v){return d.apply(this,arguments)}}(),onInit:function(v,f){var y;e.current=f,t&&t!==null&&t!==void 0&&t.formArrayRef&&(t.formArrayRef.current[l||0]=e),c==null||(y=c.onInit)===null||y===void 0||y.call(c,v,f)},layout:"vertical"},He(c,["layoutType","columns"])))}var Lo=function(e){return S({},e.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":S({maxWidth:"1160px",margin:"auto"},"".concat(e.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}})};function $o(n){return _e("StepsForm",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Lo(t)]})}var Bo=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],zr=ie.createContext(void 0),Ao={horizontal:function(e){var t=e.stepsDom,r=e.formDom;return u.jsxs(u.Fragment,{children:[u.jsx(an,{gutter:{xs:8,sm:16,md:24},children:u.jsx(Le,{span:24,children:t})}),u.jsx(an,{gutter:{xs:8,sm:16,md:24},children:u.jsx(Le,{span:24,children:r})})]})},vertical:function(e){var t=e.stepsDom,r=e.formDom;return u.jsxs(an,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[u.jsx(Le,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:ie.cloneElement(t,{style:{height:"100%"}})}),u.jsx(Le,{children:u.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:r})})]})}},Wr=ie.createContext(null);function Ko(n){var e=h.useContext(Me.ConfigContext),t=e.getPrefixCls,r=t("pro-steps-form"),a=$o(r),s=a.wrapSSR,l=a.hashId;n.current,n.onCurrentChange;var o=n.submitter,c=n.stepsFormRender,d=n.stepsRender,v=n.stepFormRender,f=n.stepsProps,y=n.onFinish,b=n.formProps,m=n.containerStyle,x=n.formRef,R=n.formMapRef,p=n.layoutRender,g=we(n,Bo),w=h.useRef(new Map),C=h.useRef(new Map),k=h.useRef([]),W=h.useState([]),N=ue(W,2),j=N[0],$=N[1],K=h.useState(!1),P=ue(K,2),M=P[0],H=P[1],A=Oe(),I=Fe(0,{value:n.current,onChange:n.onCurrentChange}),_=ue(I,2),B=_[0],Q=_[1],Z=h.useMemo(function(){return Ao[(f==null?void 0:f.direction)||"horizontal"]},[f==null?void 0:f.direction]),O=h.useMemo(function(){return B===j.length-1},[j.length,B]),V=h.useCallback(function(ae,re){C.current.has(ae)||$(function(me){return[].concat(Ve(me),[ae])}),C.current.set(ae,re)},[]),q=h.useCallback(function(ae){$(function(re){return re.filter(function(me){return me!==ae})}),C.current.delete(ae),w.current.delete(ae)},[]);h.useImperativeHandle(R,function(){return k.current},[k.current]),h.useImperativeHandle(x,function(){var ae;return(ae=k.current[B||0])===null||ae===void 0?void 0:ae.current},[B,k.current]);var D=h.useCallback(function(){var ae=Se(le().mark(function re(me,de){var $e,se;return le().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(w.current.set(me,de),!(!O||!y)){oe.next=3;break}return oe.abrupt("return");case 3:return H(!0),$e=yr.apply(void 0,[{}].concat(Ve(Array.from(w.current.values())))),oe.prev=5,oe.next=8,y($e);case 8:se=oe.sent,se&&(Q(0),k.current.forEach(function(Be){var pn;return(pn=Be.current)===null||pn===void 0?void 0:pn.resetFields()})),oe.next=15;break;case 12:oe.prev=12,oe.t0=oe.catch(5),console.log(oe.t0);case 15:return oe.prev=15,H(!1),oe.finish(15);case 18:case"end":return oe.stop()}},re,null,[[5,12,15,18]])}));return function(re,me){return ae.apply(this,arguments)}}(),[O,y,H,Q]),T=h.useMemo(function(){var ae=et(nt,"4.24.0")>-1,re=ae?{items:j.map(function(me){var de=C.current.get(me);return i({key:me,title:de==null?void 0:de.title},de==null?void 0:de.stepProps)})}:{};return u.jsx("div",{className:"".concat(r,"-steps-container ").concat(l).trim(),style:{maxWidth:Math.min(j.length*320,1160)},children:u.jsx(Jt,i(i(i({},f),re),{},{current:B,onChange:void 0,children:!ae&&j.map(function(me){var de=C.current.get(me);return u.jsx(Jt.Step,i({title:de==null?void 0:de.title},de==null?void 0:de.stepProps),me)})}))})},[j,l,r,B,f]),E=Re(function(){var ae,re=k.current[B];(ae=re.current)===null||ae===void 0||ae.submit()}),L=Re(function(){B<1||Q(B-1)}),F=h.useMemo(function(){return o!==!1&&u.jsx(Xn,i(i({type:"primary",loading:M},o==null?void 0:o.submitButtonProps),{},{onClick:function(){var re;o==null||(re=o.onSubmit)===null||re===void 0||re.call(o),E()},children:A.getMessage("stepsForm.next","下一步")}),"next")},[A,M,E,o]),z=h.useMemo(function(){return o!==!1&&u.jsx(Xn,i(i({},o==null?void 0:o.resetButtonProps),{},{onClick:function(){var re;L(),o==null||(re=o.onReset)===null||re===void 0||re.call(o)},children:A.getMessage("stepsForm.prev","上一步")}),"pre")},[A,L,o]),X=h.useMemo(function(){return o!==!1&&u.jsx(Xn,i(i({type:"primary",loading:M},o==null?void 0:o.submitButtonProps),{},{onClick:function(){var re;o==null||(re=o.onSubmit)===null||re===void 0||re.call(o),E()},children:A.getMessage("stepsForm.submit","提交")}),"submit")},[A,M,E,o]),U=Re(function(){B>j.length-2||Q(B+1)}),Y=h.useMemo(function(){var ae=[],re=B||0;if(re<1?j.length===1?ae.push(X):ae.push(F):re+1===j.length?ae.push(z,X):ae.push(z,F),ae=ae.filter(ie.isValidElement),o&&o.render){var me,de={form:(me=k.current[B])===null||me===void 0?void 0:me.current,onSubmit:E,step:B,onPre:L};return o.render(de,ae)}return o&&(o==null?void 0:o.render)===!1?null:ae},[j.length,F,E,z,L,B,X,o]),G=h.useMemo(function(){return Bt(n.children).map(function(ae,re){var me=ae.props,de=me.name||"".concat(re),$e=B===re,se=$e?{contentRender:v,submitter:!1}:{};return u.jsx("div",{className:ge("".concat(r,"-step"),l,S({},"".concat(r,"-step-active"),$e)),children:u.jsx(Wr.Provider,{value:i(i(i(i({},se),b),me),{},{name:de,step:re}),children:ae})},de)})},[b,l,r,n.children,B,v]),ce=h.useMemo(function(){return d?d(j.map(function(ae){var re;return{key:ae,title:(re=C.current.get(ae))===null||re===void 0?void 0:re.title}}),T):T},[j,T,d]),ne=h.useMemo(function(){return u.jsxs("div",{className:"".concat(r,"-container ").concat(l).trim(),style:m,children:[G,c?null:u.jsx(wn,{children:Y})]})},[m,G,l,r,c,Y]),he=h.useMemo(function(){var ae={stepsDom:ce,formDom:ne};return c?c(p?p(ae):Z(ae),Y):p?p(ae):Z(ae)},[ce,ne,Z,c,Y,p]);return s(u.jsx("div",{className:ge(r,l),children:u.jsx(Ke.Provider,i(i({},g),{},{children:u.jsx(zr.Provider,{value:{loading:M,setLoading:H,regForm:V,keyArray:j,next:U,formArrayRef:k,formMapRef:C,lastStep:O,unRegForm:q,onFormFinish:D},children:he})}))}))}function tt(n){return u.jsx(xr,{needDeps:!0,children:u.jsx(Ko,i({},n))})}tt.StepForm=No;tt.useForm=Ke.useForm;var ko=function(e){var t=e.children;return u.jsx(u.Fragment,{children:t})},Do=["steps","columns","forceUpdate","grid"],_o=function(e){var t=e.steps,r=e.columns,a=e.forceUpdate,s=e.grid,l=we(e,Do),o=Rr(l),c=h.useCallback(function(v){var f,y;(f=(y=o.current).onCurrentChange)===null||f===void 0||f.call(y,v),a([])},[a,o]),d=h.useMemo(function(){return t==null?void 0:t.map(function(v,f){return h.createElement(Vr,i(i({grid:s},v),{},{key:f,layoutType:"StepForm",columns:r[f]}))})},[r,s,t]);return u.jsx(tt,i(i({},l),{},{onCurrentChange:c,children:d}))},Oo=function(e,t){if(e.valueType==="dependency"){var r,a,s,l=(r=e.getFieldProps)===null||r===void 0?void 0:r.call(e);return vn(Array.isArray((a=e.name)!==null&&a!==void 0?a:l==null?void 0:l.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),vn(typeof e.columns=="function",'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray((s=e.name)!==null&&s!==void 0?s:l==null?void 0:l.name)?h.createElement(wr,i(i({name:e.name},l),{},{key:e.key}),function(o){return!e.columns||typeof e.columns!="function"?null:t.genItems(e.columns(o))}):null}return!0},zo=function(e){if(e.valueType==="divider"){var t;return h.createElement(Ua,i(i({},(t=e.getFieldProps)===null||t===void 0?void 0:t.call(e)),{},{key:e.key}))}return!0},Wo=function(e,t){var r=t.action,a=t.formRef,s=t.type,l=t.originItem,o=i(i({},He(e,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:e.name||e.key||e.dataIndex,width:e.width,render:e!=null&&e.render?function(f,y,b){var m,x,R,p;return e==null||(m=e.render)===null||m===void 0?void 0:m.call(e,f,y,b,r==null?void 0:r.current,i(i({type:s},e),{},{key:(x=e.key)===null||x===void 0?void 0:x.toString(),formItemProps:(R=e.getFormItemProps)===null||R===void 0?void 0:R.call(e),fieldProps:(p=e.getFieldProps)===null||p===void 0?void 0:p.call(e)}))}:void 0}),c=function(){return u.jsx(Jn,i(i({},o),{},{ignoreFormItem:!0}))},d=e!=null&&e.renderFormItem?function(f,y){var b,m,x,R,p=en(i(i({},y),{},{onChange:void 0}));return e==null||(b=e.renderFormItem)===null||b===void 0?void 0:b.call(e,i(i({type:s},e),{},{key:(m=e.key)===null||m===void 0?void 0:m.toString(),formItemProps:(x=e.getFormItemProps)===null||x===void 0?void 0:x.call(e),fieldProps:(R=e.getFieldProps)===null||R===void 0?void 0:R.call(e),originProps:l}),i(i({},p),{},{defaultRender:c,type:s}),a.current)}:void 0,v=function(){if(e!=null&&e.renderFormItem){var y=d==null?void 0:d(null,{});if(!y||e.ignoreFormItem)return y}return h.createElement(Jn,i(i({},o),{},{key:[e.key,e.index||0].join("-"),renderFormItem:d}))};return e.dependencies?u.jsx(wr,{name:e.dependencies||[],children:v},e.key):v()},Vo=function(e,t){var r=t.genItems;if(e.valueType==="formList"&&e.dataIndex){var a,s;return!e.columns||!Array.isArray(e.columns)?null:h.createElement(pa,i(i({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,name:e.dataIndex,label:e.label,initialValue:e.initialValue,colProps:e.colProps,rowProps:e.rowProps},(s=e.getFieldProps)===null||s===void 0?void 0:s.call(e)),r(e.columns))}return!0},Ho=function(e,t){var r=t.genItems;if(e.valueType==="formSet"&&e.dataIndex){var a,s;return!e.columns||!Array.isArray(e.columns)?null:h.createElement(uo,i(i({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,initialValue:e.initialValue,name:e.dataIndex,label:e.label,colProps:e.colProps,rowProps:e.rowProps},(s=e.getFieldProps)===null||s===void 0?void 0:s.call(e)),r(e.columns))}return!0},Uo=function(e,t){var r=t.genItems;if(e.valueType==="group"){var a;return!e.columns||!Array.isArray(e.columns)?null:u.jsx(Jo,i(i({label:e.label,colProps:e.colProps,rowProps:e.rowProps},(a=e.getFieldProps)===null||a===void 0?void 0:a.call(e)),{},{children:r(e.columns)}),e.key)}return!0},Go=function(e){return e.valueType&&typeof e.valueType=="string"&&["index","indexBorder","option"].includes(e==null?void 0:e.valueType)?null:!0},nr=[Go,Uo,Vo,Ho,zo,Oo],qo=function(e,t){for(var r=0;r<nr.length;r++){var a=nr[r],s=a(e,t);if(s!==!0)return s}return Wo(e,t)},Qo=["columns","layoutType","type","action","shouldUpdate","formRef"],Xo={DrawerForm:ga,QueryFilter:Eo,LightFilter:go,StepForm:tt.StepForm,StepsForm:_o,ModalForm:bo,Embed:ko,Form:ze};function Vr(n){var e=n.columns,t=n.layoutType,r=t===void 0?"Form":t,a=n.type,s=a===void 0?"form":a,l=n.action,o=n.shouldUpdate,c=o===void 0?function(A,I){return Tn(A)!==Tn(I)}:o,d=n.formRef,v=we(n,Qo),f=Xo[r]||ze,y=Ke.useForm(),b=ue(y,1),m=b[0],x=Ke.useFormInstance(),R=h.useState([]),p=ue(R,2),g=p[1],w=h.useState(function(){return[]}),C=ue(w,2),k=C[0],W=C[1],N=Il(n.form||x||m),j=h.useRef(),$=Rr(n),K=Re(function(A){return A.filter(function(I){return!(I.hideInForm&&s==="form")}).sort(function(I,_){return _.order||I.order?(_.order||0)-(I.order||0):(_.index||0)-(I.index||0)}).map(function(I,_){var B=Qe(I.title,I,"form",u.jsx(xn,{label:I.title,tooltip:I.tooltip||I.tip})),Q=en({title:B,label:B,name:I.name,valueType:Qe(I.valueType,{}),key:I.key||I.dataIndex||_,columns:I.columns,valueEnum:I.valueEnum,dataIndex:I.dataIndex||I.key,initialValue:I.initialValue,width:I.width,index:I.index,readonly:I.readonly,colSize:I.colSize,colProps:I.colProps,rowProps:I.rowProps,className:I.className,tooltip:I.tooltip||I.tip,dependencies:I.dependencies,proFieldProps:I.proFieldProps,ignoreFormItem:I.ignoreFormItem,getFieldProps:I.fieldProps?function(){return Qe(I.fieldProps,N.current,I)}:void 0,getFormItemProps:I.formItemProps?function(){return Qe(I.formItemProps,N.current,I)}:void 0,render:I.render,renderFormItem:I.renderFormItem,renderText:I.renderText,request:I.request,params:I.params,transform:I.transform,convertValue:I.convertValue,debounceTime:I.debounceTime,defaultKeyWords:I.defaultKeyWords});return qo(Q,{action:l,type:s,originItem:I,formRef:N,genItems:K})}).filter(function(I){return!!I})}),P=h.useCallback(function(A,I){var _=$.current.onValuesChange;(c===!0||typeof c=="function"&&c(I,j.current))&&W([]),j.current=I,_==null||_(A,I)},[$,c]),M=Ht(function(){if(N.current&&!(e.length&&Array.isArray(e[0])))return K(e)},[e,v==null?void 0:v.open,l,s,k,!!N.current]),H=Ht(function(){return r==="StepsForm"?{forceUpdate:g,columns:e}:{}},[e,r]);return h.useImperativeHandle(d,function(){return N.current},[N.current]),u.jsx(f,i(i(i({},H),v),{},{onInit:function(I,_){var B;d&&(d.current=_),v==null||(B=v.onInit)===null||B===void 0||B.call(v,I,_),N.current=_},form:n.form||m,formRef:N,onValuesChange:P,children:M}))}function ze(n){return u.jsx(On,i({layout:"vertical",contentRender:function(t,r){return u.jsxs(u.Fragment,{children:[t,r]})}},n))}ze.Group=Or;ze.useForm=Ke.useForm;ze.Item=ya;ze.useWatch=Ke.useWatch;ze.ErrorList=Ke.ErrorList;ze.Provider=Ke.Provider;ze.useFormInstance=Ke.useFormInstance;ze.EditOrReadOnlyContext=ba;var Jo=ze.Group,Yo="[object Map]",Zo="[object Set]",ei=Object.prototype,ni=ei.hasOwnProperty;function ti(n){if(n==null)return!0;if(Sa(n)&&(ht(n)||typeof n=="string"||typeof n.splice=="function"||pt(n)||Pr(n)||Ca(n)))return!n.length;var e=gt(n);if(e==Yo||e==Zo)return!n.size;if(xa(n))return!Ra(n).length;for(var t in n)if(ni.call(n,t))return!1;return!0}var ri="__lodash_hash_undefined__";function ai(n){return this.__data__.set(n,ri),this}function li(n){return this.__data__.has(n)}function Zn(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new wa;++e<t;)this.add(n[e])}Zn.prototype.add=Zn.prototype.push=ai;Zn.prototype.has=li;function oi(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function ii(n,e){return n.has(e)}var si=1,ui=2;function Hr(n,e,t,r,a,s){var l=t&si,o=n.length,c=e.length;if(o!=c&&!(l&&c>o))return!1;var d=s.get(n),v=s.get(e);if(d&&v)return d==e&&v==n;var f=-1,y=!0,b=t&ui?new Zn:void 0;for(s.set(n,e),s.set(e,n);++f<o;){var m=n[f],x=e[f];if(r)var R=l?r(x,m,f,e,n,s):r(m,x,f,n,e,s);if(R!==void 0){if(R)continue;y=!1;break}if(b){if(!oi(e,function(p,g){if(!ii(b,g)&&(m===p||a(m,p,t,r,s)))return b.push(g)})){y=!1;break}}else if(!(m===x||a(m,x,t,r,s))){y=!1;break}}return s.delete(n),s.delete(e),y}function ci(n){var e=-1,t=Array(n.size);return n.forEach(function(r,a){t[++e]=[a,r]}),t}function di(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var fi=1,vi=2,mi="[object Boolean]",hi="[object Date]",pi="[object Error]",gi="[object Map]",yi="[object Number]",bi="[object RegExp]",Si="[object Set]",Ci="[object String]",xi="[object Symbol]",Ri="[object ArrayBuffer]",wi="[object DataView]",tr=Ut?Ut.prototype:void 0,st=tr?tr.valueOf:void 0;function Pi(n,e,t,r,a,s,l){switch(t){case wi:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case Ri:return!(n.byteLength!=e.byteLength||!s(new Gt(n),new Gt(e)));case mi:case hi:case yi:return Pa(+n,+e);case pi:return n.name==e.name&&n.message==e.message;case bi:case Ci:return n==e+"";case gi:var o=ci;case Si:var c=r&fi;if(o||(o=di),n.size!=e.size&&!c)return!1;var d=l.get(n);if(d)return d==e;r|=vi,l.set(n,e);var v=Hr(o(n),o(e),r,a,s,l);return l.delete(n),v;case xi:if(st)return st.call(n)==st.call(e)}return!1}var Ii=1,Ti=Object.prototype,Fi=Ti.hasOwnProperty;function ji(n,e,t,r,a,s){var l=t&Ii,o=qt(n),c=o.length,d=qt(e),v=d.length;if(c!=v&&!l)return!1;for(var f=c;f--;){var y=o[f];if(!(l?y in e:Fi.call(e,y)))return!1}var b=s.get(n),m=s.get(e);if(b&&m)return b==e&&m==n;var x=!0;s.set(n,e),s.set(e,n);for(var R=l;++f<c;){y=o[f];var p=n[y],g=e[y];if(r)var w=l?r(g,p,y,e,n,s):r(p,g,y,n,e,s);if(!(w===void 0?p===g||a(p,g,t,r,s):w)){x=!1;break}R||(R=y=="constructor")}if(x&&!R){var C=n.constructor,k=e.constructor;C!=k&&"constructor"in n&&"constructor"in e&&!(typeof C=="function"&&C instanceof C&&typeof k=="function"&&k instanceof k)&&(x=!1)}return s.delete(n),s.delete(e),x}var Ei=1,rr="[object Arguments]",ar="[object Array]",Un="[object Object]",Mi=Object.prototype,lr=Mi.hasOwnProperty;function Ni(n,e,t,r,a,s){var l=ht(n),o=ht(e),c=l?ar:gt(n),d=o?ar:gt(e);c=c==rr?Un:c,d=d==rr?Un:d;var v=c==Un,f=d==Un,y=c==d;if(y&&pt(n)){if(!pt(e))return!1;l=!0,v=!1}if(y&&!v)return s||(s=new lt),l||Pr(n)?Hr(n,e,t,r,a,s):Pi(n,e,c,t,r,a,s);if(!(t&Ei)){var b=v&&lr.call(n,"__wrapped__"),m=f&&lr.call(e,"__wrapped__");if(b||m){var x=b?n.value():n,R=m?e.value():e;return s||(s=new lt),a(x,R,t,r,s)}}return y?(s||(s=new lt),ji(n,e,t,r,a,s)):!1}function Ur(n,e,t,r,a){return n===e?!0:n==null||e==null||!Qt(n)&&!Qt(e)?n!==n&&e!==e:Ni(n,e,t,r,Ur,a)}function Li(n,e){return Ur(n,e)}function $i(n,e,t){var r,a;if(n===!1)return!1;var s=e.total,l=e.current,o=e.pageSize,c=e.setPageInfo,d=Ue(n)==="object"?n:{};return i(i({showTotal:function(f,y){return"".concat(t.getMessage("pagination.total.range","第")," ").concat(y[0],"-").concat(y[1]," ").concat(t.getMessage("pagination.total.total","条/总共")," ").concat(f," ").concat(t.getMessage("pagination.total.item","条"))},total:s},d),{},{current:n!==!0&&n&&(r=n.current)!==null&&r!==void 0?r:l,pageSize:n!==!0&&n&&(a=n.pageSize)!==null&&a!==void 0?a:o,onChange:function(f,y){var b=n,m=b.onChange;m==null||m(f,y||20),(y!==o||l!==f)&&c({pageSize:y,current:f})}})}function Bi(n,e,t){var r=i(i({},t.editableUtils),{},{pageInfo:e.pageInfo,reload:function(){var a=Se(le().mark(function l(o){return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!o){d.next=3;break}return d.next=3,e.setPageInfo({current:1});case 3:return d.next=5,e==null?void 0:e.reload();case 5:case"end":return d.stop()}},l)}));function s(l){return a.apply(this,arguments)}return s}(),reloadAndRest:function(){var a=Se(le().mark(function l(){return le().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t.onCleanSelected(),c.next=3,e.setPageInfo({current:1});case 3:return c.next=5,e==null?void 0:e.reload();case 5:case"end":return c.stop()}},l)}));function s(){return a.apply(this,arguments)}return s}(),reset:function(){var a=Se(le().mark(function l(){var o;return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.resetAll();case 2:return d.next=4,e==null||(o=e.reset)===null||o===void 0?void 0:o.call(e);case 4:return d.next=6,e==null?void 0:e.reload();case 6:case"end":return d.stop()}},l)}));function s(){return a.apply(this,arguments)}return s}(),fullScreen:function(){return t.fullScreen()},clearSelected:function(){return t.onCleanSelected()},setPageInfo:function(s){return e.setPageInfo(s)}});n.current=r}function Ai(n,e){return e.filter(function(t){return t}).length<1?n:e.reduce(function(t,r){return r(t)},n)}var Gr=function(e,t){return t===void 0?!1:typeof t=="boolean"?t:t[e]},Ki=function(e){var t;return e&&Ue(e)==="object"&&(e==null||(t=e.props)===null||t===void 0?void 0:t.colSpan)},Ln=function(e,t){return e?Array.isArray(e)?e.join("-"):e.toString():"".concat(t)};function ki(n){return Array.isArray(n)?n.join(","):n==null?void 0:n.toString()}function Di(n){var e={},t={};return n.forEach(function(r){var a=ki(r.dataIndex);if(a){if(r.filters){var s=r.defaultFilteredValue;s===void 0?e[a]=null:e[a]=r.defaultFilteredValue}r.sorter&&r.defaultSortOrder&&(t[a]=r.defaultSortOrder)}}),{sort:t,filter:e}}function _i(){var n,e,t,r,a,s,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=h.useRef(),c=h.useRef(null),d=h.useRef(),v=h.useRef(),f=h.useState(""),y=ue(f,2),b=y[0],m=y[1],x=h.useRef([]),R=Fe(function(){return l.size||l.defaultSize||"middle"},{value:l.size,onChange:l.onSizeChange}),p=ue(R,2),g=p[0],w=p[1],C=h.useMemo(function(){var P,M;if(l!=null&&(P=l.columnsState)!==null&&P!==void 0&&P.defaultValue)return l.columnsState.defaultValue;var H={};return(M=l.columns)===null||M===void 0||M.forEach(function(A,I){var _=A.key,B=A.dataIndex,Q=A.fixed,Z=A.disable,O=Ln(_??B,I);O&&(H[O]={show:!0,fixed:Q,disable:Z})}),H},[l.columns]),k=Fe(function(){var P,M,H=l.columnsState||{},A=H.persistenceType,I=H.persistenceKey;if(I&&A&&typeof window<"u"){var _=window[A];try{var B=_==null?void 0:_.getItem(I);if(B){var Q;if(l!=null&&(Q=l.columnsState)!==null&&Q!==void 0&&Q.defaultValue){var Z;return mt({},l==null||(Z=l.columnsState)===null||Z===void 0?void 0:Z.defaultValue,JSON.parse(B))}return JSON.parse(B)}}catch(O){console.warn(O)}}return l.columnsStateMap||((P=l.columnsState)===null||P===void 0?void 0:P.value)||((M=l.columnsState)===null||M===void 0?void 0:M.defaultValue)||C},{value:((n=l.columnsState)===null||n===void 0?void 0:n.value)||l.columnsStateMap,onChange:((e=l.columnsState)===null||e===void 0?void 0:e.onChange)||l.onColumnsStateChange}),W=ue(k,2),N=W[0],j=W[1];h.useEffect(function(){var P=l.columnsState||{},M=P.persistenceType,H=P.persistenceKey;if(H&&M&&typeof window<"u"){var A=window[M];try{var I=A==null?void 0:A.getItem(H);if(I){var _;if(l!=null&&(_=l.columnsState)!==null&&_!==void 0&&_.defaultValue){var B;j(mt({},l==null||(B=l.columnsState)===null||B===void 0?void 0:B.defaultValue,JSON.parse(I)))}else j(JSON.parse(I))}else j(C)}catch(Q){console.warn(Q)}}},[(t=l.columnsState)===null||t===void 0?void 0:t.persistenceKey,(r=l.columnsState)===null||r===void 0?void 0:r.persistenceType,C]),vn(!l.columnsStateMap,"columnsStateMap已经废弃，请使用 columnsState.value 替换"),vn(!l.columnsStateMap,"columnsStateMap has been discarded, please use columnsState.value replacement");var $=h.useCallback(function(){var P=l.columnsState||{},M=P.persistenceType,H=P.persistenceKey;if(!(!H||!M||typeof window>"u")){var A=window[M];try{A==null||A.removeItem(H)}catch(I){console.warn(I)}}},[l.columnsState]);h.useEffect(function(){var P,M;if(!(!((P=l.columnsState)!==null&&P!==void 0&&P.persistenceKey)||!((M=l.columnsState)!==null&&M!==void 0&&M.persistenceType))&&!(typeof window>"u")){var H=l.columnsState,A=H.persistenceType,I=H.persistenceKey,_=window[A];try{_==null||_.setItem(I,JSON.stringify(N))}catch(B){console.warn(B),$()}}},[(a=l.columnsState)===null||a===void 0?void 0:a.persistenceKey,N,(s=l.columnsState)===null||s===void 0?void 0:s.persistenceType]);var K={action:o.current,setAction:function(M){o.current=M},sortKeyColumns:x.current,setSortKeyColumns:function(M){x.current=M},propsRef:v,columnsMap:N,keyWords:b,setKeyWords:function(M){return m(M)},setTableSize:w,tableSize:g,prefixName:d.current,setPrefixName:function(M){d.current=M},setColumnsMap:j,columns:l.columns,rootDomRef:c,clearPersistenceStorage:$,defaultColumnKeyMap:C};return Object.defineProperty(K,"prefixName",{get:function(){return d.current}}),Object.defineProperty(K,"sortKeyColumns",{get:function(){return x.current}}),Object.defineProperty(K,"action",{get:function(){return o.current}}),K}var mn=h.createContext({}),Oi=function(e){var t=_i(e.initValue);return u.jsx(mn.Provider,{value:t,children:e.children})},zi=function(e){return S({},e.componentCls,{marginBlockEnd:16,backgroundColor:Ia(e.colorTextBase,.02),borderRadius:e.borderRadius,border:"none","&-container":{paddingBlock:e.paddingSM,paddingInline:e.paddingLG},"&-info":{display:"flex",alignItems:"center",transition:"all 0.3s",color:e.colorTextTertiary,"&-content":{flex:1},"&-option":{minWidth:48,paddingInlineStart:16}}})};function Wi(n){return _e("ProTableAlert",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[zi(t)]})}var Vi=function(e){var t=e.intl,r=e.onCleanSelected;return[u.jsx("a",{onClick:r,children:t.getMessage("alert.clear","清空")},"0")]};function Hi(n){var e=n.selectedRowKeys,t=e===void 0?[]:e,r=n.onCleanSelected,a=n.alwaysShowAlert,s=n.selectedRows,l=n.alertInfoRender,o=l===void 0?function(w){var C=w.intl;return u.jsxs(wn,{children:[C.getMessage("alert.selected","已选择"),t.length,C.getMessage("alert.item","项"),"  "]})}:l,c=n.alertOptionRender,d=c===void 0?Vi:c,v=Oe(),f=d&&d({onCleanSelected:r,selectedRowKeys:t,selectedRows:s,intl:v}),y=h.useContext(Me.ConfigContext),b=y.getPrefixCls,m=b("pro-table-alert"),x=Wi(m),R=x.wrapSSR,p=x.hashId;if(o===!1)return null;var g=o({intl:v,selectedRowKeys:t,selectedRows:s,onCleanSelected:r});return g===!1||t.length<1&&!a?null:R(u.jsx("div",{className:"".concat(m," ").concat(p).trim(),children:u.jsx("div",{className:"".concat(m,"-container ").concat(p).trim(),children:u.jsxs("div",{className:"".concat(m,"-info ").concat(p).trim(),children:[u.jsx("div",{className:"".concat(m,"-info-content ").concat(p).trim(),children:g}),f?u.jsx("div",{className:"".concat(m,"-info-option ").concat(p).trim(),children:f}):null]})})}))}function Ui(n){var e=n.replace(/[A-Z]/g,function(t){return"-".concat(t.toLowerCase())});return e.startsWith("-")&&(e=e.slice(1)),e}var Gi=function(e,t){return!e&&t!==!1?(t==null?void 0:t.filterType)==="light"?"LightFilter":"QueryFilter":"Form"},qi=function(e,t,r){return!e&&r==="LightFilter"?He(i({},t),["labelWidth","defaultCollapsed","filterType"]):e?{}:He(i({labelWidth:t?t==null?void 0:t.labelWidth:void 0,defaultCollapsed:!0},t),["filterType"])},Qi=function(e,t){return e?He(t,["ignoreRules"]):i({ignoreRules:!0},t)},Xi=function(e){var t=e.onSubmit,r=e.formRef,a=e.dateFormatter,s=a===void 0?"string":a,l=e.type,o=e.columns,c=e.action,d=e.ghost,v=e.manualRequest,f=e.onReset,y=e.submitButtonLoading,b=e.search,m=e.form,x=e.bordered,R=h.useContext(Rn),p=R.hashId,g=l==="form",w=function(){var P=Se(le().mark(function M(H,A){return le().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:t&&t(H,A);case 1:case"end":return _.stop()}},M)}));return function(H,A){return P.apply(this,arguments)}}(),C=h.useContext(Me.ConfigContext),k=C.getPrefixCls,W=h.useMemo(function(){return o.filter(function(P){return!(P===dn.EXPAND_COLUMN||P===dn.SELECTION_COLUMN||(P.hideInSearch||P.search===!1)&&l!=="form"||l==="form"&&P.hideInForm)}).map(function(P){var M,H=!P.valueType||["textarea","jsonCode","code"].includes(P==null?void 0:P.valueType)&&l==="table"?"text":P==null?void 0:P.valueType,A=(P==null?void 0:P.key)||(P==null||(M=P.dataIndex)===null||M===void 0?void 0:M.toString());return i(i(i({},P),{},{width:void 0},P.search&&Ue(P.search)==="object"?P.search:{}),{},{valueType:H,proFieldProps:i(i({},P.proFieldProps),{},{proFieldKey:A?"table-field-".concat(A):void 0})})})},[o,l]),N=k("pro-table-search"),j=k("pro-table-form"),$=h.useMemo(function(){return Gi(g,b)},[b,g]),K=h.useMemo(function(){return{submitter:{submitButtonProps:{loading:y}}}},[y]);return u.jsx("div",{className:ge(p,S(S(S(S(S(S(S(S(S({},k("pro-card"),!0),"".concat(k("pro-card"),"-border"),!!x),"".concat(k("pro-card"),"-bordered"),!!x),"".concat(k("pro-card"),"-ghost"),!!d),N,!0),j,g),k("pro-table-search-".concat(Ui($))),!0),"".concat(N,"-ghost"),d),b==null?void 0:b.className,b!==!1&&(b==null?void 0:b.className))),children:u.jsx(Vr,i(i(i(i({layoutType:$,columns:W,type:l},K),qi(g,b,$)),Qi(g,m||{})),{},{formRef:r,action:c,dateFormatter:s,onInit:function(M,H){if(r.current=H,l!=="form"){var A,I,_,B=(A=c.current)===null||A===void 0?void 0:A.pageInfo,Q=M,Z=Q.current,O=Z===void 0?B==null?void 0:B.current:Z,V=Q.pageSize,q=V===void 0?B==null?void 0:B.pageSize:V;if((I=c.current)===null||I===void 0||(_=I.setPageInfo)===null||_===void 0||_.call(I,i(i({},B),{},{current:parseInt(O,10),pageSize:parseInt(q,10)})),v)return;w(M,!0)}},onReset:function(M){f==null||f(M)},onFinish:function(M){w(M,!1)},initialValues:m==null?void 0:m.initialValues}))})},Ji=function(n){Et(t,n);var e=Mt(t);function t(){var r;Nt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Ze(r),"onSubmit",function(o,c){var d=r.props,v=d.pagination,f=d.beforeSearchSubmit,y=f===void 0?function(k){return k}:f,b=d.action,m=d.onSubmit,x=d.onFormSearchSubmit,R=v?en({current:v.current,pageSize:v.pageSize}):{},p=i(i({},o),{},{_timestamp:Date.now()},R),g=He(y(p),Object.keys(R));if(x(g),!c){var w,C;(w=b.current)===null||w===void 0||(C=w.setPageInfo)===null||C===void 0||C.call(w,{current:1})}m&&!c&&(m==null||m(o))}),S(Ze(r),"onReset",function(o){var c,d,v=r.props,f=v.pagination,y=v.beforeSearchSubmit,b=y===void 0?function(w){return w}:y,m=v.action,x=v.onFormSearchSubmit,R=v.onReset,p=f?en({current:f.current,pageSize:f.pageSize}):{},g=He(b(i(i({},o),p)),Object.keys(p));x(g),(c=m.current)===null||c===void 0||(d=c.setPageInfo)===null||d===void 0||d.call(c,{current:1}),R==null||R()}),S(Ze(r),"isEqual",function(o){var c=r.props,d=c.columns,v=c.loading,f=c.formRef,y=c.type,b=c.cardBordered,m=c.dateFormatter,x=c.form,R=c.search,p=c.manualRequest,g={columns:d,loading:v,formRef:f,type:y,cardBordered:b,dateFormatter:m,form:x,search:R,manualRequest:p};return!Ir(g,{columns:o.columns,formRef:o.formRef,loading:o.loading,type:o.type,cardBordered:o.cardBordered,dateFormatter:o.dateFormatter,form:o.form,search:o.search,manualRequest:o.manualRequest})}),S(Ze(r),"shouldComponentUpdate",function(o){return r.isEqual(o)}),S(Ze(r),"render",function(){var o=r.props,c=o.columns,d=o.loading,v=o.formRef,f=o.type,y=o.action,b=o.cardBordered,m=o.dateFormatter,x=o.form,R=o.search,p=o.pagination,g=o.ghost,w=o.manualRequest,C=p?en({current:p.current,pageSize:p.pageSize}):{};return u.jsx(Xi,{submitButtonLoading:d,columns:c,type:f,ghost:g,formRef:v,onSubmit:r.onSubmit,manualRequest:w,onReset:r.onReset,dateFormatter:m,search:R,form:i(i({autoFocusFirstInput:!1},x),{},{extraUrlParams:i(i({},C),x==null?void 0:x.extraUrlParams)}),action:y,bordered:Gr("search",b)})}),r}return Lt(t)}(ie.Component),Yi=function(e){return S(S(S({},e.componentCls,{width:"auto","&-title":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px"},"&-overlay":S(S(S(S({},"".concat(e.antCls,"-popover-inner-content"),{width:"200px",paddingBlock:0,paddingInline:0,paddingBlockEnd:8}),"".concat(e.antCls,"-tree-node-content-wrapper:hover"),{backgroundColor:"transparent"}),"".concat(e.antCls,"-tree-draggable-icon"),{cursor:"grab"}),"".concat(e.antCls,"-tree-treenode"),S(S({alignItems:"center","&:hover":S({},"".concat(e.componentCls,"-list-item-option"),{display:"block"})},"".concat(e.antCls,"-tree-checkbox"),{marginInlineEnd:"4px"}),"".concat(e.antCls,"-tree-title"),{width:"100%"}))}),"".concat(e.componentCls,"-action-rest-button"),{color:e.colorPrimary}),"".concat(e.componentCls,"-list"),S(S(S({display:"flex",flexDirection:"column",width:"100%",paddingBlockStart:8},"&".concat(e.componentCls,"-list-group"),{paddingBlockStart:0}),"&-title",{marginBlockStart:"6px",marginBlockEnd:"6px",paddingInlineStart:"24px",color:e.colorTextSecondary,fontSize:"12px"}),"&-item",{display:"flex",alignItems:"center",maxHeight:24,justifyContent:"space-between","&-title":{flex:1,maxWidth:80,textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"},"&-option":{display:"none",float:"right",cursor:"pointer","> span":{"> span.anticon":{color:e.colorPrimary}},"> span + span":{marginInlineStart:4}}}))};function Zi(n){return _e("ColumnSetting",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Yi(t)]})}var es=["key","dataIndex","children"],ns=["disabled"],ut=function(e){var t=e.title,r=e.show,a=e.children,s=e.columnKey,l=e.fixed,o=h.useContext(mn),c=o.columnsMap,d=o.setColumnsMap;return r?u.jsx(fn,{title:t,children:u.jsx("span",{onClick:function(f){f.stopPropagation(),f.preventDefault();var y=c[s]||{},b=i(i({},c),{},S({},s,i(i({},y),{},{fixed:l})));d(b)},children:a})}):null},ts=function(e){var t=e.columnKey,r=e.isLeaf,a=e.title,s=e.className,l=e.fixed,o=e.showListItemOption,c=Oe(),d=h.useContext(Rn),v=d.hashId,f=u.jsxs("span",{className:"".concat(s,"-list-item-option ").concat(v).trim(),children:[u.jsx(ut,{columnKey:t,fixed:"left",title:c.getMessage("tableToolBar.leftPin","固定在列首"),show:l!=="left",children:u.jsx(Xa,{})}),u.jsx(ut,{columnKey:t,fixed:void 0,title:c.getMessage("tableToolBar.noPin","不固定"),show:!!l,children:u.jsx(Ja,{})}),u.jsx(ut,{columnKey:t,fixed:"right",title:c.getMessage("tableToolBar.rightPin","固定在列尾"),show:l!=="right",children:u.jsx(Ya,{})})]});return u.jsxs("span",{className:"".concat(s,"-list-item ").concat(v).trim(),children:[u.jsx("div",{className:"".concat(s,"-list-item-title ").concat(v).trim(),children:a}),o&&!r?f:null]},t)},ct=function(e){var t,r,a,s=e.list,l=e.draggable,o=e.checkable,c=e.showListItemOption,d=e.className,v=e.showTitle,f=v===void 0?!0:v,y=e.title,b=e.listHeight,m=b===void 0?280:b,x=h.useContext(Rn),R=x.hashId,p=h.useContext(mn),g=p.columnsMap,w=p.setColumnsMap,C=p.sortKeyColumns,k=p.setSortKeyColumns,W=s&&s.length>0,N=h.useMemo(function(){if(!W)return{};var P=[],M=new Map,H=function A(I,_){return I.map(function(B){var Q,Z=B.key;B.dataIndex;var O=B.children,V=we(B,es),q=Ln(Z,[_==null?void 0:_.columnKey,V.index].filter(Boolean).join("-")),D=g[q||"null"]||{show:!0};D.show!==!1&&!O&&P.push(q);var T=i(i({key:q},He(V,["className"])),{},{selectable:!1,disabled:D.disable===!0,disableCheckbox:typeof D.disable=="boolean"?D.disable:(Q=D.disable)===null||Q===void 0?void 0:Q.checkbox,isLeaf:_?!0:void 0});if(O){var E;T.children=A(O,i(i({},D),{},{columnKey:q})),(E=T.children)!==null&&E!==void 0&&E.every(function(L){return P==null?void 0:P.includes(L.key)})&&P.push(q)}return M.set(Z,T),T})};return{list:H(s),keys:P,map:M}},[g,s,W]),j=Re(function(P,M,H){var A=i({},g),I=Ve(C),_=I.findIndex(function(O){return O===P}),B=I.findIndex(function(O){return O===M}),Q=H>=_;if(!(_<0)){var Z=I[_];I.splice(_,1),H===0?I.unshift(Z):I.splice(Q?B:B+1,0,Z),I.forEach(function(O,V){A[O]=i(i({},A[O]||{}),{},{order:V})}),w(A),k(I)}}),$=Re(function(P){var M=i({},g),H=function A(I){var _,B=i({},M[I]);if(B.show=P.checked,(_=N.map)!==null&&_!==void 0&&(_=_.get(I))!==null&&_!==void 0&&_.children){var Q;(Q=N.map.get(I))===null||Q===void 0||(Q=Q.children)===null||Q===void 0||Q.forEach(function(Z){return A(Z.key)})}M[I]=B};H(P.node.key),w(i({},M))});if(!W)return null;var K=u.jsx(Qa,{itemHeight:24,draggable:l&&!!((t=N.list)!==null&&t!==void 0&&t.length)&&((r=N.list)===null||r===void 0?void 0:r.length)>1,checkable:o,onDrop:function(M){var H=M.node.key,A=M.dragNode.key,I=M.dropPosition,_=M.dropToGap,B=I===-1||!_?I+1:I;j(A,H,B)},blockNode:!0,onCheck:function(M,H){return $(H)},checkedKeys:N.keys,showLine:!1,titleRender:function(M){var H=i(i({},M),{},{children:void 0});if(!H.title)return null;var A=Qe(H.title,H),I=u.jsx(Fr.Text,{style:{width:80},ellipsis:{tooltip:A},children:A});return u.jsx(ts,i(i({className:d},He(H,["key"])),{},{showListItemOption:c,title:I,columnKey:H.key}))},height:m,treeData:(a=N.list)===null||a===void 0?void 0:a.map(function(P){P.disabled;var M=we(P,ns);return M})});return u.jsxs(u.Fragment,{children:[f&&u.jsx("span",{className:"".concat(d,"-list-title ").concat(R).trim(),children:y}),K]})},rs=function(e){var t=e.localColumns,r=e.className,a=e.draggable,s=e.checkable,l=e.showListItemOption,o=e.listsHeight,c=h.useContext(Rn),d=c.hashId,v=[],f=[],y=[],b=Oe();t.forEach(function(R){if(!R.hideInSetting){var p=R.fixed;if(p==="left"){f.push(R);return}if(p==="right"){v.push(R);return}y.push(R)}});var m=v&&v.length>0,x=f&&f.length>0;return u.jsxs("div",{className:ge("".concat(r,"-list"),d,S({},"".concat(r,"-list-group"),m||x)),children:[u.jsx(ct,{title:b.getMessage("tableToolBar.leftFixedTitle","固定在左侧"),list:f,draggable:a,checkable:s,showListItemOption:l,className:r,listHeight:o}),u.jsx(ct,{list:y,draggable:a,checkable:s,showListItemOption:l,title:b.getMessage("tableToolBar.noFixedTitle","不固定"),showTitle:x||m,className:r,listHeight:o}),u.jsx(ct,{title:b.getMessage("tableToolBar.rightFixedTitle","固定在右侧"),list:v,draggable:a,checkable:s,showListItemOption:l,className:r,listHeight:o})]})};function as(n){var e,t,r,a,s=h.useRef(null),l=h.useContext(mn),o=n.columns,c=n.checkedReset,d=c===void 0?!0:c,v=l.columnsMap,f=l.setColumnsMap,y=l.clearPersistenceStorage;h.useEffect(function(){var $;if(($=l.propsRef.current)!==null&&$!==void 0&&($=$.columnsState)!==null&&$!==void 0&&$.value){var K;s.current=JSON.parse(JSON.stringify(((K=l.propsRef.current)===null||K===void 0||(K=K.columnsState)===null||K===void 0?void 0:K.value)||{}))}},[]);var b=Re(function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,K={},P=function M(H){H.forEach(function(A){var I=A.key,_=A.fixed,B=A.index,Q=A.children,Z=A.disable,O=Ln(I,B);if(O){var V,q;K[O]={show:Z?(V=v[O])===null||V===void 0?void 0:V.show:$,fixed:_,disable:Z,order:(q=v[O])===null||q===void 0?void 0:q.order}}Q&&M(Q)})};P(o),f(K)}),m=Re(function($){$.target.checked?b():b(!1)}),x=Re(function(){var $;y==null||y(),f((($=l.propsRef.current)===null||$===void 0||($=$.columnsState)===null||$===void 0?void 0:$.defaultValue)||s.current||l.defaultColumnKeyMap)}),R=Object.values(v).filter(function($){return!$||$.show===!1}),p=R.length>0&&R.length!==o.length,g=Oe(),w=h.useContext(Me.ConfigContext),C=w.getPrefixCls,k=C("pro-table-column-setting"),W=Zi(k),N=W.wrapSSR,j=W.hashId;return N(u.jsx(Tr,{arrow:!1,title:u.jsxs("div",{className:"".concat(k,"-title ").concat(j).trim(),children:[n.checkable===!1?u.jsx("div",{}):u.jsx(Ga,{indeterminate:p,checked:R.length===0&&R.length!==o.length,onChange:function(K){m(K)},children:g.getMessage("tableToolBar.columnDisplay","列展示")}),d?u.jsx("a",{onClick:x,className:"".concat(k,"-action-rest-button ").concat(j).trim(),children:g.getMessage("tableToolBar.reset","重置")}):null,n!=null&&n.extra?u.jsx(wn,{size:12,align:"center",children:n.extra}):null]}),overlayClassName:"".concat(k,"-overlay ").concat(j).trim(),trigger:"click",placement:"bottomRight",content:u.jsx(rs,{checkable:(e=n.checkable)!==null&&e!==void 0?e:!0,draggable:(t=n.draggable)!==null&&t!==void 0?t:!0,showListItemOption:(r=n.showListItemOption)!==null&&r!==void 0?r:!0,className:k,localColumns:o,listsHeight:n.listsHeight}),children:n.children||u.jsx(fn,{title:g.getMessage("tableToolBar.columnSetting","列设置"),children:(a=n.settingIcon)!==null&&a!==void 0?a:u.jsx(qa,{})})}))}var ls=function(e){var t=h.useContext(Rn),r=t.hashId,a=e.items,s=a===void 0?[]:a,l=e.type,o=l===void 0?"inline":l,c=e.prefixCls,d=e.activeKey,v=e.defaultActiveKey,f=Fe(d||v,{value:d,onChange:e.onChange}),y=ue(f,2),b=y[0],m=y[1];if(s.length<1)return null;var x=s.find(function(p){return p.key===b})||s[0];if(o==="inline")return u.jsx("div",{className:ge("".concat(c,"-menu"),"".concat(c,"-inline-menu"),r),children:s.map(function(p,g){return u.jsx("div",{onClick:function(){m(p.key)},className:ge("".concat(c,"-inline-menu-item"),x.key===p.key?"".concat(c,"-inline-menu-item-active"):void 0,r),children:p.label},p.key||g)})});if(o==="tab")return u.jsx(Nn,{items:s.map(function(p){var g;return i(i({},p),{},{key:(g=p.key)===null||g===void 0?void 0:g.toString()})}),activeKey:x.key,onTabClick:function(g){return m(g)},children:et(nt,"4.23.0")<0?s==null?void 0:s.map(function(p,g){return h.createElement(Nn.TabPane,i(i({},p),{},{key:p.key||g,tab:p.label}))}):null});var R=kr({selectedKeys:[x.key],onClick:function(g){m(g.key)},items:s.map(function(p,g){return{key:p.key||g,disabled:p.disabled,label:p.label}})});return u.jsx("div",{className:ge("".concat(c,"-menu"),"".concat(c,"-dropdownmenu")),children:u.jsx($r,i(i({trigger:["click"]},R),{},{children:u.jsxs(wn,{className:"".concat(c,"-dropdownmenu-label"),children:[x.label,u.jsx(St,{})]})}))})},os=function(e){return S({},e.componentCls,S(S(S({lineHeight:"1","&-container":{display:"flex",justifyContent:"space-between",paddingBlock:e.padding,paddingInline:0,"&-mobile":{flexDirection:"column"}},"&-title":{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.colorTextHeading,fontWeight:"500",fontSize:e.fontSizeLG},"&-search:not(:last-child)":{display:"flex",alignItems:"center",justifyContent:"flex-start"},"&-setting-item":{marginBlock:0,marginInline:4,color:e.colorIconHover,fontSize:e.fontSizeLG,cursor:"pointer","> span":{display:"block",width:"100%",height:"100%"},"&:hover":{color:e.colorPrimary}},"&-left":S(S({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.marginXS,justifyContent:"flex-start",maxWidth:"calc(100% - 200px)"},"".concat(e.antCls,"-tabs"),{width:"100%"}),"&-has-tabs",{overflow:"hidden"}),"&-right":{flex:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:e.marginXS},"&-extra-line":{marginBlockEnd:e.margin},"&-setting-items":{display:"flex",gap:e.marginXS,lineHeight:"32px",alignItems:"center"},"&-filter":S({"&:not(:last-child)":{marginInlineEnd:e.margin},display:"flex",alignItems:"center"},"div$".concat(e.antCls,"-pro-table-search"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0}),"&-inline-menu-item":{display:"inline-block",marginInlineEnd:e.marginLG,cursor:"pointer",opacity:"0.75","&-active":{fontWeight:"bold",opacity:"1"}}},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0,"&::before":{borderBlockEnd:0}},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:0,"${token.antCls}-tabs-tab":{paddingBlockStart:0}})),"&-dropdownmenu-label",{fontWeight:"bold",fontSize:e.fontSizeIcon,textAlign:"center",cursor:"pointer"}),"@media (max-width: 768px)",S({},e.componentCls,{"&-container":{display:"flex",flexWrap:"wrap",flexDirection:"column"},"&-left":{marginBlockEnd:"16px",maxWidth:"100%"}})))};function is(n){return _e("ProTableListToolBar",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[os(t)]})}function ss(n){if(ie.isValidElement(n))return n;if(n){var e=n,t=e.icon,r=e.tooltip,a=e.onClick,s=e.key;return t&&r?u.jsx(fn,{title:r,children:u.jsx("span",{onClick:function(){a&&a(s)},children:t},s)}):u.jsx("span",{onClick:function(){a&&a(s)},children:t},s)}return null}var us=function(e){var t,r=e.prefixCls,a=e.tabs,s=e.multipleLine,l=e.filtersNode;return s?u.jsx("div",{className:"".concat(r,"-extra-line"),children:a!=null&&a.items&&a!==null&&a!==void 0&&a.items.length?u.jsx(Nn,{style:{width:"100%"},defaultActiveKey:a.defaultActiveKey,activeKey:a.activeKey,items:a.items.map(function(o,c){var d;return i(i({label:o.tab},o),{},{key:((d=o.key)===null||d===void 0?void 0:d.toString())||(c==null?void 0:c.toString())})}),onChange:a.onChange,tabBarExtraContent:l,children:(t=a.items)===null||t===void 0?void 0:t.map(function(o,c){return et(nt,"4.23.0")<0?h.createElement(Nn.TabPane,i(i({},o),{},{key:o.key||c,tab:o.tab})):null})}):l}):null},cs=function(e){var t=e.prefixCls,r=e.title,a=e.subTitle,s=e.tooltip,l=e.className,o=e.style,c=e.search,d=e.onSearch,v=e.multipleLine,f=v===void 0?!1:v,y=e.filter,b=e.actions,m=b===void 0?[]:b,x=e.settings,R=x===void 0?[]:x,p=e.tabs,g=e.menu,w=h.useContext(Me.ConfigContext),C=w.getPrefixCls,k=Qn.useToken(),W=k.token,N=C("pro-table-list-toolbar",t),j=is(N),$=j.wrapSSR,K=j.hashId,P=Oe(),M=h.useState(!1),H=ue(M,2),A=H[0],I=H[1],_=P.getMessage("tableForm.inputPlaceholder","请输入"),B=h.useMemo(function(){return c?ie.isValidElement(c)?c:u.jsx(Nr.Search,i(i({style:{width:200},placeholder:_},c),{},{onSearch:Se(le().mark(function L(){var F,z,X,U,Y,G,ce=arguments;return le().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:for(X=ce.length,U=new Array(X),Y=0;Y<X;Y++)U[Y]=ce[Y];return he.next=3,(F=(z=c).onSearch)===null||F===void 0?void 0:F.call.apply(F,[z].concat(U));case 3:G=he.sent,G!==!1&&(d==null||d(U==null?void 0:U[0]));case 5:case"end":return he.stop()}},L)}))})):null},[_,d,c]),Q=h.useMemo(function(){return y?u.jsx("div",{className:"".concat(N,"-filter ").concat(K).trim(),children:y}):null},[y,K,N]),Z=h.useMemo(function(){return g||r||a||s},[g,a,r,s]),O=h.useMemo(function(){return Array.isArray(m)?m.length<1?null:u.jsx("div",{style:{display:"flex",alignItems:"center",gap:W.marginXS},children:m.map(function(L,F){return ie.isValidElement(L)?ie.cloneElement(L,i({key:F},L==null?void 0:L.props)):u.jsx(ie.Fragment,{children:L},F)})}):m},[m]),V=h.useMemo(function(){return!!(Z&&B||!f&&Q||O||R!=null&&R.length)},[O,Q,Z,f,B,R==null?void 0:R.length]),q=h.useMemo(function(){return s||r||a||g||!Z&&B},[Z,g,B,a,r,s]),D=h.useMemo(function(){return!q&&V?u.jsx("div",{className:"".concat(N,"-left ").concat(K).trim()}):!g&&(Z||!B)?u.jsx("div",{className:"".concat(N,"-left ").concat(K).trim(),children:u.jsx("div",{className:"".concat(N,"-title ").concat(K).trim(),children:u.jsx(xn,{tooltip:s,label:r,subTitle:a})})}):u.jsxs("div",{className:ge("".concat(N,"-left"),K,S(S(S({},"".concat(N,"-left-has-tabs"),(g==null?void 0:g.type)==="tab"),"".concat(N,"-left-has-dropdown"),(g==null?void 0:g.type)==="dropdown"),"".concat(N,"-left-has-inline-menu"),(g==null?void 0:g.type)==="inline")),children:[Z&&!g&&u.jsx("div",{className:"".concat(N,"-title ").concat(K).trim(),children:u.jsx(xn,{tooltip:s,label:r,subTitle:a})}),g&&u.jsx(ls,i(i({},g),{},{prefixCls:N})),!Z&&B?u.jsx("div",{className:"".concat(N,"-search ").concat(K).trim(),children:B}):null]})},[q,V,Z,K,g,N,B,a,r,s]),T=h.useMemo(function(){return V?u.jsxs("div",{className:"".concat(N,"-right ").concat(K).trim(),style:A?{}:{alignItems:"center"},children:[f?null:Q,Z&&B?u.jsx("div",{className:"".concat(N,"-search ").concat(K).trim(),children:B}):null,O,R!=null&&R.length?u.jsx("div",{className:"".concat(N,"-setting-items ").concat(K).trim(),children:R.map(function(L,F){var z=ss(L);return u.jsx("div",{className:"".concat(N,"-setting-item ").concat(K).trim(),children:z},F)})}):null]}):null},[V,N,K,A,Z,B,f,Q,O,R]),E=h.useMemo(function(){if(!V&&!q)return null;var L=ge("".concat(N,"-container"),K,S({},"".concat(N,"-container-mobile"),A));return u.jsxs("div",{className:L,children:[D,T]})},[q,V,K,A,D,N,T]);return $(u.jsx(Lr,{onResize:function(F){F.width<375!==A&&I(F.width<375)},children:u.jsxs("div",{style:o,className:ge(N,K,l),children:[E,u.jsx(us,{filtersNode:Q,prefixCls:N,tabs:p,multipleLine:f})]})}))},ds=function(e){var t=e.icon,r=t===void 0?u.jsx(Za,{}):t,a=h.useContext(mn),s=Oe(),l=kr({selectedKeys:[a.tableSize],onClick:function(c){var d,v=c.key;(d=a.setTableSize)===null||d===void 0||d.call(a,v)},style:{width:80},items:[{key:"large",label:s.getMessage("tableToolBar.densityLarger","宽松")},{key:"middle",label:s.getMessage("tableToolBar.densityMiddle","中等")},{key:"small",label:s.getMessage("tableToolBar.densitySmall","紧凑")}]});return u.jsx($r,i(i({},l),{},{trigger:["click"],children:u.jsx(fn,{title:s.getMessage("tableToolBar.density","表格密度"),children:r})}))};const fs=ie.memo(ds);var vs=function(){var e=Oe(),t=h.useState(!1),r=ue(t,2),a=r[0],s=r[1];return h.useEffect(function(){Cr()&&(document.onfullscreenchange=function(){s(!!document.fullscreenElement)})},[]),a?u.jsx(fn,{title:e.getMessage("tableToolBar.exitFullScreen","全屏"),children:u.jsx(el,{})}):u.jsx(fn,{title:e.getMessage("tableToolBar.fullScreen","全屏"),children:u.jsx(nl,{})})};const qr=ie.memo(vs);var ms=["headerTitle","tooltip","toolBarRender","action","options","selectedRowKeys","selectedRows","toolbar","onSearch","columns","optionsRender"];function hs(n,e){var t,r=n.intl;return{reload:{text:r.getMessage("tableToolBar.reload","刷新"),icon:(t=e.reloadIcon)!==null&&t!==void 0?t:u.jsx(tl,{})},density:{text:r.getMessage("tableToolBar.density","表格密度"),icon:u.jsx(fs,{icon:e.densityIcon})},fullScreen:{text:r.getMessage("tableToolBar.fullScreen","全屏"),icon:u.jsx(qr,{})}}}function ps(n,e,t,r){return Object.keys(n).filter(function(a){return a}).map(function(a){var s=n[a];if(!s)return null;var l=s===!0?e[a]:function(c){s==null||s(c,t.current)};if(typeof l!="function"&&(l=function(){}),a==="setting")return h.createElement(as,i(i({},n[a]),{},{columns:r,key:a}));if(a==="fullScreen")return u.jsx("span",{onClick:l,children:u.jsx(qr,{})},a);var o=hs(e,n)[a];return o?u.jsx("span",{onClick:l,children:u.jsx(fn,{title:o.text,children:o.icon})},a):null}).filter(function(a){return a})}function gs(n){var e=n.headerTitle,t=n.tooltip,r=n.toolBarRender,a=n.action,s=n.options,l=n.selectedRowKeys,o=n.selectedRows,c=n.toolbar,d=n.onSearch,v=n.columns,f=n.optionsRender,y=we(n,ms),b=h.useContext(mn),m=Oe(),x=h.useMemo(function(){var g={reload:function(){var W;return a==null||(W=a.current)===null||W===void 0?void 0:W.reload()},density:!0,setting:!0,search:!1,fullScreen:function(){var W,N;return a==null||(W=a.current)===null||W===void 0||(N=W.fullScreen)===null||N===void 0?void 0:N.call(W)}};if(s===!1)return[];var w=i(i({},g),{},{fullScreen:!1},s),C=ps(w,i(i({},g),{},{intl:m}),a,v);return f?f(i({headerTitle:e,tooltip:t,toolBarRender:r,action:a,options:s,selectedRowKeys:l,selectedRows:o,toolbar:c,onSearch:d,columns:v,optionsRender:f},y),C):C},[a,v,e,m,d,f,s,y,l,o,r,c,t]),R=r?r(a==null?void 0:a.current,{selectedRowKeys:l,selectedRows:o}):[],p=h.useMemo(function(){if(!s||!s.search)return!1;var g={value:b.keyWords,onChange:function(C){return b.setKeyWords(C.target.value)}};return s.search===!0?g:i(i({},g),s.search)},[b,s]);return h.useEffect(function(){b.keyWords===void 0&&(d==null||d(""))},[b.keyWords,d]),u.jsx(cs,i({title:e,tooltip:t||y.tip,search:p,onSearch:d,actions:R,settings:x},c))}var ys=function(n){Et(t,n);var e=Mt(t);function t(){var r;Nt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Ze(r),"onSearch",function(o){var c,d,v,f,y=r.props,b=y.options,m=y.onFormSearchSubmit,x=y.actionRef;if(!(!b||!b.search)){var R=b.search===!0?{}:b.search,p=R.name,g=p===void 0?"keyword":p,w=(c=b.search)===null||c===void 0||(d=c.onSearch)===null||d===void 0?void 0:d.call(c,o);w!==!1&&(x==null||(v=x.current)===null||v===void 0||(f=v.setPageInfo)===null||f===void 0||f.call(v,{current:1}),m(en(S({_timestamp:Date.now()},g,o))))}}),S(Ze(r),"isEquals",function(o){var c=r.props,d=c.hideToolbar,v=c.tableColumn,f=c.options,y=c.tooltip,b=c.toolbar,m=c.selectedRows,x=c.selectedRowKeys,R=c.headerTitle,p=c.actionRef,g=c.toolBarRender;return Ir({hideToolbar:d,tableColumn:v,options:f,tooltip:y,toolbar:b,selectedRows:m,selectedRowKeys:x,headerTitle:R,actionRef:p,toolBarRender:g},{hideToolbar:o.hideToolbar,tableColumn:o.tableColumn,options:o.options,tooltip:o.tooltip,toolbar:o.toolbar,selectedRows:o.selectedRows,selectedRowKeys:o.selectedRowKeys,headerTitle:o.headerTitle,actionRef:o.actionRef,toolBarRender:o.toolBarRender},["render","renderFormItem"])}),S(Ze(r),"shouldComponentUpdate",function(o){return o.searchNode?!0:!r.isEquals(o)}),S(Ze(r),"render",function(){var o=r.props,c=o.hideToolbar,d=o.tableColumn,v=o.options,f=o.searchNode,y=o.tooltip,b=o.toolbar,m=o.selectedRows,x=o.selectedRowKeys,R=o.headerTitle,p=o.actionRef,g=o.toolBarRender,w=o.optionsRender;return c?null:u.jsx(gs,{tooltip:y,columns:d,options:v,headerTitle:R,action:p,onSearch:r.onSearch,selectedRows:m,selectedRowKeys:x,toolBarRender:g,toolbar:i({filter:f},b),optionsRender:w})}),r}return Lt(t)}(ie.Component),bs=new Er("turn",{"0%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(90deg)"},"50%":{transform:"rotate(180deg)"},"75%":{transform:"rotate(270deg)"},"100%":{transform:"rotate(360deg)"}}),Ss=function(e){return S(S(S({},e.componentCls,S(S(S(S(S(S(S(S(S({zIndex:1},"".concat(e.antCls,"-table-wrapper ").concat(e.antCls,"-table-pagination").concat(e.antCls,"-pagination"),{marginBlockEnd:0}),"&:not(:root):fullscreen",{minHeight:"100vh",overflow:"auto",background:e.colorBgContainer}),"&-extra",{marginBlockEnd:16}),"&-polling",S({},"".concat(e.componentCls,"-list-toolbar-setting-item"),{".anticon.anticon-reload":{transform:"rotate(0deg)",animationName:bs,animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite"}})),"td".concat(e.antCls,"-table-cell"),{">a":{fontSize:e.fontSize}}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-tbody").concat(e.antCls,"-table-wrapper:only-child").concat(e.antCls,"-table"),{marginBlock:0,marginInline:0}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-middle ").concat(e.componentCls),S({marginBlock:0,marginInline:-8},"".concat(e.proComponentsCls,"-card"),{backgroundColor:"initial"})),"& &-search",S(S(S(S({marginBlockEnd:"16px",background:e.colorBgContainer,"&-ghost":{background:"transparent"}},"&".concat(e.componentCls,"-form"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:16,overflow:"unset"}),"&-light-filter",{marginBlockEnd:0,paddingBlock:0,paddingInline:0}),"&-form-option",S(S(S({},"".concat(e.antCls,"-form-item"),{}),"".concat(e.antCls,"-form-item-label"),{}),"".concat(e.antCls,"-form-item-control-input"),{})),"@media (max-width: 575px)",S({},e.componentCls,S({height:"auto !important",paddingBlockEnd:"24px"},"".concat(e.antCls,"-form-item-label"),{minWidth:"80px",textAlign:"start"})))),"&-toolbar",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"64px",paddingInline:24,paddingBlock:0,"&-option":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"&-title":{flex:"1",color:e.colorTextLabel,fontWeight:"500",fontSize:"16px",lineHeight:"24px",opacity:"0.85"}})),"@media (max-width: ".concat(e.screenXS,")px"),S({},e.componentCls,S({},"".concat(e.antCls,"-table"),{width:"100%",overflowX:"auto","&-thead > tr,&-tbody > tr":{"> th,> td":{whiteSpace:"pre",">span":{display:"block"}}}}))),"@media (max-width: 575px)",S({},"".concat(e.componentCls,"-toolbar"),{flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",height:"auto",marginBlockEnd:"16px",marginInlineStart:"16px",paddingBlock:8,paddingInline:8,paddingBlockStart:"16px",lineHeight:"normal","&-title":{marginBlockEnd:16},"&-option":{display:"flex",justifyContent:"space-between",width:"100%"},"&-default-option":{display:"flex",flex:"1",alignItems:"center",justifyContent:"flex-end"}}))};function Cs(n){return _e("ProTable",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Ss(t)]})}var xs=["data","success","total"],Rs=function(e){var t=e.pageInfo;if(t){var r=t.current,a=t.defaultCurrent,s=t.pageSize,l=t.defaultPageSize;return{current:r||a||1,total:0,pageSize:s||l||20}}return{current:1,total:0,pageSize:20}},ws=function(e,t,r){var a,s=h.useRef(!1),l=h.useRef(null),o=r||{},c=o.onLoad,d=o.manual,v=o.polling,f=o.onRequestError,y=o.debounceTime,b=y===void 0?20:y,m=o.effects,x=m===void 0?[]:m,R=h.useRef(d),p=h.useRef(),g=Fe(t,{value:r==null?void 0:r.dataSource,onChange:r==null?void 0:r.onDataSourceChange}),w=ue(g,2),C=w[0],k=w[1],W=Fe(!1,{value:Ue(r==null?void 0:r.loading)==="object"?r==null||(a=r.loading)===null||a===void 0?void 0:a.spinning:r==null?void 0:r.loading,onChange:r==null?void 0:r.onLoadingChange}),N=ue(W,2),j=N[0],$=N[1],K=Fe(function(){return Rs(r)},{onChange:r==null?void 0:r.onPageInfoChange}),P=ue(K,2),M=P[0],H=P[1],A=Re(function(F){(F.current!==M.current||F.pageSize!==M.pageSize||F.total!==M.total)&&H(F)}),I=Fe(!1),_=ue(I,2),B=_[0],Q=_[1],Z=function(z,X){bt.unstable_batchedUpdates(function(){k(z),(M==null?void 0:M.total)!==X&&A(i(i({},M),{},{total:X||z.length}))})},O=qn(M==null?void 0:M.current),V=qn(M==null?void 0:M.pageSize),q=qn(v),D=Re(function(){bt.unstable_batchedUpdates(function(){$(!1),Q(!1)})}),T=function(){var F=Se(le().mark(function z(X){var U,Y,G,ce,ne,he,ae,re,me,de,$e,se;return le().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!R.current){oe.next=3;break}return R.current=!1,oe.abrupt("return");case 3:return X?Q(!0):$(!0),U=M||{},Y=U.pageSize,G=U.current,oe.prev=5,ce=(r==null?void 0:r.pageInfo)!==!1?{current:G,pageSize:Y}:void 0,oe.next=9,e==null?void 0:e(ce);case 9:if(oe.t0=oe.sent,oe.t0){oe.next=12;break}oe.t0={};case 12:if(ne=oe.t0,he=ne.data,ae=he===void 0?[]:he,re=ne.success,me=ne.total,de=me===void 0?0:me,$e=we(ne,xs),re!==!1){oe.next=21;break}return oe.abrupt("return",[]);case 21:return se=Ai(ae,[r.postData].filter(function(Be){return Be})),Z(se,de),c==null||c(se,$e),oe.abrupt("return",se);case 27:if(oe.prev=27,oe.t1=oe.catch(5),f!==void 0){oe.next=31;break}throw new Error(oe.t1);case 31:C===void 0&&k([]),f(oe.t1);case 33:return oe.prev=33,D(),oe.finish(33);case 36:return oe.abrupt("return",[]);case 37:case"end":return oe.stop()}},z,null,[[5,27,33,36]])}));return function(X){return F.apply(this,arguments)}}(),E=pr(function(){var F=Se(le().mark(function z(X){var U,Y,G;return le().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(p.current&&clearTimeout(p.current),e){ne.next=3;break}return ne.abrupt("return");case 3:return U=new AbortController,l.current=U,ne.prev=5,ne.next=8,Promise.race([T(X),new Promise(function(he,ae){var re,me;(re=l.current)===null||re===void 0||(re=re.signal)===null||re===void 0||(me=re.addEventListener)===null||me===void 0||me.call(re,"abort",function(){ae("aborted"),E.cancel(),D()})})]);case 8:if(Y=ne.sent,!U.signal.aborted){ne.next=11;break}return ne.abrupt("return");case 11:return G=Qe(v,Y),G&&!s.current&&(p.current=setTimeout(function(){E.run(G)},Math.max(G,2e3))),ne.abrupt("return",Y);case 16:if(ne.prev=16,ne.t0=ne.catch(5),ne.t0!=="aborted"){ne.next=20;break}return ne.abrupt("return");case 20:throw ne.t0;case 21:case"end":return ne.stop()}},z,null,[[5,16]])}));return function(z){return F.apply(this,arguments)}}(),b||30),L=function(){var z;(z=l.current)===null||z===void 0||z.abort(),E.cancel(),D()};return h.useEffect(function(){return v||clearTimeout(p.current),!q&&v&&E.run(!0),function(){clearTimeout(p.current)}},[v]),h.useEffect(function(){return s.current=!1,function(){s.current=!0}},[]),h.useEffect(function(){var F=M||{},z=F.current,X=F.pageSize;(!O||O===z)&&(!V||V===X)||r.pageInfo&&C&&(C==null?void 0:C.length)>X||z!==void 0&&C&&C.length<=X&&(L(),E.run(!1))},[M==null?void 0:M.current]),h.useEffect(function(){V&&(L(),E.run(!1))},[M==null?void 0:M.pageSize]),yt(function(){return L(),E.run(!1),d||(R.current=!1),function(){L()}},[].concat(Ve(x),[d])),{dataSource:C,setDataSource:k,loading:Ue(r==null?void 0:r.loading)==="object"?i(i({},r==null?void 0:r.loading),{},{spinning:j}):j,reload:function(){var F=Se(le().mark(function X(){return le().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return L(),Y.abrupt("return",E.run(!1));case 2:case"end":return Y.stop()}},X)}));function z(){return F.apply(this,arguments)}return z}(),pageInfo:M,pollingLoading:B,reset:function(){var F=Se(le().mark(function X(){var U,Y,G,ce,ne,he,ae,re;return le().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:U=r||{},Y=U.pageInfo,G=Y||{},ce=G.defaultCurrent,ne=ce===void 0?1:ce,he=G.defaultPageSize,ae=he===void 0?20:he,re={current:ne,total:0,pageSize:ae},A(re);case 4:case"end":return de.stop()}},X)}));function z(){return F.apply(this,arguments)}return z}(),setPageInfo:function(){var F=Se(le().mark(function X(U){return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:A(i(i({},M),U));case 1:case"end":return G.stop()}},X)}));function z(X){return F.apply(this,arguments)}return z}()}},Ps=function(e){return function(t,r){var a,s,l=t.fixed,o=t.index,c=r.fixed,d=r.index;if(l==="left"&&c!=="left"||c==="right"&&l!=="right")return-2;if(c==="left"&&l!=="left"||l==="right"&&c!=="right")return 2;var v=t.key||"".concat(o),f=r.key||"".concat(d);if((a=e[v])!==null&&a!==void 0&&a.order||(s=e[f])!==null&&s!==void 0&&s.order){var y,b;return(((y=e[v])===null||y===void 0?void 0:y.order)||0)-(((b=e[f])===null||b===void 0?void 0:b.order)||0)}return(t.index||0)-(r.index||0)}},Is=["children"],Ts=["",null,void 0],or=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(a){return a!==void 0}).map(function(a){return typeof a=="number"?a.toString():a}).flat(1)},Fs=function(e){var t=h.useContext(Sr),r=e.columnProps,a=e.prefixName,s=e.text,l=e.counter,o=e.rowData,c=e.index,d=e.recordKey,v=e.subName,f=e.proFieldProps,y=e.editableUtils,b=ze.useFormInstance(),m=d||c,x=h.useMemo(function(){var j,$;return(j=y==null||($=y.getRealIndex)===null||$===void 0?void 0:$.call(y,o))!==null&&j!==void 0?j:c},[y,c,o]),R=h.useState(function(){var j,$;return or(a,a?v:[],a?x:m,(j=($=r==null?void 0:r.key)!==null&&$!==void 0?$:r==null?void 0:r.dataIndex)!==null&&j!==void 0?j:c)}),p=ue(R,2),g=p[0],w=p[1],C=h.useMemo(function(){return g.slice(0,-1)},[g]);h.useEffect(function(){var j,$,K=or(a,a?v:[],a?x:m,(j=($=r==null?void 0:r.key)!==null&&$!==void 0?$:r==null?void 0:r.dataIndex)!==null&&j!==void 0?j:c);K.join("-")!==g.join("-")&&w(K)},[r==null?void 0:r.dataIndex,r==null?void 0:r.key,c,d,a,m,v,g,x]);var k=h.useMemo(function(){return[b,i(i({},r),{},{rowKey:C,rowIndex:c,isEditable:!0})]},[r,b,c,C]),W=h.useCallback(function(j){var $=j.children,K=we(j,Is);return u.jsx(yl,i(i({popoverProps:{getPopupContainer:t.getPopupContainer||function(){return l.rootDomRef.current||document.body}},errorType:"popover",name:g},K),{},{children:$}),m)},[m,g]),N=h.useCallback(function(){var j,$,K=i({},Ct.apply(void 0,[r==null?void 0:r.formItemProps].concat(Ve(k))));K.messageVariables=i({label:(r==null?void 0:r.title)||"此项",type:(r==null?void 0:r.valueType)||"文本"},K==null?void 0:K.messageVariables),K.initialValue=(j=($=a?null:s)!==null&&$!==void 0?$:K==null?void 0:K.initialValue)!==null&&j!==void 0?j:r==null?void 0:r.initialValue;var P=u.jsx(Jn,i({cacheForSwr:!0,name:g,proFormFieldKey:m,ignoreFormItem:!0,fieldProps:Ct.apply(void 0,[r==null?void 0:r.fieldProps].concat(Ve(k)))},f),g.join("-"));return r!=null&&r.renderFormItem&&(P=r.renderFormItem(i(i({},r),{},{index:c,isEditable:!0,type:"table"}),{defaultRender:function(){return u.jsx(u.Fragment,{children:P})},type:"form",recordKey:d,record:i(i({},o),b==null?void 0:b.getFieldValue([m])),isEditable:!0},b,e.editableUtils),r.ignoreFormItem)?u.jsx(u.Fragment,{children:P}):u.jsx(W,i(i({},K),{},{children:P}),g.join("-"))},[r,k,a,s,m,g,f,W,c,d,o,b,e.editableUtils]);return g.length===0?null:typeof(r==null?void 0:r.renderFormItem)=="function"||typeof(r==null?void 0:r.fieldProps)=="function"||typeof(r==null?void 0:r.formItemProps)=="function"?u.jsx(Ke.Item,{noStyle:!0,shouldUpdate:function($,K){if($===K)return!1;var P=[C].flat(1);try{return JSON.stringify(nn($,P))!==JSON.stringify(nn(K,P))}catch{return!0}},children:function(){return N()}}):N()};function Qr(n){var e,t,r=n.text,a=n.valueType,s=n.rowData,l=n.columnProps,o=n.index;if((!a||["textarea","text"].includes(a.toString()))&&!(l!=null&&l.valueEnum)&&n.mode==="read")return Ts.includes(r)?n.columnEmptyText:r;if(typeof a=="function"&&s)return Qr(i(i({},n),{},{valueType:a(s,n.type)||"text"}));var c=(l==null?void 0:l.key)||(l==null||(e=l.dataIndex)===null||e===void 0?void 0:e.toString()),d=l!=null&&l.dependencies?[n.prefixName,n.prefixName?o==null?void 0:o.toString():(t=n.recordKey)===null||t===void 0?void 0:t.toString(),l==null?void 0:l.dependencies].filter(Boolean).flat(1):[],v={valueEnum:Qe(l==null?void 0:l.valueEnum,s),request:l==null?void 0:l.request,dependencies:l!=null&&l.dependencies?[d]:void 0,originDependencies:l!=null&&l.dependencies?[l==null?void 0:l.dependencies]:void 0,params:Qe(l==null?void 0:l.params,s,l),readonly:l==null?void 0:l.readonly,text:a==="index"||a==="indexBorder"?n.index:r,mode:n.mode,renderFormItem:void 0,valueType:a,record:s,proFieldProps:{emptyText:n.columnEmptyText,proFieldKey:c?"table-field-".concat(c):void 0}};return n.mode!=="edit"?u.jsx(Jn,i({mode:"read",ignoreFormItem:!0,fieldProps:Ct(l==null?void 0:l.fieldProps,null,l)},v)):u.jsx(Fs,i(i({},n),{},{proFieldProps:v}),n.recordKey)}var js=function(e){var t,r=e.title,a=typeof(e==null?void 0:e.ellipsis)=="boolean"?e==null?void 0:e.ellipsis:e==null||(t=e.ellipsis)===null||t===void 0?void 0:t.showTitle;return r&&typeof r=="function"?r(e,"table",u.jsx(xn,{label:null,tooltip:e.tooltip||e.tip})):u.jsx(xn,{label:r,tooltip:e.tooltip||e.tip,ellipsis:a})};function Es(n,e,t,r){return typeof r=="boolean"?r===!1:(r==null?void 0:r(n,e,t))===!1}var Ms=function(e,t,r){var a=Array.isArray(r)?nn(t,r):t[r],s=String(a);return String(s)===String(e)};function Ns(n){var e=n.columnProps,t=n.text,r=n.rowData,a=n.index,s=n.columnEmptyText,l=n.counter,o=n.type,c=n.subName,d=n.marginSM,v=n.editableUtils,f=l.action,y=l.prefixName,b=v.isEditable(i(i({},r),{},{index:a})),m=b.isEditable,x=b.recordKey,R=e.renderText,p=R===void 0?function(j){return j}:R,g=p(t,r,a,f),w=m&&!Es(t,r,a,e==null?void 0:e.editable)?"edit":"read",C=Qr({text:g,valueType:e.valueType||"text",index:a,rowData:r,subName:c,columnProps:i(i({},e),{},{entry:r,entity:r}),counter:l,columnEmptyText:s,type:o,recordKey:x,mode:w,prefixName:y,editableUtils:v}),k=w==="edit"?C:Rl(C,e,g);if(w==="edit")return e.valueType==="option"?u.jsx("div",{style:{display:"flex",alignItems:"center",gap:d,justifyContent:e.align==="center"?"center":"flex-start"},children:v.actionRender(i(i({},r),{},{index:e.index||a}))}):k;if(!e.render){var W=ie.isValidElement(k)||["string","number"].includes(Ue(k));return!Ta(k)&&W?k:null}var N=e.render(k,r,a,i(i({},f),v),i(i({},e),{},{isEditable:m,type:"table"}));return Ki(N)?N:N&&e.valueType==="option"&&Array.isArray(N)?u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8},children:N}):N}function Xr(n,e){var t,r=n.columns,a=n.counter,s=n.columnEmptyText,l=n.type,o=n.editableUtils,c=n.marginSM,d=n.rowKey,v=d===void 0?"id":d,f=n.childrenColumnName,y=f===void 0?"children":f,b=new Map;return r==null||(t=r.map(function(m,x){if(m===dn.EXPAND_COLUMN||m===dn.SELECTION_COLUMN)return m;var R=m,p=R.key,g=R.dataIndex,w=R.valueEnum,C=R.valueType,k=C===void 0?"text":C,W=R.children,N=R.onFilter,j=R.filters,$=j===void 0?[]:j,K=Ln(p||(g==null?void 0:g.toString()),[e==null?void 0:e.key,x].filter(Boolean).join("-")),P=!w&&!k&&!W;if(P)return i({index:x},m);var M=m===dn.EXPAND_COLUMN||m===dn.SELECTION_COLUMN;if(M)return{index:x,isExtraColumns:!0,hideInSearch:!0,hideInTable:!1,hideInForm:!0,hideInSetting:!0,extraColumn:m};var H=a.columnsMap[K]||{fixed:m.fixed},A=function(){return N===!0?function(Q,Z){return Ms(Q,Z,g)}:Dr(N)},I=v,_=i(i({index:x,key:K},m),{},{title:js(m),valueEnum:w,filters:$===!0?Fa(Qe(w,void 0)).filter(function(B){return B&&B.value!=="all"}):$,onFilter:A(),fixed:H.fixed,width:m.width||(m.fixed?200:void 0),children:m.children?Xr(i(i({},n),{},{columns:(m==null?void 0:m.children)||[]}),i(i({},m),{},{key:K})):void 0,render:function(Q,Z,O){typeof v=="function"&&(I=v(Z,O));var V;if(Ue(Z)==="object"&&Z!==null&&Reflect.has(Z,I)){var q;V=Z[I];var D=b.get(V)||[];(q=Z[y])===null||q===void 0||q.forEach(function(E){var L=E[I];b.has(L)||b.set(L,D.concat([O,y]))})}var T={columnProps:m,text:Q,rowData:Z,index:O,columnEmptyText:s,counter:a,type:l,marginSM:c,subName:b.get(V),editableUtils:o};return Ns(T)}});return Tl(_)}))===null||t===void 0?void 0:t.filter(function(m){return!m.hideInTable})}var Ls=["rowKey","tableClassName","defaultClassName","action","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","hideToolbar","searchNode","style","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey"],$s=["cardBordered","request","className","params","defaultData","headerTitle","postData","ghost","pagination","actionRef","columns","toolBarRender","optionsRender","onLoad","onRequestError","style","cardProps","tableStyle","tableClassName","columnsStateMap","onColumnsStateChange","options","search","name","onLoadingChange","rowSelection","beforeSearchSubmit","tableAlertRender","defaultClassName","formRef","type","columnEmptyText","toolbar","rowKey","manualRequest","polling","tooltip","revalidateOnFocus","searchFormRender"];function Bs(n){var e=n.rowKey,t=n.tableClassName,r=n.defaultClassName,a=n.action,s=n.tableColumn,l=n.type,o=n.pagination,c=n.rowSelection,d=n.size;n.defaultSize;var v=n.tableStyle,f=n.toolbarDom,y=n.hideToolbar,b=n.searchNode,m=n.style,x=n.cardProps,R=n.alertDom;n.name;var p=n.onSortChange,g=n.onFilterChange,w=n.options,C=n.isLightFilter,k=n.className,W=n.cardBordered,N=n.editableUtils,j=n.getRowKey,$=we(n,Ls),K=h.useContext(mn),P=h.useMemo(function(){var D=function T(E){return E.map(function(L){var F=Ln(L.key,L.index),z=K.columnsMap[F];return z&&z.show===!1?!1:L.children?i(i({},L),{},{children:T(L.children)}):L}).filter(Boolean)};return D(s)},[K.columnsMap,s]),M=h.useMemo(function(){var D=[],T=function E(L){for(var F=0;F<L.length;F++){var z=L[F];z.children?E(z.children):D.push(z)}};return T(P),D==null?void 0:D.every(function(E){return!!E.filters&&!!E.onFilter||E.filters===void 0&&E.onFilter===void 0})},[P]),H=function(T){var E=N.newLineRecord||{},L=E.options,F=E.defaultValue,z=(L==null?void 0:L.position)==="top";if(L!=null&&L.parentKey){var X,U,Y={data:T,getRowKey:j,row:i(i({},F),{},{map_row_parentKey:(X=ke(L.parentKey))===null||X===void 0?void 0:X.toString()}),key:L==null?void 0:L.recordKey,childrenColumnName:((U=n.expandable)===null||U===void 0?void 0:U.childrenColumnName)||"children"};return An(Y,z?"top":"update")}if(z)return[F].concat(Ve(a.dataSource));if(o&&o!==null&&o!==void 0&&o.current&&o!==null&&o!==void 0&&o.pageSize){var G=Ve(a.dataSource);return(o==null?void 0:o.pageSize)>G.length?(G.push(F),G):(G.splice((o==null?void 0:o.current)*(o==null?void 0:o.pageSize)-1,0,F),G)}return[].concat(Ve(a.dataSource),[F])},A=function(){return i(i({},$),{},{size:d,rowSelection:c===!1?void 0:c,className:t,style:v,columns:P.map(function(T){return T.isExtraColumns?T.extraColumn:T}),loading:a.loading,dataSource:N.newLineRecord?H(a.dataSource):a.dataSource,pagination:o,onChange:function(E,L,F,z){var X;if((X=$.onChange)===null||X===void 0||X.call($,E,L,F,z),M||g(en(L)),Array.isArray(F)){var U=F.reduce(function(ne,he){return i(i({},ne),{},S({},"".concat(he.field),he.order))},{});p(en(U))}else{var Y,G=(Y=F.column)===null||Y===void 0?void 0:Y.sorter,ce=(G==null?void 0:G.toString())===G;p(en(S({},"".concat(ce?G:F.field),F.order)))}}})},I=h.useMemo(function(){return n.search===!1&&!n.headerTitle&&n.toolBarRender===!1},[]),_=u.jsx(ja.Provider,{value:{grid:!1,colProps:void 0,rowProps:void 0},children:u.jsx(dn,i(i({},A()),{},{rowKey:e}))}),B=n.tableViewRender?n.tableViewRender(i(i({},A()),{},{rowSelection:c!==!1?c:void 0}),_):_,Q=h.useMemo(function(){if(n.editable&&!n.name){var D,T,E;return u.jsxs(u.Fragment,{children:[f,R,h.createElement(ze,i(i({},(D=n.editable)===null||D===void 0?void 0:D.formProps),{},{formRef:(T=n.editable)===null||T===void 0||(T=T.formProps)===null||T===void 0?void 0:T.formRef,component:!1,form:(E=n.editable)===null||E===void 0?void 0:E.form,onValuesChange:N.onValuesChange,key:"table",submitter:!1,omitNil:!1,dateFormatter:n.dateFormatter}),B)]})}return u.jsxs(u.Fragment,{children:[f,R,B]})},[R,n.loading,!!n.editable,B,f]),Z=h.useMemo(function(){return x===!1||I===!0||n.name?{}:y?{padding:0}:f?{paddingBlockStart:0}:f&&o===!1?{paddingBlockStart:0}:{padding:0}},[I,o,n.name,x,f,y]),O=x===!1||I===!0||n.name?Q:u.jsx(zn,i(i({ghost:n.ghost,bordered:Gr("table",W),bodyStyle:Z},x),{},{children:Q})),V=function(){return n.tableRender?n.tableRender(n,O,{toolbar:f||void 0,alert:R||void 0,table:B||void 0}):O},q=u.jsxs("div",{className:ge(k,S({},"".concat(r,"-polling"),a.pollingLoading)),style:m,ref:K.rootDomRef,children:[C?null:b,l!=="form"&&n.tableExtraRender&&u.jsx("div",{className:ge(k,"".concat(r,"-extra")),children:n.tableExtraRender(n,a.dataSource||[])}),l!=="form"&&V()]});return!w||!(w!=null&&w.fullScreen)?q:u.jsx(Me,{getPopupContainer:function(){return K.rootDomRef.current||document.body},children:q})}var As={},Ks=function(e){var t;e.cardBordered;var r=e.request,a=e.className,s=e.params,l=s===void 0?As:s,o=e.defaultData,c=e.headerTitle,d=e.postData,v=e.ghost,f=e.pagination,y=e.actionRef,b=e.columns,m=b===void 0?[]:b,x=e.toolBarRender,R=e.optionsRender,p=e.onLoad,g=e.onRequestError;e.style,e.cardProps,e.tableStyle,e.tableClassName,e.columnsStateMap,e.onColumnsStateChange;var w=e.options,C=e.search,k=e.name,W=e.onLoadingChange,N=e.rowSelection,j=N===void 0?!1:N,$=e.beforeSearchSubmit,K=e.tableAlertRender,P=e.defaultClassName,M=e.formRef,H=e.type,A=H===void 0?"table":H,I=e.columnEmptyText,_=I===void 0?"-":I,B=e.toolbar,Q=e.rowKey,Z=e.manualRequest,O=e.polling,V=e.tooltip,q=e.revalidateOnFocus,D=q===void 0?!1:q,T=e.searchFormRender,E=we(e,$s),L=Cs(e.defaultClassName),F=L.wrapSSR,z=L.hashId,X=ge(P,a,z),U=h.useRef(),Y=h.useRef(),G=M||Y;h.useImperativeHandle(y,function(){return U.current});var ce=Fe(j?(j==null?void 0:j.defaultSelectedRowKeys)||[]:void 0,{value:j?j.selectedRowKeys:void 0}),ne=ue(ce,2),he=ne[0],ae=ne[1],re=Fe(function(){if(!(Z||C!==!1))return{}}),me=ue(re,2),de=me[0],$e=me[1],se=Fe({}),hn=ue(se,2),oe=hn[0],Be=hn[1],pn=Fe({}),$n=ue(pn,2),ln=$n[0],gn=$n[1];h.useEffect(function(){var ee=Di(m),te=ee.sort,fe=ee.filter;Be(fe),gn(te)},[]);var Pn=Oe(),Bn=Ue(f)==="object"?f:{defaultCurrent:1,defaultPageSize:20,pageSize:20,current:1},Pe=h.useContext(mn),Wn=h.useMemo(function(){if(r)return function(){var ee=Se(le().mark(function te(fe){var Ce,We;return le().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Ce=i(i(i({},fe||{}),de),l),delete Ce._timestamp,qe.next=4,r(Ce,ln,oe);case 4:return We=qe.sent,qe.abrupt("return",We);case 6:case"end":return qe.stop()}},te)}));return function(te){return ee.apply(this,arguments)}}()},[de,l,oe,ln,r]),pe=ws(Wn,o,{pageInfo:f===!1?!1:Bn,loading:e.loading,dataSource:e.dataSource,onDataSourceChange:e.onDataSourceChange,onLoad:p,onLoadingChange:W,onRequestError:g,postData:d,revalidateOnFocus:D,manual:de===void 0,polling:O,effects:[Tn(l),Tn(de),Tn(oe),Tn(ln)],debounceTime:e.debounceTime,onPageInfoChange:function(te){var fe,Ce;!f||!Wn||(f==null||(fe=f.onChange)===null||fe===void 0||fe.call(f,te.current,te.pageSize),f==null||(Ce=f.onShowSizeChange)===null||Ce===void 0||Ce.call(f,te.current,te.pageSize))}});h.useEffect(function(){var ee;if(!(e.manualRequest||!e.request||!D||(ee=e.form)!==null&&ee!==void 0&&ee.ignoreRules)){var te=function(){document.visibilityState==="visible"&&pe.reload()};return document.addEventListener("visibilitychange",te),function(){return document.removeEventListener("visibilitychange",te)}}},[]);var Vn=ie.useRef(new Map),yn=ie.useMemo(function(){return typeof Q=="function"?Q:function(ee,te){var fe;return te===-1?ee==null?void 0:ee[Q]:e.name?te==null?void 0:te.toString():(fe=ee==null?void 0:ee[Q])!==null&&fe!==void 0?fe:te==null?void 0:te.toString()}},[e.name,Q]);h.useMemo(function(){var ee;if((ee=pe.dataSource)!==null&&ee!==void 0&&ee.length){var te=pe.dataSource.map(function(fe){var Ce=yn(fe,-1);return Vn.current.set(Ce,fe),Ce});return te}return[]},[pe.dataSource,yn]);var on=h.useMemo(function(){var ee=f===!1?!1:i({},f),te=i(i({},pe.pageInfo),{},{setPageInfo:function(Ce){var We=Ce.pageSize,rn=Ce.current,qe=pe.pageInfo;if(We===qe.pageSize||qe.current===1){pe.setPageInfo({pageSize:We,current:rn});return}r&&pe.setDataSource([]),pe.setPageInfo({pageSize:We,current:A==="list"?rn:1})}});return r&&ee&&(delete ee.onChange,delete ee.onShowSizeChange),$i(ee,te,Pn)},[f,pe,Pn]);yt(function(){var ee;e.request&&!ti(l)&&pe.dataSource&&!Li(pe.dataSource,o)&&(pe==null||(ee=pe.pageInfo)===null||ee===void 0?void 0:ee.current)!==1&&pe.setPageInfo({current:1})},[l]),Pe.setPrefixName(e.name);var je=h.useCallback(function(){j&&j.onChange&&j.onChange([],[],{type:"none"}),ae([])},[j,ae]);Pe.propsRef.current=e;var be=Bl(i(i({},e.editable),{},{tableName:e.name,getRowKey:yn,childrenColumnName:((t=e.expandable)===null||t===void 0?void 0:t.childrenColumnName)||"children",dataSource:pe.dataSource||[],setDataSource:function(te){var fe,Ce;(fe=e.editable)===null||fe===void 0||(Ce=fe.onValuesChange)===null||Ce===void 0||Ce.call(fe,void 0,te),pe.setDataSource(te)}})),Ie=Qn===null||Qn===void 0?void 0:Qn.useToken(),tn=Ie.token;Bi(U,pe,{fullScreen:function(){var te;if(!(!((te=Pe.rootDomRef)!==null&&te!==void 0&&te.current)||!document.fullscreenEnabled))if(document.fullscreenElement)document.exitFullscreen();else{var fe;(fe=Pe.rootDomRef)===null||fe===void 0||fe.current.requestFullscreen()}},onCleanSelected:function(){je()},resetAll:function(){var te;je(),Be({}),gn({}),Pe.setKeyWords(void 0),pe.setPageInfo({current:1}),G==null||(te=G.current)===null||te===void 0||te.resetFields(),$e({})},editableUtils:be}),Pe.setAction(U.current);var Ee=h.useMemo(function(){var ee;return Xr({columns:m,counter:Pe,columnEmptyText:_,type:A,marginSM:tn.marginSM,editableUtils:be,rowKey:Q,childrenColumnName:(ee=e.expandable)===null||ee===void 0?void 0:ee.childrenColumnName}).sort(Ps(Pe.columnsMap))},[m,Pe==null?void 0:Pe.sortKeyColumns,Pe==null?void 0:Pe.columnsMap,_,A,be.editableKeys&&be.editableKeys.join(",")]);hr(function(){if(Ee&&Ee.length>0){var ee=Ee.map(function(te){return Ln(te.key,te.index)});Pe.setSortKeyColumns(ee)}},[Ee],["render","renderFormItem"],100),yt(function(){var ee=pe.pageInfo,te=f||{},fe=te.current,Ce=fe===void 0?ee==null?void 0:ee.current:fe,We=te.pageSize,rn=We===void 0?ee==null?void 0:ee.pageSize:We;f&&(Ce||rn)&&(rn!==(ee==null?void 0:ee.pageSize)||Ce!==(ee==null?void 0:ee.current))&&pe.setPageInfo({pageSize:rn||ee.pageSize,current:Ce||ee.current})},[f&&f.pageSize,f&&f.current]);var Ge=i(i({selectedRowKeys:he},j),{},{onChange:function(te,fe,Ce){j&&j.onChange&&j.onChange(te,fe,Ce),ae(te)}}),Xe=C!==!1&&(C==null?void 0:C.filterType)==="light",sn=h.useCallback(function(ee){if(w&&w.search){var te,fe,Ce=w.search===!0?{}:w.search,We=Ce.name,rn=We===void 0?"keyword":We,qe=(te=w.search)===null||te===void 0||(fe=te.onSearch)===null||fe===void 0?void 0:fe.call(te,Pe.keyWords);if(qe!==!1){$e(i(i({},ee),{},S({},rn,Pe.keyWords)));return}}$e(ee)},[Pe.keyWords,w,$e]),Hn=h.useMemo(function(){if(Ue(pe.loading)==="object"){var ee;return((ee=pe.loading)===null||ee===void 0?void 0:ee.spinning)||!1}return pe.loading},[pe.loading]),Kt=h.useMemo(function(){var ee=C===!1&&A!=="form"?null:u.jsx(Ji,{pagination:on,beforeSearchSubmit:$,action:U,columns:m,onFormSearchSubmit:function(fe){sn(fe)},ghost:v,onReset:e.onReset,onSubmit:e.onSubmit,loading:!!Hn,manualRequest:Z,search:C,form:e.form,formRef:G,type:e.type||"table",cardBordered:e.cardBordered,dateFormatter:e.dateFormatter});return T&&ee?u.jsx(u.Fragment,{children:T(e,ee)}):ee},[$,G,v,Hn,Z,sn,on,e,m,C,T,A]),kt=h.useMemo(function(){return he==null?void 0:he.map(function(ee){var te;return(te=Vn.current)===null||te===void 0?void 0:te.get(ee)})},[pe.dataSource,he]),Dt=h.useMemo(function(){return w===!1&&!c&&!x&&!B&&!Xe},[w,c,x,B,Xe]),ea=x===!1?null:u.jsx(ys,{headerTitle:c,hideToolbar:Dt,selectedRows:kt,selectedRowKeys:he,tableColumn:Ee,tooltip:V,toolbar:B,onFormSearchSubmit:function(te){$e(i(i({},de),te))},searchNode:Xe?Kt:null,options:w,optionsRender:R,actionRef:U,toolBarRender:x}),na=j!==!1?u.jsx(Hi,{selectedRowKeys:he,selectedRows:kt,onCleanSelected:je,alertOptionRender:E.tableAlertOptionRender,alertInfoRender:K,alwaysShowAlert:j==null?void 0:j.alwaysShowAlert}):null;return F(u.jsx(Bs,i(i({},e),{},{name:k,defaultClassName:P,size:Pe.tableSize,onSizeChange:Pe.setTableSize,pagination:on,searchNode:Kt,rowSelection:j!==!1?Ge:void 0,className:X,tableColumn:Ee,isLightFilter:Xe,action:pe,alertDom:na,toolbarDom:ea,hideToolbar:Dt,onSortChange:function(te){ln!==te&&gn(te??{})},onFilterChange:function(te){te!==oe&&Be(te)},editableUtils:be,getRowKey:yn})))},Jr=function(e){var t=h.useContext(Me.ConfigContext),r=t.getPrefixCls,a=e.ErrorBoundary===!1?ie.Fragment:e.ErrorBoundary||dl;return u.jsx(Oi,{initValue:e,children:u.jsx(xr,{needDeps:!0,children:u.jsx(a,{children:u.jsx(Ks,i({defaultClassName:"".concat(r("pro-table"))},e))})})})};Jr.Summary=dn.Summary;const ir="reuse-table";function ks(n){const e=h.useRef(null),t=ul(e);return h.useEffect(()=>{if(e.current&&(t!=null&&t.height)){const r=t.height,a=e.current.getElementsByClassName(ir)[0];if(!a)return;const s=a.querySelector("div.ant-table-body");if(!s)return;const l=s.getBoundingClientRect(),o=e.current.getBoundingClientRect(),c=l.top-o.top,v=Math.max(200,r-c-56);s.setAttribute("style",`overflow-y: scroll;height: ${v}px;max-height: ${v}px;`)}},[t]),u.jsx("div",{className:"h-full",ref:e,children:u.jsx(Jr,{...n,rootClassName:ir,scroll:{y:"0"}})})}var De,ve,Dn,Ae,bn,Fn,un,Je,_n,jn,En,Sn,Cn,cn,Mn,ye,Kn,xt,Rt,wt,Pt,It,Tt,Ft,Yr,dr,Ds=(dr=class extends aa{constructor(e,t){super();Ne(this,ye);Ne(this,De);Ne(this,ve);Ne(this,Dn);Ne(this,Ae);Ne(this,bn);Ne(this,Fn);Ne(this,un);Ne(this,Je);Ne(this,_n);Ne(this,jn);Ne(this,En);Ne(this,Sn);Ne(this,Cn);Ne(this,cn);Ne(this,Mn,new Set);this.options=t,xe(this,De,e),xe(this,Je,null),xe(this,un,Ot()),this.options.experimental_prefetchInRender||J(this,un).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,ve).addObserver(this),sr(J(this,ve),this.options)?Te(this,ye,Kn).call(this):this.updateResult(),Te(this,ye,Pt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jt(J(this,ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jt(J(this,ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Te(this,ye,It).call(this),Te(this,ye,Tt).call(this),J(this,ve).removeObserver(this)}setOptions(e,t){const r=this.options,a=J(this,ve);if(this.options=J(this,De).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ye(this.options.enabled,J(this,ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Te(this,ye,Ft).call(this),J(this,ve).setOptions(this.options),r._defaulted&&!ft(this.options,r)&&J(this,De).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,ve),observer:this});const s=this.hasListeners();s&&ur(J(this,ve),a,this.options,r)&&Te(this,ye,Kn).call(this),this.updateResult(t),s&&(J(this,ve)!==a||Ye(this.options.enabled,J(this,ve))!==Ye(r.enabled,J(this,ve))||Gn(this.options.staleTime,J(this,ve))!==Gn(r.staleTime,J(this,ve)))&&Te(this,ye,xt).call(this);const l=Te(this,ye,Rt).call(this);s&&(J(this,ve)!==a||Ye(this.options.enabled,J(this,ve))!==Ye(r.enabled,J(this,ve))||l!==J(this,cn))&&Te(this,ye,wt).call(this,l)}getOptimisticResult(e){const t=J(this,De).getQueryCache().build(J(this,De),e),r=this.createResult(t,e);return Os(this,r)&&(xe(this,Ae,r),xe(this,Fn,this.options),xe(this,bn,J(this,ve).state)),r}getCurrentResult(){return J(this,Ae)}trackResult(e,t){const r={};return Object.keys(e).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),t==null||t(a),e[a])})}),r}trackProp(e){J(this,Mn).add(e)}getCurrentQuery(){return J(this,ve)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=J(this,De).defaultQueryOptions(e),r=J(this,De).getQueryCache().build(J(this,De),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Te(this,ye,Kn).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,Ae)))}createResult(e,t){var j;const r=J(this,ve),a=this.options,s=J(this,Ae),l=J(this,bn),o=J(this,Fn),d=e!==r?e.state:J(this,Dn),{state:v}=e;let f={...v},y=!1,b;if(t._optimisticResults){const $=this.hasListeners(),K=!$&&sr(e,t),P=$&&ur(e,r,t,a);(K||P)&&(f={...f,...sa(v.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:m,errorUpdatedAt:x,status:R}=f;if(t.select&&f.data!==void 0)if(s&&f.data===(l==null?void 0:l.data)&&t.select===J(this,_n))b=J(this,jn);else try{xe(this,_n,t.select),b=t.select(f.data),b=Wt(s==null?void 0:s.data,b,t),xe(this,jn,b),xe(this,Je,null)}catch($){xe(this,Je,$)}else b=f.data;if(t.placeholderData!==void 0&&b===void 0&&R==="pending"){let $;if(s!=null&&s.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData))$=s.data;else if($=typeof t.placeholderData=="function"?t.placeholderData((j=J(this,En))==null?void 0:j.state.data,J(this,En)):t.placeholderData,t.select&&$!==void 0)try{$=t.select($),xe(this,Je,null)}catch(K){xe(this,Je,K)}$!==void 0&&(R="success",b=Wt(s==null?void 0:s.data,$,t),y=!0)}J(this,Je)&&(m=J(this,Je),b=J(this,jn),x=Date.now(),R="error");const p=f.fetchStatus==="fetching",g=R==="pending",w=R==="error",C=g&&p,k=b!==void 0,N={status:R,fetchStatus:f.fetchStatus,isPending:g,isSuccess:R==="success",isError:w,isInitialLoading:C,isLoading:C,data:b,dataUpdatedAt:f.dataUpdatedAt,error:m,errorUpdatedAt:x,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:p,isRefetching:p&&!g,isLoadingError:w&&!k,isPaused:f.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:w&&k,isStale:At(e,t),refetch:this.refetch,promise:J(this,un)};if(this.options.experimental_prefetchInRender){const $=M=>{N.status==="error"?M.reject(N.error):N.data!==void 0&&M.resolve(N.data)},K=()=>{const M=xe(this,un,N.promise=Ot());$(M)},P=J(this,un);switch(P.status){case"pending":e.queryHash===r.queryHash&&$(P);break;case"fulfilled":(N.status==="error"||N.data!==P.value)&&K();break;case"rejected":(N.status!=="error"||N.error!==P.reason)&&K();break}}return N}updateResult(e){const t=J(this,Ae),r=this.createResult(J(this,ve),this.options);if(xe(this,bn,J(this,ve).state),xe(this,Fn,this.options),J(this,bn).data!==void 0&&xe(this,En,J(this,ve)),ft(r,t))return;xe(this,Ae,r);const a={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,o=typeof l=="function"?l():l;if(o==="all"||!o&&!J(this,Mn).size)return!0;const c=new Set(o??J(this,Mn));return this.options.throwOnError&&c.add("error"),Object.keys(J(this,Ae)).some(d=>{const v=d;return J(this,Ae)[v]!==t[v]&&c.has(v)})};(e==null?void 0:e.listeners)!==!1&&s()&&(a.listeners=!0),Te(this,ye,Yr).call(this,{...a,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Te(this,ye,Pt).call(this)}},De=new WeakMap,ve=new WeakMap,Dn=new WeakMap,Ae=new WeakMap,bn=new WeakMap,Fn=new WeakMap,un=new WeakMap,Je=new WeakMap,_n=new WeakMap,jn=new WeakMap,En=new WeakMap,Sn=new WeakMap,Cn=new WeakMap,cn=new WeakMap,Mn=new WeakMap,ye=new WeakSet,Kn=function(e){Te(this,ye,Ft).call(this);let t=J(this,ve).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(la)),t},xt=function(){Te(this,ye,It).call(this);const e=Gn(this.options.staleTime,J(this,ve));if(vt||J(this,Ae).isStale||!zt(e))return;const r=oa(J(this,Ae).dataUpdatedAt,e)+1;xe(this,Sn,setTimeout(()=>{J(this,Ae).isStale||this.updateResult()},r))},Rt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,ve)):this.options.refetchInterval)??!1},wt=function(e){Te(this,ye,Tt).call(this),xe(this,cn,e),!(vt||Ye(this.options.enabled,J(this,ve))===!1||!zt(J(this,cn))||J(this,cn)===0)&&xe(this,Cn,setInterval(()=>{(this.options.refetchIntervalInBackground||ia.isFocused())&&Te(this,ye,Kn).call(this)},J(this,cn)))},Pt=function(){Te(this,ye,xt).call(this),Te(this,ye,wt).call(this,Te(this,ye,Rt).call(this))},It=function(){J(this,Sn)&&(clearTimeout(J(this,Sn)),xe(this,Sn,void 0))},Tt=function(){J(this,Cn)&&(clearInterval(J(this,Cn)),xe(this,Cn,void 0))},Ft=function(){const e=J(this,De).getQueryCache().build(J(this,De),this.options);if(e===J(this,ve))return;const t=J(this,ve);xe(this,ve,e),xe(this,Dn,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Yr=function(e){vr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(J(this,Ae))}),J(this,De).getQueryCache().notify({query:J(this,ve),type:"observerResultsUpdated"})})},dr);function _s(n,e){return Ye(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function sr(n,e){return _s(n,e)||n.state.data!==void 0&&jt(n,e,e.refetchOnMount)}function jt(n,e,t){if(Ye(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&At(n,e)}return!1}function ur(n,e,t,r){return(n!==e||Ye(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&At(n,t)}function At(n,e){return Ye(e.enabled,n)!==!1&&n.isStaleByTime(Gn(e.staleTime,n))}function Os(n,e){return!ft(n.getCurrentResult(),e)}var Zr=h.createContext(!1),zs=()=>h.useContext(Zr);Zr.Provider;function Ws(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var Vs=h.createContext(Ws()),Hs=()=>h.useContext(Vs),Us=(n,e)=>{(n.suspense||n.throwOnError)&&(e.isReset()||(n.retryOnMount=!1))},Gs=n=>{h.useEffect(()=>{n.clearReset()},[n])},qs=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&Ea(t,[n.error,r]),Qs=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},Xs=(n,e)=>n.isLoading&&n.isFetching&&!e,Js=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,cr=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function Ys(n,e,t){var v,f,y,b,m;const r=ua(),a=zs(),s=Hs(),l=r.defaultQueryOptions(n);(f=(v=r.getDefaultOptions().queries)==null?void 0:v._experimental_beforeQuery)==null||f.call(v,l),l._optimisticResults=a?"isRestoring":"optimistic",Qs(l),Us(l,s),Gs(s);const o=!r.getQueryCache().get(l.queryHash),[c]=h.useState(()=>new e(r,l)),d=c.getOptimisticResult(l);if(h.useSyncExternalStore(h.useCallback(x=>{const R=a?()=>{}:c.subscribe(vr.batchCalls(x));return c.updateResult(),R},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(l,{listeners:!1})},[l,c]),Js(l,d))throw cr(l,c,s);if(qs({result:d,errorResetBoundary:s,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash)}))throw d.error;if((b=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||b.call(y,l,d),l.experimental_prefetchInRender&&!vt&&Xs(d,a)){const x=o?cr(l,c,s):(m=r.getQueryCache().get(l.queryHash))==null?void 0:m.promise;x==null||x.catch(Ma).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function Zs(n,e){return Ys(n,Ds)}const eu=[{dataIndex:"index",title:"角色编号",valueType:"indexBorder"},{title:"角色名称",dataIndex:"name",disable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"此项为必填项"}]}},{disable:!0,title:"角色标识",dataIndex:"code",filters:!0,onFilter:!0,ellipsis:!0},{disable:!0,title:"状态",dataIndex:"status",valueType:"select",render:(n,e)=>u.jsx(al,{color:e.status===1?"success":"default",children:n}),valueEnum:{1:{text:"启用"},0:{text:"停用"}}},{title:"备注",dataIndex:"remark",search:!1},{title:"创建时间",dataIndex:"createTime",valueType:"date",search:!1}];function iu(){var R;const{t:n}=ca(),e=Zs({queryKey:["role-menu"],queryFn:Aa}),t=ot({mutationFn:La}),r=ot({mutationFn:$a}),a=ot({mutationFn:Ba}),[s,l]=h.useState(!1),[o,c]=h.useState(""),[d,v]=h.useState({}),f=h.useRef(),y=async(p,g)=>{var C,k;const w=await a.mutateAsync(p);await((C=g==null?void 0:g.reload)==null?void 0:C.call(g)),(k=window.$message)==null||k.success(`操作成功 userId = ${w.result}`)},b=[...eu,{title:n("common.action"),valueType:"option",key:"option",render:(p,g,w,C)=>[u.jsx(Vt,{type:"link",size:"small",onClick:async()=>{const k=await r.mutateAsync({id:g.id});l(!0),c("编辑角色"),v({...g,menus:k.result})},children:n("common.edit")},"editable"),u.jsx(jr,{title:n("common.confirmDelete"),onConfirm:()=>y(g.id,C),okText:n("common.confirm"),cancelText:n("common.cancel"),children:u.jsx(Vt,{type:"link",size:"small",children:n("common.delete")})},"delete")]}],m=()=>{l(!1),v({})},x=()=>{var p;(p=f.current)==null||p.reload()};return u.jsxs(u.Fragment,{children:[u.jsx(ks,{columns:b,actionRef:f,cardBordered:!0,request:async p=>{const g=await t.mutateAsync(p);return{...g,data:g.result.list,total:g.result.total}},rowKey:"id",search:{layout:"horizontal",defaultColsNumber:3,showHiddenNum:!0,labelWidth:"auto"},options:{fullScreen:!0},form:{syncToUrl:(p,g)=>g==="get"?{...p}:p},pagination:{position:["bottomRight"],defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:p=>`共 ${p} 条`},dateFormatter:"string",headerTitle:"角色管理（仅演示，操作后不生效）",toolBarRender:()=>[u.jsx(Xn,{icon:u.jsx(rl,{}),type:"primary",onClick:()=>{l(!0),c("新增角色")},children:"新增角色"},"add-role")]}),u.jsx(Na,{title:o,open:s,onCloseChange:m,detailData:d,refreshTable:x,treeData:cl(((R=e.data)==null?void 0:R.result)||[])})]})}export{iu as default};
