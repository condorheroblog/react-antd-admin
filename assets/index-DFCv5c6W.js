import{_ as Dr,v as xt,w as wt,x as Rt,y as Pt,z as fr,j as s,C as Tt,u as It,D as Ft,E as jt,F as Nt,G as Et,H as vr}from"./index-DhXLOoLU.js";import{aK as Mt,aL as nr,aM as rr,aN as tr,aO as h,d as Ve,b as ar,R as Bt,aP as o,aQ as be,aH as He,aR as Ge,aS as de,C as je,P as zr,aT as Nn,T as _r,ah as Kt,aU as At,aV as Re,aW as Ce,aX as le,aY as rn,f as Ke,s as mr,aZ as Ae,aI as Lt,a_ as Tn,a$ as $t,b0 as he,b1 as Or,az as Je,aA as Te,b2 as lr,b3 as En,an as sn,b4 as kt,b5 as Dt,b6 as Le,I as Vr,S as fn,b7 as zt,am as Gn,b8 as Wr,b9 as gr,B as Dn,D as _t,ba as cn,V as tn,w as Ot,bb as Vt,bc as Wt,aj as Ht,ak as Gt,ai as Ut,ab as Hr,bd as qt,aa as Xt,a9 as Jt,h as Qt,r as pr}from"./antd-BreSrAtA.js";import{a as g,R as ce}from"./react-UQ1dNgW8.js";import{L as dn,a as Yt,P as Mn}from"./index-DSvDSqnX.js";import{u as $e,a as Zt,o as ea,r as _e,c as Bn,g as na,b as We,d as Me,e as Gr,f as ye,h as Ur,P as qr,m as Xr,i as zn,j as ra,k as ta,F as aa,l as la,n as an,p as Jr,q as Qr,s as oa,t as hr,v as un,w as ia,x as Yr,y as Rn,z as Un,A as ua,B as sa,G as ca}from"./index-DznfrGw4.js";import{u as Pn,B as or,a as Zr,P as In,o as da,i as et,g as Kn,r as An,b as nt,t as vn,M as qn,c as rt,d as Fn,e as Xn,f as tt,h as fa,j as va,S as yr,k as ma,U as br,l as ga,m as _n,n as Sr,p as Cr,q as pa}from"./BaseForm-Bx8PAAzw.js";import{i as at,D as ha}from"./index-Bs_USyeq.js";import{M as ya}from"./index-DuTouB0J.js";function ba(n){var e=g.useRef(0),r=Dr(g.useState(n),2),t=r[0],a=r[1],i=g.useCallback(function(l){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){a(l)})},[]);return xt(function(){cancelAnimationFrame(e.current)}),[t,i]}var Sa=wt(g.useLayoutEffect),Ca=Pt?Sa:Rt;function xa(n){var e=Dr(ba(function(){var a=fr(n);return a?{width:a.clientWidth,height:a.clientHeight}:void 0}),2),r=e[0],t=e[1];return Ca(function(){var a=fr(n);if(a){var i=new Mt(function(l){l.forEach(function(u){var c=u.target,d=c.clientWidth,f=c.clientHeight;t({width:d,height:f})})});return i.observe(a),function(){i.disconnect()}}},[],n),r}var wa=function(n){nr(r,n);var e=rr(r);function r(){var t;tr(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i)),h(Ve(t),"state",{hasError:!1,errorInfo:""}),t}return ar(r,[{key:"componentDidCatch",value:function(a,i){console.log(a,i)}},{key:"render",value:function(){return this.state.hasError?s.jsx(Bt,{status:"error",title:"Something went wrong.",extra:this.state.errorInfo}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(a){return{hasError:!0,errorInfo:a.message}}}]),r}(ce.Component),Ra=function(e){var r="".concat(e.antCls,"-progress-bg");return h({},e.componentCls,{"&-multiple":{paddingBlockStart:6,paddingBlockEnd:12,paddingInline:8},"&-progress":{"&-success":h({},r,{backgroundColor:e.colorSuccess}),"&-error":h({},r,{backgroundColor:e.colorError}),"&-warning":h({},r,{backgroundColor:e.colorWarning})},"&-rule":{display:"flex",alignItems:"center","&-icon":{"&-default":{display:"flex",alignItems:"center",justifyContent:"center",width:"14px",height:"22px","&-circle":{width:"6px",height:"6px",backgroundColor:e.colorTextSecondary,borderRadius:"4px"}},"&-loading":{color:e.colorPrimary},"&-error":{color:e.colorError},"&-success":{color:e.colorSuccess}},"&-text":{color:e.colorText}}})};function Pa(n){return $e("InlineErrorFormItem",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Ra(r)]})}var Ta=["rules","name","children","popoverProps"],Ia=["errorType","rules","name","popoverProps","children"],lt={marginBlockStart:-5,marginBlockEnd:-5,marginInlineStart:0,marginInlineEnd:0},Fa=function(e){var r=e.inputProps,t=e.input,a=e.extra,i=e.errorList,l=e.popoverProps,u=g.useState(!1),c=de(u,2),d=c[0],f=c[1],v=g.useState([]),b=de(v,2),S=b[0],p=b[1],x=g.useContext(je.ConfigContext),C=x.getPrefixCls,m=C(),y=Zt(),w=Pa("".concat(m,"-form-item-with-help")),P=w.wrapSSR,A=w.hashId;g.useEffect(function(){r.validateStatus!=="validating"&&p(r.errors)},[r.errors,r.validateStatus]);var D=ea(S.length<1?!1:d,function(F){F!==d&&f(F)}),M=r.validateStatus==="validating";return s.jsx(zr,o(o(o({trigger:(l==null?void 0:l.trigger)||["click"],placement:(l==null?void 0:l.placement)||"topLeft"},D),{},{getPopupContainer:l==null?void 0:l.getPopupContainer,getTooltipContainer:l==null?void 0:l.getTooltipContainer,content:P(s.jsx("div",{className:"".concat(m,"-form-item ").concat(A," ").concat(y.hashId).trim(),style:{margin:0,padding:0},children:s.jsxs("div",{className:"".concat(m,"-form-item-with-help ").concat(A," ").concat(y.hashId).trim(),children:[M?s.jsx(Nn,{}):null,i]})}))},l),{},{children:s.jsxs(s.Fragment,{children:[t,a]})}),"popover")},ja=function(e){var r=e.rules,t=e.name,a=e.children,i=e.popoverProps,l=be(e,Ta);return s.jsx(He.Item,o(o({name:t,rules:r,hasFeedback:!1,shouldUpdate:function(c,d){if(c===d)return!1;var f=[t].flat(1);f.length>1&&f.pop();try{return JSON.stringify(Ge(c,f))!==JSON.stringify(Ge(d,f))}catch{return!0}},_internalItemRender:{mark:"pro_table_render",render:function(c,d){return s.jsx(Fa,o({inputProps:c,popoverProps:i},d))}}},l),{},{style:o(o({},lt),l==null?void 0:l.style),children:a}))},Na=function(e){var r=e.errorType,t=e.rules,a=e.name,i=e.popoverProps,l=e.children,u=be(e,Ia);return a&&t!==null&&t!==void 0&&t.length&&r==="popover"?s.jsx(ja,o(o({name:a,rules:t,popoverProps:i},u),{},{children:l})):s.jsx(He.Item,o(o({rules:t,shouldUpdate:a?function(c,d){if(c===d)return!1;var f=[a].flat(1);f.length>1&&f.pop();try{return JSON.stringify(Ge(c,f))!==JSON.stringify(Ge(d,f))}catch{return!0}}:void 0},u),{},{style:o(o({},lt),u.style),name:a,children:l}))},Ea=function(e){var r;return!!(e!=null&&(r=e.valueType)!==null&&r!==void 0&&r.toString().startsWith("date")||(e==null?void 0:e.valueType)==="select"||e!=null&&e.valueEnum)},Ma=function(e){var r;return((r=e.ellipsis)===null||r===void 0?void 0:r.showTitle)===!1?!1:e.ellipsis},Ba=function(e,r,t){if(r.copyable||r.ellipsis){var a=r.copyable&&t?{text:t,tooltips:["",""]}:void 0,i=Ea(r),l=Ma(r)&&t?{tooltip:(r==null?void 0:r.tooltip)!==!1&&i?s.jsx("div",{className:"pro-table-tooltip-text",children:e}):t}:!1;return s.jsx(_r.Text,{style:{width:"100%",margin:0,padding:0},title:"",copyable:a,ellipsis:l,children:e})}return e},Jn=function(e,r,t){return r===void 0?e:_e(e,r,t)},ot=function(e){var r=Bn(na(),"4.24.0")>-1?{menu:e}:{overlay:s.jsx(Kt,o({},e))};return We(r)};function Ka(){var n=g.useState(!0),e=de(n,2),r=e[1],t=g.useCallback(function(){return r(function(a){return!a})},[]);return t}function Aa(n,e){var r=g.useMemo(function(){var t={current:e};return new Proxy(t,{set:function(i,l,u){return Object.is(i[l],u)||(i[l]=u,n(r)),!0}})},[]);return r}function La(n){var e=Ka(),r=Aa(e,n);return r}var it=function(e){if(e&&e!==!0)return e},$a=function(e){var r={};return Object.keys(e||{}).forEach(function(t){var a;Array.isArray(e[t])&&((a=e[t])===null||a===void 0?void 0:a.length)===0||e[t]!==void 0&&(r[t]=e[t])}),r},ka=["map_row_parentKey"],Da=["map_row_parentKey","map_row_key"],za=["map_row_key"],On=function(e){return(mr.warn||mr.warning)(e)},Ee=function(e){return Array.isArray(e)?e.join(","):e};function hn(n,e){var r,t=n.getRowKey,a=n.row,i=n.data,l=n.childrenColumnName,u=l===void 0?"children":l,c=(r=Ee(n.key))===null||r===void 0?void 0:r.toString(),d=new Map;function f(b,S,p){b.forEach(function(x,C){var m=(p||0)*10+C,y=t(x,m).toString();x&&Ae(x)==="object"&&u in x&&f(x[u]||[],y,m);var w=o(o({},x),{},{map_row_key:y,children:void 0,map_row_parentKey:S});delete w.children,S||delete w.map_row_parentKey,d.set(y,w)})}e==="top"&&d.set(c,o(o({},d.get(c)),a)),f(i),e==="update"&&d.set(c,o(o({},d.get(c)),a)),e==="delete"&&d.delete(c);var v=function(S){var p=new Map,x=[],C=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;S.forEach(function(w){if(w.map_row_parentKey&&!w.map_row_key){var P=w.map_row_parentKey,A=be(w,ka);if(p.has(P)||p.set(P,[]),y){var D;(D=p.get(P))===null||D===void 0||D.push(A)}}})};return C(e==="top"),S.forEach(function(m){if(m.map_row_parentKey&&m.map_row_key){var y,w=m.map_row_parentKey,P=m.map_row_key,A=be(m,Da);p.has(P)&&(A[u]=p.get(P)),p.has(w)||p.set(w,[]),(y=p.get(w))===null||y===void 0||y.push(A)}}),C(e==="update"),S.forEach(function(m){if(!m.map_row_parentKey){var y=m.map_row_key,w=be(m,za);if(y&&p.has(y)){var P=o(o({},w),{},h({},u,p.get(y)));x.push(P);return}x.push(w)}}),x};return v(d)}function _a(n,e){var r=n.recordKey,t=n.onSave,a=n.row,i=n.children,l=n.newLineConfig,u=n.editorType,c=n.tableName,d=g.useContext(qr),f=He.useFormInstance(),v=Re(!1),b=de(v,2),S=b[0],p=b[1],x=ye(Ce(le().mark(function C(){var m,y,w,P,A,D,M,F,z;return le().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,y=u==="Map",w=[c,Array.isArray(r)?r[0]:r].map(function(I){return I==null?void 0:I.toString()}).flat(1).filter(Boolean),p(!0),T.next=6,f.validateFields(w,{recursive:!0});case 6:return P=(d==null||(m=d.getFieldFormatValue)===null||m===void 0?void 0:m.call(d,w))||f.getFieldValue(w),Array.isArray(r)&&r.length>1&&(A=$t(r),D=A.slice(1),M=Ge(P,D),Tn(P,D,M)),F=y?Tn({},w,P):P,T.next=11,t==null?void 0:t(r,Xr({},a,F),a,l);case 11:return z=T.sent,p(!1),T.abrupt("return",z);case 16:throw T.prev=16,T.t0=T.catch(0),console.log(T.t0),p(!1),T.t0;case 21:case"end":return T.stop()}},C,null,[[0,16]])})));return g.useImperativeHandle(e,function(){return{save:x}},[x]),s.jsxs("a",{onClick:function(){var C=Ce(le().mark(function m(y){return le().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return y.stopPropagation(),y.preventDefault(),P.prev=2,P.next=5,x();case 5:P.next=9;break;case 7:P.prev=7,P.t0=P.catch(2);case 9:case"end":return P.stop()}},m,null,[[2,7]])}));return function(m){return C.apply(this,arguments)}}(),children:[S?s.jsx(Nn,{style:{marginInlineEnd:8}}):null,i||"保存"]},"save")}var Oa=function(e){var r=e.recordKey,t=e.onDelete,a=e.preEditRowRef,i=e.row,l=e.children,u=e.deletePopconfirmMessage,c=Re(function(){return!1}),d=de(c,2),f=d[0],v=d[1],b=ye(Ce(le().mark(function S(){var p;return le().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,v(!0),C.next=4,t==null?void 0:t(r,i);case 4:return p=C.sent,v(!1),C.abrupt("return",p);case 9:return C.prev=9,C.t0=C.catch(0),console.log(C.t0),v(!1),C.abrupt("return",null);case 14:return C.prev=14,a&&(a.current=null),C.finish(14);case 17:case"end":return C.stop()}},S,null,[[0,9,14,17]])})));return l!==!1?s.jsx(Lt,{title:u,onConfirm:function(){return b()},children:s.jsxs("a",{children:[f?s.jsx(Nn,{style:{marginInlineEnd:8}}):null,l||"删除"]})},"delete"):null},Va=function(e){var r=e.recordKey,t=e.tableName,a=e.newLineConfig,i=e.editorType,l=e.onCancel,u=e.cancelEditable,c=e.row,d=e.cancelText,f=e.preEditRowRef,v=g.useContext(qr),b=He.useFormInstance();return s.jsx("a",{onClick:function(){var S=Ce(le().mark(function p(x){var C,m,y,w,P,A,D;return le().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return x.stopPropagation(),x.preventDefault(),m=i==="Map",y=[t,r].flat(1).filter(Boolean),w=(v==null||(C=v.getFieldFormatValue)===null||C===void 0?void 0:C.call(v,y))||(b==null?void 0:b.getFieldValue(y)),P=m?Tn({},y,w):w,F.next=8,l==null?void 0:l(r,P,c,a);case 8:return A=F.sent,F.next=11,u(r);case 11:if((f==null?void 0:f.current)===null){F.next=15;break}b.setFieldsValue(Tn({},y,f==null?void 0:f.current)),F.next=17;break;case 15:return F.next=17,(D=e.onDelete)===null||D===void 0?void 0:D.call(e,r,c);case 17:return f&&(f.current=null),F.abrupt("return",A);case 19:case"end":return F.stop()}},p)}));return function(p){return S.apply(this,arguments)}}(),children:d||"取消"},"cancel")};function Wa(n,e){var r=e.recordKey,t=e.newLineConfig,a=e.saveText,i=e.deleteText,l=g.forwardRef(_a),u=g.createRef();return{save:s.jsx(l,o(o({},e),{},{row:n,ref:u,children:a}),"save"+r),saveRef:u,delete:(t==null?void 0:t.options.recordKey)!==r?s.jsx(Oa,o(o({},e),{},{row:n,children:i}),"delete"+r):void 0,cancel:s.jsx(Va,o(o({},e),{},{row:n}),"cancel"+r)}}function Ha(n){var e=Me(),r=g.useRef(null),t=g.useState(void 0),a=de(t,2),i=a[0],l=a[1],u=function(){var j=new Map,N=function K(B,V){B==null||B.forEach(function(q,J){var H,X=V==null?J.toString():V+"_"+J.toString();j.set(X,Ee(n.getRowKey(q,-1))),j.set((H=Ee(n.getRowKey(q,-1)))===null||H===void 0?void 0:H.toString(),X),n.childrenColumnName&&q!==null&&q!==void 0&&q[n.childrenColumnName]&&K(q[n.childrenColumnName],X)})};return N(n.dataSource),j},c=g.useMemo(function(){return u()},[]),d=g.useRef(c),f=g.useRef(void 0);Gr(function(){d.current=u()},[n.dataSource]),f.current=i;var v=n.type||"single",b=At(n.dataSource,"children",n.getRowKey),S=de(b,1),p=S[0],x=Re([],{value:n.editableKeys,onChange:n.onChange?function(O){var j,N,K;n==null||(j=n.onChange)===null||j===void 0||j.call(n,(N=O==null?void 0:O.filter(function(B){return B!==void 0}))!==null&&N!==void 0?N:[],(K=O==null?void 0:O.map(function(B){return p(B)}).filter(function(B){return B!==void 0}))!==null&&K!==void 0?K:[])}:void 0}),C=de(x,2),m=C[0],y=C[1],w=g.useMemo(function(){var O=v==="single"?m==null?void 0:m.slice(0,1):m;return new Set(O)},[(m||[]).join(","),v]),P=Pn(m),A=ye(function(O){var j,N,K,B,V=(j=n.getRowKey(O,O.index))===null||j===void 0||(N=j.toString)===null||N===void 0?void 0:N.call(j),q=(K=n.getRowKey(O,-1))===null||K===void 0||(B=K.toString)===null||B===void 0?void 0:B.call(K),J=m==null?void 0:m.map(function(ie){return ie==null?void 0:ie.toString()}),H=(P==null?void 0:P.map(function(ie){return ie==null?void 0:ie.toString()}))||[],X=n.tableName&&!!(H!=null&&H.includes(q))||!!(H!=null&&H.includes(V));return{recordKey:q,isEditable:n.tableName&&(J==null?void 0:J.includes(q))||(J==null?void 0:J.includes(V)),preIsEditable:X}}),D=ye(function(O,j){var N,K;return w.size>0&&v==="single"&&n.onlyOneLineEditorAlertMessage!==!1?(On(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1):(w.add(O),y(Array.from(w)),r.current=(N=j??((K=n.dataSource)===null||K===void 0?void 0:K.find(function(B,V){return n.getRowKey(B,V)===O})))!==null&&N!==void 0?N:null,!0)}),M=ye(function(){var O=Ce(le().mark(function j(N,K){var B,V;return le().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(B=Ee(N).toString(),V=d.current.get(B),!(!w.has(B)&&V&&(K??!0)&&n.tableName)){J.next=5;break}return M(V,!1),J.abrupt("return");case 5:return i&&i.options.recordKey===N&&l(void 0),w.delete(B),w.delete(Ee(N)),y(Array.from(w)),J.abrupt("return",!0);case 10:case"end":return J.stop()}},j)}));return function(j,N){return O.apply(this,arguments)}}()),F=Ur(Ce(le().mark(function O(){var j,N,K,B,V=arguments;return le().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:for(N=V.length,K=new Array(N),B=0;B<N;B++)K[B]=V[B];(j=n.onValuesChange)===null||j===void 0||j.call.apply(j,[n].concat(K));case 2:case"end":return J.stop()}},O)})),64),z=ye(function(O,j){var N;if(n.onValuesChange){var K=n.dataSource;m==null||m.forEach(function(H){if((i==null?void 0:i.options.recordKey)!==H){var X=H.toString(),ie=Ge(j,[n.tableName||"",X].flat(1).filter(function(Y){return Y||Y===0}));ie&&(K=hn({data:K,getRowKey:n.getRowKey,row:ie,key:X,childrenColumnName:n.childrenColumnName||"children"},"update"))}});var B=O,V=(N=Object.keys(B||{}).pop())===null||N===void 0?void 0:N.toString(),q=o(o({},i==null?void 0:i.defaultValue),Ge(j,[n.tableName||"",V.toString()].flat(1).filter(function(H){return H||H===0}))),J=d.current.has(Ee(V))?K.find(function(H,X){var ie,Y=(ie=n.getRowKey(H,X))===null||ie===void 0?void 0:ie.toString();return Y===V}):q;F.run(J||q,K)}}),L=g.useRef(new Map);g.useEffect(function(){L.current.forEach(function(O,j){w.has(j)||L.current.delete(j)})},[L,w]);var T=ye(function(){var O=Ce(le().mark(function j(N,K){var B,V,q,J;return le().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(B=Ee(N),V=d.current.get(N.toString()),!(!w.has(B)&&V&&(K??!0)&&n.tableName)){X.next=6;break}return X.next=5,T(V,!1);case 5:return X.abrupt("return",X.sent);case 6:return q=L.current.get(B)||L.current.get(B.toString()),X.prev=7,X.next=10,q==null||(J=q.current)===null||J===void 0?void 0:J.save();case 10:X.next=15;break;case 12:return X.prev=12,X.t0=X.catch(7),X.abrupt("return",!1);case 15:return w.delete(B),w.delete(B.toString()),y(Array.from(w)),X.abrupt("return",!0);case 19:case"end":return X.stop()}},j,null,[[7,12]])}));return function(j,N){return O.apply(this,arguments)}}()),I=ye(function(O,j){if(j!=null&&j.parentKey&&!d.current.has(Ee(j==null?void 0:j.parentKey).toString()))return console.warn("can't find record by key",j==null?void 0:j.parentKey),!1;if(f.current&&n.onlyAddOneLineAlertMessage!==!1)return On(n.onlyAddOneLineAlertMessage||e.getMessage("editableTable.onlyAddOneLine","只能新增一行")),!1;if(w.size>0&&v==="single"&&n.onlyOneLineEditorAlertMessage!==!1)return On(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1;var N=n.getRowKey(O,-1);if(!N&&N!==0)throw rn(!!N,`请设置 recordCreatorProps.record 并返回一个唯一的key  
  https://procomponents.ant.design/components/editable-table#editable-%E6%96%B0%E5%BB%BA%E8%A1%8C`),new Error("请设置 recordCreatorProps.record 并返回一个唯一的key");if(w.add(N),y(Array.from(w)),(j==null?void 0:j.newRecordType)==="dataSource"||n.tableName){var K,B={data:n.dataSource,getRowKey:n.getRowKey,row:o(o({},O),{},{map_row_parentKey:j!=null&&j.parentKey?(K=Ee(j==null?void 0:j.parentKey))===null||K===void 0?void 0:K.toString():void 0}),key:N,childrenColumnName:n.childrenColumnName||"children"};n.setDataSource(hn(B,(j==null?void 0:j.position)==="top"?"top":"update"))}else l({defaultValue:O,options:o(o({},j),{},{recordKey:N})});return!0}),G=(n==null?void 0:n.saveText)||e.getMessage("editableTable.action.save","保存"),E=(n==null?void 0:n.deleteText)||e.getMessage("editableTable.action.delete","删除"),R=(n==null?void 0:n.cancelText)||e.getMessage("editableTable.action.cancel","取消"),k=ye(function(){var O=Ce(le().mark(function j(N,K,B,V){var q,J,H,X,ie,Y,ve;return le().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:return ne.next=2,n==null||(q=n.onSave)===null||q===void 0?void 0:q.call(n,N,K,B,V);case 2:return X=ne.sent,ne.next=5,M(N);case 5:if(ie=V||f.current||{},Y=ie.options,!(!(Y!=null&&Y.parentKey)&&(Y==null?void 0:Y.recordKey)===N)){ne.next=9;break}return(Y==null?void 0:Y.position)==="top"?n.setDataSource([K].concat(Ke(n.dataSource))):n.setDataSource([].concat(Ke(n.dataSource),[K])),ne.abrupt("return",X);case 9:return ve={data:n.dataSource,getRowKey:n.getRowKey,row:Y?o(o({},K),{},{map_row_parentKey:(J=Ee((H=Y==null?void 0:Y.parentKey)!==null&&H!==void 0?H:""))===null||J===void 0?void 0:J.toString()}):K,key:N,childrenColumnName:n.childrenColumnName||"children"},n.setDataSource(hn(ve,(Y==null?void 0:Y.position)==="top"?"top":"update")),ne.next=13,M(N);case 13:return ne.abrupt("return",X);case 14:case"end":return ne.stop()}},j)}));return function(j,N,K,B){return O.apply(this,arguments)}}()),$=ye(function(){var O=Ce(le().mark(function j(N,K){var B,V,q;return le().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return V={data:n.dataSource,getRowKey:n.getRowKey,row:K,key:N,childrenColumnName:n.childrenColumnName||"children"},H.next=3,n==null||(B=n.onDelete)===null||B===void 0?void 0:B.call(n,N,K);case 3:return q=H.sent,H.next=6,M(N,!1);case 6:return n.setDataSource(hn(V,"delete")),H.abrupt("return",q);case 8:case"end":return H.stop()}},j)}));return function(j,N){return O.apply(this,arguments)}}()),_=ye(function(){var O=Ce(le().mark(function j(N,K,B,V){var q,J;return le().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,n==null||(q=n.onCancel)===null||q===void 0?void 0:q.call(n,N,K,B,V);case 2:return J=X.sent,X.abrupt("return",J);case 4:case"end":return X.stop()}},j)}));return function(j,N,K,B){return O.apply(this,arguments)}}()),re=n.actionRender&&typeof n.actionRender=="function",U=re?n.actionRender:function(){},te=ye(U),ee=function(j){var N=n.getRowKey(j,j.index),K={saveText:G,cancelText:R,deleteText:E,addEditRecord:I,recordKey:N,cancelEditable:M,index:j.index,tableName:n.tableName,newLineConfig:i,onCancel:_,onDelete:$,onSave:k,editableKeys:m,setEditableRowKeys:y,preEditRowRef:r,deletePopconfirmMessage:n.deletePopconfirmMessage||"".concat(e.getMessage("deleteThisLine","删除此项"),"?")},B=Wa(j,K);return n.tableName?L.current.set(d.current.get(Ee(N))||Ee(N),B.saveRef):L.current.set(Ee(N),B.saveRef),re?te(j,K,{save:B.save,delete:B.delete,cancel:B.cancel}):[B.save,B.delete,B.cancel]};return{editableKeys:m,setEditableRowKeys:y,isEditable:A,actionRender:ee,startEditable:D,cancelEditable:M,addEditRecord:I,saveEditable:T,newLineRecord:i,preEditableKeys:P,onValuesChange:z,getRealIndex:n.getRealIndex}}var Ga=function(e){var r=e.componentCls,t=e.antCls;return h({},"".concat(r,"-actions"),h(h({marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,listStyle:"none",display:"flex",gap:e.marginXS,background:e.colorBgContainer,borderBlockStart:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit),minHeight:42},"& > *",{alignItems:"center",justifyContent:"center",flex:1,display:"flex",cursor:"pointer",color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),"& > li > div",{flex:1,width:"100%",marginBlock:e.marginSM,marginInline:0,color:e.colorTextSecondary,textAlign:"center",a:{color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}},div:h(h({position:"relative",display:"block",minWidth:32,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimaryHover,transition:"color 0.3s"}},"a:not(".concat(t,`-btn),
            > .anticon`),{display:"inline-block",width:"100%",color:e.colorTextSecondary,lineHeight:"22px",transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),".anticon",{fontSize:e.cardActionIconSize,lineHeight:"22px"}),"&:not(:last-child)":{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}}))};function Ua(n){return $e("ProCardActions",function(e){var r=o(o({},e),{},{componentCls:".".concat(n),cardActionIconSize:16});return[Ga(r)]})}var qa=function(e){var r=e.actions,t=e.prefixCls,a=Ua(t),i=a.wrapSSR,l=a.hashId;return Array.isArray(r)&&r!==null&&r!==void 0&&r.length?i(s.jsx("ul",{className:he("".concat(t,"-actions"),l),children:r.map(function(u,c){return s.jsx("li",{style:{width:"".concat(100/r.length,"%"),padding:0,margin:0},className:he("".concat(t,"-actions-item"),l),children:u},"action-".concat(c))})})):i(s.jsx("ul",{className:he("".concat(t,"-actions"),l),children:r}))},Xa=new Or("card-loading",{"0%":{backgroundPosition:"0 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),Ja=function(e){return h({},e.componentCls,h(h({"&-loading":{overflow:"hidden"},"&-loading &-body":{userSelect:"none"}},"".concat(e.componentCls,"-loading-content"),{width:"100%",p:{marginBlock:0,marginInline:0}}),"".concat(e.componentCls,"-loading-block"),{height:"14px",marginBlock:"4px",background:"linear-gradient(90deg, rgba(54, 61, 64, 0.2), rgba(54, 61, 64, 0.4), rgba(54, 61, 64, 0.2))",backgroundSize:"600% 600%",borderRadius:e.borderRadius,animationName:Xa,animationDuration:"1.4s",animationTimingFunction:"ease",animationIterationCount:"infinite"}))};function Qa(n){return $e("ProCardLoading",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Ja(r)]})}var Ya=function(e){var r=e.style,t=e.prefix,a=Qa(t||"ant-pro-card"),i=a.wrapSSR;return i(s.jsxs("div",{className:"".concat(t,"-loading-content"),style:r,children:[s.jsx(Je,{gutter:8,children:s.jsx(Te,{span:22,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})}),s.jsxs(Je,{gutter:8,children:[s.jsx(Te,{span:8,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:15,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})]}),s.jsxs(Je,{gutter:8,children:[s.jsx(Te,{span:6,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:18,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})]}),s.jsxs(Je,{gutter:8,children:[s.jsx(Te,{span:13,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:9,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})]}),s.jsxs(Je,{gutter:8,children:[s.jsx(Te,{span:4,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:3,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:16,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})]})]}))},Za=["tab","children"],el=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"];function nl(n){return n.filter(function(e){return e})}function rl(n,e,r){if(n)return n.map(function(a){return o(o({},a),{},{children:s.jsx(yn,o(o({},r==null?void 0:r.cardProps),{},{children:a.children}))})});rn(!r,"Tabs.TabPane is deprecated. Please use `items` directly.");var t=lr(e).map(function(a){if(ce.isValidElement(a)){var i=a.key,l=a.props,u=l||{},c=u.tab,d=u.children,f=be(u,Za),v=o(o({key:String(i)},f),{},{children:s.jsx(yn,o(o({},r==null?void 0:r.cardProps),{},{children:d})),label:c});return v}return null});return nl(t)}var tl=function(e){var r=g.useContext(je.ConfigContext),t=r.getPrefixCls;if(En.startsWith("5"))return s.jsx(s.Fragment,{});var a=e.key,i=e.tab,l=e.tabKey,u=e.disabled,c=e.destroyInactiveTabPane,d=e.children,f=e.className,v=e.style,b=e.cardProps,S=be(e,el),p=t("pro-card-tabpane"),x=he(p,f);return s.jsx(sn.TabPane,o(o({tabKey:l,tab:i,className:x,style:v,disabled:u,destroyInactiveTabPane:c},S),{},{children:s.jsx(yn,o(o({},b),{},{children:d}))}),a)},xr=function(e){return{backgroundColor:e.controlItemBgActive,borderColor:e.controlOutline}},al=function(e){var r=e.componentCls;return h(h(h({},r,o(o({position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box",width:"100%",marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,backgroundColor:e.colorBgContainer,borderRadius:e.borderRadius,transition:"all 0.3s"},zn===null||zn===void 0?void 0:zn(e)),{},h(h(h(h(h(h(h(h(h(h({"&-box-shadow":{boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017",borderColor:"transparent"},"&-col":{width:"100%"},"&-border":{border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-hoverable":h({cursor:"pointer",transition:"box-shadow 0.3s, border-color 0.3s","&:hover":{borderColor:"transparent",boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017"}},"&".concat(r,"-checked:hover"),{borderColor:e.controlOutline}),"&-checked":o(o({},xr(e)),{},{"&::after":{visibility:"visible",position:"absolute",insetBlockStart:2,insetInlineEnd:2,opacity:1,width:0,height:0,border:"6px solid ".concat(e.colorPrimary),borderBlockEnd:"6px solid transparent",borderInlineStart:"6px solid transparent",borderStartEndRadius:2,content:'""'}}),"&:focus":o({},xr(e)),"&&-ghost":h({backgroundColor:"transparent"},"> ".concat(r),{"&-header":{paddingInlineEnd:0,paddingBlockEnd:e.padding,paddingInlineStart:0},"&-body":{paddingBlock:0,paddingInline:0,backgroundColor:"transparent"}}),"&&-split > &-body":{paddingBlock:0,paddingInline:0},"&&-contain-card > &-body":{display:"flex"}},"".concat(r,"-body-direction-column"),{flexDirection:"column"}),"".concat(r,"-body-wrap"),{flexWrap:"wrap"}),"&&-collapse",h({},"> ".concat(r),{"&-header":{paddingBlockEnd:e.padding,borderBlockEnd:0},"&-body":{display:"none"}})),"".concat(r,"-header"),{display:"flex",alignItems:"center",justifyContent:"space-between",paddingInline:e.paddingLG,paddingBlock:e.padding,paddingBlockEnd:0,"&-border":{"&":{paddingBlockEnd:e.padding},borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-collapsible":{cursor:"pointer"}}),"".concat(r,"-title"),{color:e.colorText,fontWeight:500,fontSize:e.fontSizeLG,lineHeight:e.lineHeight}),"".concat(r,"-extra"),{color:e.colorText}),"".concat(r,"-type-inner"),h({},"".concat(r,"-header"),{backgroundColor:e.colorFillAlter})),"".concat(r,"-collapsible-icon"),{marginInlineEnd:e.marginXS,color:e.colorIconHover,":hover":{color:e.colorPrimaryHover},"& svg":{transition:"transform ".concat(e.motionDurationMid)}}),"".concat(r,"-body"),{display:"block",boxSizing:"border-box",height:"100%",paddingInline:e.paddingLG,paddingBlock:e.padding,"&-center":{display:"flex",alignItems:"center",justifyContent:"center"}}),"&&-size-small",h(h({},r,{"&-header":{paddingInline:e.paddingSM,paddingBlock:e.paddingXS,paddingBlockEnd:0,"&-border":{paddingBlockEnd:e.paddingXS}},"&-title":{fontSize:e.fontSize},"&-body":{paddingInline:e.paddingSM,paddingBlock:e.paddingSM}}),"".concat(r,"-header").concat(r,"-header-collapsible"),{paddingBlock:e.paddingXS})))),"".concat(r,"-col"),h(h({},"&".concat(r,"-split-vertical"),{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),"&".concat(r,"-split-horizontal"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)})),"".concat(r,"-tabs"),h(h(h(h(h(h({},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),h({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:e.marginXS,paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-bottom > ").concat(e.antCls,"-tabs-nav"),h({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-left"),h({},"".concat(e.antCls,"-tabs-content-holder"),h({},"".concat(e.antCls,"-tabs-content"),h({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-left > ").concat(e.antCls,"-tabs-nav"),h({marginInlineEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})),"".concat(e.antCls,"-tabs-right"),h({},"".concat(e.antCls,"-tabs-content-holder"),h({},"".concat(e.antCls,"-tabs-content"),h({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-right > ").concat(e.antCls,"-tabs-nav"),h({},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})))},ut=24,ll=function(e,r){var t=r.componentCls;return e===0?h({},"".concat(t,"-col-0"),{display:"none"}):h({},"".concat(t,"-col-").concat(e),{flexShrink:0,width:"".concat(e/ut*100,"%")})},ol=function(e){return Array(ut+1).fill(1).map(function(r,t){return ll(t,e)})};function il(n){return $e("ProCard",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[al(r),ol(r)]})}var ul=["className","style","bodyStyle","headStyle","title","subTitle","extra","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","boxShadow","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","colStyle","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],yn=ce.forwardRef(function(n,e){var r,t=n.className,a=n.style,i=n.bodyStyle,l=n.headStyle,u=n.title,c=n.subTitle,d=n.extra,f=n.wrap,v=f===void 0?!1:f,b=n.layout,S=n.loading,p=n.gutter,x=p===void 0?0:p,C=n.tooltip,m=n.split,y=n.headerBordered,w=y===void 0?!1:y,P=n.bordered,A=P===void 0?!1:P,D=n.boxShadow,M=D===void 0?!1:D,F=n.children,z=n.size,L=n.actions,T=n.ghost,I=T===void 0?!1:T,G=n.hoverable,E=G===void 0?!1:G,R=n.direction,k=n.collapsed,$=n.collapsible,_=$===void 0?!1:$,re=n.collapsibleIconRender,U=n.colStyle,te=n.defaultCollapsed,ee=te===void 0?!1:te,O=n.onCollapse,j=n.checked,N=n.onChecked,K=n.tabs,B=n.type,V=be(n,ul),q=g.useContext(je.ConfigContext),J=q.getPrefixCls,H=kt()||{lg:!0,md:!0,sm:!0,xl:!1,xs:!1,xxl:!1},X=Re(ee,{value:k,onChange:O}),ie=de(X,2),Y=ie[0],ve=ie[1],Z=["xxl","xl","lg","md","sm","xs"],ne=rl(K==null?void 0:K.items,F,K),fe=function(pe){var Se=[0,0],ke=Array.isArray(pe)?pe:[pe,0];return ke.forEach(function(Pe,De){if(Ae(Pe)==="object")for(var nn=0;nn<Z.length;nn+=1){var Be=Z[nn];if(H[Be]&&Pe[Be]!==void 0){Se[De]=Pe[Be];break}}else Se[De]=Pe||0}),Se},se=function(pe,Se){return pe?Se:{}},Ie=function(pe){var Se=pe;if(Ae(pe)==="object")for(var ke=0;ke<Z.length;ke+=1){var Pe=Z[ke];if(H!=null&&H[Pe]&&(pe==null?void 0:pe[Pe])!==void 0){Se=pe[Pe];break}}var De=se(typeof Se=="string"&&/\d%|\dpx/i.test(Se),{width:Se,flexShrink:0});return{span:Se,colSpanStyle:De}},ue=J("pro-card"),Ye=il(ue),ae=Ye.wrapSSR,Fe=Ye.hashId,Ze=fe(x),gn=de(Ze,2),Oe=gn[0],en=gn[1],Ue=!1,ln=ce.Children.toArray(F),Sn=ln.map(function(we,pe){var Se;if(we!=null&&(Se=we.type)!==null&&Se!==void 0&&Se.isProCard){Ue=!0;var ke=we.props.colSpan,Pe=Ie(ke),De=Pe.span,nn=Pe.colSpanStyle,Be=he(["".concat(ue,"-col")],Fe,h(h(h({},"".concat(ue,"-split-vertical"),m==="vertical"&&pe!==ln.length-1),"".concat(ue,"-split-horizontal"),m==="horizontal"&&pe!==ln.length-1),"".concat(ue,"-col-").concat(De),typeof De=="number"&&De>=0&&De<=24)),kn=ae(s.jsx("div",{style:o(o(o(o({},nn),se(Oe>0,{paddingInlineEnd:Oe/2,paddingInlineStart:Oe/2})),se(en>0,{paddingBlockStart:en/2,paddingBlockEnd:en/2})),U),className:Be,children:ce.cloneElement(we)}));return ce.cloneElement(kn,{key:"pro-card-col-".concat((we==null?void 0:we.key)||pe)})}return we}),Cn=he("".concat(ue),t,Fe,(r={},h(h(h(h(h(h(h(h(h(h(r,"".concat(ue,"-border"),A),"".concat(ue,"-box-shadow"),M),"".concat(ue,"-contain-card"),Ue),"".concat(ue,"-loading"),S),"".concat(ue,"-split"),m==="vertical"||m==="horizontal"),"".concat(ue,"-ghost"),I),"".concat(ue,"-hoverable"),E),"".concat(ue,"-size-").concat(z),z),"".concat(ue,"-type-").concat(B),B),"".concat(ue,"-collapse"),Y),h(r,"".concat(ue,"-checked"),j))),$n=he("".concat(ue,"-body"),Fe,h(h(h({},"".concat(ue,"-body-center"),b==="center"),"".concat(ue,"-body-direction-column"),m==="horizontal"||R==="column"),"".concat(ue,"-body-wrap"),v&&Ue)),xe=i,pn=ce.isValidElement(S)?S:s.jsx(Ya,{prefix:ue,style:(i==null?void 0:i.padding)===0||(i==null?void 0:i.padding)==="0px"?{padding:24}:void 0}),me=_&&k===void 0&&(re?re({collapsed:Y}):s.jsx(Dt,{onClick:function(){_==="icon"&&ve(!Y)},rotate:Y?void 0:90,className:"".concat(ue,"-collapsible-icon ").concat(Fe).trim()}));return ae(s.jsxs("div",o(o({className:Cn,style:a,ref:e,onClick:function(pe){var Se;N==null||N(pe),V==null||(Se=V.onClick)===null||Se===void 0||Se.call(V,pe)}},Le(V,["prefixCls","colSpan"])),{},{children:[(u||d||me)&&s.jsxs("div",{className:he("".concat(ue,"-header"),Fe,h(h({},"".concat(ue,"-header-border"),w||B==="inner"),"".concat(ue,"-header-collapsible"),me)),style:l,onClick:function(){(_==="header"||_===!0)&&ve(!Y)},children:[s.jsxs("div",{className:"".concat(ue,"-title ").concat(Fe).trim(),children:[me,s.jsx(dn,{label:u,tooltip:C,subTitle:c})]}),d&&s.jsx("div",{className:"".concat(ue,"-extra ").concat(Fe).trim(),onClick:function(pe){return pe.stopPropagation()},children:d})]}),K?s.jsx("div",{className:"".concat(ue,"-tabs ").concat(Fe).trim(),children:s.jsx(sn,o(o({onChange:K.onChange},Le(K,["cardProps"])),{},{items:ne,children:S?pn:F}))}):s.jsx("div",{className:$n,style:xe,children:S?pn:Sn}),L?s.jsx(qa,{actions:L,prefixCls:ue}):null]})))}),sl=function(e){var r=e.componentCls;return h({},r,{"&-divider":{flex:"none",width:e.lineWidth,marginInline:e.marginXS,marginBlock:e.marginLG,backgroundColor:e.colorSplit,"&-horizontal":{width:"initial",height:e.lineWidth,marginInline:e.marginLG,marginBlock:e.marginXS}},"&&-size-small &-divider":{marginBlock:e.marginLG,marginInline:e.marginXS,"&-horizontal":{marginBlock:e.marginXS,marginInline:e.marginLG}}})};function cl(n){return $e("ProCardDivider",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[sl(r)]})}var dl=function(e){var r=g.useContext(je.ConfigContext),t=r.getPrefixCls,a=t("pro-card"),i="".concat(a,"-divider"),l=cl(a),u=l.wrapSSR,c=l.hashId,d=e.className,f=e.style,v=f===void 0?{}:f,b=e.type,S=he(i,d,c,h({},"".concat(i,"-").concat(b),b));return u(s.jsx("div",{className:S,style:v}))},fl=function(e){return s.jsx(yn,o({bodyStyle:{padding:0}},e))},bn=yn;bn.isProCard=!0;bn.Divider=dl;bn.TabPane=tl;bn.Group=fl;var vl=["children","value","valuePropName","onChange","fieldProps","space","type","transform","convertValue","lightProps"],ml=["children","space","valuePropName"],gl={space:fn,group:Vr.Group};function pl(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&n in e.target?e.target[n]:e}var hl=function(e){var r=e.children,t=e.value,a=t===void 0?[]:t,i=e.valuePropName,l=e.onChange,u=e.fieldProps,c=e.space,d=e.type,f=d===void 0?"space":d;e.transform,e.convertValue,e.lightProps;var v=be(e,vl),b=ye(function(P,A){var D,M=Ke(a);M[A]=pl(i||"value",P),l==null||l(M),u==null||(D=u.onChange)===null||D===void 0||D.call(u,M)}),S=-1,p=lr(_e(r,a,e)).map(function(P){if(ce.isValidElement(P)){var A,D,M;S+=1;var F=S,z=(P==null||(A=P.type)===null||A===void 0?void 0:A.displayName)==="ProFormComponent"||(P==null||(D=P.props)===null||D===void 0?void 0:D.readonly),L=z?o(o({key:F,ignoreFormItem:!0},P.props||{}),{},{fieldProps:o(o({},P==null||(M=P.props)===null||M===void 0?void 0:M.fieldProps),{},{onChange:function(){b(arguments.length<=0?void 0:arguments[0],F)}}),value:a==null?void 0:a[F],onChange:void 0}):o(o({key:F},P.props||{}),{},{value:a==null?void 0:a[F],onChange:function(I){var G,E;b(I,F),(G=(E=P.props).onChange)===null||G===void 0||G.call(E,I)}});return ce.cloneElement(P,L)}return P}),x=gl[f],C=ta(v),m=C.RowWrapper,y=g.useMemo(function(){return o({},f==="group"?{compact:!0}:{})},[f]),w=g.useCallback(function(P){var A=P.children;return s.jsx(x,o(o(o({},y),c),{},{align:"start",wrap:!0,children:A}))},[x,c,y]);return s.jsx(m,{Wrapper:w,children:p})},yl=ce.forwardRef(function(n,e){var r=n.children,t=n.space,a=n.valuePropName,i=be(n,ml);return g.useImperativeHandle(e,function(){return{}}),s.jsx(hl,o(o(o({space:t,valuePropName:a},i.fieldProps),{},{onChange:void 0},i),{},{children:r}))}),bl=ra(yl),Sl=function(e){return h({},e.componentCls,{lineHeight:"30px","&::before":{display:"block",height:0,visibility:"hidden",content:"'.'"},"&-small":{lineHeight:e.lineHeight},"&-container":{display:"flex",flexWrap:"wrap",gap:e.marginXS},"&-item":h({whiteSpace:"nowrap"},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"&-line":{minWidth:"198px"},"&-line:not(:first-child)":{marginBlockStart:"16px",marginBlockEnd:8},"&-collapse-icon":{width:e.controlHeight,height:e.controlHeight,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},"&-effective":h({},"".concat(e.componentCls,"-collapse-icon"),{backgroundColor:e.colorBgTextHover})})};function Cl(n){return $e("LightFilter",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Sl(r)]})}var xl=["size","collapse","collapseLabel","initialValues","onValuesChange","form","placement","formRef","bordered","ignoreRules","footerRender"],wl=function(e){var r=e.items,t=e.prefixCls,a=e.size,i=a===void 0?"middle":a,l=e.collapse,u=e.collapseLabel,c=e.onValuesChange,d=e.bordered,f=e.values,v=e.footerRender,b=e.placement,S=Me(),p="".concat(t,"-light-filter"),x=Cl(p),C=x.wrapSSR,m=x.hashId,y=g.useState(!1),w=de(y,2),P=w[0],A=w[1],D=g.useState(function(){return o({},f)}),M=de(D,2),F=M[0],z=M[1];g.useEffect(function(){z(o({},f))},[f]);var L=g.useMemo(function(){var E=[],R=[];return r.forEach(function(k){var $=k.props||{},_=$.secondary;_||l?E.push(k):R.push(k)}),{collapseItems:E,outsideItems:R}},[e.items]),T=L.collapseItems,I=L.outsideItems,G=function(){return u||(l?s.jsx(zt,{className:"".concat(p,"-collapse-icon ").concat(m).trim()}):s.jsx(la,{size:i,label:S.getMessage("form.lightFilter.more","更多筛选")}))};return C(s.jsx("div",{className:he(p,m,"".concat(p,"-").concat(i),h({},"".concat(p,"-effective"),Object.keys(f).some(function(E){return Array.isArray(f[E])?f[E].length>0:f[E]}))),children:s.jsxs("div",{className:"".concat(p,"-container ").concat(m).trim(),children:[I.map(function(E,R){if(!(E!=null&&E.props))return E;var k=E.key,$=(E==null?void 0:E.props)||{},_=$.fieldProps,re=_!=null&&_.placement?_==null?void 0:_.placement:b;return s.jsx("div",{className:"".concat(p,"-item ").concat(m).trim(),children:ce.cloneElement(E,{fieldProps:o(o({},E.props.fieldProps),{},{placement:re}),proFieldProps:o(o({},E.props.proFieldProps),{},{light:!0,label:E.props.label,bordered:d}),bordered:d})},k||R)}),T.length?s.jsx("div",{className:"".concat(p,"-item ").concat(m).trim(),children:s.jsx(aa,{padding:24,open:P,onOpenChange:function(R){A(R)},placement:b,label:G(),footerRender:v,footer:{onConfirm:function(){c(o({},F)),A(!1)},onClear:function(){var R={};T.forEach(function(k){var $=k.props.name;R[$]=void 0}),c(R)}},children:T.map(function(E){var R=E.key,k=E.props,$=k.name,_=k.fieldProps,re=o(o({},_),{},{onChange:function(ee){return z(o(o({},F),{},h({},$,ee!=null&&ee.target?ee.target.value:ee))),!1}});F.hasOwnProperty($)&&(re[E.props.valuePropName||"value"]=F[$]);var U=_!=null&&_.placement?_==null?void 0:_.placement:b;return s.jsx("div",{className:"".concat(p,"-line ").concat(m).trim(),children:ce.cloneElement(E,{fieldProps:o(o({},re),{},{placement:U})})},R)})})},"more"):null]})}))};function Rl(n){var e=n.size,r=n.collapse,t=n.collapseLabel,a=n.initialValues,i=n.onValuesChange,l=n.form,u=n.placement,c=n.formRef,d=n.bordered;n.ignoreRules;var f=n.footerRender,v=be(n,xl),b=g.useContext(je.ConfigContext),S=b.getPrefixCls,p=S("pro-form"),x=g.useState(function(){return o({},a)}),C=de(x,2),m=C[0],y=C[1],w=g.useRef();return g.useImperativeHandle(c,function(){return w.current},[w.current]),s.jsx(or,o(o({size:e,initialValues:a,form:l,contentRender:function(A){return s.jsx(wl,{prefixCls:p,items:A==null?void 0:A.flatMap(function(D){var M;return!D||!(D!=null&&D.type)?D:(D==null||(M=D.type)===null||M===void 0?void 0:M.displayName)==="ProForm-Group"?D.props.children:D}),size:e,bordered:d,collapse:r,collapseLabel:t,placement:u,values:m||{},footerRender:f,onValuesChange:function(M){var F,z,L=o(o({},m),M);y(L),(F=w.current)===null||F===void 0||F.setFieldsValue(L),(z=w.current)===null||z===void 0||z.submit(),i&&i(M,L)}})},formRef:w,formItemProps:{colon:!1,labelAlign:"left"},fieldProps:{style:{width:void 0}}},Le(v,["labelWidth"])),{},{onValuesChange:function(A,D){var M;y(D),i==null||i(A,D),(M=w.current)===null||M===void 0||M.submit()}}))}var Pl=function(e,r,t,a){return e?s.jsxs(s.Fragment,{children:[t.getMessage("tableForm.collapsed","展开"),a&&"(".concat(a,")"),s.jsx(Gn,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]}):s.jsxs(s.Fragment,{children:[t.getMessage("tableForm.expand","收起"),s.jsx(Gn,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]})},Tl=function(e){var r=e.setCollapsed,t=e.collapsed,a=t===void 0?!1:t,i=e.submitter,l=e.style,u=e.hiddenNum,c=g.useContext(je.ConfigContext),d=c.getPrefixCls,f=Me(),v=g.useContext(an),b=v.hashId,S=it(e.collapseRender)||Pl;return s.jsxs(fn,{style:l,size:16,children:[i,e.collapseRender!==!1&&s.jsx("a",{className:"".concat(d("pro-query-filter-collapse-button")," ").concat(b).trim(),onClick:function(){return r(!a)},children:S==null?void 0:S(a,e,f,u)})]})},Il=function(e){return h({},e.componentCls,h(h(h(h({"&&":{padding:24}},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"".concat(e.proComponentsCls,"-form-group-title"),{marginBlock:0}),"&-row",{rowGap:24,"&-split":h(h({},"".concat(e.proComponentsCls,"-form-group"),{display:"flex",alignItems:"center",gap:e.marginXS}),"&:last-child",{marginBlockEnd:12}),"&-split-line":{"&:after":{position:"absolute",width:"100%",content:'""',height:1,insetBlockEnd:-12,borderBlockEnd:"1px dashed ".concat(e.colorSplit)}}}),"&-collapse-button",{display:"flex",alignItems:"center",color:e.colorPrimary}))};function Fl(n){return $e("QueryFilter",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Il(r)]})}var jl=["collapsed","layout","defaultCollapsed","defaultColsNumber","defaultFormItemsNumber","span","searchGutter","searchText","resetText","optionRender","collapseRender","onReset","onCollapse","labelWidth","style","split","preserve","ignoreRules","showHiddenNum","submitterColSpanProps"],on,Nl={xs:513,sm:513,md:785,lg:992,xl:1057,xxl:1/0},wr={vertical:[[513,1,"vertical"],[785,2,"vertical"],[1057,3,"vertical"],[1/0,4,"vertical"]],default:[[513,1,"vertical"],[701,2,"vertical"],[1062,3,"horizontal"],[1352,3,"horizontal"],[1/0,4,"horizontal"]]},El=function(e,r,t){if(t&&typeof t=="number")return{span:t,layout:e};var a=t?["xs","sm","md","lg","xl","xxl"].map(function(l){return[Nl[l],24/t[l],"horizontal"]}):wr[e||"default"],i=(a||wr.default).find(function(l){return r<l[0]+16});return i?{span:24/i[1],layout:i==null?void 0:i[2]}:{span:8,layout:"horizontal"}},Ml=function(e,r){return e==null?void 0:e.flatMap(function(t){var a,i;if((t==null||(a=t.type)===null||a===void 0?void 0:a.displayName)==="ProForm-Group"&&!((i=t.props)!==null&&i!==void 0&&i.title))return t.props.children;if(r&&ce.isValidElement(t)){var l;return ce.cloneElement(t,o(o({},t.props),{},{formItemProps:o(o({},(l=t.props)===null||l===void 0?void 0:l.formItemProps),{},{rules:[]})}))}return t})},Bl=function(e){var r,t,a,i,l=Me(),u=g.useContext(an),c=u.hashId,d=e.resetText||l.getMessage("tableForm.reset","重置"),f=e.searchText||l.getMessage("tableForm.search","搜索"),v=Re(function(){return e.defaultCollapsed&&!!e.submitter},{value:e.collapsed,onChange:e.onCollapse}),b=de(v,2),S=b[0],p=b[1],x=e.optionRender,C=e.collapseRender,m=e.split,y=e.items,w=e.spanSize,P=e.showLength,A=e.searchGutter,D=e.showHiddenNum,M=g.useMemo(function(){return!e.submitter||x===!1?null:ce.cloneElement(e.submitter,o({searchConfig:{resetText:d,submitText:f},render:x&&function(U,te){return x(o(o({},e),{},{resetText:d,searchText:f}),e,te)}},e.submitter.props))},[e,d,f,x]),F=0,z=0,L=!1,T=0,I=0,G=Ml(y,e.ignoreRules).map(function(U,te){var ee,O,j,N,K=ce.isValidElement(U)&&(ee=U==null||(O=U.props)===null||O===void 0?void 0:O.colSize)!==null&&ee!==void 0?ee:1,B=Math.min(w.span*(K||1),24);if(F+=B,T+=K,te===0){var V;L=B===24&&!(U!=null&&(V=U.props)!==null&&V!==void 0&&V.hidden)}var q=(U==null||(j=U.props)===null||j===void 0?void 0:j.hidden)||S&&(L||T>P)&&!!te;z+=1;var J=ce.isValidElement(U)&&(U.key||"".concat((N=U.props)===null||N===void 0?void 0:N.name))||te;return ce.isValidElement(U)&&q?e.preserve?{itemDom:ce.cloneElement(U,{hidden:!0,key:J||te}),hidden:!0,colSpan:B}:{itemDom:null,colSpan:0,hidden:!0}:{itemDom:U,colSpan:B,hidden:!1}}),E=G.map(function(U,te){var ee,O,j=U.itemDom,N=U.colSpan,K=j==null||(ee=j.props)===null||ee===void 0?void 0:ee.hidden;if(K)return j;var B=ce.isValidElement(j)&&(j.key||"".concat((O=j.props)===null||O===void 0?void 0:O.name))||te;return 24-I%24<N&&(F+=24-I%24,I+=24-I%24),I+=N,m&&I%24===0&&te<z-1?s.jsx(Te,{span:N,className:"".concat(e.baseClassName,"-row-split-line ").concat(e.baseClassName,"-row-split ").concat(c).trim(),children:j},B):s.jsx(Te,{className:"".concat(e.baseClassName,"-row-split ").concat(c).trim(),span:N,children:j},B)}),R=D&&G.filter(function(U){return U.hidden}).length,k=g.useMemo(function(){return!(F<24||T<=P)},[T,P,F]),$=g.useMemo(function(){var U,te,ee=I%24+((U=(te=e.submitterColSpanProps)===null||te===void 0?void 0:te.span)!==null&&U!==void 0?U:w.span);if(ee>24){var O,j;return 24-((O=(j=e.submitterColSpanProps)===null||j===void 0?void 0:j.span)!==null&&O!==void 0?O:w.span)}return 24-ee},[I,I%24+((r=(t=e.submitterColSpanProps)===null||t===void 0?void 0:t.span)!==null&&r!==void 0?r:w.span),(a=e.submitterColSpanProps)===null||a===void 0?void 0:a.span]),_=g.useContext(je.ConfigContext),re=_.getPrefixCls("pro-query-filter");return s.jsxs(Je,{gutter:A,justify:"start",className:he("".concat(re,"-row"),c),children:[E,M&&s.jsx(Te,o(o({span:w.span,offset:$,className:he((i=e.submitterColSpanProps)===null||i===void 0?void 0:i.className)},e.submitterColSpanProps),{},{style:{textAlign:"end"},children:s.jsx(He.Item,{label:" ",colon:!1,shouldUpdate:!1,className:"".concat(re,"-actions ").concat(c).trim(),children:s.jsx(Tl,{hiddenNum:R,collapsed:S,collapseRender:k?C:!1,submitter:M,setCollapsed:p},"pro-form-query-filter-actions")})}),"submitter")]},"resize-observer-row")},Kl=at()?(on=document)===null||on===void 0||(on=on.body)===null||on===void 0?void 0:on.clientWidth:1024;function Al(n){var e=n.collapsed,r=n.layout,t=n.defaultCollapsed,a=t===void 0?!0:t,i=n.defaultColsNumber,l=n.defaultFormItemsNumber,u=n.span,c=n.searchGutter,d=c===void 0?24:c;n.searchText,n.resetText;var f=n.optionRender,v=n.collapseRender,b=n.onReset,S=n.onCollapse,p=n.labelWidth,x=p===void 0?"80":p,C=n.style,m=n.split,y=n.preserve,w=y===void 0?!0:y,P=n.ignoreRules,A=n.showHiddenNum,D=A===void 0?!1:A,M=n.submitterColSpanProps,F=be(n,jl),z=g.useContext(je.ConfigContext),L=z.getPrefixCls("pro-query-filter"),T=Fl(L),I=T.wrapSSR,G=T.hashId,E=Re(function(){return typeof(C==null?void 0:C.width)=="number"?C==null?void 0:C.width:Kl}),R=de(E,2),k=R[0],$=R[1],_=g.useMemo(function(){return El(r,k+16,u)},[r,k,u]),re=g.useMemo(function(){if(l!==void 0)return l;if(i!==void 0){var te=24/_.span-1;return i>te?te:i}return Math.max(1,24/_.span-1)},[i,l,_.span]),U=g.useMemo(function(){if(x&&_.layout!=="vertical"&&x!=="auto")return{labelCol:{flex:"0 0 ".concat(x,"px")},wrapperCol:{style:{maxWidth:"calc(100% - ".concat(x,"px)")}},style:{flexWrap:"nowrap"}}},[_.layout,x]);return I(s.jsx(Wr,{onResize:function(ee){k!==ee.width&&ee.width>17&&$(ee.width)},children:s.jsx("div",{className:"".concat(L,"-container ").concat(G),style:n.containerStyle,children:s.jsx(or,o(o({isKeyPressSubmit:!0,preserve:w},F),{},{className:he(L,G,F.className),onReset:b,style:C,layout:_.layout,fieldProps:{style:{width:"100%"}},formItemProps:U,groupProps:{titleStyle:{display:"inline-block",marginInlineEnd:16}},contentRender:function(ee,O,j){return s.jsx(Bl,{spanSize:_,collapsed:e,form:j,submitterColSpanProps:M,collapseRender:v,defaultCollapsed:a,onCollapse:S,optionRender:f,submitter:O,items:ee,split:m,baseClassName:L,resetText:n.resetText,searchText:n.searchText,searchGutter:d,preserve:w,ignoreRules:P,showLength:re,showHiddenNum:D})}}))})},"resize-observer"))}var Ll=["onFinish","step","formRef","title","stepProps"];function $l(n){var e=g.useRef(),r=g.useContext(st),t=g.useContext(ct),a=o(o({},n),t),i=a.onFinish,l=a.step,u=a.formRef;a.title,a.stepProps;var c=be(a,Ll);return rn(!c.submitter,"StepForm 不包含提交按钮，请在 StepsForm 上"),g.useImperativeHandle(u,function(){return e.current},[u==null?void 0:u.current]),g.useEffect(function(){if(a.name||a.step){var d=(a.name||a.step).toString();return r==null||r.regForm(d,a),function(){r==null||r.unRegForm(d)}}},[]),r&&r!==null&&r!==void 0&&r.formArrayRef&&(r.formArrayRef.current[l||0]=e),s.jsx(or,o({formRef:e,onFinish:function(){var d=Ce(le().mark(function f(v){var b;return le().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c.name&&(r==null||r.onFormFinish(c.name,v)),!i){p.next=9;break}return r==null||r.setLoading(!0),p.next=5,i==null?void 0:i(v);case 5:return b=p.sent,b&&(r==null||r.next()),r==null||r.setLoading(!1),p.abrupt("return");case 9:r!=null&&r.lastStep||r==null||r.next();case 10:case"end":return p.stop()}},f)}));return function(f){return d.apply(this,arguments)}}(),onInit:function(f,v){var b;e.current=v,r&&r!==null&&r!==void 0&&r.formArrayRef&&(r.formArrayRef.current[l||0]=e),c==null||(b=c.onInit)===null||b===void 0||b.call(c,f,v)},layout:"vertical"},Le(c,["layoutType","columns"])))}var kl=function(e){return h({},e.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":h({maxWidth:"1160px",margin:"auto"},"".concat(e.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}})};function Dl(n){return $e("StepsForm",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[kl(r)]})}var zl=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],st=ce.createContext(void 0),_l={horizontal:function(e){var r=e.stepsDom,t=e.formDom;return s.jsxs(s.Fragment,{children:[s.jsx(Je,{gutter:{xs:8,sm:16,md:24},children:s.jsx(Te,{span:24,children:r})}),s.jsx(Je,{gutter:{xs:8,sm:16,md:24},children:s.jsx(Te,{span:24,children:t})})]})},vertical:function(e){var r=e.stepsDom,t=e.formDom;return s.jsxs(Je,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[s.jsx(Te,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:ce.cloneElement(r,{style:{height:"100%"}})}),s.jsx(Te,{children:s.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:t})})]})}},ct=ce.createContext(null);function Ol(n){var e=g.useContext(je.ConfigContext),r=e.getPrefixCls,t=r("pro-steps-form"),a=Dl(t),i=a.wrapSSR,l=a.hashId;n.current,n.onCurrentChange;var u=n.submitter,c=n.stepsFormRender,d=n.stepsRender,f=n.stepFormRender,v=n.stepsProps,b=n.onFinish,S=n.formProps,p=n.containerStyle,x=n.formRef,C=n.formMapRef,m=n.layoutRender,y=be(n,zl),w=g.useRef(new Map),P=g.useRef(new Map),A=g.useRef([]),D=g.useState([]),M=de(D,2),F=M[0],z=M[1],L=g.useState(!1),T=de(L,2),I=T[0],G=T[1],E=Me(),R=Re(0,{value:n.current,onChange:n.onCurrentChange}),k=de(R,2),$=k[0],_=k[1],re=g.useMemo(function(){return _l[(v==null?void 0:v.direction)||"horizontal"]},[v==null?void 0:v.direction]),U=g.useMemo(function(){return $===F.length-1},[F.length,$]),te=g.useCallback(function(Z,ne){P.current.has(Z)||z(function(fe){return[].concat(Ke(fe),[Z])}),P.current.set(Z,ne)},[]),ee=g.useCallback(function(Z){z(function(ne){return ne.filter(function(fe){return fe!==Z})}),P.current.delete(Z),w.current.delete(Z)},[]);g.useImperativeHandle(C,function(){return A.current},[A.current]),g.useImperativeHandle(x,function(){var Z;return(Z=A.current[$||0])===null||Z===void 0?void 0:Z.current},[$,A.current]);var O=g.useCallback(function(){var Z=Ce(le().mark(function ne(fe,se){var Ie,ue;return le().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(w.current.set(fe,se),!(!U||!b)){ae.next=3;break}return ae.abrupt("return");case 3:return G(!0),Ie=Xr.apply(void 0,[{}].concat(Ke(Array.from(w.current.values())))),ae.prev=5,ae.next=8,b(Ie);case 8:ue=ae.sent,ue&&(_(0),A.current.forEach(function(Fe){var Ze;return(Ze=Fe.current)===null||Ze===void 0?void 0:Ze.resetFields()})),ae.next=15;break;case 12:ae.prev=12,ae.t0=ae.catch(5),console.log(ae.t0);case 15:return ae.prev=15,G(!1),ae.finish(15);case 18:case"end":return ae.stop()}},ne,null,[[5,12,15,18]])}));return function(ne,fe){return Z.apply(this,arguments)}}(),[U,b,G,_]),j=g.useMemo(function(){var Z=Bn(En,"4.24.0")>-1,ne=Z?{items:F.map(function(fe){var se=P.current.get(fe);return o({key:fe,title:se==null?void 0:se.title},se==null?void 0:se.stepProps)})}:{};return s.jsx("div",{className:"".concat(t,"-steps-container ").concat(l).trim(),style:{maxWidth:Math.min(F.length*320,1160)},children:s.jsx(gr,o(o(o({},v),ne),{},{current:$,onChange:void 0,children:!Z&&F.map(function(fe){var se=P.current.get(fe);return s.jsx(gr.Step,o({title:se==null?void 0:se.title},se==null?void 0:se.stepProps),fe)})}))})},[F,l,t,$,v]),N=ye(function(){var Z,ne=A.current[$];(Z=ne.current)===null||Z===void 0||Z.submit()}),K=ye(function(){$<1||_($-1)}),B=g.useMemo(function(){return u!==!1&&s.jsx(Dn,o(o({type:"primary",loading:I},u==null?void 0:u.submitButtonProps),{},{onClick:function(){var ne;u==null||(ne=u.onSubmit)===null||ne===void 0||ne.call(u),N()},children:E.getMessage("stepsForm.next","下一步")}),"next")},[E,I,N,u]),V=g.useMemo(function(){return u!==!1&&s.jsx(Dn,o(o({},u==null?void 0:u.resetButtonProps),{},{onClick:function(){var ne;K(),u==null||(ne=u.onReset)===null||ne===void 0||ne.call(u)},children:E.getMessage("stepsForm.prev","上一步")}),"pre")},[E,K,u]),q=g.useMemo(function(){return u!==!1&&s.jsx(Dn,o(o({type:"primary",loading:I},u==null?void 0:u.submitButtonProps),{},{onClick:function(){var ne;u==null||(ne=u.onSubmit)===null||ne===void 0||ne.call(u),N()},children:E.getMessage("stepsForm.submit","提交")}),"submit")},[E,I,N,u]),J=ye(function(){$>F.length-2||_($+1)}),H=g.useMemo(function(){var Z=[],ne=$||0;if(ne<1?F.length===1?Z.push(q):Z.push(B):ne+1===F.length?Z.push(V,q):Z.push(V,B),Z=Z.filter(ce.isValidElement),u&&u.render){var fe,se={form:(fe=A.current[$])===null||fe===void 0?void 0:fe.current,onSubmit:N,step:$,onPre:K};return u.render(se,Z)}return u&&(u==null?void 0:u.render)===!1?null:Z},[F.length,B,N,V,K,$,q,u]),X=g.useMemo(function(){return lr(n.children).map(function(Z,ne){var fe=Z.props,se=fe.name||"".concat(ne),Ie=$===ne,ue=Ie?{contentRender:f,submitter:!1}:{};return s.jsx("div",{className:he("".concat(t,"-step"),l,h({},"".concat(t,"-step-active"),Ie)),children:s.jsx(ct.Provider,{value:o(o(o(o({},ue),S),fe),{},{name:se,step:ne}),children:Z})},se)})},[S,l,t,n.children,$,f]),ie=g.useMemo(function(){return d?d(F.map(function(Z){var ne;return{key:Z,title:(ne=P.current.get(Z))===null||ne===void 0?void 0:ne.title}}),j):j},[F,j,d]),Y=g.useMemo(function(){return s.jsxs("div",{className:"".concat(t,"-container ").concat(l).trim(),style:p,children:[X,c?null:s.jsx(fn,{children:H})]})},[p,X,l,t,c,H]),ve=g.useMemo(function(){var Z={stepsDom:ie,formDom:Y};return c?c(m?m(Z):re(Z),H):m?m(Z):re(Z)},[ie,Y,re,c,H,m]);return i(s.jsx("div",{className:he(t,l),children:s.jsx(He.Provider,o(o({},y),{},{children:s.jsx(st.Provider,{value:{loading:I,setLoading:G,regForm:te,keyArray:F,next:J,formArrayRef:A,formMapRef:P,lastStep:U,unRegForm:ee,onFormFinish:O},children:ve})}))}))}function Ln(n){return s.jsx(Jr,{needDeps:!0,children:s.jsx(Ol,o({},n))})}Ln.StepForm=$l;Ln.useForm=He.useForm;var Vl=function(e){var r=e.children;return s.jsx(s.Fragment,{children:r})},Wl=["steps","columns","forceUpdate","grid"],Hl=function(e){var r=e.steps,t=e.columns,a=e.forceUpdate,i=e.grid,l=be(e,Wl),u=Zr(l),c=g.useCallback(function(f){var v,b;(v=(b=u.current).onCurrentChange)===null||v===void 0||v.call(b,f),a([])},[a,u]),d=g.useMemo(function(){return r==null?void 0:r.map(function(f,v){return g.createElement(dt,o(o({grid:i},f),{},{key:v,layoutType:"StepForm",columns:t[v]}))})},[t,i,r]);return s.jsx(Ln,o(o({},l),{},{onCurrentChange:c,children:d}))},Gl=function(e,r){if(e.valueType==="dependency"){var t,a,i,l=(t=e.getFieldProps)===null||t===void 0?void 0:t.call(e);return rn(Array.isArray((a=e.name)!==null&&a!==void 0?a:l==null?void 0:l.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),rn(typeof e.columns=="function",'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray((i=e.name)!==null&&i!==void 0?i:l==null?void 0:l.name)?g.createElement(Qr,o(o({name:e.name},l),{},{key:e.key}),function(u){return!e.columns||typeof e.columns!="function"?null:r.genItems(e.columns(u))}):null}return!0},Ul=function(e){if(e.valueType==="divider"){var r;return g.createElement(_t,o(o({},(r=e.getFieldProps)===null||r===void 0?void 0:r.call(e)),{},{key:e.key}))}return!0},ql=["key"],Xl=function(e,r){var t=r.action,a=r.formRef,i=r.type,l=r.originItem,u=o(o({},Le(e,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:e.name||e.key||e.dataIndex,width:e.width,render:e!=null&&e.render?function(v,b,S){var p,x,C,m;return e==null||(p=e.render)===null||p===void 0?void 0:p.call(e,v,b,S,t==null?void 0:t.current,o(o({type:i},e),{},{key:(x=e.key)===null||x===void 0?void 0:x.toString(),formItemProps:(C=e.getFormItemProps)===null||C===void 0?void 0:C.call(e),fieldProps:(m=e.getFieldProps)===null||m===void 0?void 0:m.call(e)}))}:void 0}),c=function(){var b=u.key,S=be(u,ql);return s.jsx(In,o(o({},S),{},{ignoreFormItem:!0}),b)},d=e!=null&&e.renderFormItem?function(v,b){var S,p,x,C,m=We(o(o({},b),{},{onChange:void 0}));return e==null||(S=e.renderFormItem)===null||S===void 0?void 0:S.call(e,o(o({type:i},e),{},{key:(p=e.key)===null||p===void 0?void 0:p.toString(),formItemProps:(x=e.getFormItemProps)===null||x===void 0?void 0:x.call(e),fieldProps:(C=e.getFieldProps)===null||C===void 0?void 0:C.call(e),originProps:l}),o(o({},m),{},{defaultRender:c,type:i}),a.current)}:void 0,f=function(){if(e!=null&&e.renderFormItem){var b=d==null?void 0:d(null,{});if(!b||e.ignoreFormItem)return b}return g.createElement(In,o(o({},u),{},{key:[e.key,e.index||0].join("-"),renderFormItem:d}))};return e.dependencies?s.jsx(Qr,{name:e.dependencies||[],children:f},e.key):f()},Jl=function(e,r){var t=r.genItems;if(e.valueType==="formList"&&e.dataIndex){var a,i;return!e.columns||!Array.isArray(e.columns)?null:g.createElement(oa,o(o({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,name:e.dataIndex,label:e.label,initialValue:e.initialValue,colProps:e.colProps,rowProps:e.rowProps},(i=e.getFieldProps)===null||i===void 0?void 0:i.call(e)),t(e.columns))}return!0},Ql=function(e,r){var t=r.genItems;if(e.valueType==="formSet"&&e.dataIndex){var a,i;return!e.columns||!Array.isArray(e.columns)?null:g.createElement(bl,o(o({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,initialValue:e.initialValue,name:e.dataIndex,label:e.label,colProps:e.colProps,rowProps:e.rowProps},(i=e.getFieldProps)===null||i===void 0?void 0:i.call(e)),t(e.columns))}return!0},Yl=function(e,r){var t=r.genItems;if(e.valueType==="group"){var a;return!e.columns||!Array.isArray(e.columns)?null:s.jsx(Yt,o(o({label:e.label,colProps:e.colProps,rowProps:e.rowProps},(a=e.getFieldProps)===null||a===void 0?void 0:a.call(e)),{},{children:t(e.columns)}),e.key)}return!0},Zl=function(e){return e.valueType&&typeof e.valueType=="string"&&["index","indexBorder","option"].includes(e==null?void 0:e.valueType)?null:!0},Rr=[Zl,Yl,Jl,Ql,Ul,Gl],eo=function(e,r){for(var t=0;t<Rr.length;t++){var a=Rr[t],i=a(e,r);if(i!==!0)return i}return Xl(e,r)},no=["columns","layoutType","type","action","shouldUpdate","formRef"],ro={DrawerForm:ha,QueryFilter:Al,LightFilter:Rl,StepForm:Ln.StepForm,StepsForm:Hl,ModalForm:ya,Embed:Vl,Form:Mn};function dt(n){var e=n.columns,r=n.layoutType,t=r===void 0?"Form":r,a=n.type,i=a===void 0?"form":a,l=n.action,u=n.shouldUpdate,c=u===void 0?function(E,R){return un(E)!==un(R)}:u,d=n.formRef,f=be(n,no),v=ro[t]||Mn,b=He.useForm(),S=de(b,1),p=S[0],x=He.useFormInstance(),C=g.useState([]),m=de(C,2),y=m[1],w=g.useState(function(){return[]}),P=de(w,2),A=P[0],D=P[1],M=La(n.form||x||p),F=g.useRef(),z=Zr(n),L=ye(function(E){return E.filter(function(R){return!(R.hideInForm&&i==="form")}).sort(function(R,k){return k.order||R.order?(k.order||0)-(R.order||0):(k.index||0)-(R.index||0)}).map(function(R,k){var $=_e(R.title,R,"form",s.jsx(dn,{label:R.title,tooltip:R.tooltip||R.tip})),_=We({title:$,label:$,name:R.name,valueType:_e(R.valueType,{}),key:R.key||R.dataIndex||k,columns:R.columns,valueEnum:R.valueEnum,dataIndex:R.dataIndex||R.key,initialValue:R.initialValue,width:R.width,index:R.index,readonly:R.readonly,colSize:R.colSize,colProps:R.colProps,rowProps:R.rowProps,className:R.className,tooltip:R.tooltip||R.tip,dependencies:R.dependencies,proFieldProps:R.proFieldProps,ignoreFormItem:R.ignoreFormItem,getFieldProps:R.fieldProps?function(){return _e(R.fieldProps,M.current,R)}:void 0,getFormItemProps:R.formItemProps?function(){return _e(R.formItemProps,M.current,R)}:void 0,render:R.render,renderFormItem:R.renderFormItem,renderText:R.renderText,request:R.request,params:R.params,transform:R.transform,convertValue:R.convertValue,debounceTime:R.debounceTime,defaultKeyWords:R.defaultKeyWords});return eo(_,{action:l,type:i,originItem:R,formRef:M,genItems:L})}).filter(function(R){return!!R})}),T=g.useCallback(function(E,R){var k=z.current.onValuesChange;(c===!0||typeof c=="function"&&c(R,F.current))&&D([]),F.current=R,k==null||k(E,R)},[z,c]),I=hr(function(){if(M.current&&!(e.length&&Array.isArray(e[0])))return L(e)},[e,f==null?void 0:f.open,l,i,A]),G=hr(function(){return t==="StepsForm"?{forceUpdate:y,columns:e}:{}},[e,t]);return g.useImperativeHandle(d,function(){return M.current},[M.current]),s.jsx(v,o(o(o({},G),f),{},{onInit:function(R,k){var $;d&&(d.current=k),f==null||($=f.onInit)===null||$===void 0||$.call(f,R,k),M.current=k},form:n.form||p,formRef:M,onValuesChange:T,children:I}))}var to=da(Object.keys,Object),ao=Object.prototype,lo=ao.hasOwnProperty;function ft(n){if(!et(n))return to(n);var e=[];for(var r in Object(n))lo.call(n,r)&&r!="constructor"&&e.push(r);return e}var Qn=Kn(An,"DataView"),Yn=Kn(An,"Promise"),Zn=Kn(An,"Set"),er=Kn(An,"WeakMap"),Pr="[object Map]",oo="[object Object]",Tr="[object Promise]",Ir="[object Set]",Fr="[object WeakMap]",jr="[object DataView]",io=vn(Qn),uo=vn(qn),so=vn(Yn),co=vn(Zn),fo=vn(er),Xe=nt;(Qn&&Xe(new Qn(new ArrayBuffer(1)))!=jr||qn&&Xe(new qn)!=Pr||Yn&&Xe(Yn.resolve())!=Tr||Zn&&Xe(new Zn)!=Ir||er&&Xe(new er)!=Fr)&&(Xe=function(n){var e=nt(n),r=e==oo?n.constructor:void 0,t=r?vn(r):"";if(t)switch(t){case io:return jr;case uo:return Pr;case so:return Tr;case co:return Ir;case fo:return Fr}return e});var vo="[object Map]",mo="[object Set]",go=Object.prototype,po=go.hasOwnProperty;function ho(n){if(n==null)return!0;if(rt(n)&&(Fn(n)||typeof n=="string"||typeof n.splice=="function"||Xn(n)||tt(n)||fa(n)))return!n.length;var e=Xe(n);if(e==vo||e==mo)return!n.size;if(et(n))return!ft(n).length;for(var r in n)if(po.call(n,r))return!1;return!0}var yo="__lodash_hash_undefined__";function bo(n){return this.__data__.set(n,yo),this}function So(n){return this.__data__.has(n)}function jn(n){var e=-1,r=n==null?0:n.length;for(this.__data__=new va;++e<r;)this.add(n[e])}jn.prototype.add=jn.prototype.push=bo;jn.prototype.has=So;function Co(n,e){for(var r=-1,t=n==null?0:n.length;++r<t;)if(e(n[r],r,n))return!0;return!1}function xo(n,e){return n.has(e)}var wo=1,Ro=2;function vt(n,e,r,t,a,i){var l=r&wo,u=n.length,c=e.length;if(u!=c&&!(l&&c>u))return!1;var d=i.get(n),f=i.get(e);if(d&&f)return d==e&&f==n;var v=-1,b=!0,S=r&Ro?new jn:void 0;for(i.set(n,e),i.set(e,n);++v<u;){var p=n[v],x=e[v];if(t)var C=l?t(x,p,v,e,n,i):t(p,x,v,n,e,i);if(C!==void 0){if(C)continue;b=!1;break}if(S){if(!Co(e,function(m,y){if(!xo(S,y)&&(p===m||a(p,m,r,t,i)))return S.push(y)})){b=!1;break}}else if(!(p===x||a(p,x,r,t,i))){b=!1;break}}return i.delete(n),i.delete(e),b}function Po(n){var e=-1,r=Array(n.size);return n.forEach(function(t,a){r[++e]=[a,t]}),r}function To(n){var e=-1,r=Array(n.size);return n.forEach(function(t){r[++e]=t}),r}var Io=1,Fo=2,jo="[object Boolean]",No="[object Date]",Eo="[object Error]",Mo="[object Map]",Bo="[object Number]",Ko="[object RegExp]",Ao="[object Set]",Lo="[object String]",$o="[object Symbol]",ko="[object ArrayBuffer]",Do="[object DataView]",Nr=yr?yr.prototype:void 0,Vn=Nr?Nr.valueOf:void 0;function zo(n,e,r,t,a,i,l){switch(r){case Do:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case ko:return!(n.byteLength!=e.byteLength||!i(new br(n),new br(e)));case jo:case No:case Bo:return ma(+n,+e);case Eo:return n.name==e.name&&n.message==e.message;case Ko:case Lo:return n==e+"";case Mo:var u=Po;case Ao:var c=t&Io;if(u||(u=To),n.size!=e.size&&!c)return!1;var d=l.get(n);if(d)return d==e;t|=Fo,l.set(n,e);var f=vt(u(n),u(e),t,a,i,l);return l.delete(n),f;case $o:if(Vn)return Vn.call(n)==Vn.call(e)}return!1}function _o(n,e){for(var r=-1,t=e.length,a=n.length;++r<t;)n[a+r]=e[r];return n}function Oo(n,e,r){var t=e(n);return Fn(n)?t:_o(t,r(n))}function Vo(n,e){for(var r=-1,t=n==null?0:n.length,a=0,i=[];++r<t;){var l=n[r];e(l,r,n)&&(i[a++]=l)}return i}function Wo(){return[]}var Ho=Object.prototype,Go=Ho.propertyIsEnumerable,Er=Object.getOwnPropertySymbols,Uo=Er?function(n){return n==null?[]:(n=Object(n),Vo(Er(n),function(e){return Go.call(n,e)}))}:Wo;function qo(n){return rt(n)?ga(n):ft(n)}function Mr(n){return Oo(n,qo,Uo)}var Xo=1,Jo=Object.prototype,Qo=Jo.hasOwnProperty;function Yo(n,e,r,t,a,i){var l=r&Xo,u=Mr(n),c=u.length,d=Mr(e),f=d.length;if(c!=f&&!l)return!1;for(var v=c;v--;){var b=u[v];if(!(l?b in e:Qo.call(e,b)))return!1}var S=i.get(n),p=i.get(e);if(S&&p)return S==e&&p==n;var x=!0;i.set(n,e),i.set(e,n);for(var C=l;++v<c;){b=u[v];var m=n[b],y=e[b];if(t)var w=l?t(y,m,b,e,n,i):t(m,y,b,n,e,i);if(!(w===void 0?m===y||a(m,y,r,t,i):w)){x=!1;break}C||(C=b=="constructor")}if(x&&!C){var P=n.constructor,A=e.constructor;P!=A&&"constructor"in n&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof A=="function"&&A instanceof A)&&(x=!1)}return i.delete(n),i.delete(e),x}var Zo=1,Br="[object Arguments]",Kr="[object Array]",wn="[object Object]",ei=Object.prototype,Ar=ei.hasOwnProperty;function ni(n,e,r,t,a,i){var l=Fn(n),u=Fn(e),c=l?Kr:Xe(n),d=u?Kr:Xe(e);c=c==Br?wn:c,d=d==Br?wn:d;var f=c==wn,v=d==wn,b=c==d;if(b&&Xn(n)){if(!Xn(e))return!1;l=!0,f=!1}if(b&&!f)return i||(i=new _n),l||tt(n)?vt(n,e,r,t,a,i):zo(n,e,c,r,t,a,i);if(!(r&Zo)){var S=f&&Ar.call(n,"__wrapped__"),p=v&&Ar.call(e,"__wrapped__");if(S||p){var x=S?n.value():n,C=p?e.value():e;return i||(i=new _n),a(x,C,r,t,i)}}return b?(i||(i=new _n),Yo(n,e,r,t,a,i)):!1}function mt(n,e,r,t,a){return n===e?!0:n==null||e==null||!Sr(n)&&!Sr(e)?n!==n&&e!==e:ni(n,e,r,t,mt,a)}function ri(n,e){return mt(n,e)}function ti(n,e,r){var t,a;if(n===!1)return!1;var i=e.total,l=e.current,u=e.pageSize,c=e.setPageInfo,d=Ae(n)==="object"?n:{};return o(o({showTotal:function(v,b){return"".concat(r.getMessage("pagination.total.range","第")," ").concat(b[0],"-").concat(b[1]," ").concat(r.getMessage("pagination.total.total","条/总共")," ").concat(v," ").concat(r.getMessage("pagination.total.item","条"))},total:i},d),{},{current:n!==!0&&n&&(t=n.current)!==null&&t!==void 0?t:l,pageSize:n!==!0&&n&&(a=n.pageSize)!==null&&a!==void 0?a:u,onChange:function(v,b){var S=n,p=S.onChange;p==null||p(v,b||20),(b!==u||l!==v)&&c({pageSize:b,current:v})}})}function ai(n,e,r){var t=o(o({},r.editableUtils),{},{pageInfo:e.pageInfo,reload:function(){var a=Ce(le().mark(function l(u){return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!u){d.next=3;break}return d.next=3,e.setPageInfo({current:1});case 3:return d.next=5,e==null?void 0:e.reload();case 5:case"end":return d.stop()}},l)}));function i(l){return a.apply(this,arguments)}return i}(),reloadAndRest:function(){var a=Ce(le().mark(function l(){return le().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r.onCleanSelected(),c.next=3,e.setPageInfo({current:1});case 3:return c.next=5,e==null?void 0:e.reload();case 5:case"end":return c.stop()}},l)}));function i(){return a.apply(this,arguments)}return i}(),reset:function(){var a=Ce(le().mark(function l(){var u;return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,r.resetAll();case 2:return d.next=4,e==null||(u=e.reset)===null||u===void 0?void 0:u.call(e);case 4:return d.next=6,e==null?void 0:e.reload();case 6:case"end":return d.stop()}},l)}));function i(){return a.apply(this,arguments)}return i}(),fullScreen:function(){return r.fullScreen()},clearSelected:function(){return r.onCleanSelected()},setPageInfo:function(i){return e.setPageInfo(i)}});n.current=t}function li(n,e){return e.filter(function(r){return r}).length<1?n:e.reduce(function(r,t){return t(r)},n)}var gt=function(e,r){return r===void 0?!1:typeof r=="boolean"?r:r[e]},oi=function(e){var r;return e&&Ae(e)==="object"&&(e==null||(r=e.props)===null||r===void 0?void 0:r.colSpan)},mn=function(e,r){return e?Array.isArray(e)?e.join("-"):e.toString():"".concat(r)};function ii(n){return Array.isArray(n)?n.join(","):n==null?void 0:n.toString()}function Lr(n){var e={},r={};return n.forEach(function(t){var a=ii(t.dataIndex);if(a){if(t.filters){var i=t.defaultFilteredValue;i===void 0?e[a]=null:e[a]=t.defaultFilteredValue}t.sorter&&t.defaultSortOrder&&(r[a]=t.defaultSortOrder)}}),{sort:r,filter:e}}function ui(){var n,e,r,t,a,i,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=g.useRef(),c=g.useRef(null),d=g.useRef(),f=g.useRef(),v=g.useState(""),b=de(v,2),S=b[0],p=b[1],x=g.useRef([]),C=Re(function(){return l.size||l.defaultSize||"middle"},{value:l.size,onChange:l.onSizeChange}),m=de(C,2),y=m[0],w=m[1],P=g.useMemo(function(){var T,I;if(l!=null&&(T=l.columnsState)!==null&&T!==void 0&&T.defaultValue)return l.columnsState.defaultValue;var G={};return(I=l.columns)===null||I===void 0||I.forEach(function(E,R){var k=E.key,$=E.dataIndex,_=E.fixed,re=E.disable,U=mn(k??$,R);U&&(G[U]={show:!0,fixed:_,disable:re})}),G},[l.columns]),A=Re(function(){var T,I,G=l.columnsState||{},E=G.persistenceType,R=G.persistenceKey;if(R&&E&&typeof window<"u"){var k=window[E];try{var $=k==null?void 0:k.getItem(R);if($){var _;if(l!=null&&(_=l.columnsState)!==null&&_!==void 0&&_.defaultValue){var re;return Cr({},l==null||(re=l.columnsState)===null||re===void 0?void 0:re.defaultValue,JSON.parse($))}return JSON.parse($)}}catch(U){console.warn(U)}}return l.columnsStateMap||((T=l.columnsState)===null||T===void 0?void 0:T.value)||((I=l.columnsState)===null||I===void 0?void 0:I.defaultValue)||P},{value:((n=l.columnsState)===null||n===void 0?void 0:n.value)||l.columnsStateMap,onChange:((e=l.columnsState)===null||e===void 0?void 0:e.onChange)||l.onColumnsStateChange}),D=de(A,2),M=D[0],F=D[1];g.useEffect(function(){var T=l.columnsState||{},I=T.persistenceType,G=T.persistenceKey;if(G&&I&&typeof window<"u"){var E=window[I];try{var R=E==null?void 0:E.getItem(G);if(R){var k;if(l!=null&&(k=l.columnsState)!==null&&k!==void 0&&k.defaultValue){var $;F(Cr({},l==null||($=l.columnsState)===null||$===void 0?void 0:$.defaultValue,JSON.parse(R)))}else F(JSON.parse(R))}else F(P)}catch(_){console.warn(_)}}},[(r=l.columnsState)===null||r===void 0?void 0:r.persistenceKey,(t=l.columnsState)===null||t===void 0?void 0:t.persistenceType,P]),rn(!l.columnsStateMap,"columnsStateMap已经废弃，请使用 columnsState.value 替换"),rn(!l.columnsStateMap,"columnsStateMap has been discarded, please use columnsState.value replacement");var z=g.useCallback(function(){var T=l.columnsState||{},I=T.persistenceType,G=T.persistenceKey;if(!(!G||!I||typeof window>"u")){var E=window[I];try{E==null||E.removeItem(G)}catch(R){console.warn(R)}}},[l.columnsState]);g.useEffect(function(){var T,I;if(!(!((T=l.columnsState)!==null&&T!==void 0&&T.persistenceKey)||!((I=l.columnsState)!==null&&I!==void 0&&I.persistenceType))&&!(typeof window>"u")){var G=l.columnsState,E=G.persistenceType,R=G.persistenceKey,k=window[E];try{k==null||k.setItem(R,JSON.stringify(M))}catch($){console.warn($),z()}}},[(a=l.columnsState)===null||a===void 0?void 0:a.persistenceKey,M,(i=l.columnsState)===null||i===void 0?void 0:i.persistenceType]);var L={action:u.current,setAction:function(I){u.current=I},sortKeyColumns:x.current,setSortKeyColumns:function(I){x.current=I},propsRef:f,columnsMap:M,keyWords:S,setKeyWords:function(I){return p(I)},setTableSize:w,tableSize:y,prefixName:d.current,setPrefixName:function(I){d.current=I},setColumnsMap:F,columns:l.columns,rootDomRef:c,clearPersistenceStorage:z,defaultColumnKeyMap:P};return Object.defineProperty(L,"prefixName",{get:function(){return d.current}}),Object.defineProperty(L,"sortKeyColumns",{get:function(){return x.current}}),Object.defineProperty(L,"action",{get:function(){return u.current}}),L}var Qe=g.createContext({}),si=function(e){var r=ui(e.initValue);return s.jsx(Qe.Provider,{value:r,children:e.children})},ci=function(e){return h({},e.componentCls,{marginBlockEnd:16,backgroundColor:ia(e.colorTextBase,.02),borderRadius:e.borderRadius,border:"none","&-container":{paddingBlock:e.paddingSM,paddingInline:e.paddingLG},"&-info":{display:"flex",alignItems:"center",transition:"all 0.3s",color:e.colorTextTertiary,"&-content":{flex:1},"&-option":{minWidth:48,paddingInlineStart:16}}})};function di(n){return $e("ProTableAlert",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[ci(r)]})}var fi=function(e){var r=e.intl,t=e.onCleanSelected;return[s.jsx("a",{onClick:t,children:r.getMessage("alert.clear","清空")},"0")]};function vi(n){var e=n.selectedRowKeys,r=e===void 0?[]:e,t=n.onCleanSelected,a=n.alwaysShowAlert,i=n.selectedRows,l=n.alertInfoRender,u=l===void 0?function(w){var P=w.intl;return s.jsxs(fn,{children:[P.getMessage("alert.selected","已选择"),r.length,P.getMessage("alert.item","项"),"  "]})}:l,c=n.alertOptionRender,d=c===void 0?fi:c,f=Me(),v=d&&d({onCleanSelected:t,selectedRowKeys:r,selectedRows:i,intl:f}),b=g.useContext(je.ConfigContext),S=b.getPrefixCls,p=S("pro-table-alert"),x=di(p),C=x.wrapSSR,m=x.hashId;if(u===!1)return null;var y=u({intl:f,selectedRowKeys:r,selectedRows:i,onCleanSelected:t});return y===!1||r.length<1&&!a?null:C(s.jsx("div",{className:"".concat(p," ").concat(m).trim(),children:s.jsx("div",{className:"".concat(p,"-container ").concat(m).trim(),children:s.jsxs("div",{className:"".concat(p,"-info ").concat(m).trim(),children:[s.jsx("div",{className:"".concat(p,"-info-content ").concat(m).trim(),children:y}),v?s.jsx("div",{className:"".concat(p,"-info-option ").concat(m).trim(),children:v}):null]})})}))}function mi(n){var e=n.replace(/[A-Z]/g,function(r){return"-".concat(r.toLowerCase())});return e.startsWith("-")&&(e=e.slice(1)),e}var gi=function(e,r){return!e&&r!==!1?(r==null?void 0:r.filterType)==="light"?"LightFilter":"QueryFilter":"Form"},pi=function(e,r,t){return!e&&t==="LightFilter"?Le(o({},r),["labelWidth","defaultCollapsed","filterType"]):e?{}:Le(o({labelWidth:r?r==null?void 0:r.labelWidth:void 0,defaultCollapsed:!0},r),["filterType"])},hi=function(e,r){return e?Le(r,["ignoreRules"]):o({ignoreRules:!0},r)},yi=function(e){var r=e.onSubmit,t=e.formRef,a=e.dateFormatter,i=a===void 0?"string":a,l=e.type,u=e.columns,c=e.action,d=e.ghost,f=e.manualRequest,v=e.onReset,b=e.submitButtonLoading,S=e.search,p=e.form,x=e.bordered,C=g.useContext(an),m=C.hashId,y=l==="form",w=function(){var T=Ce(le().mark(function I(G,E){return le().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:r&&r(G,E);case 1:case"end":return k.stop()}},I)}));return function(G,E){return T.apply(this,arguments)}}(),P=g.useContext(je.ConfigContext),A=P.getPrefixCls,D=g.useMemo(function(){return u.filter(function(T){return!(T===cn.EXPAND_COLUMN||T===cn.SELECTION_COLUMN||(T.hideInSearch||T.search===!1)&&l!=="form"||l==="form"&&T.hideInForm)}).map(function(T){var I,G=!T.valueType||["textarea","jsonCode","code"].includes(T==null?void 0:T.valueType)&&l==="table"?"text":T==null?void 0:T.valueType,E=(T==null?void 0:T.key)||(T==null||(I=T.dataIndex)===null||I===void 0?void 0:I.toString());return o(o(o({},T),{},{width:void 0},T.search&&Ae(T.search)==="object"?T.search:{}),{},{valueType:G,proFieldProps:o(o({},T.proFieldProps),{},{proFieldKey:E?"table-field-".concat(E):void 0})})})},[u,l]),M=A("pro-table-search"),F=A("pro-table-form"),z=g.useMemo(function(){return gi(y,S)},[S,y]),L=g.useMemo(function(){return{submitter:{submitButtonProps:{loading:b}}}},[b]);return s.jsx("div",{className:he(m,h(h(h(h(h(h(h(h(h({},A("pro-card"),!0),"".concat(A("pro-card"),"-border"),!!x),"".concat(A("pro-card"),"-bordered"),!!x),"".concat(A("pro-card"),"-ghost"),!!d),M,!0),F,y),A("pro-table-search-".concat(mi(z))),!0),"".concat(M,"-ghost"),d),S==null?void 0:S.className,S!==!1&&(S==null?void 0:S.className))),children:s.jsx(dt,o(o(o(o({layoutType:z,columns:D,type:l},L),pi(y,S,z)),hi(y,p||{})),{},{formRef:t,action:c,dateFormatter:i,onInit:function(I,G){if(t.current=G,l!=="form"){var E,R,k,$=(E=c.current)===null||E===void 0?void 0:E.pageInfo,_=I,re=_.current,U=re===void 0?$==null?void 0:$.current:re,te=_.pageSize,ee=te===void 0?$==null?void 0:$.pageSize:te;if((R=c.current)===null||R===void 0||(k=R.setPageInfo)===null||k===void 0||k.call(R,o(o({},$),{},{current:parseInt(U,10),pageSize:parseInt(ee,10)})),f)return;w(I,!0)}},onReset:function(I){v==null||v(I)},onFinish:function(I){w(I,!1)},initialValues:p==null?void 0:p.initialValues}))})},bi=function(n){nr(r,n);var e=rr(r);function r(){var t;tr(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i)),h(Ve(t),"onSubmit",function(u,c){var d=t.props,f=d.pagination,v=d.beforeSearchSubmit,b=v===void 0?function(A){return A}:v,S=d.action,p=d.onSubmit,x=d.onFormSearchSubmit,C=f?We({current:f.current,pageSize:f.pageSize}):{},m=o(o({},u),{},{_timestamp:Date.now()},C),y=Le(b(m),Object.keys(C));if(x(y),!c){var w,P;(w=S.current)===null||w===void 0||(P=w.setPageInfo)===null||P===void 0||P.call(w,{current:1})}p&&!c&&(p==null||p(u))}),h(Ve(t),"onReset",function(u){var c,d,f=t.props,v=f.pagination,b=f.beforeSearchSubmit,S=b===void 0?function(w){return w}:b,p=f.action,x=f.onFormSearchSubmit,C=f.onReset,m=v?We({current:v.current,pageSize:v.pageSize}):{},y=Le(S(o(o({},u),m)),Object.keys(m));x(y),(c=p.current)===null||c===void 0||(d=c.setPageInfo)===null||d===void 0||d.call(c,{current:1}),C==null||C()}),h(Ve(t),"isEqual",function(u){var c=t.props,d=c.columns,f=c.loading,v=c.formRef,b=c.type,S=c.cardBordered,p=c.dateFormatter,x=c.form,C=c.search,m=c.manualRequest,y={columns:d,loading:f,formRef:v,type:b,cardBordered:S,dateFormatter:p,form:x,search:C,manualRequest:m};return!Yr(y,{columns:u.columns,formRef:u.formRef,loading:u.loading,type:u.type,cardBordered:u.cardBordered,dateFormatter:u.dateFormatter,form:u.form,search:u.search,manualRequest:u.manualRequest})}),h(Ve(t),"shouldComponentUpdate",function(u){return t.isEqual(u)}),h(Ve(t),"render",function(){var u=t.props,c=u.columns,d=u.loading,f=u.formRef,v=u.type,b=u.action,S=u.cardBordered,p=u.dateFormatter,x=u.form,C=u.search,m=u.pagination,y=u.ghost,w=u.manualRequest,P=m?We({current:m.current,pageSize:m.pageSize}):{};return s.jsx(yi,{submitButtonLoading:d,columns:c,type:v,ghost:y,formRef:f,onSubmit:t.onSubmit,manualRequest:w,onReset:t.onReset,dateFormatter:p,search:C,form:o(o({autoFocusFirstInput:!1},x),{},{extraUrlParams:o(o({},P),x==null?void 0:x.extraUrlParams)}),action:b,bordered:gt("search",S)})}),t}return ar(r)}(ce.Component),Si=function(e){return h(h(h({},e.componentCls,{width:"auto","&-title":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px"},"&-overlay":h(h(h(h({},"".concat(e.antCls,"-popover-inner-content"),{width:"200px",paddingBlock:0,paddingInline:0,paddingBlockEnd:8}),"".concat(e.antCls,"-tree-node-content-wrapper:hover"),{backgroundColor:"transparent"}),"".concat(e.antCls,"-tree-draggable-icon"),{cursor:"grab"}),"".concat(e.antCls,"-tree-treenode"),h(h({alignItems:"center","&:hover":h({},"".concat(e.componentCls,"-list-item-option"),{display:"block"})},"".concat(e.antCls,"-tree-checkbox"),{marginInlineEnd:"4px"}),"".concat(e.antCls,"-tree-title"),{width:"100%"}))}),"".concat(e.componentCls,"-action-rest-button"),{color:e.colorPrimary}),"".concat(e.componentCls,"-list"),h(h(h({display:"flex",flexDirection:"column",width:"100%",paddingBlockStart:8},"&".concat(e.componentCls,"-list-group"),{paddingBlockStart:0}),"&-title",{marginBlockStart:"6px",marginBlockEnd:"6px",paddingInlineStart:"24px",color:e.colorTextSecondary,fontSize:"12px"}),"&-item",{display:"flex",alignItems:"center",maxHeight:24,justifyContent:"space-between","&-title":{flex:1,maxWidth:80,textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"},"&-option":{display:"none",float:"right",cursor:"pointer","> span":{"> span.anticon":{color:e.colorPrimary}},"> span + span":{marginInlineStart:4}}}))};function Ci(n){return $e("ColumnSetting",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Si(r)]})}var xi=["key","dataIndex","children"],wi=["disabled"],Wn=function(e){var r=e.title,t=e.show,a=e.children,i=e.columnKey,l=e.fixed,u=g.useContext(Qe),c=u.columnsMap,d=u.setColumnsMap;return t?s.jsx(tn,{title:r,children:s.jsx("span",{onClick:function(v){v.stopPropagation(),v.preventDefault();var b=c[i]||{},S=o(o({},c),{},h({},i,o(o({},b),{},{fixed:l})));d(S)},children:a})}):null},Ri=function(e){var r=e.columnKey,t=e.isLeaf,a=e.title,i=e.className,l=e.fixed,u=e.showListItemOption,c=Me(),d=g.useContext(an),f=d.hashId,v=s.jsxs("span",{className:"".concat(i,"-list-item-option ").concat(f).trim(),children:[s.jsx(Wn,{columnKey:r,fixed:"left",title:c.getMessage("tableToolBar.leftPin","固定在列首"),show:l!=="left",children:s.jsx(Ht,{})}),s.jsx(Wn,{columnKey:r,fixed:void 0,title:c.getMessage("tableToolBar.noPin","不固定"),show:!!l,children:s.jsx(Gt,{})}),s.jsx(Wn,{columnKey:r,fixed:"right",title:c.getMessage("tableToolBar.rightPin","固定在列尾"),show:l!=="right",children:s.jsx(Ut,{})})]});return s.jsxs("span",{className:"".concat(i,"-list-item ").concat(f).trim(),children:[s.jsx("div",{className:"".concat(i,"-list-item-title ").concat(f).trim(),children:a}),u&&!t?v:null]},r)},Hn=function(e){var r,t,a,i=e.list,l=e.draggable,u=e.checkable,c=e.showListItemOption,d=e.className,f=e.showTitle,v=f===void 0?!0:f,b=e.title,S=e.listHeight,p=S===void 0?280:S,x=g.useContext(an),C=x.hashId,m=g.useContext(Qe),y=m.columnsMap,w=m.setColumnsMap,P=m.sortKeyColumns,A=m.setSortKeyColumns,D=i&&i.length>0,M=g.useMemo(function(){if(!D)return{};var T=[],I=new Map,G=function E(R,k){return R.map(function($){var _,re=$.key;$.dataIndex;var U=$.children,te=be($,xi),ee=mn(re,[k==null?void 0:k.columnKey,te.index].filter(Boolean).join("-")),O=y[ee||"null"]||{show:!0};O.show!==!1&&!U&&T.push(ee);var j=o(o({key:ee},Le(te,["className"])),{},{selectable:!1,disabled:O.disable===!0,disableCheckbox:typeof O.disable=="boolean"?O.disable:(_=O.disable)===null||_===void 0?void 0:_.checkbox,isLeaf:k?!0:void 0});if(U){var N;j.children=E(U,o(o({},O),{},{columnKey:ee})),(N=j.children)!==null&&N!==void 0&&N.every(function(K){return T==null?void 0:T.includes(K.key)})&&T.push(ee)}return I.set(re,j),j})};return{list:G(i),keys:T,map:I}},[y,i,D]),F=ye(function(T,I,G){var E=o({},y),R=Ke(P),k=R.findIndex(function(U){return U===T}),$=R.findIndex(function(U){return U===I}),_=G>=k;if(!(k<0)){var re=R[k];R.splice(k,1),G===0?R.unshift(re):R.splice(_?$:$+1,0,re),R.forEach(function(U,te){E[U]=o(o({},E[U]||{}),{},{order:te})}),w(E),A(R)}}),z=ye(function(T){var I=o({},y),G=function E(R){var k,$=o({},I[R]);if($.show=T.checked,(k=M.map)!==null&&k!==void 0&&(k=k.get(R))!==null&&k!==void 0&&k.children){var _;(_=M.map.get(R))===null||_===void 0||(_=_.children)===null||_===void 0||_.forEach(function(re){return E(re.key)})}I[R]=$};G(T.node.key),w(o({},I))});if(!D)return null;var L=s.jsx(Wt,{itemHeight:24,draggable:l&&!!((r=M.list)!==null&&r!==void 0&&r.length)&&((t=M.list)===null||t===void 0?void 0:t.length)>1,checkable:u,onDrop:function(I){var G=I.node.key,E=I.dragNode.key,R=I.dropPosition,k=I.dropToGap,$=R===-1||!k?R+1:R;F(E,G,$)},blockNode:!0,onCheck:function(I,G){return z(G)},checkedKeys:M.keys,showLine:!1,titleRender:function(I){var G=o(o({},I),{},{children:void 0});if(!G.title)return null;var E=_e(G.title,G),R=s.jsx(_r.Text,{style:{width:80},ellipsis:{tooltip:E},children:E});return s.jsx(Ri,o(o({className:d},Le(G,["key"])),{},{showListItemOption:c,title:R,columnKey:G.key}))},height:p,treeData:(a=M.list)===null||a===void 0?void 0:a.map(function(T){T.disabled;var I=be(T,wi);return I})});return s.jsxs(s.Fragment,{children:[v&&s.jsx("span",{className:"".concat(d,"-list-title ").concat(C).trim(),children:b}),L]})},Pi=function(e){var r=e.localColumns,t=e.className,a=e.draggable,i=e.checkable,l=e.showListItemOption,u=e.listsHeight,c=g.useContext(an),d=c.hashId,f=[],v=[],b=[],S=Me();r.forEach(function(C){if(!C.hideInSetting){var m=C.fixed;if(m==="left"){v.push(C);return}if(m==="right"){f.push(C);return}b.push(C)}});var p=f&&f.length>0,x=v&&v.length>0;return s.jsxs("div",{className:he("".concat(t,"-list"),d,h({},"".concat(t,"-list-group"),p||x)),children:[s.jsx(Hn,{title:S.getMessage("tableToolBar.leftFixedTitle","固定在左侧"),list:v,draggable:a,checkable:i,showListItemOption:l,className:t,listHeight:u}),s.jsx(Hn,{list:b,draggable:a,checkable:i,showListItemOption:l,title:S.getMessage("tableToolBar.noFixedTitle","不固定"),showTitle:x||p,className:t,listHeight:u}),s.jsx(Hn,{title:S.getMessage("tableToolBar.rightFixedTitle","固定在右侧"),list:f,draggable:a,checkable:i,showListItemOption:l,className:t,listHeight:u})]})};function Ti(n){var e,r,t,a,i=g.useRef(null),l=g.useContext(Qe),u=n.columns,c=n.checkedReset,d=c===void 0?!0:c,f=l.columnsMap,v=l.setColumnsMap,b=l.clearPersistenceStorage;g.useEffect(function(){var z;if((z=l.propsRef.current)!==null&&z!==void 0&&(z=z.columnsState)!==null&&z!==void 0&&z.value){var L;i.current=JSON.parse(JSON.stringify(((L=l.propsRef.current)===null||L===void 0||(L=L.columnsState)===null||L===void 0?void 0:L.value)||{}))}},[]);var S=ye(function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,L={},T=function I(G){G.forEach(function(E){var R=E.key,k=E.fixed,$=E.index,_=E.children,re=E.disable,U=mn(R,$);if(U){var te,ee;L[U]={show:re?(te=f[U])===null||te===void 0?void 0:te.show:z,fixed:k,disable:re,order:(ee=f[U])===null||ee===void 0?void 0:ee.order}}_&&I(_)})};T(u),v(L)}),p=ye(function(z){z.target.checked?S():S(!1)}),x=ye(function(){var z;b==null||b(),v(((z=l.propsRef.current)===null||z===void 0||(z=z.columnsState)===null||z===void 0?void 0:z.defaultValue)||i.current||l.defaultColumnKeyMap)}),C=Object.values(f).filter(function(z){return!z||z.show===!1}),m=C.length>0&&C.length!==u.length,y=Me(),w=g.useContext(je.ConfigContext),P=w.getPrefixCls,A=P("pro-table-column-setting"),D=Ci(A),M=D.wrapSSR,F=D.hashId;return M(s.jsx(zr,{arrow:!1,title:s.jsxs("div",{className:"".concat(A,"-title ").concat(F).trim(),children:[n.checkable===!1?s.jsx("div",{}):s.jsx(Vt,{indeterminate:m,checked:C.length===0&&C.length!==u.length,onChange:function(L){p(L)},children:y.getMessage("tableToolBar.columnDisplay","列展示")}),d?s.jsx("a",{onClick:x,className:"".concat(A,"-action-rest-button ").concat(F).trim(),children:y.getMessage("tableToolBar.reset","重置")}):null,n!=null&&n.extra?s.jsx(fn,{size:12,align:"center",children:n.extra}):null]}),overlayClassName:"".concat(A,"-overlay ").concat(F).trim(),trigger:"click",placement:"bottomRight",content:s.jsx(Pi,{checkable:(e=n.checkable)!==null&&e!==void 0?e:!0,draggable:(r=n.draggable)!==null&&r!==void 0?r:!0,showListItemOption:(t=n.showListItemOption)!==null&&t!==void 0?t:!0,className:A,localColumns:u,listsHeight:n.listsHeight}),children:n.children||s.jsx(tn,{title:y.getMessage("tableToolBar.columnSetting","列设置"),children:(a=n.settingIcon)!==null&&a!==void 0?a:s.jsx(Ot,{})})}))}var Ii=function(e){var r=g.useContext(an),t=r.hashId,a=e.items,i=a===void 0?[]:a,l=e.type,u=l===void 0?"inline":l,c=e.prefixCls,d=e.activeKey,f=e.defaultActiveKey,v=Re(d||f,{value:d,onChange:e.onChange}),b=de(v,2),S=b[0],p=b[1];if(i.length<1)return null;var x=i.find(function(m){return m.key===S})||i[0];if(u==="inline")return s.jsx("div",{className:he("".concat(c,"-menu"),"".concat(c,"-inline-menu"),t),children:i.map(function(m,y){return s.jsx("div",{onClick:function(){p(m.key)},className:he("".concat(c,"-inline-menu-item"),x.key===m.key?"".concat(c,"-inline-menu-item-active"):void 0,t),children:m.label},m.key||y)})});if(u==="tab")return s.jsx(sn,{items:i.map(function(m){var y;return o(o({},m),{},{key:(y=m.key)===null||y===void 0?void 0:y.toString()})}),activeKey:x.key,onTabClick:function(y){return p(y)},children:Bn(En,"4.23.0")<0?i==null?void 0:i.map(function(m,y){return g.createElement(sn.TabPane,o(o({},m),{},{key:m.key||y,tab:m.label}))}):null});var C=ot({selectedKeys:[x.key],onClick:function(y){p(y.key)},items:i.map(function(m,y){return{key:m.key||y,disabled:m.disabled,label:m.label}})});return s.jsx("div",{className:he("".concat(c,"-menu"),"".concat(c,"-dropdownmenu")),children:s.jsx(Hr,o(o({trigger:["click"]},C),{},{children:s.jsxs(fn,{className:"".concat(c,"-dropdownmenu-label"),children:[x.label,s.jsx(Gn,{})]})}))})},Fi=function(e){return h({},e.componentCls,h(h(h({lineHeight:"1","&-container":{display:"flex",justifyContent:"space-between",paddingBlock:e.padding,paddingInline:0,"&-mobile":{flexDirection:"column"}},"&-title":{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.colorTextHeading,fontWeight:"500",fontSize:e.fontSizeLG},"&-search:not(:last-child)":{display:"flex",alignItems:"center",justifyContent:"flex-start"},"&-setting-item":{marginBlock:0,marginInline:4,color:e.colorIconHover,fontSize:e.fontSizeLG,cursor:"pointer","> span":{display:"block",width:"100%",height:"100%"},"&:hover":{color:e.colorPrimary}},"&-left":h(h({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.marginXS,justifyContent:"flex-start",maxWidth:"calc(100% - 200px)"},"".concat(e.antCls,"-tabs"),{width:"100%"}),"&-has-tabs",{overflow:"hidden"}),"&-right":{flex:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:e.marginXS},"&-extra-line":{marginBlockEnd:e.margin},"&-setting-items":{display:"flex",gap:e.marginXS,lineHeight:"32px",alignItems:"center"},"&-filter":h({"&:not(:last-child)":{marginInlineEnd:e.margin},display:"flex",alignItems:"center"},"div$".concat(e.antCls,"-pro-table-search"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0}),"&-inline-menu-item":{display:"inline-block",marginInlineEnd:e.marginLG,cursor:"pointer",opacity:"0.75","&-active":{fontWeight:"bold",opacity:"1"}}},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),h({marginBlockEnd:0,"&::before":{borderBlockEnd:0}},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:0,"${token.antCls}-tabs-tab":{paddingBlockStart:0}})),"&-dropdownmenu-label",{fontWeight:"bold",fontSize:e.fontSizeIcon,textAlign:"center",cursor:"pointer"}),"@media (max-width: 768px)",h({},e.componentCls,{"&-container":{display:"flex",flexWrap:"wrap",flexDirection:"column"},"&-left":{marginBlockEnd:"16px",maxWidth:"100%"}})))};function ji(n){return $e("ProTableListToolBar",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Fi(r)]})}function Ni(n){if(ce.isValidElement(n))return n;if(n){var e=n,r=e.icon,t=e.tooltip,a=e.onClick,i=e.key;return r&&t?s.jsx(tn,{title:t,children:s.jsx("span",{onClick:function(){a&&a(i)},children:r},i)}):s.jsx("span",{onClick:function(){a&&a(i)},children:r},i)}return null}var Ei=function(e){var r,t=e.prefixCls,a=e.tabs,i=e.multipleLine,l=e.filtersNode;return i?s.jsx("div",{className:"".concat(t,"-extra-line"),children:a!=null&&a.items&&a!==null&&a!==void 0&&a.items.length?s.jsx(sn,{style:{width:"100%"},defaultActiveKey:a.defaultActiveKey,activeKey:a.activeKey,items:a.items.map(function(u,c){var d;return o(o({label:u.tab},u),{},{key:((d=u.key)===null||d===void 0?void 0:d.toString())||(c==null?void 0:c.toString())})}),onChange:a.onChange,tabBarExtraContent:l,children:(r=a.items)===null||r===void 0?void 0:r.map(function(u,c){return Bn(En,"4.23.0")<0?g.createElement(sn.TabPane,o(o({},u),{},{key:u.key||c,tab:u.tab})):null})}):l}):null},Mi=function(e){var r=e.prefixCls,t=e.title,a=e.subTitle,i=e.tooltip,l=e.className,u=e.style,c=e.search,d=e.onSearch,f=e.multipleLine,v=f===void 0?!1:f,b=e.filter,S=e.actions,p=S===void 0?[]:S,x=e.settings,C=x===void 0?[]:x,m=e.tabs,y=e.menu,w=g.useContext(je.ConfigContext),P=w.getPrefixCls,A=Rn.useToken(),D=A.token,M=P("pro-table-list-toolbar",r),F=ji(M),z=F.wrapSSR,L=F.hashId,T=Me(),I=g.useState(!1),G=de(I,2),E=G[0],R=G[1],k=T.getMessage("tableForm.inputPlaceholder","请输入"),$=g.useMemo(function(){return c?ce.isValidElement(c)?c:s.jsx(Vr.Search,o(o({style:{width:200},placeholder:k},c),{},{onSearch:Ce(le().mark(function K(){var B,V,q,J,H,X,ie=arguments;return le().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:for(q=ie.length,J=new Array(q),H=0;H<q;H++)J[H]=ie[H];return ve.next=3,(B=(V=c).onSearch)===null||B===void 0?void 0:B.call.apply(B,[V].concat(J));case 3:X=ve.sent,X!==!1&&(d==null||d(J==null?void 0:J[0]));case 5:case"end":return ve.stop()}},K)}))})):null},[k,d,c]),_=g.useMemo(function(){return b?s.jsx("div",{className:"".concat(M,"-filter ").concat(L).trim(),children:b}):null},[b,L,M]),re=g.useMemo(function(){return y||t||a||i},[y,a,t,i]),U=g.useMemo(function(){return Array.isArray(p)?p.length<1?null:s.jsx("div",{style:{display:"flex",alignItems:"center",gap:D.marginXS},children:p.map(function(K,B){return ce.isValidElement(K)?ce.cloneElement(K,o({key:B},K==null?void 0:K.props)):s.jsx(ce.Fragment,{children:K},B)})}):p},[p]),te=g.useMemo(function(){return!!(re&&$||!v&&_||U||C!=null&&C.length)},[U,_,re,v,$,C==null?void 0:C.length]),ee=g.useMemo(function(){return i||t||a||y||!re&&$},[re,y,$,a,t,i]),O=g.useMemo(function(){return!ee&&te?s.jsx("div",{className:"".concat(M,"-left ").concat(L).trim()}):!y&&(re||!$)?s.jsx("div",{className:"".concat(M,"-left ").concat(L).trim(),children:s.jsx("div",{className:"".concat(M,"-title ").concat(L).trim(),children:s.jsx(dn,{tooltip:i,label:t,subTitle:a})})}):s.jsxs("div",{className:he("".concat(M,"-left"),L,h(h(h({},"".concat(M,"-left-has-tabs"),(y==null?void 0:y.type)==="tab"),"".concat(M,"-left-has-dropdown"),(y==null?void 0:y.type)==="dropdown"),"".concat(M,"-left-has-inline-menu"),(y==null?void 0:y.type)==="inline")),children:[re&&!y&&s.jsx("div",{className:"".concat(M,"-title ").concat(L).trim(),children:s.jsx(dn,{tooltip:i,label:t,subTitle:a})}),y&&s.jsx(Ii,o(o({},y),{},{prefixCls:M})),!re&&$?s.jsx("div",{className:"".concat(M,"-search ").concat(L).trim(),children:$}):null]})},[ee,te,re,L,y,M,$,a,t,i]),j=g.useMemo(function(){return te?s.jsxs("div",{className:"".concat(M,"-right ").concat(L).trim(),style:E?{}:{alignItems:"center"},children:[v?null:_,re&&$?s.jsx("div",{className:"".concat(M,"-search ").concat(L).trim(),children:$}):null,U,C!=null&&C.length?s.jsx("div",{className:"".concat(M,"-setting-items ").concat(L).trim(),children:C.map(function(K,B){var V=Ni(K);return s.jsx("div",{className:"".concat(M,"-setting-item ").concat(L).trim(),children:V},B)})}):null]}):null},[te,M,L,E,re,$,v,_,U,C]),N=g.useMemo(function(){if(!te&&!ee)return null;var K=he("".concat(M,"-container"),L,h({},"".concat(M,"-container-mobile"),E));return s.jsxs("div",{className:K,children:[O,j]})},[ee,te,L,E,O,M,j]);return z(s.jsx(Wr,{onResize:function(B){B.width<375!==E&&R(B.width<375)},children:s.jsxs("div",{style:u,className:he(M,L,l),children:[N,s.jsx(Ei,{filtersNode:_,prefixCls:M,tabs:m,multipleLine:v})]})}))},Bi=function(e){var r=e.icon,t=r===void 0?s.jsx(qt,{}):r,a=g.useContext(Qe),i=Me(),l=ot({selectedKeys:[a.tableSize],onClick:function(c){var d,f=c.key;(d=a.setTableSize)===null||d===void 0||d.call(a,f)},style:{width:80},items:[{key:"large",label:i.getMessage("tableToolBar.densityLarger","宽松")},{key:"middle",label:i.getMessage("tableToolBar.densityMiddle","中等")},{key:"small",label:i.getMessage("tableToolBar.densitySmall","紧凑")}]});return s.jsx(Hr,o(o({},l),{},{trigger:["click"],children:s.jsx(tn,{title:i.getMessage("tableToolBar.density","表格密度"),children:t})}))};const Ki=ce.memo(Bi);var Ai=function(){var e=Me(),r=g.useState(!1),t=de(r,2),a=t[0],i=t[1];return g.useEffect(function(){at()&&(document.onfullscreenchange=function(){i(!!document.fullscreenElement)})},[]),a?s.jsx(tn,{title:e.getMessage("tableToolBar.exitFullScreen","全屏"),children:s.jsx(Xt,{})}):s.jsx(tn,{title:e.getMessage("tableToolBar.fullScreen","全屏"),children:s.jsx(Jt,{})})};const pt=ce.memo(Ai);var Li=["headerTitle","tooltip","toolBarRender","action","options","selectedRowKeys","selectedRows","toolbar","onSearch","columns","optionsRender"];function $i(n,e){var r,t=n.intl;return{reload:{text:t.getMessage("tableToolBar.reload","刷新"),icon:(r=e.reloadIcon)!==null&&r!==void 0?r:s.jsx(Qt,{})},density:{text:t.getMessage("tableToolBar.density","表格密度"),icon:s.jsx(Ki,{icon:e.densityIcon})},fullScreen:{text:t.getMessage("tableToolBar.fullScreen","全屏"),icon:s.jsx(pt,{})}}}function ki(n,e,r,t){return Object.keys(n).filter(function(a){return a}).map(function(a){var i=n[a];if(!i)return null;var l=i===!0?e[a]:function(c){i==null||i(c,r.current)};if(typeof l!="function"&&(l=function(){}),a==="setting")return g.createElement(Ti,o(o({},n[a]),{},{columns:t,key:a}));if(a==="fullScreen")return s.jsx("span",{onClick:l,children:s.jsx(pt,{})},a);var u=$i(e,n)[a];return u?s.jsx("span",{onClick:l,children:s.jsx(tn,{title:u.text,children:u.icon})},a):null}).filter(function(a){return a})}function Di(n){var e=n.headerTitle,r=n.tooltip,t=n.toolBarRender,a=n.action,i=n.options,l=n.selectedRowKeys,u=n.selectedRows,c=n.toolbar,d=n.onSearch,f=n.columns,v=n.optionsRender,b=be(n,Li),S=g.useContext(Qe),p=Me(),x=g.useMemo(function(){var y={reload:function(){var D;return a==null||(D=a.current)===null||D===void 0?void 0:D.reload()},density:!0,setting:!0,search:!1,fullScreen:function(){var D,M;return a==null||(D=a.current)===null||D===void 0||(M=D.fullScreen)===null||M===void 0?void 0:M.call(D)}};if(i===!1)return[];var w=o(o({},y),{},{fullScreen:!1},i),P=ki(w,o(o({},y),{},{intl:p}),a,f);return v?v(o({headerTitle:e,tooltip:r,toolBarRender:t,action:a,options:i,selectedRowKeys:l,selectedRows:u,toolbar:c,onSearch:d,columns:f,optionsRender:v},b),P):P},[a,f,e,p,d,v,i,b,l,u,t,c,r]),C=t?t(a==null?void 0:a.current,{selectedRowKeys:l,selectedRows:u}):[],m=g.useMemo(function(){if(!i||!i.search)return!1;var y={value:S.keyWords,onChange:function(P){return S.setKeyWords(P.target.value)}};return i.search===!0?y:o(o({},y),i.search)},[S,i]);return g.useEffect(function(){S.keyWords===void 0&&(d==null||d(""))},[S.keyWords,d]),s.jsx(Mi,o({title:e,tooltip:r||b.tip,search:m,onSearch:d,actions:C,settings:x},c))}var zi=function(n){nr(r,n);var e=rr(r);function r(){var t;tr(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i)),h(Ve(t),"onSearch",function(u){var c,d,f,v,b=t.props,S=b.options,p=b.onFormSearchSubmit,x=b.actionRef;if(!(!S||!S.search)){var C=S.search===!0?{}:S.search,m=C.name,y=m===void 0?"keyword":m,w=(c=S.search)===null||c===void 0||(d=c.onSearch)===null||d===void 0?void 0:d.call(c,u);w!==!1&&(x==null||(f=x.current)===null||f===void 0||(v=f.setPageInfo)===null||v===void 0||v.call(f,{current:1}),p(We(h({_timestamp:Date.now()},y,u))))}}),h(Ve(t),"isEquals",function(u){var c=t.props,d=c.hideToolbar,f=c.tableColumn,v=c.options,b=c.tooltip,S=c.toolbar,p=c.selectedRows,x=c.selectedRowKeys,C=c.headerTitle,m=c.actionRef,y=c.toolBarRender;return Yr({hideToolbar:d,tableColumn:f,options:v,tooltip:b,toolbar:S,selectedRows:p,selectedRowKeys:x,headerTitle:C,actionRef:m,toolBarRender:y},{hideToolbar:u.hideToolbar,tableColumn:u.tableColumn,options:u.options,tooltip:u.tooltip,toolbar:u.toolbar,selectedRows:u.selectedRows,selectedRowKeys:u.selectedRowKeys,headerTitle:u.headerTitle,actionRef:u.actionRef,toolBarRender:u.toolBarRender},["render","renderFormItem"])}),h(Ve(t),"shouldComponentUpdate",function(u){return u.searchNode?!0:!t.isEquals(u)}),h(Ve(t),"render",function(){var u=t.props,c=u.hideToolbar,d=u.tableColumn,f=u.options,v=u.searchNode,b=u.tooltip,S=u.toolbar,p=u.selectedRows,x=u.selectedRowKeys,C=u.headerTitle,m=u.actionRef,y=u.toolBarRender,w=u.optionsRender;return c?null:s.jsx(Di,{tooltip:b,columns:d,options:f,headerTitle:C,action:m,onSearch:t.onSearch,selectedRows:p,selectedRowKeys:x,toolBarRender:y,toolbar:o({filter:v},S),optionsRender:w})}),t}return ar(r)}(ce.Component),_i=new Or("turn",{"0%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(90deg)"},"50%":{transform:"rotate(180deg)"},"75%":{transform:"rotate(270deg)"},"100%":{transform:"rotate(360deg)"}}),Oi=function(e){return h(h(h({},e.componentCls,h(h(h(h(h(h(h(h(h({zIndex:1},"".concat(e.antCls,"-table-wrapper ").concat(e.antCls,"-table-pagination").concat(e.antCls,"-pagination"),{marginBlockEnd:0}),"&:not(:root):fullscreen",{minHeight:"100vh",overflow:"auto",background:e.colorBgContainer}),"&-extra",{marginBlockEnd:16}),"&-polling",h({},"".concat(e.componentCls,"-list-toolbar-setting-item"),{".anticon.anticon-reload":{transform:"rotate(0deg)",animationName:_i,animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite"}})),"td".concat(e.antCls,"-table-cell"),{">a":{fontSize:e.fontSize}}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-tbody").concat(e.antCls,"-table-wrapper:only-child").concat(e.antCls,"-table"),{marginBlock:0,marginInline:0}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-middle ").concat(e.componentCls),h({marginBlock:0,marginInline:-8},"".concat(e.proComponentsCls,"-card"),{backgroundColor:"initial"})),"& &-search",h(h(h(h({marginBlockEnd:"16px",background:e.colorBgContainer,"&-ghost":{background:"transparent"}},"&".concat(e.componentCls,"-form"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:16,overflow:"unset"}),"&-light-filter",{marginBlockEnd:0,paddingBlock:0,paddingInline:0}),"&-form-option",h(h(h({},"".concat(e.antCls,"-form-item"),{}),"".concat(e.antCls,"-form-item-label"),{}),"".concat(e.antCls,"-form-item-control-input"),{})),"@media (max-width: 575px)",h({},e.componentCls,h({height:"auto !important",paddingBlockEnd:"24px"},"".concat(e.antCls,"-form-item-label"),{minWidth:"80px",textAlign:"start"})))),"&-toolbar",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"64px",paddingInline:24,paddingBlock:0,"&-option":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"&-title":{flex:"1",color:e.colorTextLabel,fontWeight:"500",fontSize:"16px",lineHeight:"24px",opacity:"0.85"}})),"@media (max-width: ".concat(e.screenXS,")px"),h({},e.componentCls,h({},"".concat(e.antCls,"-table"),{width:"100%",overflowX:"auto","&-thead > tr,&-tbody > tr":{"> th,> td":{whiteSpace:"pre",">span":{display:"block"}}}}))),"@media (max-width: 575px)",h({},"".concat(e.componentCls,"-toolbar"),{flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",height:"auto",marginBlockEnd:"16px",marginInlineStart:"16px",paddingBlock:8,paddingInline:8,paddingBlockStart:"16px",lineHeight:"normal","&-title":{marginBlockEnd:16},"&-option":{display:"flex",justifyContent:"space-between",width:"100%"},"&-default-option":{display:"flex",flex:"1",alignItems:"center",justifyContent:"flex-end"}}))};function Vi(n){return $e("ProTable",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Oi(r)]})}var Wi=["data","success","total"],Hi=function(e){var r=e.pageInfo;if(r){var t=r.current,a=r.defaultCurrent,i=r.pageSize,l=r.defaultPageSize;return{current:t||a||1,total:0,pageSize:i||l||20}}return{current:1,total:0,pageSize:20}},Gi=function(e,r,t){var a,i=g.useRef(!1),l=g.useRef(null),u=t||{},c=u.onLoad,d=u.manual,f=u.polling,v=u.onRequestError,b=u.debounceTime,S=b===void 0?20:b,p=u.effects,x=p===void 0?[]:p,C=g.useRef(d),m=g.useRef(),y=Re(r,{value:t==null?void 0:t.dataSource,onChange:t==null?void 0:t.onDataSourceChange}),w=de(y,2),P=w[0],A=w[1],D=Re(!1,{value:Ae(t==null?void 0:t.loading)==="object"?t==null||(a=t.loading)===null||a===void 0?void 0:a.spinning:t==null?void 0:t.loading,onChange:t==null?void 0:t.onLoadingChange}),M=de(D,2),F=M[0],z=M[1],L=Re(function(){return Hi(t)},{onChange:t==null?void 0:t.onPageInfoChange}),T=de(L,2),I=T[0],G=T[1],E=ye(function(B){(B.current!==I.current||B.pageSize!==I.pageSize||B.total!==I.total)&&G(B)}),R=Re(!1),k=de(R,2),$=k[0],_=k[1],re=function(V,q){pr.unstable_batchedUpdates(function(){A(V),(I==null?void 0:I.total)!==q&&E(o(o({},I),{},{total:q||V.length}))})},U=Pn(I==null?void 0:I.current),te=Pn(I==null?void 0:I.pageSize),ee=Pn(f),O=ye(function(){pr.unstable_batchedUpdates(function(){z(!1),_(!1)})}),j=function(){var B=Ce(le().mark(function V(q){var J,H,X,ie,Y,ve,Z,ne,fe,se,Ie,ue;return le().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!C.current){ae.next=3;break}return C.current=!1,ae.abrupt("return");case 3:return q?_(!0):z(!0),J=I||{},H=J.pageSize,X=J.current,ae.prev=5,ie=(t==null?void 0:t.pageInfo)!==!1?{current:X,pageSize:H}:void 0,ae.next=9,e==null?void 0:e(ie);case 9:if(ae.t0=ae.sent,ae.t0){ae.next=12;break}ae.t0={};case 12:if(Y=ae.t0,ve=Y.data,Z=ve===void 0?[]:ve,ne=Y.success,fe=Y.total,se=fe===void 0?0:fe,Ie=be(Y,Wi),ne!==!1){ae.next=21;break}return ae.abrupt("return",[]);case 21:return ue=li(Z,[t.postData].filter(function(Fe){return Fe})),re(ue,se),c==null||c(ue,Ie),ae.abrupt("return",ue);case 27:if(ae.prev=27,ae.t1=ae.catch(5),v!==void 0){ae.next=31;break}throw new Error(ae.t1);case 31:P===void 0&&A([]),v(ae.t1);case 33:return ae.prev=33,O(),ae.finish(33);case 36:return ae.abrupt("return",[]);case 37:case"end":return ae.stop()}},V,null,[[5,27,33,36]])}));return function(q){return B.apply(this,arguments)}}(),N=Ur(function(){var B=Ce(le().mark(function V(q){var J,H,X;return le().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(m.current&&clearTimeout(m.current),e){Y.next=3;break}return Y.abrupt("return");case 3:return J=new AbortController,l.current=J,Y.prev=5,Y.next=8,Promise.race([j(q),new Promise(function(ve,Z){var ne,fe;(ne=l.current)===null||ne===void 0||(ne=ne.signal)===null||ne===void 0||(fe=ne.addEventListener)===null||fe===void 0||fe.call(ne,"abort",function(){Z("aborted"),N.cancel(),O()})})]);case 8:if(H=Y.sent,!J.signal.aborted){Y.next=11;break}return Y.abrupt("return");case 11:return X=_e(f,H),X&&!i.current&&(m.current=setTimeout(function(){N.run(X)},Math.max(X,2e3))),Y.abrupt("return",H);case 16:if(Y.prev=16,Y.t0=Y.catch(5),Y.t0!=="aborted"){Y.next=20;break}return Y.abrupt("return");case 20:throw Y.t0;case 21:case"end":return Y.stop()}},V,null,[[5,16]])}));return function(V){return B.apply(this,arguments)}}(),S||30),K=function(){var V;(V=l.current)===null||V===void 0||V.abort(),N.cancel(),O()};return g.useEffect(function(){return f||clearTimeout(m.current),!ee&&f&&N.run(!0),function(){clearTimeout(m.current)}},[f]),g.useEffect(function(){return i.current=!1,function(){i.current=!0}},[]),g.useEffect(function(){var B=I||{},V=B.current,q=B.pageSize;(!U||U===V)&&(!te||te===q)||t.pageInfo&&P&&(P==null?void 0:P.length)>q||V!==void 0&&P&&P.length<=q&&(K(),N.run(!1))},[I==null?void 0:I.current]),g.useEffect(function(){te&&(K(),N.run(!1))},[I==null?void 0:I.pageSize]),Un(function(){return K(),N.run(!1),d||(C.current=!1),function(){K()}},[].concat(Ke(x),[d])),{dataSource:P,setDataSource:A,loading:Ae(t==null?void 0:t.loading)==="object"?o(o({},t==null?void 0:t.loading),{},{spinning:F}):F,reload:function(){var B=Ce(le().mark(function q(){return le().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return K(),H.abrupt("return",N.run(!1));case 2:case"end":return H.stop()}},q)}));function V(){return B.apply(this,arguments)}return V}(),pageInfo:I,pollingLoading:$,reset:function(){var B=Ce(le().mark(function q(){var J,H,X,ie,Y,ve,Z,ne;return le().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:J=t||{},H=J.pageInfo,X=H||{},ie=X.defaultCurrent,Y=ie===void 0?1:ie,ve=X.defaultPageSize,Z=ve===void 0?20:ve,ne={current:Y,total:0,pageSize:Z},E(ne);case 4:case"end":return se.stop()}},q)}));function V(){return B.apply(this,arguments)}return V}(),setPageInfo:function(){var B=Ce(le().mark(function q(J){return le().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:E(o(o({},I),J));case 1:case"end":return X.stop()}},q)}));function V(q){return B.apply(this,arguments)}return V}()}},Ui=function(e){return function(r,t){var a,i,l=r.fixed,u=r.index,c=t.fixed,d=t.index;if(l==="left"&&c!=="left"||c==="right"&&l!=="right")return-2;if(c==="left"&&l!=="left"||l==="right"&&c!=="right")return 2;var f=r.key||"".concat(u),v=t.key||"".concat(d);if((a=e[f])!==null&&a!==void 0&&a.order||(i=e[v])!==null&&i!==void 0&&i.order){var b,S;return(((b=e[f])===null||b===void 0?void 0:b.order)||0)-(((S=e[v])===null||S===void 0?void 0:S.order)||0)}return(r.index||0)-(t.index||0)}},qi=["children"],Xi=["",null,void 0],$r=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter(function(a){return a!==void 0}).map(function(a){return typeof a=="number"?a.toString():a}).flat(1)},Ji=function(e){var r=g.useContext(ua),t=e.columnProps,a=e.prefixName,i=e.text,l=e.counter,u=e.rowData,c=e.index,d=e.recordKey,f=e.subName,v=e.proFieldProps,b=e.editableUtils,S=Mn.useFormInstance(),p=d||c,x=g.useMemo(function(){var F,z;return(F=b==null||(z=b.getRealIndex)===null||z===void 0?void 0:z.call(b,u))!==null&&F!==void 0?F:c},[b,c,u]),C=g.useState(function(){var F,z;return $r(a,a?f:[],a?x:p,(F=(z=t==null?void 0:t.key)!==null&&z!==void 0?z:t==null?void 0:t.dataIndex)!==null&&F!==void 0?F:c)}),m=de(C,2),y=m[0],w=m[1],P=g.useMemo(function(){return y.slice(0,-1)},[y]);g.useEffect(function(){var F,z,L=$r(a,a?f:[],a?x:p,(F=(z=t==null?void 0:t.key)!==null&&z!==void 0?z:t==null?void 0:t.dataIndex)!==null&&F!==void 0?F:c);L.join("-")!==y.join("-")&&w(L)},[t==null?void 0:t.dataIndex,t==null?void 0:t.key,c,d,a,p,f,y,x]);var A=g.useMemo(function(){return[S,o(o({},t),{},{rowKey:P,rowIndex:c,isEditable:!0})]},[t,S,c,P]),D=g.useCallback(function(F){var z=F.children,L=be(F,qi);return s.jsx(Na,o(o({popoverProps:{getPopupContainer:r.getPopupContainer||function(){return l.rootDomRef.current||document.body}},errorType:"popover",name:y},L),{},{children:z}),p)},[p,y]),M=g.useCallback(function(){var F,z,L=o({},Jn.apply(void 0,[t==null?void 0:t.formItemProps].concat(Ke(A))));L.messageVariables=o({label:(t==null?void 0:t.title)||"此项",type:(t==null?void 0:t.valueType)||"文本"},L==null?void 0:L.messageVariables),L.initialValue=(F=(z=a?null:i)!==null&&z!==void 0?z:L==null?void 0:L.initialValue)!==null&&F!==void 0?F:t==null?void 0:t.initialValue;var T=s.jsx(In,o({cacheForSwr:!0,name:y,proFormFieldKey:p,ignoreFormItem:!0,fieldProps:Jn.apply(void 0,[t==null?void 0:t.fieldProps].concat(Ke(A)))},v),y.join("-"));return t!=null&&t.renderFormItem&&(T=t.renderFormItem(o(o({},t),{},{index:c,isEditable:!0,type:"table"}),{defaultRender:function(){return s.jsx(s.Fragment,{children:T})},type:"form",recordKey:d,record:o(o({},u),S==null?void 0:S.getFieldValue([p])),isEditable:!0},S,e.editableUtils),t.ignoreFormItem)?s.jsx(s.Fragment,{children:T}):s.jsx(D,o(o({},L),{},{children:T}),y.join("-"))},[t,A,a,i,p,y,v,D,c,d,u,S,e.editableUtils]);return y.length===0?null:typeof(t==null?void 0:t.renderFormItem)=="function"||typeof(t==null?void 0:t.fieldProps)=="function"||typeof(t==null?void 0:t.formItemProps)=="function"?s.jsx(He.Item,{noStyle:!0,shouldUpdate:function(z,L){if(z===L)return!1;var T=[P].flat(1);try{return JSON.stringify(Ge(z,T))!==JSON.stringify(Ge(L,T))}catch{return!0}},children:function(){return M()}}):M()};function ht(n){var e,r,t=n.text,a=n.valueType,i=n.rowData,l=n.columnProps,u=n.index;if((!a||["textarea","text"].includes(a.toString()))&&!(l!=null&&l.valueEnum)&&n.mode==="read")return Xi.includes(t)?n.columnEmptyText:t;if(typeof a=="function"&&i)return ht(o(o({},n),{},{valueType:a(i,n.type)||"text"}));var c=(l==null?void 0:l.key)||(l==null||(e=l.dataIndex)===null||e===void 0?void 0:e.toString()),d=l!=null&&l.dependencies?[n.prefixName,n.prefixName?u==null?void 0:u.toString():(r=n.recordKey)===null||r===void 0?void 0:r.toString(),l==null?void 0:l.dependencies].filter(Boolean).flat(1):[],f={valueEnum:_e(l==null?void 0:l.valueEnum,i),request:l==null?void 0:l.request,dependencies:l!=null&&l.dependencies?[d]:void 0,originDependencies:l!=null&&l.dependencies?[l==null?void 0:l.dependencies]:void 0,params:_e(l==null?void 0:l.params,i,l),readonly:l==null?void 0:l.readonly,text:a==="index"||a==="indexBorder"?n.index:t,mode:n.mode,renderFormItem:void 0,valueType:a,record:i,proFieldProps:{emptyText:n.columnEmptyText,proFieldKey:c?"table-field-".concat(c):void 0}};return n.mode!=="edit"?s.jsx(In,o({mode:"read",ignoreFormItem:!0,fieldProps:Jn(l==null?void 0:l.fieldProps,null,l)},f)):s.jsx(Ji,o(o({},n),{},{proFieldProps:f}),n.recordKey)}var Qi=function(e){var r,t=e.title,a=typeof(e==null?void 0:e.ellipsis)=="boolean"?e==null?void 0:e.ellipsis:e==null||(r=e.ellipsis)===null||r===void 0?void 0:r.showTitle;return t&&typeof t=="function"?t(e,"table",s.jsx(dn,{label:null,tooltip:e.tooltip||e.tip})):s.jsx(dn,{label:t,tooltip:e.tooltip||e.tip,ellipsis:a})};function Yi(n,e,r,t){return typeof t=="boolean"?t===!1:(t==null?void 0:t(n,e,r))===!1}var Zi=function(e,r,t){var a=Array.isArray(t)?Ge(r,t):r[t],i=String(a);return String(i)===String(e)};function eu(n){var e=n.columnProps,r=n.text,t=n.rowData,a=n.index,i=n.columnEmptyText,l=n.counter,u=n.type,c=n.subName,d=n.marginSM,f=n.editableUtils,v=l.action,b=l.prefixName,S=f.isEditable(o(o({},t),{},{index:a})),p=S.isEditable,x=S.recordKey,C=e.renderText,m=C===void 0?function(F){return F}:C,y=m(r,t,a,v),w=p&&!Yi(r,t,a,e==null?void 0:e.editable)?"edit":"read",P=ht({text:y,valueType:e.valueType||"text",index:a,rowData:t,subName:c,columnProps:o(o({},e),{},{entry:t,entity:t}),counter:l,columnEmptyText:i,type:u,recordKey:x,mode:w,prefixName:b,editableUtils:f}),A=w==="edit"?P:Ba(P,e,y);if(w==="edit")return e.valueType==="option"?s.jsx("div",{style:{display:"flex",alignItems:"center",gap:d,justifyContent:e.align==="center"?"center":"flex-start"},children:f.actionRender(o(o({},t),{},{index:e.index||a}))}):A;if(!e.render){var D=ce.isValidElement(A)||["string","number"].includes(Ae(A));return!sa(A)&&D?A:null}var M=e.render(A,t,a,o(o({},v),f),o(o({},e),{},{isEditable:p,type:"table"}));return oi(M)?M:M&&e.valueType==="option"&&Array.isArray(M)?s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8},children:M}):M}function yt(n,e){var r,t=n.columns,a=n.counter,i=n.columnEmptyText,l=n.type,u=n.editableUtils,c=n.marginSM,d=n.rowKey,f=d===void 0?"id":d,v=n.childrenColumnName,b=v===void 0?"children":v,S=n.proFilter,p=S===void 0?{}:S,x=n.proSort,C=new Map;return t==null||(r=t.map(function(m,y){if(m===cn.EXPAND_COLUMN||m===cn.SELECTION_COLUMN)return m;var w=m,P=w.key,A=w.dataIndex,D=w.valueEnum,M=w.valueType,F=M===void 0?"text":M,z=w.children,L=w.onFilter,T=w.filters,I=T===void 0?[]:T,G=w.sorter,E=w.filteredValue,R=mn(P||(A==null?void 0:A.toString()),[e==null?void 0:e.key,y].filter(Boolean).join("-")),k=!D&&!F&&!z;if(k)return o({index:y},m);var $=a.columnsMap[R]||{fixed:m.fixed},_=function(){return L===!0?function(j,N){return Zi(j,N,A)}:it(L)},re=R&&(p==null?void 0:p[R])!==void 0?p==null?void 0:p[R]:null,U=R&&x[R]!==void 0?x[R]:null,te=f,ee=o(o({index:y,key:R},m),{},{title:Qi(m),valueEnum:D,filters:I===!0?pa(_e(D,void 0)).filter(function(O){return O&&O.value!=="all"}):I,onFilter:_(),filteredValue:E!==void 0?E:I&&_()==null?re:void 0,sortOrder:G===!0?U:void 0,fixed:$.fixed,width:m.width||(m.fixed?200:void 0),children:m.children?yt(o(o({},n),{},{columns:(m==null?void 0:m.children)||[]}),o(o({},m),{},{key:R})):void 0,render:function(j,N,K){typeof f=="function"&&(te=f(N,K));var B;if(Ae(N)==="object"&&N!==null&&Reflect.has(N,te)){var V;B=N[te];var q=C.get(B)||[];(V=N[b])===null||V===void 0||V.forEach(function(H){var X=H[te];C.has(X)||C.set(X,q.concat([K,b]))})}var J={columnProps:m,text:j,rowData:N,index:K,columnEmptyText:i,counter:a,type:l,marginSM:c,subName:C.get(B),editableUtils:u};return eu(J)}});return $a(ee)}))===null||r===void 0?void 0:r.filter(function(m){return!m.hideInTable})}var nu=["rowKey","tableClassName","defaultClassName","action","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","hideToolbar","searchNode","style","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey"],ru=["cardBordered","request","className","params","defaultData","headerTitle","postData","ghost","pagination","actionRef","columns","toolBarRender","optionsRender","onLoad","onRequestError","style","cardProps","tableStyle","tableClassName","columnsStateMap","onColumnsStateChange","options","search","name","onLoadingChange","rowSelection","beforeSearchSubmit","tableAlertRender","defaultClassName","formRef","type","columnEmptyText","toolbar","rowKey","manualRequest","polling","tooltip","revalidateOnFocus","searchFormRender"];function tu(n){var e=n.rowKey,r=n.tableClassName,t=n.defaultClassName,a=n.action,i=n.tableColumn,l=n.type,u=n.pagination,c=n.rowSelection,d=n.size;n.defaultSize;var f=n.tableStyle,v=n.toolbarDom,b=n.hideToolbar,S=n.searchNode,p=n.style,x=n.cardProps,C=n.alertDom;n.name;var m=n.onSortChange,y=n.onFilterChange,w=n.options,P=n.isLightFilter,A=n.className,D=n.cardBordered,M=n.editableUtils,F=n.getRowKey,z=be(n,nu),L=g.useContext(Qe),T=g.useMemo(function(){var ee=function O(j){return j.map(function(N){var K=mn(N.key,N.index),B=L.columnsMap[K];return B&&B.show===!1?!1:N.children?o(o({},N),{},{children:O(N.children)}):N}).filter(Boolean)};return ee(i)},[L.columnsMap,i]),I=function(O){var j=M.newLineRecord||{},N=j.options,K=j.defaultValue,B=(N==null?void 0:N.position)==="top";if(N!=null&&N.parentKey){var V,q,J={data:O,getRowKey:F,row:o(o({},K),{},{map_row_parentKey:(V=Ee(N.parentKey))===null||V===void 0?void 0:V.toString()}),key:N==null?void 0:N.recordKey,childrenColumnName:((q=n.expandable)===null||q===void 0?void 0:q.childrenColumnName)||"children"};return hn(J,B?"top":"update")}if(B)return[K].concat(Ke(a.dataSource));if(u&&u!==null&&u!==void 0&&u.current&&u!==null&&u!==void 0&&u.pageSize){var H=Ke(a.dataSource);return(u==null?void 0:u.pageSize)>H.length?(H.push(K),H):(H.splice((u==null?void 0:u.current)*(u==null?void 0:u.pageSize)-1,0,K),H)}return[].concat(Ke(a.dataSource),[K])},G=function(){return o(o({},z),{},{size:d,rowSelection:c===!1?void 0:c,className:r,style:f,columns:T,loading:a.loading,dataSource:M.newLineRecord?I(a.dataSource):a.dataSource,pagination:u,onChange:function(j,N,K,B){var V;if((V=z.onChange)===null||V===void 0||V.call(z,j,N,K,B),y(We(N)),Array.isArray(K)){var q,J=K.reduce(function(ve,Z){return o(o({},ve),{},h({},"".concat(Z.field),Z.order))},{});m((q=We(J))!==null&&q!==void 0?q:{})}else{var H,X,ie=(H=K.column)===null||H===void 0?void 0:H.sorter,Y=(ie==null?void 0:ie.toString())===ie;m((X=We(h({},"".concat(Y?ie:K.field),K.order)))!==null&&X!==void 0?X:{})}}})},E=g.useMemo(function(){return n.search===!1&&!n.headerTitle&&n.toolBarRender===!1},[]),R=s.jsx(ca.Provider,{value:{grid:!1,colProps:void 0,rowProps:void 0},children:s.jsx(cn,o(o({},G()),{},{rowKey:e}))}),k=n.tableViewRender?n.tableViewRender(o(o({},G()),{},{rowSelection:c!==!1?c:void 0}),R):R,$=g.useMemo(function(){if(n.editable&&!n.name){var ee,O,j;return s.jsxs(s.Fragment,{children:[v,C,g.createElement(Mn,o(o({},(ee=n.editable)===null||ee===void 0?void 0:ee.formProps),{},{formRef:(O=n.editable)===null||O===void 0||(O=O.formProps)===null||O===void 0?void 0:O.formRef,component:!1,form:(j=n.editable)===null||j===void 0?void 0:j.form,onValuesChange:M.onValuesChange,key:"table",submitter:!1,omitNil:!1,dateFormatter:n.dateFormatter}),k)]})}return s.jsxs(s.Fragment,{children:[v,C,k]})},[C,n.loading,!!n.editable,k,v]),_=g.useMemo(function(){return x===!1||E===!0||n.name?{}:b?{padding:0}:v?{paddingBlockStart:0}:v&&u===!1?{paddingBlockStart:0}:{padding:0}},[E,u,n.name,x,v,b]),re=x===!1||E===!0||n.name?$:s.jsx(bn,o(o({ghost:n.ghost,bordered:gt("table",D),bodyStyle:_},x),{},{children:$})),U=function(){return n.tableRender?n.tableRender(n,re,{toolbar:v||void 0,alert:C||void 0,table:k||void 0}):re},te=s.jsxs("div",{className:he(A,h({},"".concat(t,"-polling"),a.pollingLoading)),style:p,ref:L.rootDomRef,children:[P?null:S,l!=="form"&&n.tableExtraRender&&s.jsx("div",{className:he(A,"".concat(t,"-extra")),children:n.tableExtraRender(n,a.dataSource||[])}),l!=="form"&&U()]});return!w||!(w!=null&&w.fullScreen)?te:s.jsx(je,{getPopupContainer:function(){return L.rootDomRef.current||document.body},children:te})}var au={},lu=function(e){var r;e.cardBordered;var t=e.request,a=e.className,i=e.params,l=i===void 0?au:i,u=e.defaultData,c=e.headerTitle,d=e.postData,f=e.ghost,v=e.pagination,b=e.actionRef,S=e.columns,p=S===void 0?[]:S,x=e.toolBarRender,C=e.optionsRender,m=e.onLoad,y=e.onRequestError;e.style,e.cardProps,e.tableStyle,e.tableClassName,e.columnsStateMap,e.onColumnsStateChange;var w=e.options,P=e.search,A=e.name,D=e.onLoadingChange,M=e.rowSelection,F=M===void 0?!1:M,z=e.beforeSearchSubmit,L=e.tableAlertRender,T=e.defaultClassName,I=e.formRef,G=e.type,E=G===void 0?"table":G,R=e.columnEmptyText,k=R===void 0?"-":R,$=e.toolbar,_=e.rowKey,re=e.manualRequest,U=e.polling,te=e.tooltip,ee=e.revalidateOnFocus,O=ee===void 0?!1:ee,j=e.searchFormRender,N=be(e,ru),K=Vi(e.defaultClassName),B=K.wrapSSR,V=K.hashId,q=he(T,a,V),J=g.useRef(),H=g.useRef(),X=I||H;g.useImperativeHandle(b,function(){return J.current});var ie=Re(F?(F==null?void 0:F.defaultSelectedRowKeys)||[]:void 0,{value:F?F.selectedRowKeys:void 0}),Y=de(ie,2),ve=Y[0],Z=Y[1],ne=Re(function(){if(!(re||P!==!1))return{}}),fe=de(ne,2),se=fe[0],Ie=fe[1],ue=Re({}),Ye=de(ue,2),ae=Ye[0],Fe=Ye[1],Ze=Re({}),gn=de(Ze,2),Oe=gn[0],en=gn[1],Ue=g.useCallback(function(W){for(var Q=[],oe=0;oe<W.length;oe++){var ge=W[oe];ge.children?Ue(ge.children):Q.push(ge)}return Q},[]),ln=g.useMemo(function(){var W=Ue(p);return W==null?void 0:W.every(function(Q){return!!Q.filters&&!!Q.onFilter||Q.filters===void 0&&Q.onFilter===void 0})},[Ue,p]),Sn=g.useMemo(function(){var W=Ue(p);return W==null?void 0:W.every(function(Q){return Q.sorter!==!0})},[Ue,p]);g.useEffect(function(){var W=Lr(p),Q=W.sort,oe=W.filter;ln||Fe(oe),Sn||en(Q)},[]);var Cn=Me(),$n=Ae(v)==="object"?v:{defaultCurrent:1,defaultPageSize:20,pageSize:20,current:1},xe=g.useContext(Qe),pn=g.useMemo(function(){if(t)return function(){var W=Ce(le().mark(function Q(oe){var ge,Ne;return le().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ge=o(o(o({},oe||{}),se),l),delete ge._timestamp,ze.next=4,t(ge,Oe,ae);case 4:return Ne=ze.sent,ze.abrupt("return",Ne);case 6:case"end":return ze.stop()}},Q)}));return function(Q){return W.apply(this,arguments)}}()},[se,l,ae,Oe,t]),me=Gi(pn,u,{pageInfo:v===!1?!1:$n,loading:e.loading,dataSource:e.dataSource,onDataSourceChange:e.onDataSourceChange,onLoad:m,onLoadingChange:D,onRequestError:y,postData:d,revalidateOnFocus:O,manual:se===void 0,polling:U,effects:[un(l),un(se),un(ae),un(Oe)],debounceTime:e.debounceTime,onPageInfoChange:function(Q){var oe,ge;!v||!pn||(v==null||(oe=v.onChange)===null||oe===void 0||oe.call(v,Q.current,Q.pageSize),v==null||(ge=v.onShowSizeChange)===null||ge===void 0||ge.call(v,Q.current,Q.pageSize))}});g.useEffect(function(){var W;if(!(e.manualRequest||!e.request||!O||(W=e.form)!==null&&W!==void 0&&W.ignoreRules)){var Q=function(){document.visibilityState==="visible"&&me.reload()};return document.addEventListener("visibilitychange",Q),function(){return document.removeEventListener("visibilitychange",Q)}}},[]);var we=ce.useRef(new Map),pe=ce.useMemo(function(){return typeof _=="function"?_:function(W,Q){var oe;return Q===-1?W==null?void 0:W[_]:e.name?Q==null?void 0:Q.toString():(oe=W==null?void 0:W[_])!==null&&oe!==void 0?oe:Q==null?void 0:Q.toString()}},[e.name,_]);g.useMemo(function(){var W;if((W=me.dataSource)!==null&&W!==void 0&&W.length){var Q=me.dataSource.map(function(oe){var ge=pe(oe,-1);return we.current.set(ge,oe),ge});return Q}return[]},[me.dataSource,pe]);var Se=g.useMemo(function(){var W=v===!1?!1:o({},v),Q=o(o({},me.pageInfo),{},{setPageInfo:function(ge){var Ne=ge.pageSize,qe=ge.current,ze=me.pageInfo;if(Ne===ze.pageSize||ze.current===1){me.setPageInfo({pageSize:Ne,current:qe});return}t&&me.setDataSource([]),me.setPageInfo({pageSize:Ne,current:E==="list"?qe:1})}});return t&&W&&(delete W.onChange,delete W.onShowSizeChange),ti(W,Q,Cn)},[v,me,Cn]);Un(function(){var W;e.request&&!ho(l)&&me.dataSource&&!ri(me.dataSource,u)&&(me==null||(W=me.pageInfo)===null||W===void 0?void 0:W.current)!==1&&me.setPageInfo({current:1})},[l]),xe.setPrefixName(e.name);var ke=g.useCallback(function(){F&&F.onChange&&F.onChange([],[],{type:"none"}),Z([])},[F,Z]);xe.propsRef.current=e;var Pe=Ha(o(o({},e.editable),{},{tableName:e.name,getRowKey:pe,childrenColumnName:((r=e.expandable)===null||r===void 0?void 0:r.childrenColumnName)||"children",dataSource:me.dataSource||[],setDataSource:function(Q){var oe,ge;(oe=e.editable)===null||oe===void 0||(ge=oe.onValuesChange)===null||ge===void 0||ge.call(oe,void 0,Q),me.setDataSource(Q)}})),De=Rn===null||Rn===void 0?void 0:Rn.useToken(),nn=De.token;ai(J,me,{fullScreen:function(){var Q;if(!(!((Q=xe.rootDomRef)!==null&&Q!==void 0&&Q.current)||!document.fullscreenEnabled))if(document.fullscreenElement)document.exitFullscreen();else{var oe;(oe=xe.rootDomRef)===null||oe===void 0||oe.current.requestFullscreen()}},onCleanSelected:function(){ke()},resetAll:function(){var Q;ke();var oe=Lr(p),ge=oe.sort,Ne=oe.filter;Fe(Ne),en(ge),xe.setKeyWords(void 0),me.setPageInfo({current:1}),X==null||(Q=X.current)===null||Q===void 0||Q.resetFields(),Ie({})},editableUtils:Pe}),xe.setAction(J.current);var Be=g.useMemo(function(){var W;return yt({columns:p,counter:xe,columnEmptyText:k,type:E,marginSM:nn.marginSM,editableUtils:Pe,rowKey:_,childrenColumnName:(W=e.expandable)===null||W===void 0?void 0:W.childrenColumnName,proFilter:ae,proSort:Oe}).sort(Ui(xe.columnsMap))},[p,xe==null?void 0:xe.sortKeyColumns,xe==null?void 0:xe.columnsMap,k,E,Pe.editableKeys&&Pe.editableKeys.join(","),ae,Oe]);Gr(function(){if(Be&&Be.length>0){var W=Be.map(function(Q){return mn(Q.key,Q.index)});xe.setSortKeyColumns(W)}},[Be],["render","renderFormItem"],100),Un(function(){var W=me.pageInfo,Q=v||{},oe=Q.current,ge=oe===void 0?W==null?void 0:W.current:oe,Ne=Q.pageSize,qe=Ne===void 0?W==null?void 0:W.pageSize:Ne;v&&(ge||qe)&&(qe!==(W==null?void 0:W.pageSize)||ge!==(W==null?void 0:W.current))&&me.setPageInfo({pageSize:qe||W.pageSize,current:ge||W.current})},[v&&v.pageSize,v&&v.current]);var kn=o(o({selectedRowKeys:ve},F),{},{onChange:function(Q,oe,ge){F&&F.onChange&&F.onChange(Q,oe,ge),Z(Q)}}),xn=P!==!1&&(P==null?void 0:P.filterType)==="light",ir=g.useCallback(function(W){if(w&&w.search){var Q,oe,ge=w.search===!0?{}:w.search,Ne=ge.name,qe=Ne===void 0?"keyword":Ne,ze=(Q=w.search)===null||Q===void 0||(oe=Q.onSearch)===null||oe===void 0?void 0:oe.call(Q,xe.keyWords);if(ze!==!1){Ie(o(o({},W),{},h({},qe,xe.keyWords)));return}}Ie(W)},[xe.keyWords,w,Ie]),ur=g.useMemo(function(){if(Ae(me.loading)==="object"){var W;return((W=me.loading)===null||W===void 0?void 0:W.spinning)||!1}return me.loading},[me.loading]),sr=g.useMemo(function(){var W=P===!1&&E!=="form"?null:s.jsx(bi,{pagination:Se,beforeSearchSubmit:z,action:J,columns:p,onFormSearchSubmit:function(oe){ir(oe)},ghost:f,onReset:e.onReset,onSubmit:e.onSubmit,loading:!!ur,manualRequest:re,search:P,form:e.form,formRef:X,type:e.type||"table",cardBordered:e.cardBordered,dateFormatter:e.dateFormatter});return j&&W?s.jsx(s.Fragment,{children:j(e,W)}):W},[z,X,f,ur,re,ir,Se,e,p,P,j,E]),cr=g.useMemo(function(){return ve==null?void 0:ve.map(function(W){var Q;return(Q=we.current)===null||Q===void 0?void 0:Q.get(W)})},[me.dataSource,ve]),dr=g.useMemo(function(){return w===!1&&!c&&!x&&!$&&!xn},[w,c,x,$,xn]),St=x===!1?null:s.jsx(zi,{headerTitle:c,hideToolbar:dr,selectedRows:cr,selectedRowKeys:ve,tableColumn:Be,tooltip:te,toolbar:$,onFormSearchSubmit:function(Q){Ie(o(o({},se),Q))},searchNode:xn?sr:null,options:w,optionsRender:C,actionRef:J,toolBarRender:x}),Ct=F!==!1?s.jsx(vi,{selectedRowKeys:ve,selectedRows:cr,onCleanSelected:ke,alertOptionRender:N.tableAlertOptionRender,alertInfoRender:L,alwaysShowAlert:F==null?void 0:F.alwaysShowAlert}):null;return B(s.jsx(tu,o(o({},e),{},{name:A,defaultClassName:T,size:xe.tableSize,onSizeChange:xe.setTableSize,pagination:Se,searchNode:sr,rowSelection:F!==!1?kn:void 0,className:q,tableColumn:Be,isLightFilter:xn,action:me,alertDom:Ct,toolbarDom:St,hideToolbar:dr,onSortChange:function(Q){Sn||Q===Oe||en(Q)},onFilterChange:function(Q){ln||Q===ae||Fe(Q)},editableUtils:Pe,getRowKey:pe})))},bt=function(e){var r=g.useContext(je.ConfigContext),t=r.getPrefixCls,a=e.ErrorBoundary===!1?ce.Fragment:e.ErrorBoundary||wa;return s.jsx(si,{initValue:e,children:s.jsx(Jr,{needDeps:!0,children:s.jsx(a,{children:s.jsx(lu,o({defaultClassName:"".concat(t("pro-table"))},e))})})})};bt.Summary=cn.Summary;const kr="basic-table",ou=Tt(({prefixCls:n,isDark:e})=>({basicTable:{[`& .${n}-table`]:{[`& .${n}-table-container`]:{[`& .${n}-table-content, & .${n}-table-body`]:{"scrollbar-width":"thin","scrollbar-color":e?"#909399 transparent":"#eaeaea transparent","scrollbar-gutter":"stable"}}}}}));function gu(n){var p;const e=ou(),{t:r}=It(),{adaptive:t}=n,a=g.useRef(null),i=xa(a),{enableFooter:l,fixedFooter:u}=Ft(),[c,d]=g.useState(t?"initial":void 0),f=g.useMemo(()=>l&&u?jt:0,[l,u]),v=()=>n.pagination===!1?!1:{position:["bottomRight"],defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:x=>r("common.pagination",{total:x}),...n.pagination},b=g.useMemo(()=>{const x=v();return x===!1?0:x.size==="default"?64:56},[v]);g.useEffect(()=>{var x;if(Nt((x=n.scroll)==null?void 0:x.y)&&t&&a.current&&i!=null&&i.height){const C=a.current.getElementsByClassName(kr)[0];if(!C||a.current.getBoundingClientRect().top>window.innerHeight)return;const y=C.querySelector("div.ant-table-body");if(!y)return;const w=y.getBoundingClientRect(),A=(Et(t)?t.offsetBottom??16:16)+b+f,D=window.innerHeight-w.top-A;y.setAttribute("style",`overflow-y: auto;min-height: ${D}px;max-height: ${D}px;`),d(D)}},[i,t,b,f,(p=n.scroll)==null?void 0:p.y]);const S=()=>n.loading===!1?!1:n.loading===!0?!0:{indicator:s.jsx(Nn,{spin:!0}),...n.loading};return s.jsx("div",{className:"h-full",ref:a,children:s.jsx(bt,{cardBordered:!0,rowKey:"id",dateFormatter:"string",...n,options:{fullScreen:!0,...n.options},rootClassName:vr(kr,n.rootClassName),className:vr(e.basicTable,n.className),scroll:{y:c,x:"max-content",...n.scroll},loading:S(),pagination:v(),expandable:{...n.expandable}})})}export{gu as B};
