var Dt=n=>{throw TypeError(n)};var at=(n,e,t)=>e.has(n)||Dt("Cannot "+t);var Q=(n,e,t)=>(at(n,e,"read from private field"),t?t.call(n):e.get(n)),Ne=(n,e,t)=>e.has(n)?Dt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),xe=(n,e,t,r)=>(at(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),Ie=(n,e,t)=>(at(n,e,"access private method"),t);import{s as Xr,k as fr,t as Jr,v as Yr,x as Zr,y as ea,z as _t,j as u,S as Ot,A as zt,C as na,D as Vt,E as ta,F as Ht,G as Xe,H as ft,J as Wn,K as ra,M as vt,N as Wt,O as aa,P as la,Q as oa,R as Ut,U as vr,V as ia,u as sa,B as Gt}from"./index-Qb6QFv69.js";import{i as mr,D as ua,s as ca,n as da,u as lt,a as fa,f as va,b as ma,c as ha,d as pa}from"./detail-Dh6pZ3vc.js";import{u as ga,r as h,R as se,d as mt}from"./react-ez5sQda2.js";import{B as ya}from"./index-kw6J0sC9.js";import{aE as ba,aF as jt,aG as Nt,b as Mt,aH as Bt,aI as S,d as Je,aj as Sa,at as i,as as we,aq as Ze,aJ as en,ar as ue,ac as Ae,P as hr,aK as Yn,x as pr,M as Ca,aL as xa,aM as Ee,aN as dn,a5 as qt,av as be,aw as le,e as Oe,aO as ze,aP as gr,aQ as Ra,aR as Qn,aS as Se,aT as yr,af as rn,ag as Me,aU as Zn,O as En,aV as Lt,aW as wa,aX as Ta,y as Nn,au as br,aY as Pa,a8 as Ia,N as ht,aZ as Sr,a_ as Qt,B as Un,p as Fa,a$ as cn,ay as Ea,T as Sn,l as ja,aB as Na,H as Ma,J as Ba,G as La,q as Cr,b0 as Aa,z as Ka,E as $a,b1 as ka,aC as Da,ae as _a}from"./antd-7iRxzvCa.js";import{L as jn,a as Oa,P as et}from"./index-BVxQz0tT.js";import{u as He,a as za,o as xr,r as Ge,b as nt,g as Va,d as Ye,e as De,f as Rr,h as Re,i as wr,P as Tr,m as Pr,j as ot,k as Ve,c as Ha,l as Wa,F as Ua,n as Ga,p as Cn,q as Ir,s as Fr,t as qa,v as Xt,w as wn,x as Qa,y as Er,z as Gn,A as pt,B as Xa,C as Ja,G as Ya}from"./index-CBCdRiyk.js";import{u as qn,B as tt,m as gt,b as jr,P as Xn,i as Za,c as yt,d as bt,e as Nr,f as el,g as St,h as nl,j as tl,M as rl,k as al,U as Jt,l as Yt,S as it,p as ll}from"./BaseForm-BArlJRft.js";import"./faker-CiQWN7dT.js";function ol(){const n=ga(),e=n[n.length-1];return r=>{var l;if(!r)return!1;const a=(l=e==null?void 0:e.handle)==null?void 0:l.permissions;return a?(r=Xr(r)?[r]:r,r=r.map(o=>`permission:button:${o.toLowerCase()}`),a.some(o=>r.includes(o))):!1}}function il(n){var e=h.useRef(0),t=fr(h.useState(n),2),r=t[0],a=t[1],s=h.useCallback(function(l){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){a(l)})},[]);return Jr(function(){cancelAnimationFrame(e.current)}),[r,s]}var sl=Yr(h.useLayoutEffect),ul=Zr?sl:ea;function cl(n){var e=fr(il(function(){var a=_t(n);return a?{width:a.clientWidth,height:a.clientHeight}:void 0}),2),t=e[0],r=e[1];return ul(function(){var a=_t(n);if(a){var s=new ba(function(l){l.forEach(function(o){var c=o.target,d=c.clientWidth,m=c.clientHeight;r({width:d,height:m})})});return s.observe(a),function(){s.disconnect()}}},[],n),t}function dl(n,e,t,r){if(!Array.isArray(n))return console.warn("data must be an array"),[];const a={id:"id",parentId:"parentId",childrenList:"children"},s={},l={},o=[];for(const d of n){const m=d[a.parentId];s[m]==null&&(s[m]=[]),l[d[a.id]]=d,s[m].push(d)}for(const d of n){const m=d[a.parentId];l[m]==null&&o.push(d)}for(const d of o)c(d);function c(d){if(s[d[a.id]]!==null&&(d[a.childrenList]=s[d[a.id]]),d[a.childrenList])for(const m of d[a.childrenList])c(m)}return o}var fl=function(n){jt(t,n);var e=Nt(t);function t(){var r;Bt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Je(r),"state",{hasError:!1,errorInfo:""}),r}return Mt(t,[{key:"componentDidCatch",value:function(a,s){console.log(a,s)}},{key:"render",value:function(){return this.state.hasError?u.jsx(Sa,{status:"error",title:"Something went wrong.",extra:this.state.errorInfo}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(a){return{hasError:!0,errorInfo:a.message}}}]),t}(se.Component),vl=function(e){var t="".concat(e.antCls,"-progress-bg");return S({},e.componentCls,{"&-multiple":{paddingBlockStart:6,paddingBlockEnd:12,paddingInline:8},"&-progress":{"&-success":S({},t,{backgroundColor:e.colorSuccess}),"&-error":S({},t,{backgroundColor:e.colorError}),"&-warning":S({},t,{backgroundColor:e.colorWarning})},"&-rule":{display:"flex",alignItems:"center","&-icon":{"&-default":{display:"flex",alignItems:"center",justifyContent:"center",width:"14px",height:"22px","&-circle":{width:"6px",height:"6px",backgroundColor:e.colorTextSecondary,borderRadius:"4px"}},"&-loading":{color:e.colorPrimary},"&-error":{color:e.colorError},"&-success":{color:e.colorSuccess}},"&-text":{color:e.colorText}}})};function ml(n){return He("InlineErrorFormItem",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[vl(t)]})}var hl=["rules","name","children","popoverProps"],pl=["errorType","rules","name","popoverProps","children"],Mr={marginBlockStart:-5,marginBlockEnd:-5,marginInlineStart:0,marginInlineEnd:0},gl=function(e){var t=e.inputProps,r=e.input,a=e.extra,s=e.errorList,l=e.popoverProps,o=h.useState(!1),c=ue(o,2),d=c[0],m=c[1],f=h.useState([]),y=ue(f,2),b=y[0],v=y[1],C=h.useContext(Ae.ConfigContext),x=C.getPrefixCls,g=x(),p=za(),R=ml("".concat(g,"-form-item-with-help")),w=R.wrapSSR,k=R.hashId;h.useEffect(function(){t.validateStatus!=="validating"&&v(t.errors)},[t.errors,t.validateStatus]);var z=xr(b.length<1?!1:d,function(E){E!==d&&m(E)}),M=t.validateStatus==="validating";return u.jsx(hr,i(i(i({trigger:(l==null?void 0:l.trigger)||["click"],placement:(l==null?void 0:l.placement)||"topLeft"},z),{},{getPopupContainer:l==null?void 0:l.getPopupContainer,getTooltipContainer:l==null?void 0:l.getTooltipContainer,content:w(u.jsx("div",{className:"".concat(g,"-form-item ").concat(k," ").concat(p.hashId).trim(),style:{margin:0,padding:0},children:u.jsxs("div",{className:"".concat(g,"-form-item-with-help ").concat(k," ").concat(p.hashId).trim(),children:[M?u.jsx(Yn,{}):null,s]})}))},l),{},{children:u.jsxs(u.Fragment,{children:[r,a]})}),"popover")},yl=function(e){var t=e.rules,r=e.name,a=e.children,s=e.popoverProps,l=we(e,hl);return u.jsx(Ze.Item,i(i({name:r,rules:t,hasFeedback:!1,shouldUpdate:function(c,d){if(c===d)return!1;var m=[r].flat(1);m.length>1&&m.pop();try{return JSON.stringify(en(c,m))!==JSON.stringify(en(d,m))}catch{return!0}},_internalItemRender:{mark:"pro_table_render",render:function(c,d){return u.jsx(gl,i({inputProps:c,popoverProps:s},d))}}},l),{},{style:i(i({},Mr),l==null?void 0:l.style),children:a}))},bl=function(e){var t=e.errorType,r=e.rules,a=e.name,s=e.popoverProps,l=e.children,o=we(e,pl);return a&&r!==null&&r!==void 0&&r.length&&t==="popover"?u.jsx(yl,i(i({name:a,rules:r,popoverProps:s},o),{},{children:l})):u.jsx(Ze.Item,i(i({rules:r,shouldUpdate:a?function(c,d){if(c===d)return!1;var m=[a].flat(1);m.length>1&&m.pop();try{return JSON.stringify(en(c,m))!==JSON.stringify(en(d,m))}catch{return!0}}:void 0},o),{},{style:i(i({},Mr),o.style),name:a,children:l}))},Sl=function(e){var t;return!!(e!=null&&(t=e.valueType)!==null&&t!==void 0&&t.toString().startsWith("date")||(e==null?void 0:e.valueType)==="select"||e!=null&&e.valueEnum)},Cl=function(e){var t;return((t=e.ellipsis)===null||t===void 0?void 0:t.showTitle)===!1?!1:e.ellipsis},xl=function(e,t,r){if(t.copyable||t.ellipsis){var a=t.copyable&&r?{text:r,tooltips:["",""]}:void 0,s=Sl(t),l=Cl(t)&&r?{tooltip:(t==null?void 0:t.tooltip)!==!1&&s?u.jsx("div",{className:"pro-table-tooltip-text",children:e}):r}:!1;return u.jsx(pr.Text,{style:{width:"100%",margin:0,padding:0},title:"",copyable:a,ellipsis:l,children:e})}return e},Ct=function(e,t,r){return t===void 0?e:Ge(e,t,r)},Br=function(e){var t=nt(Va(),"4.24.0")>-1?{menu:e}:{overlay:u.jsx(Ca,i({},e))};return Ye(t)};function Rl(){var n=h.useState(!0),e=ue(n,2),t=e[1],r=h.useCallback(function(){return t(function(a){return!a})},[]);return r}function wl(n,e){var t=h.useMemo(function(){var r={current:e};return new Proxy(r,{set:function(s,l,o){return Object.is(s[l],o)||(s[l]=o,n(t)),!0}})},[]);return t}function Tl(n){var e=Rl(),t=wl(e,n);return t}var Lr=function(e){if(e&&e!==!0)return e},Pl=function(e){var t={};return Object.keys(e||{}).forEach(function(r){var a;Array.isArray(e[r])&&((a=e[r])===null||a===void 0?void 0:a.length)===0||e[r]!==void 0&&(t[r]=e[r])}),t},Il=["map_row_parentKey"],Fl=["map_row_parentKey","map_row_key"],El=["map_row_key"],st=function(e){return(qt.warn||qt.warning)(e)},$e=function(e){return Array.isArray(e)?e.join(","):e};function An(n,e){var t,r=n.getRowKey,a=n.row,s=n.data,l=n.childrenColumnName,o=l===void 0?"children":l,c=(t=$e(n.key))===null||t===void 0?void 0:t.toString(),d=new Map;function m(y,b,v){y.forEach(function(C,x){var g=(v||0)*10+x,p=r(C,g).toString();C&&ze(C)==="object"&&o in C&&m(C[o]||[],p,g);var R=i(i({},C),{},{map_row_key:p,children:void 0,map_row_parentKey:b});delete R.children,b||delete R.map_row_parentKey,d.set(p,R)})}e==="top"&&d.set(c,i(i({},d.get(c)),a)),m(s),e==="update"&&d.set(c,i(i({},d.get(c)),a)),e==="delete"&&d.delete(c);var f=function(b){var v=new Map,C=[],x=function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;b.forEach(function(R){if(R.map_row_parentKey&&!R.map_row_key){var w=R.map_row_parentKey,k=we(R,Il);if(v.has(w)||v.set(w,[]),p){var z;(z=v.get(w))===null||z===void 0||z.push(k)}}})};return x(e==="top"),b.forEach(function(g){if(g.map_row_parentKey&&g.map_row_key){var p,R=g.map_row_parentKey,w=g.map_row_key,k=we(g,Fl);v.has(w)&&(k[o]=v.get(w)),v.has(R)||v.set(R,[]),(p=v.get(R))===null||p===void 0||p.push(k)}}),x(e==="update"),b.forEach(function(g){if(!g.map_row_parentKey){var p=g.map_row_key,R=we(g,El);if(p&&v.has(p)){var w=i(i({},R),{},S({},o,v.get(p)));C.push(w);return}C.push(R)}}),C};return f(d)}function jl(n,e){var t=n.recordKey,r=n.onSave,a=n.row,s=n.children,l=n.newLineConfig,o=n.editorType,c=n.tableName,d=h.useContext(Tr),m=Ze.useFormInstance(),f=Ee(!1),y=ue(f,2),b=y[0],v=y[1],C=Re(be(le().mark(function x(){var g,p,R,w,k,z,M,E,K;return le().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,p=o==="Map",R=[c,Array.isArray(t)?t[0]:t].map(function(N){return N==null?void 0:N.toString()}).flat(1).filter(Boolean),v(!0),T.next=6,m.validateFields(R,{recursive:!0});case 6:return w=(d==null||(g=d.getFieldFormatValue)===null||g===void 0?void 0:g.call(d,R))||m.getFieldValue(R),Array.isArray(t)&&t.length>1&&(k=Ra(t),z=k.slice(1),M=en(w,z),Qn(w,z,M)),E=p?Qn({},R,w):w,T.next=11,r==null?void 0:r(t,Pr({},a,E),a,l);case 11:return K=T.sent,v(!1),T.abrupt("return",K);case 16:throw T.prev=16,T.t0=T.catch(0),console.log(T.t0),v(!1),T.t0;case 21:case"end":return T.stop()}},x,null,[[0,16]])})));return h.useImperativeHandle(e,function(){return{save:C}},[C]),u.jsxs("a",{onClick:function(){var x=be(le().mark(function g(p){return le().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p.stopPropagation(),p.preventDefault(),w.prev=2,w.next=5,C();case 5:w.next=9;break;case 7:w.prev=7,w.t0=w.catch(2);case 9:case"end":return w.stop()}},g,null,[[2,7]])}));return function(g){return x.apply(this,arguments)}}(),children:[b?u.jsx(Yn,{style:{marginInlineEnd:8}}):null,s||"保存"]},"save")}var Nl=function(e){var t=e.recordKey,r=e.onDelete,a=e.preEditRowRef,s=e.row,l=e.children,o=e.deletePopconfirmMessage,c=Ee(function(){return!1}),d=ue(c,2),m=d[0],f=d[1],y=Re(be(le().mark(function b(){var v;return le().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.prev=0,f(!0),x.next=4,r==null?void 0:r(t,s);case 4:return v=x.sent,f(!1),x.abrupt("return",v);case 9:return x.prev=9,x.t0=x.catch(0),console.log(x.t0),f(!1),x.abrupt("return",null);case 14:return x.prev=14,a&&(a.current=null),x.finish(14);case 17:case"end":return x.stop()}},b,null,[[0,9,14,17]])})));return l!==!1?u.jsx(gr,{title:o,onConfirm:function(){return y()},children:u.jsxs("a",{children:[m?u.jsx(Yn,{style:{marginInlineEnd:8}}):null,l||"删除"]})},"delete"):null},Ml=function(e){var t=e.recordKey,r=e.tableName,a=e.newLineConfig,s=e.editorType,l=e.onCancel,o=e.cancelEditable,c=e.row,d=e.cancelText,m=e.preEditRowRef,f=h.useContext(Tr),y=Ze.useFormInstance();return u.jsx("a",{onClick:function(){var b=be(le().mark(function v(C){var x,g,p,R,w,k,z;return le().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return C.stopPropagation(),C.preventDefault(),g=s==="Map",p=[r,t].flat(1).filter(Boolean),R=(f==null||(x=f.getFieldFormatValue)===null||x===void 0?void 0:x.call(f,p))||(y==null?void 0:y.getFieldValue(p)),w=g?Qn({},p,R):R,E.next=8,l==null?void 0:l(t,w,c,a);case 8:return k=E.sent,E.next=11,o(t);case 11:if((m==null?void 0:m.current)===null){E.next=15;break}y.setFieldsValue(Qn({},p,m==null?void 0:m.current)),E.next=17;break;case 15:return E.next=17,(z=e.onDelete)===null||z===void 0?void 0:z.call(e,t,c);case 17:return m&&(m.current=null),E.abrupt("return",k);case 19:case"end":return E.stop()}},v)}));return function(v){return b.apply(this,arguments)}}(),children:d||"取消"},"cancel")};function Bl(n,e){var t=e.recordKey,r=e.newLineConfig,a=e.saveText,s=e.deleteText,l=h.forwardRef(jl),o=h.createRef();return{save:u.jsx(l,i(i({},e),{},{row:n,ref:o,children:a}),"save"+t),saveRef:o,delete:(r==null?void 0:r.options.recordKey)!==t?u.jsx(Nl,i(i({},e),{},{row:n,children:s}),"delete"+t):void 0,cancel:u.jsx(Ml,i(i({},e),{},{row:n}),"cancel"+t)}}function Ll(n){var e=De(),t=h.useRef(null),r=h.useState(void 0),a=ue(r,2),s=a[0],l=a[1],o=function(){var I=new Map,j=function B(F,V){F==null||F.forEach(function(Y,X){var J,G=V==null?X.toString():V+"_"+X.toString();I.set(G,$e(n.getRowKey(Y,-1))),I.set((J=$e(n.getRowKey(Y,-1)))===null||J===void 0?void 0:J.toString(),G),n.childrenColumnName&&Y!==null&&Y!==void 0&&Y[n.childrenColumnName]&&B(Y[n.childrenColumnName],G)})};return j(n.dataSource),I},c=h.useMemo(function(){return o()},[]),d=h.useRef(c),m=h.useRef(void 0);Rr(function(){d.current=o()},[n.dataSource]),m.current=s;var f=n.type||"single",y=xa(n.dataSource,"children",n.getRowKey),b=ue(y,1),v=b[0],C=Ee([],{value:n.editableKeys,onChange:n.onChange?function(D){var I,j,B;n==null||(I=n.onChange)===null||I===void 0||I.call(n,(j=D==null?void 0:D.filter(function(F){return F!==void 0}))!==null&&j!==void 0?j:[],(B=D==null?void 0:D.map(function(F){return v(F)}).filter(function(F){return F!==void 0}))!==null&&B!==void 0?B:[])}:void 0}),x=ue(C,2),g=x[0],p=x[1],R=h.useMemo(function(){var D=f==="single"?g==null?void 0:g.slice(0,1):g;return new Set(D)},[(g||[]).join(","),f]),w=qn(g),k=Re(function(D){var I,j,B,F,V=(I=n.getRowKey(D,D.index))===null||I===void 0||(j=I.toString)===null||j===void 0?void 0:j.call(I),Y=(B=n.getRowKey(D,-1))===null||B===void 0||(F=B.toString)===null||F===void 0?void 0:F.call(B),X=g==null?void 0:g.map(function(ce){return ce==null?void 0:ce.toString()}),J=(w==null?void 0:w.map(function(ce){return ce==null?void 0:ce.toString()}))||[],G=n.tableName&&!!(J!=null&&J.includes(Y))||!!(J!=null&&J.includes(V));return{recordKey:Y,isEditable:n.tableName&&(X==null?void 0:X.includes(Y))||(X==null?void 0:X.includes(V)),preIsEditable:G}}),z=Re(function(D,I){var j,B;return R.size>0&&f==="single"&&n.onlyOneLineEditorAlertMessage!==!1?(st(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1):(R.add(D),p(Array.from(R)),t.current=(j=I??((B=n.dataSource)===null||B===void 0?void 0:B.find(function(F,V){return n.getRowKey(F,V)===D})))!==null&&j!==void 0?j:null,!0)}),M=Re(function(){var D=be(le().mark(function I(j,B){var F,V;return le().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:if(F=$e(j).toString(),V=d.current.get(F),!(!R.has(F)&&V&&(B??!0)&&n.tableName)){X.next=5;break}return M(V,!1),X.abrupt("return");case 5:return s&&s.options.recordKey===j&&l(void 0),R.delete(F),R.delete($e(j)),p(Array.from(R)),X.abrupt("return",!0);case 10:case"end":return X.stop()}},I)}));return function(I,j){return D.apply(this,arguments)}}()),E=wr(be(le().mark(function D(){var I,j,B,F,V=arguments;return le().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:for(j=V.length,B=new Array(j),F=0;F<j;F++)B[F]=V[F];(I=n.onValuesChange)===null||I===void 0||I.call.apply(I,[n].concat(B));case 2:case"end":return X.stop()}},D)})),64),K=Re(function(D,I){var j;if(n.onValuesChange){var B=n.dataSource;g==null||g.forEach(function(J){if((s==null?void 0:s.options.recordKey)!==J){var G=J.toString(),ce=en(I,[n.tableName||"",G].flat(1).filter(function(ne){return ne||ne===0}));ce&&(B=An({data:B,getRowKey:n.getRowKey,row:ce,key:G,childrenColumnName:n.childrenColumnName||"children"},"update"))}});var F=D,V=(j=Object.keys(F||{}).pop())===null||j===void 0?void 0:j.toString(),Y=i(i({},s==null?void 0:s.defaultValue),en(I,[n.tableName||"",V.toString()].flat(1).filter(function(J){return J||J===0}))),X=d.current.has($e(V))?B.find(function(J,G){var ce,ne=(ce=n.getRowKey(J,G))===null||ce===void 0?void 0:ce.toString();return ne===V}):Y;E.run(X||Y,B)}}),$=h.useRef(new Map);h.useEffect(function(){$.current.forEach(function(D,I){R.has(I)||$.current.delete(I)})},[$,R]);var T=Re(function(){var D=be(le().mark(function I(j,B){var F,V,Y,X;return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(F=$e(j),V=d.current.get(j.toString()),!(!R.has(F)&&V&&(B??!0)&&n.tableName)){G.next=6;break}return G.next=5,T(V,!1);case 5:return G.abrupt("return",G.sent);case 6:return Y=$.current.get(F)||$.current.get(F.toString()),G.prev=7,G.next=10,Y==null||(X=Y.current)===null||X===void 0?void 0:X.save();case 10:G.next=15;break;case 12:return G.prev=12,G.t0=G.catch(7),G.abrupt("return",!1);case 15:return R.delete(F),R.delete(F.toString()),p(Array.from(R)),G.abrupt("return",!0);case 19:case"end":return G.stop()}},I,null,[[7,12]])}));return function(I,j){return D.apply(this,arguments)}}()),N=Re(function(D,I){if(I!=null&&I.parentKey&&!d.current.has($e(I==null?void 0:I.parentKey).toString()))return console.warn("can't find record by key",I==null?void 0:I.parentKey),!1;if(m.current&&n.onlyAddOneLineAlertMessage!==!1)return st(n.onlyAddOneLineAlertMessage||e.getMessage("editableTable.onlyAddOneLine","只能新增一行")),!1;if(R.size>0&&f==="single"&&n.onlyOneLineEditorAlertMessage!==!1)return st(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1;var j=n.getRowKey(D,-1);if(!j&&j!==0)throw dn(!!j,`请设置 recordCreatorProps.record 并返回一个唯一的key  
  https://procomponents.ant.design/components/editable-table#editable-%E6%96%B0%E5%BB%BA%E8%A1%8C`),new Error("请设置 recordCreatorProps.record 并返回一个唯一的key");if(R.add(j),p(Array.from(R)),(I==null?void 0:I.newRecordType)==="dataSource"||n.tableName){var B,F={data:n.dataSource,getRowKey:n.getRowKey,row:i(i({},D),{},{map_row_parentKey:I!=null&&I.parentKey?(B=$e(I==null?void 0:I.parentKey))===null||B===void 0?void 0:B.toString():void 0}),key:j,childrenColumnName:n.childrenColumnName||"children"};n.setDataSource(An(F,(I==null?void 0:I.position)==="top"?"top":"update"))}else l({defaultValue:D,options:i(i({},I),{},{recordKey:j})});return!0}),W=(n==null?void 0:n.saveText)||e.getMessage("editableTable.action.save","保存"),L=(n==null?void 0:n.deleteText)||e.getMessage("editableTable.action.delete","删除"),P=(n==null?void 0:n.cancelText)||e.getMessage("editableTable.action.cancel","取消"),O=Re(function(){var D=be(le().mark(function I(j,B,F,V){var Y,X,J,G,ce,ne,he;return le().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,n==null||(Y=n.onSave)===null||Y===void 0?void 0:Y.call(n,j,B,F,V);case 2:return G=re.sent,re.next=5,M(j);case 5:if(ce=V||m.current||{},ne=ce.options,!(!(ne!=null&&ne.parentKey)&&(ne==null?void 0:ne.recordKey)===j)){re.next=9;break}return(ne==null?void 0:ne.position)==="top"?n.setDataSource([B].concat(Oe(n.dataSource))):n.setDataSource([].concat(Oe(n.dataSource),[B])),re.abrupt("return",G);case 9:return he={data:n.dataSource,getRowKey:n.getRowKey,row:ne?i(i({},B),{},{map_row_parentKey:(X=$e((J=ne==null?void 0:ne.parentKey)!==null&&J!==void 0?J:""))===null||X===void 0?void 0:X.toString()}):B,key:j,childrenColumnName:n.childrenColumnName||"children"},n.setDataSource(An(he,(ne==null?void 0:ne.position)==="top"?"top":"update")),re.next=13,M(j);case 13:return re.abrupt("return",G);case 14:case"end":return re.stop()}},I)}));return function(I,j,B,F){return D.apply(this,arguments)}}()),A=Re(function(){var D=be(le().mark(function I(j,B){var F,V,Y;return le().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return V={data:n.dataSource,getRowKey:n.getRowKey,row:B,key:j,childrenColumnName:n.childrenColumnName||"children"},J.next=3,n==null||(F=n.onDelete)===null||F===void 0?void 0:F.call(n,j,B);case 3:return Y=J.sent,J.next=6,M(j,!1);case 6:return n.setDataSource(An(V,"delete")),J.abrupt("return",Y);case 8:case"end":return J.stop()}},I)}));return function(I,j){return D.apply(this,arguments)}}()),q=Re(function(){var D=be(le().mark(function I(j,B,F,V){var Y,X;return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,n==null||(Y=n.onCancel)===null||Y===void 0?void 0:Y.call(n,j,B,F,V);case 2:return X=G.sent,G.abrupt("return",X);case 4:case"end":return G.stop()}},I)}));return function(I,j,B,F){return D.apply(this,arguments)}}()),ee=n.actionRender&&typeof n.actionRender=="function",_=ee?n.actionRender:function(){},H=Re(_),U=function(I){var j=n.getRowKey(I,I.index),B={saveText:W,cancelText:P,deleteText:L,addEditRecord:N,recordKey:j,cancelEditable:M,index:I.index,tableName:n.tableName,newLineConfig:s,onCancel:q,onDelete:A,onSave:O,editableKeys:g,setEditableRowKeys:p,preEditRowRef:t,deletePopconfirmMessage:n.deletePopconfirmMessage||"".concat(e.getMessage("deleteThisLine","删除此项"),"?")},F=Bl(I,B);return n.tableName?$.current.set(d.current.get($e(j))||$e(j),F.saveRef):$.current.set($e(j),F.saveRef),ee?H(I,B,{save:F.save,delete:F.delete,cancel:F.cancel}):[F.save,F.delete,F.cancel]};return{editableKeys:g,setEditableRowKeys:p,isEditable:k,actionRender:U,startEditable:z,cancelEditable:M,addEditRecord:N,saveEditable:T,newLineRecord:s,preEditableKeys:w,onValuesChange:K,getRealIndex:n.getRealIndex}}var Al=function(e){var t=e.componentCls,r=e.antCls;return S({},"".concat(t,"-actions"),S(S({marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,listStyle:"none",display:"flex",gap:e.marginXS,background:e.colorBgContainer,borderBlockStart:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit),minHeight:42},"& > *",{alignItems:"center",justifyContent:"center",flex:1,display:"flex",cursor:"pointer",color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),"& > li > div",{flex:1,width:"100%",marginBlock:e.marginSM,marginInline:0,color:e.colorTextSecondary,textAlign:"center",a:{color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}},div:S(S({position:"relative",display:"block",minWidth:32,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimaryHover,transition:"color 0.3s"}},"a:not(".concat(r,`-btn),
            > .anticon`),{display:"inline-block",width:"100%",color:e.colorTextSecondary,lineHeight:"22px",transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),".anticon",{fontSize:e.cardActionIconSize,lineHeight:"22px"}),"&:not(:last-child)":{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}}))};function Kl(n){return He("ProCardActions",function(e){var t=i(i({},e),{},{componentCls:".".concat(n),cardActionIconSize:16});return[Al(t)]})}var $l=function(e){var t=e.actions,r=e.prefixCls,a=Kl(r),s=a.wrapSSR,l=a.hashId;return Array.isArray(t)&&t!==null&&t!==void 0&&t.length?s(u.jsx("ul",{className:Se("".concat(r,"-actions"),l),children:t.map(function(o,c){return u.jsx("li",{style:{width:"".concat(100/t.length,"%"),padding:0,margin:0},className:Se("".concat(r,"-actions-item"),l),children:o},"action-".concat(c))})})):s(u.jsx("ul",{className:Se("".concat(r,"-actions"),l),children:t}))},kl=new yr("card-loading",{"0%":{backgroundPosition:"0 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),Dl=function(e){return S({},e.componentCls,S(S({"&-loading":{overflow:"hidden"},"&-loading &-body":{userSelect:"none"}},"".concat(e.componentCls,"-loading-content"),{width:"100%",p:{marginBlock:0,marginInline:0}}),"".concat(e.componentCls,"-loading-block"),{height:"14px",marginBlock:"4px",background:"linear-gradient(90deg, rgba(54, 61, 64, 0.2), rgba(54, 61, 64, 0.4), rgba(54, 61, 64, 0.2))",backgroundSize:"600% 600%",borderRadius:e.borderRadius,animationName:kl,animationDuration:"1.4s",animationTimingFunction:"ease",animationIterationCount:"infinite"}))};function _l(n){return He("ProCardLoading",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Dl(t)]})}var Ol=function(e){var t=e.style,r=e.prefix,a=_l(r||"ant-pro-card"),s=a.wrapSSR;return s(u.jsxs("div",{className:"".concat(r,"-loading-content"),style:t,children:[u.jsx(rn,{gutter:8,children:u.jsx(Me,{span:22,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})}),u.jsxs(rn,{gutter:8,children:[u.jsx(Me,{span:8,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:15,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(rn,{gutter:8,children:[u.jsx(Me,{span:6,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:18,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(rn,{gutter:8,children:[u.jsx(Me,{span:13,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:9,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]}),u.jsxs(rn,{gutter:8,children:[u.jsx(Me,{span:4,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:3,children:u.jsx("div",{className:"".concat(r,"-loading-block")})}),u.jsx(Me,{span:16,children:u.jsx("div",{className:"".concat(r,"-loading-block")})})]})]}))},zl=["tab","children"],Vl=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"];function Hl(n){return n.filter(function(e){return e})}function Wl(n,e,t){if(n)return n.map(function(a){return i(i({},a),{},{children:u.jsx($n,i(i({},t==null?void 0:t.cardProps),{},{children:a.children}))})});dn(!t,"Tabs.TabPane is deprecated. Please use `items` directly.");var r=Lt(e).map(function(a){if(se.isValidElement(a)){var s=a.key,l=a.props,o=l||{},c=o.tab,d=o.children,m=we(o,zl),f=i(i({key:String(s)},m),{},{children:u.jsx($n,i(i({},t==null?void 0:t.cardProps),{},{children:d})),label:c});return f}return null});return Hl(r)}var Ul=function(e){var t=h.useContext(Ae.ConfigContext),r=t.getPrefixCls;if(Zn.startsWith("5"))return u.jsx(u.Fragment,{});var a=e.key,s=e.tab,l=e.tabKey,o=e.disabled,c=e.destroyInactiveTabPane,d=e.children,m=e.className,f=e.style,y=e.cardProps,b=we(e,Vl),v=r("pro-card-tabpane"),C=Se(v,m);return u.jsx(En.TabPane,i(i({tabKey:l,tab:s,className:C,style:f,disabled:o,destroyInactiveTabPane:c},b),{},{children:u.jsx($n,i(i({},y),{},{children:d}))}),a)};var Zt=function(e){return{backgroundColor:e.controlItemBgActive,borderColor:e.controlOutline}},Gl=function(e){var t=e.componentCls;return S(S(S({},t,i(i({position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box",width:"100%",marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,backgroundColor:e.colorBgContainer,borderRadius:e.borderRadius,transition:"all 0.3s"},ot===null||ot===void 0?void 0:ot(e)),{},S(S(S(S(S(S(S(S(S(S({"&-box-shadow":{boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017",borderColor:"transparent"},"&-col":{width:"100%"},"&-border":{border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-hoverable":S({cursor:"pointer",transition:"box-shadow 0.3s, border-color 0.3s","&:hover":{borderColor:"transparent",boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017"}},"&".concat(t,"-checked:hover"),{borderColor:e.controlOutline}),"&-checked":i(i({},Zt(e)),{},{"&::after":{visibility:"visible",position:"absolute",insetBlockStart:2,insetInlineEnd:2,opacity:1,width:0,height:0,border:"6px solid ".concat(e.colorPrimary),borderBlockEnd:"6px solid transparent",borderInlineStart:"6px solid transparent",borderStartEndRadius:2,content:'""'}}),"&:focus":i({},Zt(e)),"&&-ghost":S({backgroundColor:"transparent"},"> ".concat(t),{"&-header":{paddingInlineEnd:0,paddingBlockEnd:e.padding,paddingInlineStart:0},"&-body":{paddingBlock:0,paddingInline:0,backgroundColor:"transparent"}}),"&&-split > &-body":{paddingBlock:0,paddingInline:0},"&&-contain-card > &-body":{display:"flex"}},"".concat(t,"-body-direction-column"),{flexDirection:"column"}),"".concat(t,"-body-wrap"),{flexWrap:"wrap"}),"&&-collapse",S({},"> ".concat(t),{"&-header":{paddingBlockEnd:e.padding,borderBlockEnd:0},"&-body":{display:"none"}})),"".concat(t,"-header"),{display:"flex",alignItems:"center",justifyContent:"space-between",paddingInline:e.paddingLG,paddingBlock:e.padding,paddingBlockEnd:0,"&-border":{"&":{paddingBlockEnd:e.padding},borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-collapsible":{cursor:"pointer"}}),"".concat(t,"-title"),{color:e.colorText,fontWeight:500,fontSize:e.fontSizeLG,lineHeight:e.lineHeight}),"".concat(t,"-extra"),{color:e.colorText}),"".concat(t,"-type-inner"),S({},"".concat(t,"-header"),{backgroundColor:e.colorFillAlter})),"".concat(t,"-collapsible-icon"),{marginInlineEnd:e.marginXS,color:e.colorIconHover,":hover":{color:e.colorPrimaryHover},"& svg":{transition:"transform ".concat(e.motionDurationMid)}}),"".concat(t,"-body"),{display:"block",boxSizing:"border-box",height:"100%",paddingInline:e.paddingLG,paddingBlock:e.padding,"&-center":{display:"flex",alignItems:"center",justifyContent:"center"}}),"&&-size-small",S(S({},t,{"&-header":{paddingInline:e.paddingSM,paddingBlock:e.paddingXS,paddingBlockEnd:0,"&-border":{paddingBlockEnd:e.paddingXS}},"&-title":{fontSize:e.fontSize},"&-body":{paddingInline:e.paddingSM,paddingBlock:e.paddingSM}}),"".concat(t,"-header").concat(t,"-header-collapsible"),{paddingBlock:e.paddingXS})))),"".concat(t,"-col"),S(S({},"&".concat(t,"-split-vertical"),{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),"&".concat(t,"-split-horizontal"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)})),"".concat(t,"-tabs"),S(S(S(S(S(S({},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:e.marginXS,paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-bottom > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-left"),S({},"".concat(e.antCls,"-tabs-content-holder"),S({},"".concat(e.antCls,"-tabs-content"),S({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-left > ").concat(e.antCls,"-tabs-nav"),S({marginInlineEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})),"".concat(e.antCls,"-tabs-right"),S({},"".concat(e.antCls,"-tabs-content-holder"),S({},"".concat(e.antCls,"-tabs-content"),S({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-right > ").concat(e.antCls,"-tabs-nav"),S({},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})))},Ar=24,ql=function(e,t){var r=t.componentCls;return e===0?S({},"".concat(r,"-col-0"),{display:"none"}):S({},"".concat(r,"-col-").concat(e),{flexShrink:0,width:"".concat(e/Ar*100,"%")})},Ql=function(e){return Array(Ar+1).fill(1).map(function(t,r){return ql(r,e)})};function Xl(n){return He("ProCard",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Gl(t),Ql(t)]})}var Jl=["className","style","bodyStyle","headStyle","title","subTitle","extra","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","boxShadow","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","colStyle","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],$n=se.forwardRef(function(n,e){var t,r=n.className,a=n.style,s=n.bodyStyle,l=n.headStyle,o=n.title,c=n.subTitle,d=n.extra,m=n.wrap,f=m===void 0?!1:m,y=n.layout,b=n.loading,v=n.gutter,C=v===void 0?0:v,x=n.tooltip,g=n.split,p=n.headerBordered,R=p===void 0?!1:p,w=n.bordered,k=w===void 0?!1:w,z=n.boxShadow,M=z===void 0?!1:z,E=n.children,K=n.size,$=n.actions,T=n.ghost,N=T===void 0?!1:T,W=n.hoverable,L=W===void 0?!1:W,P=n.direction,O=n.collapsed,A=n.collapsible,q=A===void 0?!1:A,ee=n.collapsibleIconRender,_=n.colStyle,H=n.defaultCollapsed,U=H===void 0?!1:H,D=n.onCollapse,I=n.checked,j=n.onChecked,B=n.tabs,F=n.type,V=we(n,Jl),Y=h.useContext(Ae.ConfigContext),X=Y.getPrefixCls,J=wa()||{lg:!0,md:!0,sm:!0,xl:!1,xs:!1,xxl:!1},G=Ee(U,{value:O,onChange:D}),ce=ue(G,2),ne=ce[0],he=ce[1],ae=["xxl","xl","lg","md","sm","xs"],re=Wl(B==null?void 0:B.items,E,B),me=function(ye){var Pe=[0,0],nn=Array.isArray(ye)?ye:[ye,0];return nn.forEach(function(je,We){if(ze(je)==="object")for(var qe=0;qe<ae.length;qe+=1){var on=ae[qe];if(J[on]&&je[on]!==void 0){Pe[We]=je[on];break}}else Pe[We]=je||0}),Pe},de=function(ye,Pe){return ye?Pe:{}},Be=function(ye){var Pe=ye;if(ze(ye)==="object")for(var nn=0;nn<ae.length;nn+=1){var je=ae[nn];if(J!=null&&J[je]&&(ye==null?void 0:ye[je])!==void 0){Pe=ye[je];break}}var We=de(typeof Pe=="string"&&/\d%|\dpx/i.test(Pe),{width:Pe,flexShrink:0});return{span:Pe,colSpanStyle:We}},ie=X("pro-card"),vn=Xl(ie),oe=vn.wrapSSR,Le=vn.hashId,mn=me(C),Bn=ue(mn,2),an=Bn[0],hn=Bn[1],xn=!1,Ln=se.Children.toArray(E),Te=Ln.map(function(Fe,ye){var Pe;if(Fe!=null&&(Pe=Fe.type)!==null&&Pe!==void 0&&Pe.isProCard){xn=!0;var nn=Fe.props.colSpan,je=Be(nn),We=je.span,qe=je.colSpanStyle,on=Se(["".concat(ie,"-col")],Le,S(S(S({},"".concat(ie,"-split-vertical"),g==="vertical"&&ye!==Ln.length-1),"".concat(ie,"-split-horizontal"),g==="horizontal"&&ye!==Ln.length-1),"".concat(ie,"-col-").concat(We),typeof We=="number"&&We>=0&&We<=24)),Vn=oe(u.jsx("div",{style:i(i(i(i({},qe),de(an>0,{paddingInlineEnd:an/2,paddingInlineStart:an/2})),de(hn>0,{paddingBlockStart:hn/2,paddingBlockEnd:hn/2})),_),className:on,children:se.cloneElement(Fe)}));return se.cloneElement(Vn,{key:"pro-card-col-".concat((Fe==null?void 0:Fe.key)||ye)})}return Fe}),On=Se("".concat(ie),r,Le,(t={},S(S(S(S(S(S(S(S(S(S(t,"".concat(ie,"-border"),k),"".concat(ie,"-box-shadow"),M),"".concat(ie,"-contain-card"),xn),"".concat(ie,"-loading"),b),"".concat(ie,"-split"),g==="vertical"||g==="horizontal"),"".concat(ie,"-ghost"),N),"".concat(ie,"-hoverable"),L),"".concat(ie,"-size-").concat(K),K),"".concat(ie,"-type-").concat(F),F),"".concat(ie,"-collapse"),ne),S(t,"".concat(ie,"-checked"),I))),pe=Se("".concat(ie,"-body"),Le,S(S(S({},"".concat(ie,"-body-center"),y==="center"),"".concat(ie,"-body-direction-column"),g==="horizontal"||P==="column"),"".concat(ie,"-body-wrap"),f&&xn)),zn=s,pn=se.isValidElement(b)?b:u.jsx(Ol,{prefix:ie,style:(s==null?void 0:s.padding)===0||(s==null?void 0:s.padding)==="0px"?{padding:24}:void 0}),ln=q&&O===void 0&&(ee?ee({collapsed:ne}):u.jsx(Ta,{rotate:ne?void 0:90,className:"".concat(ie,"-collapsible-icon ").concat(Le).trim()}));return oe(u.jsxs("div",i(i({className:On,style:a,ref:e,onClick:function(ye){var Pe;j==null||j(ye),V==null||(Pe=V.onClick)===null||Pe===void 0||Pe.call(V,ye)}},Ve(V,["prefixCls","colSpan"])),{},{children:[(o||d||ln)&&u.jsxs("div",{className:Se("".concat(ie,"-header"),Le,S(S({},"".concat(ie,"-header-border"),R||F==="inner"),"".concat(ie,"-header-collapsible"),ln)),style:l,onClick:function(){ln&&he(!ne)},children:[u.jsxs("div",{className:"".concat(ie,"-title ").concat(Le).trim(),children:[ln,u.jsx(jn,{label:o,tooltip:x,subTitle:c})]}),d&&u.jsx("div",{className:"".concat(ie,"-extra ").concat(Le).trim(),onClick:function(ye){return ye.stopPropagation()},children:d})]}),B?u.jsx("div",{className:"".concat(ie,"-tabs ").concat(Le).trim(),children:u.jsx(En,i(i({onChange:B.onChange},Ve(B,["cardProps"])),{},{items:re,children:b?pn:E}))}):u.jsx("div",{className:pe,style:zn,children:b?pn:Te}),$?u.jsx($l,{actions:$,prefixCls:ie}):null]})))}),Yl=function(e){var t=e.componentCls;return S({},t,{"&-divider":{flex:"none",width:e.lineWidth,marginInline:e.marginXS,marginBlock:e.marginLG,backgroundColor:e.colorSplit,"&-horizontal":{width:"initial",height:e.lineWidth,marginInline:e.marginLG,marginBlock:e.marginXS}},"&&-size-small &-divider":{marginBlock:e.marginLG,marginInline:e.marginXS,"&-horizontal":{marginBlock:e.marginXS,marginInline:e.marginLG}}})};function Zl(n){return He("ProCardDivider",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[Yl(t)]})}var eo=function(e){var t=h.useContext(Ae.ConfigContext),r=t.getPrefixCls,a=r("pro-card"),s="".concat(a,"-divider"),l=Zl(a),o=l.wrapSSR,c=l.hashId,d=e.className,m=e.style,f=m===void 0?{}:m,y=e.type,b=Se(s,d,c,S({},"".concat(s,"-").concat(y),y));return o(u.jsx("div",{className:b,style:f}))},no=function(e){return u.jsx($n,i({bodyStyle:{padding:0}},e))},_n=$n;_n.isProCard=!0;_n.Divider=eo;_n.TabPane=Ul;_n.Group=no;var to=["children","value","valuePropName","onChange","fieldProps","space","type","transform","convertValue","lightProps"],ro=["children","space","valuePropName"],ao={space:Nn,group:br.Group};function lo(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&n in e.target?e.target[n]:e}var oo=function(e){var t=e.children,r=e.value,a=r===void 0?[]:r,s=e.valuePropName,l=e.onChange,o=e.fieldProps,c=e.space,d=e.type,m=d===void 0?"space":d;e.transform,e.convertValue,e.lightProps;var f=we(e,to),y=Re(function(w,k){var z,M=Oe(a);M[k]=lo(s||"value",w),l==null||l(M),o==null||(z=o.onChange)===null||z===void 0||z.call(o,M)}),b=-1,v=Lt(Ge(t,a,e)).map(function(w){if(se.isValidElement(w)){var k,z,M;b+=1;var E=b,K=(w==null||(k=w.type)===null||k===void 0?void 0:k.displayName)==="ProFormComponent"||(w==null||(z=w.props)===null||z===void 0?void 0:z.readonly),$=K?i(i({key:E,ignoreFormItem:!0},w.props||{}),{},{fieldProps:i(i({},w==null||(M=w.props)===null||M===void 0?void 0:M.fieldProps),{},{onChange:function(){y(arguments.length<=0?void 0:arguments[0],E)}}),value:a==null?void 0:a[E],onChange:void 0}):i(i({key:E},w.props||{}),{},{value:a==null?void 0:a[E],onChange:function(N){var W,L;y(N,E),(W=(L=w.props).onChange)===null||W===void 0||W.call(L,N)}});return se.cloneElement(w,$)}return w}),C=ao[m],x=Wa(f),g=x.RowWrapper,p=h.useMemo(function(){return i({},m==="group"?{compact:!0}:{})},[m]),R=h.useCallback(function(w){var k=w.children;return u.jsx(C,i(i(i({},p),c),{},{align:"start",wrap:!0,children:k}))},[C,c,p]);return u.jsx(g,{Wrapper:R,children:v})},io=se.forwardRef(function(n,e){var t=n.children,r=n.space,a=n.valuePropName,s=we(n,ro);return h.useImperativeHandle(e,function(){return{}}),u.jsx(oo,i(i(i({space:r,valuePropName:a},s.fieldProps),{},{onChange:void 0},s),{},{children:t}))}),so=Ha(io),uo=function(e){return S({},e.componentCls,{lineHeight:"30px","&::before":{display:"block",height:0,visibility:"hidden",content:"'.'"},"&-small":{lineHeight:e.lineHeight},"&-container":{display:"flex",flexWrap:"wrap",gap:e.marginXS},"&-item":S({whiteSpace:"nowrap"},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"&-line":{minWidth:"198px"},"&-line:not(:first-child)":{marginBlockStart:"16px",marginBlockEnd:8},"&-collapse-icon":{width:e.controlHeight,height:e.controlHeight,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},"&-effective":S({},"".concat(e.componentCls,"-collapse-icon"),{backgroundColor:e.colorBgTextHover})})};function co(n){return He("LightFilter",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[uo(t)]})}var fo=["size","collapse","collapseLabel","initialValues","onValuesChange","form","placement","formRef","bordered","ignoreRules","footerRender"],vo=function(e){var t=e.items,r=e.prefixCls,a=e.size,s=a===void 0?"middle":a,l=e.collapse,o=e.collapseLabel,c=e.onValuesChange,d=e.bordered,m=e.values,f=e.footerRender,y=e.placement,b=De(),v="".concat(r,"-light-filter"),C=co(v),x=C.wrapSSR,g=C.hashId,p=h.useState(!1),R=ue(p,2),w=R[0],k=R[1],z=h.useState(function(){return i({},m)}),M=ue(z,2),E=M[0],K=M[1];h.useEffect(function(){K(i({},m))},[m]);var $=h.useMemo(function(){var L=[],P=[];return t.forEach(function(O){var A=O.props||{},q=A.secondary;q||l?L.push(O):P.push(O)}),{collapseItems:L,outsideItems:P}},[e.items]),T=$.collapseItems,N=$.outsideItems,W=function(){return o||(l?u.jsx(Pa,{className:"".concat(v,"-collapse-icon ").concat(g).trim()}):u.jsx(Ga,{size:s,label:b.getMessage("form.lightFilter.more","更多筛选")}))};return x(u.jsx("div",{className:Se(v,g,"".concat(v,"-").concat(s),S({},"".concat(v,"-effective"),Object.keys(m).some(function(L){return Array.isArray(m[L])?m[L].length>0:m[L]}))),children:u.jsxs("div",{className:"".concat(v,"-container ").concat(g).trim(),children:[N.map(function(L,P){var O=L.key,A=L.props.fieldProps,q=A!=null&&A.placement?A==null?void 0:A.placement:y;return u.jsx("div",{className:"".concat(v,"-item ").concat(g).trim(),children:se.cloneElement(L,{fieldProps:i(i({},L.props.fieldProps),{},{placement:q}),proFieldProps:i(i({},L.props.proFieldProps),{},{light:!0,label:L.props.label,bordered:d}),bordered:d})},O||P)}),T.length?u.jsx("div",{className:"".concat(v,"-item ").concat(g).trim(),children:u.jsx(Ua,{padding:24,open:w,onOpenChange:function(P){k(P)},placement:y,label:W(),footerRender:f,footer:{onConfirm:function(){c(i({},E)),k(!1)},onClear:function(){var P={};T.forEach(function(O){var A=O.props.name;P[A]=void 0}),c(P)}},children:T.map(function(L){var P=L.key,O=L.props,A=O.name,q=O.fieldProps,ee=i(i({},q),{},{onChange:function(U){return K(i(i({},E),{},S({},A,U!=null&&U.target?U.target.value:U))),!1}});E.hasOwnProperty(A)&&(ee[L.props.valuePropName||"value"]=E[A]);var _=q!=null&&q.placement?q==null?void 0:q.placement:y;return u.jsx("div",{className:"".concat(v,"-line ").concat(g).trim(),children:se.cloneElement(L,{fieldProps:i(i({},ee),{},{placement:_})})},P)})})},"more"):null]})}))};function mo(n){var e=n.size,t=n.collapse,r=n.collapseLabel,a=n.initialValues,s=n.onValuesChange,l=n.form,o=n.placement,c=n.formRef,d=n.bordered;n.ignoreRules;var m=n.footerRender,f=we(n,fo),y=h.useContext(Ae.ConfigContext),b=y.getPrefixCls,v=b("pro-form"),C=h.useState(function(){return i({},a)}),x=ue(C,2),g=x[0],p=x[1],R=h.useRef();return h.useImperativeHandle(c,function(){return R.current},[R.current]),u.jsx(tt,i(i({size:e,initialValues:a,form:l,contentRender:function(k){return u.jsx(vo,{prefixCls:v,items:k==null?void 0:k.flatMap(function(z){return(z==null?void 0:z.type.displayName)==="ProForm-Group"?z.props.children:z}),size:e,bordered:d,collapse:t,collapseLabel:r,placement:o,values:g||{},footerRender:m,onValuesChange:function(M){var E,K,$=i(i({},g),M);p($),(E=R.current)===null||E===void 0||E.setFieldsValue($),(K=R.current)===null||K===void 0||K.submit(),s&&s(M,$)}})},formRef:R,formItemProps:{colon:!1,labelAlign:"left"},fieldProps:{style:{width:void 0}}},Ve(f,["labelWidth"])),{},{onValuesChange:function(k,z){var M;p(z),s==null||s(k,z),(M=R.current)===null||M===void 0||M.submit()}}))}var ho=["children","trigger","onVisibleChange","onOpenChange","modalProps","onFinish","submitTimeout","title","width","visible","open"];function po(n){var e,t,r=n.children,a=n.trigger,s=n.onVisibleChange,l=n.onOpenChange,o=n.modalProps,c=n.onFinish,d=n.submitTimeout,m=n.title,f=n.width,y=n.visible,b=n.open,v=we(n,ho);dn(!v.footer||!(o!=null&&o.footer),"ModalForm 是一个 ProForm 的特殊布局，如果想自定义按钮，请使用 submit.render 自定义。");var C=h.useContext(Ae.ConfigContext),x=h.useState([]),g=ue(x,2),p=g[1],R=h.useState(!1),w=ue(R,2),k=w[0],z=w[1],M=Ee(!!y,{value:b||y,onChange:l||s}),E=ue(M,2),K=E[0],$=E[1],T=h.useRef(null),N=h.useCallback(function(_){T.current===null&&_&&p([]),T.current=_},[]),W=h.useRef(),L=h.useCallback(function(){var _,H,U,D=(_=(H=v.form)!==null&&H!==void 0?H:(U=v.formRef)===null||U===void 0?void 0:U.current)!==null&&_!==void 0?_:W.current;D&&o!==null&&o!==void 0&&o.destroyOnClose&&D.resetFields()},[o==null?void 0:o.destroyOnClose,v.form,v.formRef]);h.useImperativeHandle(v.formRef,function(){return W.current},[W.current]),h.useEffect(function(){(b||y)&&(l==null||l(!0),s==null||s(!0))},[y,b]);var P=h.useMemo(function(){return a?se.cloneElement(a,i(i({key:"trigger"},a.props),{},{onClick:function(){var _=be(le().mark(function U(D){var I,j;return le().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:$(!K),(I=a.props)===null||I===void 0||(j=I.onClick)===null||j===void 0||j.call(I,D);case 2:case"end":return F.stop()}},U)}));function H(U){return _.apply(this,arguments)}return H}()})):null},[$,a,K]),O=h.useMemo(function(){var _,H,U,D,I,j;return v.submitter===!1?!1:gt({searchConfig:{submitText:(_=(H=o==null?void 0:o.okText)!==null&&H!==void 0?H:(U=C.locale)===null||U===void 0||(U=U.Modal)===null||U===void 0?void 0:U.okText)!==null&&_!==void 0?_:"确认",resetText:(D=(I=o==null?void 0:o.cancelText)!==null&&I!==void 0?I:(j=C.locale)===null||j===void 0||(j=j.Modal)===null||j===void 0?void 0:j.cancelText)!==null&&D!==void 0?D:"取消"},resetButtonProps:{preventDefault:!0,disabled:d?k:void 0,onClick:function(F){var V;$(!1),o==null||(V=o.onCancel)===null||V===void 0||V.call(o,F)}}},v.submitter)},[(e=C.locale)===null||e===void 0||(e=e.Modal)===null||e===void 0?void 0:e.cancelText,(t=C.locale)===null||t===void 0||(t=t.Modal)===null||t===void 0?void 0:t.okText,o,v.submitter,$,k,d]),A=h.useCallback(function(_,H){return u.jsxs(u.Fragment,{children:[_,T.current&&H?u.jsx(se.Fragment,{children:mt.createPortal(H,T.current)},"submitter"):H]})},[]),q=h.useCallback(function(){var _=be(le().mark(function H(U){var D,I,j;return le().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return D=c==null?void 0:c(U),d&&D instanceof Promise&&(z(!0),I=setTimeout(function(){return z(!1)},d),D.finally(function(){clearTimeout(I),z(!1)})),F.next=4,D;case 4:return j=F.sent,j&&$(!1),F.abrupt("return",j);case 7:case"end":return F.stop()}},H)}));return function(H){return _.apply(this,arguments)}}(),[c,$,d]),ee=xr(K);return u.jsxs(u.Fragment,{children:[u.jsx(Ia,i(i(i({title:m,width:f||800},o),ee),{},{onCancel:function(H){var U;d&&k||($(!1),o==null||(U=o.onCancel)===null||U===void 0||U.call(o,H))},afterClose:function(){var H;L(),K&&$(!1),o==null||(H=o.afterClose)===null||H===void 0||H.call(o)},footer:v.submitter!==!1?u.jsx("div",{ref:N,style:{display:"flex",justifyContent:"flex-end"}}):null,children:u.jsx(tt,i(i({formComponentType:"ModalForm",layout:"vertical"},v),{},{onInit:function(H,U){var D;v.formRef&&(v.formRef.current=U),v==null||(D=v.onInit)===null||D===void 0||D.call(v,H,U),W.current=U},formRef:W,submitter:O,onFinish:function(){var _=be(le().mark(function H(U){var D;return le().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,q(U);case 2:return D=j.sent,j.abrupt("return",D);case 4:case"end":return j.stop()}},H)}));return function(H){return _.apply(this,arguments)}}(),contentRender:A,children:r}))})),P]})}var go=function(e,t,r,a){return e?u.jsxs(u.Fragment,{children:[r.getMessage("tableForm.collapsed","展开"),a&&"(".concat(a,")"),u.jsx(ht,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]}):u.jsxs(u.Fragment,{children:[r.getMessage("tableForm.expand","收起"),u.jsx(ht,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]})},yo=function(e){var t=e.setCollapsed,r=e.collapsed,a=r===void 0?!1:r,s=e.submitter,l=e.style,o=e.hiddenNum,c=h.useContext(Ae.ConfigContext),d=c.getPrefixCls,m=De(),f=h.useContext(Cn),y=f.hashId,b=Lr(e.collapseRender)||go;return u.jsxs(Nn,{style:l,size:16,children:[s,e.collapseRender!==!1&&u.jsx("a",{className:"".concat(d("pro-query-filter-collapse-button")," ").concat(y).trim(),onClick:function(){return t(!a)},children:b==null?void 0:b(a,e,m,o)})]})},bo=function(e){return S({},e.componentCls,S(S(S(S({"&&":{padding:24}},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"".concat(e.proComponentsCls,"-form-group-title"),{marginBlock:0}),"&-row",{rowGap:24,"&-split":S(S({},"".concat(e.proComponentsCls,"-form-group"),{display:"flex",alignItems:"center",gap:e.marginXS}),"&:last-child",{marginBlockEnd:12}),"&-split-line":{"&:after":{position:"absolute",width:"100%",content:'""',height:1,insetBlockEnd:-12,borderBlockEnd:"1px dashed ".concat(e.colorSplit)}}}),"&-collapse-button",{display:"flex",alignItems:"center",color:e.colorPrimary}))};function So(n){return He("QueryFilter",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[bo(t)]})}var Co=["collapsed","layout","defaultCollapsed","defaultColsNumber","span","searchGutter","searchText","resetText","optionRender","collapseRender","onReset","onCollapse","labelWidth","style","split","preserve","ignoreRules","showHiddenNum","submitterColSpanProps"],Rn,xo={xs:513,sm:513,md:785,lg:992,xl:1057,xxl:1/0},er={vertical:[[513,1,"vertical"],[785,2,"vertical"],[1057,3,"vertical"],[1/0,4,"vertical"]],default:[[513,1,"vertical"],[701,2,"vertical"],[1062,3,"horizontal"],[1352,3,"horizontal"],[1/0,4,"horizontal"]]},Ro=function(e,t,r){if(r&&typeof r=="number")return{span:r,layout:e};var a=r?["xs","sm","md","lg","xl","xxl"].map(function(l){return[xo[l],24/r[l],"horizontal"]}):er[e||"default"],s=(a||er.default).find(function(l){return t<l[0]+16});return s?{span:24/s[1],layout:s==null?void 0:s[2]}:{span:8,layout:"horizontal"}},wo=function(e,t){return e==null?void 0:e.flatMap(function(r){var a;if((r==null?void 0:r.type.displayName)==="ProForm-Group"&&!((a=r.props)!==null&&a!==void 0&&a.title))return r.props.children;if(t&&se.isValidElement(r)){var s;return se.cloneElement(r,i(i({},r.props),{},{formItemProps:i(i({},(s=r.props)===null||s===void 0?void 0:s.formItemProps),{},{rules:[]})}))}return r})},To=function(e){var t,r,a,s,l=De(),o=h.useContext(Cn),c=o.hashId,d=e.resetText||l.getMessage("tableForm.reset","重置"),m=e.searchText||l.getMessage("tableForm.search","搜索"),f=Ee(function(){return e.defaultCollapsed&&!!e.submitter},{value:e.collapsed,onChange:e.onCollapse}),y=ue(f,2),b=y[0],v=y[1],C=e.optionRender,x=e.collapseRender,g=e.split,p=e.items,R=e.spanSize,w=e.showLength,k=e.searchGutter,z=e.showHiddenNum,M=h.useMemo(function(){return!e.submitter||C===!1?null:se.cloneElement(e.submitter,i({searchConfig:{resetText:d,submitText:m},render:C&&function(_,H){return C(i(i({},e),{},{resetText:d,searchText:m}),e,H)}},e.submitter.props))},[e,d,m,C]),E=0,K=0,$=!1,T=0,N=0,W=wo(p,e.ignoreRules).map(function(_,H){var U,D,I,j,B=se.isValidElement(_)&&(U=_==null||(D=_.props)===null||D===void 0?void 0:D.colSize)!==null&&U!==void 0?U:1,F=Math.min(R.span*(B||1),24);if(E+=F,T+=B,H===0){var V;$=F===24&&!(_!=null&&(V=_.props)!==null&&V!==void 0&&V.hidden)}var Y=(_==null||(I=_.props)===null||I===void 0?void 0:I.hidden)||b&&($||T>w-1)&&!!H&&E>=24;K+=1;var X=se.isValidElement(_)&&(_.key||"".concat((j=_.props)===null||j===void 0?void 0:j.name))||H;return se.isValidElement(_)&&Y?e.preserve?{itemDom:se.cloneElement(_,{hidden:!0,key:X||H}),hidden:!0,colSpan:F}:{itemDom:null,colSpan:0,hidden:!0}:{itemDom:_,colSpan:F,hidden:!1}}),L=W.map(function(_,H){var U,D,I=_.itemDom,j=_.colSpan,B=I==null||(U=I.props)===null||U===void 0?void 0:U.hidden;if(B)return I;var F=se.isValidElement(I)&&(I.key||"".concat((D=I.props)===null||D===void 0?void 0:D.name))||H;return 24-N%24<j&&(E+=24-N%24,N+=24-N%24),N+=j,g&&N%24===0&&H<K-1?u.jsx(Me,{span:j,className:"".concat(e.baseClassName,"-row-split-line ").concat(e.baseClassName,"-row-split ").concat(c).trim(),children:I},F):u.jsx(Me,{className:"".concat(e.baseClassName,"-row-split ").concat(c).trim(),span:j,children:I},F)}),P=z&&W.filter(function(_){return _.hidden}).length,O=h.useMemo(function(){return!(E<24||T<=w)},[T,w,E]),A=h.useMemo(function(){var _,H,U=N%24+((_=(H=e.submitterColSpanProps)===null||H===void 0?void 0:H.span)!==null&&_!==void 0?_:R.span);if(U>24){var D,I;return 24-((D=(I=e.submitterColSpanProps)===null||I===void 0?void 0:I.span)!==null&&D!==void 0?D:R.span)}return 24-U},[N,N%24+((t=(r=e.submitterColSpanProps)===null||r===void 0?void 0:r.span)!==null&&t!==void 0?t:R.span),(a=e.submitterColSpanProps)===null||a===void 0?void 0:a.span]),q=h.useContext(Ae.ConfigContext),ee=q.getPrefixCls("pro-query-filter");return u.jsxs(rn,{gutter:k,justify:"start",className:Se("".concat(ee,"-row"),c),children:[L,M&&u.jsx(Me,i(i({span:R.span,offset:A,className:Se((s=e.submitterColSpanProps)===null||s===void 0?void 0:s.className)},e.submitterColSpanProps),{},{style:{textAlign:"end"},children:u.jsx(Ze.Item,{label:" ",colon:!1,shouldUpdate:!1,className:"".concat(ee,"-actions ").concat(c).trim(),children:u.jsx(yo,{hiddenNum:P,collapsed:b,collapseRender:O?x:!1,submitter:M,setCollapsed:v},"pro-form-query-filter-actions")})}),"submitter")]},"resize-observer-row")},Po=mr()?(Rn=document)===null||Rn===void 0||(Rn=Rn.body)===null||Rn===void 0?void 0:Rn.clientWidth:1024;function Io(n){var e=n.collapsed,t=n.layout,r=n.defaultCollapsed,a=r===void 0?!0:r,s=n.defaultColsNumber,l=n.span,o=n.searchGutter,c=o===void 0?24:o;n.searchText,n.resetText;var d=n.optionRender,m=n.collapseRender,f=n.onReset,y=n.onCollapse,b=n.labelWidth,v=b===void 0?"80":b,C=n.style,x=n.split,g=n.preserve,p=g===void 0?!0:g,R=n.ignoreRules,w=n.showHiddenNum,k=w===void 0?!1:w,z=n.submitterColSpanProps,M=we(n,Co),E=h.useContext(Ae.ConfigContext),K=E.getPrefixCls("pro-query-filter"),$=So(K),T=$.wrapSSR,N=$.hashId,W=Ee(function(){return typeof(C==null?void 0:C.width)=="number"?C==null?void 0:C.width:Po}),L=ue(W,2),P=L[0],O=L[1],A=h.useMemo(function(){return Ro(t,P+16,l)},[t,P,l]),q=h.useMemo(function(){return s!==void 0?s-1:Math.max(1,24/A.span-1)},[s,A.span]),ee=h.useMemo(function(){if(v&&A.layout!=="vertical"&&v!=="auto")return{labelCol:{flex:"0 0 ".concat(v,"px")},wrapperCol:{style:{maxWidth:"calc(100% - ".concat(v,"px)")}},style:{flexWrap:"nowrap"}}},[A.layout,v]);return T(u.jsx(Sr,{onResize:function(H){P!==H.width&&H.width>17&&O(H.width)},children:u.jsx(tt,i(i({isKeyPressSubmit:!0,preserve:p},M),{},{className:Se(K,N,M.className),onReset:f,style:C,layout:A.layout,fieldProps:{style:{width:"100%"}},formItemProps:ee,groupProps:{titleStyle:{display:"inline-block",marginInlineEnd:16}},contentRender:function(H,U,D){return u.jsx(To,{spanSize:A,collapsed:e,form:D,submitterColSpanProps:z,collapseRender:m,defaultCollapsed:a,onCollapse:y,optionRender:d,submitter:U,items:H,split:x,baseClassName:K,resetText:n.resetText,searchText:n.searchText,searchGutter:c,preserve:p,ignoreRules:R,showLength:q,showHiddenNum:k})}}))},"resize-observer"))}var Fo=["onFinish","step","formRef","title","stepProps"];function Eo(n){var e=h.useRef(),t=h.useContext(Kr),r=h.useContext($r),a=i(i({},n),r),s=a.onFinish,l=a.step,o=a.formRef;a.title,a.stepProps;var c=we(a,Fo);return dn(!c.submitter,"StepForm 不包含提交按钮，请在 StepsForm 上"),h.useImperativeHandle(o,function(){return e.current},[o==null?void 0:o.current]),h.useEffect(function(){if(a.name||a.step){var d=(a.name||a.step).toString();return t==null||t.regForm(d,a),function(){t==null||t.unRegForm(d)}}},[]),t&&t!==null&&t!==void 0&&t.formArrayRef&&(t.formArrayRef.current[l||0]=e),u.jsx(tt,i({formRef:e,onFinish:function(){var d=be(le().mark(function m(f){var y;return le().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(c.name&&(t==null||t.onFormFinish(c.name,f)),!s){v.next=9;break}return t==null||t.setLoading(!0),v.next=5,s==null?void 0:s(f);case 5:return y=v.sent,y&&(t==null||t.next()),t==null||t.setLoading(!1),v.abrupt("return");case 9:t!=null&&t.lastStep||t==null||t.next();case 10:case"end":return v.stop()}},m)}));return function(m){return d.apply(this,arguments)}}(),onInit:function(m,f){var y;e.current=f,t&&t!==null&&t!==void 0&&t.formArrayRef&&(t.formArrayRef.current[l||0]=e),c==null||(y=c.onInit)===null||y===void 0||y.call(c,m,f)},layout:"vertical"},Ve(c,["layoutType","columns"])))}var jo=function(e){return S({},e.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":S({maxWidth:"1160px",margin:"auto"},"".concat(e.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}})};function No(n){return He("StepsForm",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[jo(t)]})}var Mo=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],Kr=se.createContext(void 0),Bo={horizontal:function(e){var t=e.stepsDom,r=e.formDom;return u.jsxs(u.Fragment,{children:[u.jsx(rn,{gutter:{xs:8,sm:16,md:24},children:u.jsx(Me,{span:24,children:t})}),u.jsx(rn,{gutter:{xs:8,sm:16,md:24},children:u.jsx(Me,{span:24,children:r})})]})},vertical:function(e){var t=e.stepsDom,r=e.formDom;return u.jsxs(rn,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[u.jsx(Me,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:se.cloneElement(t,{style:{height:"100%"}})}),u.jsx(Me,{children:u.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:r})})]})}},$r=se.createContext(null);function Lo(n){var e=h.useContext(Ae.ConfigContext),t=e.getPrefixCls,r=t("pro-steps-form"),a=No(r),s=a.wrapSSR,l=a.hashId;n.current,n.onCurrentChange;var o=n.submitter,c=n.stepsFormRender,d=n.stepsRender,m=n.stepFormRender,f=n.stepsProps,y=n.onFinish,b=n.formProps,v=n.containerStyle,C=n.formRef,x=n.formMapRef,g=n.layoutRender,p=we(n,Mo),R=h.useRef(new Map),w=h.useRef(new Map),k=h.useRef([]),z=h.useState([]),M=ue(z,2),E=M[0],K=M[1],$=h.useState(!1),T=ue($,2),N=T[0],W=T[1],L=De(),P=Ee(0,{value:n.current,onChange:n.onCurrentChange}),O=ue(P,2),A=O[0],q=O[1],ee=h.useMemo(function(){return Bo[(f==null?void 0:f.direction)||"horizontal"]},[f==null?void 0:f.direction]),_=h.useMemo(function(){return A===E.length-1},[E.length,A]),H=h.useCallback(function(ae,re){w.current.has(ae)||K(function(me){return[].concat(Oe(me),[ae])}),w.current.set(ae,re)},[]),U=h.useCallback(function(ae){K(function(re){return re.filter(function(me){return me!==ae})}),w.current.delete(ae),R.current.delete(ae)},[]);h.useImperativeHandle(x,function(){return k.current},[k.current]),h.useImperativeHandle(C,function(){var ae;return(ae=k.current[A||0])===null||ae===void 0?void 0:ae.current},[A,k.current]);var D=h.useCallback(function(){var ae=be(le().mark(function re(me,de){var Be,ie;return le().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(R.current.set(me,de),!(!_||!y)){oe.next=3;break}return oe.abrupt("return");case 3:return W(!0),Be=Pr.apply(void 0,[{}].concat(Oe(Array.from(R.current.values())))),oe.prev=5,oe.next=8,y(Be);case 8:ie=oe.sent,ie&&(q(0),k.current.forEach(function(Le){var mn;return(mn=Le.current)===null||mn===void 0?void 0:mn.resetFields()})),oe.next=15;break;case 12:oe.prev=12,oe.t0=oe.catch(5),console.log(oe.t0);case 15:return oe.prev=15,W(!1),oe.finish(15);case 18:case"end":return oe.stop()}},re,null,[[5,12,15,18]])}));return function(re,me){return ae.apply(this,arguments)}}(),[_,y,W,q]),I=h.useMemo(function(){var ae=nt(Zn,"4.24.0")>-1,re=ae?{items:E.map(function(me){var de=w.current.get(me);return i({key:me,title:de==null?void 0:de.title},de==null?void 0:de.stepProps)})}:{};return u.jsx("div",{className:"".concat(r,"-steps-container ").concat(l).trim(),style:{maxWidth:Math.min(E.length*320,1160)},children:u.jsx(Qt,i(i(i({},f),re),{},{current:A,onChange:void 0,children:!ae&&E.map(function(me){var de=w.current.get(me);return u.jsx(Qt.Step,i({title:de==null?void 0:de.title},de==null?void 0:de.stepProps),me)})}))})},[E,l,r,A,f]),j=Re(function(){var ae,re=k.current[A];(ae=re.current)===null||ae===void 0||ae.submit()}),B=Re(function(){A<1||q(A-1)}),F=h.useMemo(function(){return o!==!1&&u.jsx(Un,i(i({type:"primary",loading:N},o==null?void 0:o.submitButtonProps),{},{onClick:function(){var re;o==null||(re=o.onSubmit)===null||re===void 0||re.call(o),j()},children:L.getMessage("stepsForm.next","下一步")}),"next")},[L,N,j,o]),V=h.useMemo(function(){return o!==!1&&u.jsx(Un,i(i({},o==null?void 0:o.resetButtonProps),{},{onClick:function(){var re;B(),o==null||(re=o.onReset)===null||re===void 0||re.call(o)},children:L.getMessage("stepsForm.prev","上一步")}),"pre")},[L,B,o]),Y=h.useMemo(function(){return o!==!1&&u.jsx(Un,i(i({type:"primary",loading:N},o==null?void 0:o.submitButtonProps),{},{onClick:function(){var re;o==null||(re=o.onSubmit)===null||re===void 0||re.call(o),j()},children:L.getMessage("stepsForm.submit","提交")}),"submit")},[L,N,j,o]),X=Re(function(){A>E.length-2||q(A+1)}),J=h.useMemo(function(){var ae=[],re=A||0;if(re<1?E.length===1?ae.push(Y):ae.push(F):re+1===E.length?ae.push(V,Y):ae.push(V,F),ae=ae.filter(se.isValidElement),o&&o.render){var me,de={form:(me=k.current[A])===null||me===void 0?void 0:me.current,onSubmit:j,step:A,onPre:B};return o.render(de,ae)}return o&&(o==null?void 0:o.render)===!1?null:ae},[E.length,F,j,V,B,A,Y,o]),G=h.useMemo(function(){return Lt(n.children).map(function(ae,re){var me=ae.props,de=me.name||"".concat(re),Be=A===re,ie=Be?{contentRender:m,submitter:!1}:{};return u.jsx("div",{className:Se("".concat(r,"-step"),l,S({},"".concat(r,"-step-active"),Be)),children:u.jsx($r.Provider,{value:i(i(i(i({},ie),b),me),{},{name:de,step:re}),children:ae})},de)})},[b,l,r,n.children,A,m]),ce=h.useMemo(function(){return d?d(E.map(function(ae){var re;return{key:ae,title:(re=w.current.get(ae))===null||re===void 0?void 0:re.title}}),I):I},[E,I,d]),ne=h.useMemo(function(){return u.jsxs("div",{className:"".concat(r,"-container ").concat(l).trim(),style:v,children:[G,c?null:u.jsx(Nn,{children:J})]})},[v,G,l,r,c,J]),he=h.useMemo(function(){var ae={stepsDom:ce,formDom:ne};return c?c(g?g(ae):ee(ae),J):g?g(ae):ee(ae)},[ce,ne,ee,c,J,g]);return s(u.jsx("div",{className:Se(r,l),children:u.jsx(Ze.Provider,i(i({},p),{},{children:u.jsx(Kr.Provider,{value:{loading:N,setLoading:W,regForm:H,keyArray:E,next:X,formArrayRef:k,formMapRef:w,lastStep:_,unRegForm:U,onFormFinish:D},children:he})}))}))}function rt(n){return u.jsx(Ir,{needDeps:!0,children:u.jsx(Lo,i({},n))})}rt.StepForm=Eo;rt.useForm=Ze.useForm;var Ao=function(e){var t=e.children;return u.jsx(u.Fragment,{children:t})},Ko=["steps","columns","forceUpdate","grid"],$o=function(e){var t=e.steps,r=e.columns,a=e.forceUpdate,s=e.grid,l=we(e,Ko),o=jr(l),c=h.useCallback(function(m){var f,y;(f=(y=o.current).onCurrentChange)===null||f===void 0||f.call(y,m),a([])},[a,o]),d=h.useMemo(function(){return t==null?void 0:t.map(function(m,f){return h.createElement(kr,i(i({grid:s},m),{},{key:f,layoutType:"StepForm",columns:r[f]}))})},[r,s,t]);return u.jsx(rt,i(i({},l),{},{onCurrentChange:c,children:d}))},ko=function(e,t){if(e.valueType==="dependency"){var r,a,s,l=(r=e.getFieldProps)===null||r===void 0?void 0:r.call(e);return dn(Array.isArray((a=e.name)!==null&&a!==void 0?a:l==null?void 0:l.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),dn(typeof e.columns=="function",'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray((s=e.name)!==null&&s!==void 0?s:l==null?void 0:l.name)?h.createElement(Fr,i(i({name:e.name},l),{},{key:e.key}),function(o){return!e.columns||typeof e.columns!="function"?null:t.genItems(e.columns(o))}):null}return!0},Do=function(e){if(e.valueType==="divider"){var t;return h.createElement(Fa,i(i({},(t=e.getFieldProps)===null||t===void 0?void 0:t.call(e)),{},{key:e.key}))}return!0},_o=function(e,t){var r=t.action,a=t.formRef,s=t.type,l=t.originItem,o=i(i({},Ve(e,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:e.name||e.key||e.dataIndex,width:e.width,render:e!=null&&e.render?function(f,y,b){var v,C,x,g;return e==null||(v=e.render)===null||v===void 0?void 0:v.call(e,f,y,b,r==null?void 0:r.current,i(i({type:s},e),{},{key:(C=e.key)===null||C===void 0?void 0:C.toString(),formItemProps:(x=e.getFormItemProps)===null||x===void 0?void 0:x.call(e),fieldProps:(g=e.getFieldProps)===null||g===void 0?void 0:g.call(e)}))}:void 0}),c=function(){return u.jsx(Xn,i(i({},o),{},{ignoreFormItem:!0}))},d=e!=null&&e.renderFormItem?function(f,y){var b,v,C,x,g=Ye(i(i({},y),{},{onChange:void 0}));return e==null||(b=e.renderFormItem)===null||b===void 0?void 0:b.call(e,i(i({type:s},e),{},{key:(v=e.key)===null||v===void 0?void 0:v.toString(),formItemProps:(C=e.getFormItemProps)===null||C===void 0?void 0:C.call(e),fieldProps:(x=e.getFieldProps)===null||x===void 0?void 0:x.call(e),originProps:l}),i(i({},g),{},{defaultRender:c,type:s}),a.current)}:void 0,m=function(){if(e!=null&&e.renderFormItem){var y=d==null?void 0:d(null,{});if(!y||e.ignoreFormItem)return y}return h.createElement(Xn,i(i({},o),{},{key:[e.key,e.index||0].join("-"),renderFormItem:d}))};return e.dependencies?u.jsx(Fr,{name:e.dependencies||[],children:m},e.key):m()},Oo=function(e,t){var r=t.genItems;if(e.valueType==="formList"&&e.dataIndex){var a,s;return!e.columns||!Array.isArray(e.columns)?null:h.createElement(qa,i(i({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,name:e.dataIndex,label:e.label,initialValue:e.initialValue,colProps:e.colProps,rowProps:e.rowProps},(s=e.getFieldProps)===null||s===void 0?void 0:s.call(e)),r(e.columns))}return!0},zo=function(e,t){var r=t.genItems;if(e.valueType==="formSet"&&e.dataIndex){var a,s;return!e.columns||!Array.isArray(e.columns)?null:h.createElement(so,i(i({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,initialValue:e.initialValue,name:e.dataIndex,label:e.label,colProps:e.colProps,rowProps:e.rowProps},(s=e.getFieldProps)===null||s===void 0?void 0:s.call(e)),r(e.columns))}return!0},Vo=function(e,t){var r=t.genItems;if(e.valueType==="group"){var a;return!e.columns||!Array.isArray(e.columns)?null:u.jsx(Oa,i(i({label:e.label,colProps:e.colProps,rowProps:e.rowProps},(a=e.getFieldProps)===null||a===void 0?void 0:a.call(e)),{},{children:r(e.columns)}),e.key)}return!0},Ho=function(e){return e.valueType&&typeof e.valueType=="string"&&["index","indexBorder","option"].includes(e==null?void 0:e.valueType)?null:!0},nr=[Ho,Vo,Oo,zo,Do,ko],Wo=function(e,t){for(var r=0;r<nr.length;r++){var a=nr[r],s=a(e,t);if(s!==!0)return s}return _o(e,t)},Uo=["columns","layoutType","type","action","shouldUpdate","formRef"],Go={DrawerForm:ua,QueryFilter:Io,LightFilter:mo,StepForm:rt.StepForm,StepsForm:$o,ModalForm:po,Embed:Ao,Form:et};function kr(n){var e=n.columns,t=n.layoutType,r=t===void 0?"Form":t,a=n.type,s=a===void 0?"form":a,l=n.action,o=n.shouldUpdate,c=o===void 0?function(L,P){return wn(L)!==wn(P)}:o,d=n.formRef,m=we(n,Uo),f=Go[r]||et,y=Ze.useForm(),b=ue(y,1),v=b[0],C=Ze.useFormInstance(),x=h.useState([]),g=ue(x,2),p=g[1],R=h.useState(function(){return[]}),w=ue(R,2),k=w[0],z=w[1],M=Tl(n.form||C||v),E=h.useRef(),K=jr(n),$=Re(function(L){return L.filter(function(P){return!(P.hideInForm&&s==="form")}).sort(function(P,O){return O.order||P.order?(O.order||0)-(P.order||0):(O.index||0)-(P.index||0)}).map(function(P,O){var A=Ge(P.title,P,"form",u.jsx(jn,{label:P.title,tooltip:P.tooltip||P.tip})),q=Ye({title:A,label:A,name:P.name,valueType:Ge(P.valueType,{}),key:P.key||P.dataIndex||O,columns:P.columns,valueEnum:P.valueEnum,dataIndex:P.dataIndex||P.key,initialValue:P.initialValue,width:P.width,index:P.index,readonly:P.readonly,colSize:P.colSize,colProps:P.colProps,rowProps:P.rowProps,className:P.className,tooltip:P.tooltip||P.tip,dependencies:P.dependencies,proFieldProps:P.proFieldProps,ignoreFormItem:P.ignoreFormItem,getFieldProps:P.fieldProps?function(){return Ge(P.fieldProps,M.current,P)}:void 0,getFormItemProps:P.formItemProps?function(){return Ge(P.formItemProps,M.current,P)}:void 0,render:P.render,renderFormItem:P.renderFormItem,renderText:P.renderText,request:P.request,params:P.params,transform:P.transform,convertValue:P.convertValue,debounceTime:P.debounceTime,defaultKeyWords:P.defaultKeyWords});return Wo(q,{action:l,type:s,originItem:P,formRef:M,genItems:$})}).filter(function(P){return!!P})}),T=h.useCallback(function(L,P){var O=K.current.onValuesChange;(c===!0||typeof c=="function"&&c(P,E.current))&&z([]),E.current=P,O==null||O(L,P)},[K,c]),N=Xt(function(){if(M.current&&!(e.length&&Array.isArray(e[0])))return $(e)},[e,m==null?void 0:m.open,l,s,k,!!M.current]),W=Xt(function(){return r==="StepsForm"?{forceUpdate:p,columns:e}:{}},[e,r]);return h.useImperativeHandle(d,function(){return M.current},[M.current]),u.jsx(f,i(i(i({},W),m),{},{onInit:function(P,O){var A;d&&(d.current=O),m==null||(A=m.onInit)===null||A===void 0||A.call(m,P,O),M.current=O},form:n.form||v,formRef:M,onValuesChange:T,children:N}))}var qo="[object Map]",Qo="[object Set]",Xo=Object.prototype,Jo=Xo.hasOwnProperty;function Yo(n){if(n==null)return!0;if(Za(n)&&(yt(n)||typeof n=="string"||typeof n.splice=="function"||bt(n)||Nr(n)||el(n)))return!n.length;var e=St(n);if(e==qo||e==Qo)return!n.size;if(nl(n))return!tl(n).length;for(var t in n)if(Jo.call(n,t))return!1;return!0}var Zo="__lodash_hash_undefined__";function ei(n){return this.__data__.set(n,Zo),this}function ni(n){return this.__data__.has(n)}function Jn(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new rl;++e<t;)this.add(n[e])}Jn.prototype.add=Jn.prototype.push=ei;Jn.prototype.has=ni;function ti(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function ri(n,e){return n.has(e)}var ai=1,li=2;function Dr(n,e,t,r,a,s){var l=t&ai,o=n.length,c=e.length;if(o!=c&&!(l&&c>o))return!1;var d=s.get(n),m=s.get(e);if(d&&m)return d==e&&m==n;var f=-1,y=!0,b=t&li?new Jn:void 0;for(s.set(n,e),s.set(e,n);++f<o;){var v=n[f],C=e[f];if(r)var x=l?r(C,v,f,e,n,s):r(v,C,f,n,e,s);if(x!==void 0){if(x)continue;y=!1;break}if(b){if(!ti(e,function(g,p){if(!ri(b,p)&&(v===g||a(v,g,t,r,s)))return b.push(p)})){y=!1;break}}else if(!(v===C||a(v,C,t,r,s))){y=!1;break}}return s.delete(n),s.delete(e),y}function oi(n){var e=-1,t=Array(n.size);return n.forEach(function(r,a){t[++e]=[a,r]}),t}function ii(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var si=1,ui=2,ci="[object Boolean]",di="[object Date]",fi="[object Error]",vi="[object Map]",mi="[object Number]",hi="[object RegExp]",pi="[object Set]",gi="[object String]",yi="[object Symbol]",bi="[object ArrayBuffer]",Si="[object DataView]",tr=Ot?Ot.prototype:void 0,ut=tr?tr.valueOf:void 0;function Ci(n,e,t,r,a,s,l){switch(t){case Si:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case bi:return!(n.byteLength!=e.byteLength||!s(new Jt(n),new Jt(e)));case ci:case di:case mi:return al(+n,+e);case fi:return n.name==e.name&&n.message==e.message;case hi:case gi:return n==e+"";case vi:var o=oi;case pi:var c=r&si;if(o||(o=ii),n.size!=e.size&&!c)return!1;var d=l.get(n);if(d)return d==e;r|=ui,l.set(n,e);var m=Dr(o(n),o(e),r,a,s,l);return l.delete(n),m;case yi:if(ut)return ut.call(n)==ut.call(e)}return!1}var xi=1,Ri=Object.prototype,wi=Ri.hasOwnProperty;function Ti(n,e,t,r,a,s){var l=t&xi,o=Yt(n),c=o.length,d=Yt(e),m=d.length;if(c!=m&&!l)return!1;for(var f=c;f--;){var y=o[f];if(!(l?y in e:wi.call(e,y)))return!1}var b=s.get(n),v=s.get(e);if(b&&v)return b==e&&v==n;var C=!0;s.set(n,e),s.set(e,n);for(var x=l;++f<c;){y=o[f];var g=n[y],p=e[y];if(r)var R=l?r(p,g,y,e,n,s):r(g,p,y,n,e,s);if(!(R===void 0?g===p||a(g,p,t,r,s):R)){C=!1;break}x||(x=y=="constructor")}if(C&&!x){var w=n.constructor,k=e.constructor;w!=k&&"constructor"in n&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof k=="function"&&k instanceof k)&&(C=!1)}return s.delete(n),s.delete(e),C}var Pi=1,rr="[object Arguments]",ar="[object Array]",Hn="[object Object]",Ii=Object.prototype,lr=Ii.hasOwnProperty;function Fi(n,e,t,r,a,s){var l=yt(n),o=yt(e),c=l?ar:St(n),d=o?ar:St(e);c=c==rr?Hn:c,d=d==rr?Hn:d;var m=c==Hn,f=d==Hn,y=c==d;if(y&&bt(n)){if(!bt(e))return!1;l=!0,m=!1}if(y&&!m)return s||(s=new it),l||Nr(n)?Dr(n,e,t,r,a,s):Ci(n,e,c,t,r,a,s);if(!(t&Pi)){var b=m&&lr.call(n,"__wrapped__"),v=f&&lr.call(e,"__wrapped__");if(b||v){var C=b?n.value():n,x=v?e.value():e;return s||(s=new it),a(C,x,t,r,s)}}return y?(s||(s=new it),Ti(n,e,t,r,a,s)):!1}function _r(n,e,t,r,a){return n===e?!0:n==null||e==null||!zt(n)&&!zt(e)?n!==n&&e!==e:Fi(n,e,t,r,_r,a)}function Ei(n,e){return _r(n,e)}function ji(n,e,t){var r,a;if(n===!1)return!1;var s=e.total,l=e.current,o=e.pageSize,c=e.setPageInfo,d=ze(n)==="object"?n:{};return i(i({showTotal:function(f,y){return"".concat(t.getMessage("pagination.total.range","第")," ").concat(y[0],"-").concat(y[1]," ").concat(t.getMessage("pagination.total.total","条/总共")," ").concat(f," ").concat(t.getMessage("pagination.total.item","条"))},total:s},d),{},{current:n!==!0&&n&&(r=n.current)!==null&&r!==void 0?r:l,pageSize:n!==!0&&n&&(a=n.pageSize)!==null&&a!==void 0?a:o,onChange:function(f,y){var b=n,v=b.onChange;v==null||v(f,y||20),(y!==o||l!==f)&&c({pageSize:y,current:f})}})}function Ni(n,e,t){var r=i(i({},t.editableUtils),{},{pageInfo:e.pageInfo,reload:function(){var a=be(le().mark(function l(o){return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!o){d.next=3;break}return d.next=3,e.setPageInfo({current:1});case 3:return d.next=5,e==null?void 0:e.reload();case 5:case"end":return d.stop()}},l)}));function s(l){return a.apply(this,arguments)}return s}(),reloadAndRest:function(){var a=be(le().mark(function l(){return le().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t.onCleanSelected(),c.next=3,e.setPageInfo({current:1});case 3:return c.next=5,e==null?void 0:e.reload();case 5:case"end":return c.stop()}},l)}));function s(){return a.apply(this,arguments)}return s}(),reset:function(){var a=be(le().mark(function l(){var o;return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.resetAll();case 2:return d.next=4,e==null||(o=e.reset)===null||o===void 0?void 0:o.call(e);case 4:return d.next=6,e==null?void 0:e.reload();case 6:case"end":return d.stop()}},l)}));function s(){return a.apply(this,arguments)}return s}(),fullScreen:function(){return t.fullScreen()},clearSelected:function(){return t.onCleanSelected()},setPageInfo:function(s){return e.setPageInfo(s)}});n.current=r}function Mi(n,e){return e.filter(function(t){return t}).length<1?n:e.reduce(function(t,r){return r(t)},n)}var Or=function(e,t){return t===void 0?!1:typeof t=="boolean"?t:t[e]},Bi=function(e){var t;return e&&ze(e)==="object"&&(e==null||(t=e.props)===null||t===void 0?void 0:t.colSpan)},Mn=function(e,t){return e?Array.isArray(e)?e.join("-"):e.toString():"".concat(t)};function Li(n){return Array.isArray(n)?n.join(","):n==null?void 0:n.toString()}function Ai(n){var e={},t={};return n.forEach(function(r){var a=Li(r.dataIndex);if(a){if(r.filters){var s=r.defaultFilteredValue;s===void 0?e[a]=null:e[a]=r.defaultFilteredValue}r.sorter&&r.defaultSortOrder&&(t[a]=r.defaultSortOrder)}}),{sort:t,filter:e}}function Ki(){var n,e,t,r,a,s,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=h.useRef(),c=h.useRef(null),d=h.useRef(),m=h.useRef(),f=h.useState(""),y=ue(f,2),b=y[0],v=y[1],C=h.useRef([]),x=Ee(function(){return l.size||l.defaultSize||"middle"},{value:l.size,onChange:l.onSizeChange}),g=ue(x,2),p=g[0],R=g[1],w=h.useMemo(function(){var T,N;if(l!=null&&(T=l.columnsState)!==null&&T!==void 0&&T.defaultValue)return l.columnsState.defaultValue;var W={};return(N=l.columns)===null||N===void 0||N.forEach(function(L,P){var O=L.key,A=L.dataIndex,q=L.fixed,ee=L.disable,_=Mn(O??A,P);_&&(W[_]={show:!0,fixed:q,disable:ee})}),W},[l.columns]),k=Ee(function(){var T,N,W=l.columnsState||{},L=W.persistenceType,P=W.persistenceKey;if(P&&L&&typeof window<"u"){var O=window[L];try{var A=O==null?void 0:O.getItem(P);if(A){var q;if(l!=null&&(q=l.columnsState)!==null&&q!==void 0&&q.defaultValue){var ee;return gt({},l==null||(ee=l.columnsState)===null||ee===void 0?void 0:ee.defaultValue,JSON.parse(A))}return JSON.parse(A)}}catch(_){console.warn(_)}}return l.columnsStateMap||((T=l.columnsState)===null||T===void 0?void 0:T.value)||((N=l.columnsState)===null||N===void 0?void 0:N.defaultValue)||w},{value:((n=l.columnsState)===null||n===void 0?void 0:n.value)||l.columnsStateMap,onChange:((e=l.columnsState)===null||e===void 0?void 0:e.onChange)||l.onColumnsStateChange}),z=ue(k,2),M=z[0],E=z[1];h.useEffect(function(){var T=l.columnsState||{},N=T.persistenceType,W=T.persistenceKey;if(W&&N&&typeof window<"u"){var L=window[N];try{var P=L==null?void 0:L.getItem(W);if(P){var O;if(l!=null&&(O=l.columnsState)!==null&&O!==void 0&&O.defaultValue){var A;E(gt({},l==null||(A=l.columnsState)===null||A===void 0?void 0:A.defaultValue,JSON.parse(P)))}else E(JSON.parse(P))}else E(w)}catch(q){console.warn(q)}}},[(t=l.columnsState)===null||t===void 0?void 0:t.persistenceKey,(r=l.columnsState)===null||r===void 0?void 0:r.persistenceType,w]),dn(!l.columnsStateMap,"columnsStateMap已经废弃，请使用 columnsState.value 替换"),dn(!l.columnsStateMap,"columnsStateMap has been discarded, please use columnsState.value replacement");var K=h.useCallback(function(){var T=l.columnsState||{},N=T.persistenceType,W=T.persistenceKey;if(!(!W||!N||typeof window>"u")){var L=window[N];try{L==null||L.removeItem(W)}catch(P){console.warn(P)}}},[l.columnsState]);h.useEffect(function(){var T,N;if(!(!((T=l.columnsState)!==null&&T!==void 0&&T.persistenceKey)||!((N=l.columnsState)!==null&&N!==void 0&&N.persistenceType))&&!(typeof window>"u")){var W=l.columnsState,L=W.persistenceType,P=W.persistenceKey,O=window[L];try{O==null||O.setItem(P,JSON.stringify(M))}catch(A){console.warn(A),K()}}},[(a=l.columnsState)===null||a===void 0?void 0:a.persistenceKey,M,(s=l.columnsState)===null||s===void 0?void 0:s.persistenceType]);var $={action:o.current,setAction:function(N){o.current=N},sortKeyColumns:C.current,setSortKeyColumns:function(N){C.current=N},propsRef:m,columnsMap:M,keyWords:b,setKeyWords:function(N){return v(N)},setTableSize:R,tableSize:p,prefixName:d.current,setPrefixName:function(N){d.current=N},setColumnsMap:E,columns:l.columns,rootDomRef:c,clearPersistenceStorage:K,defaultColumnKeyMap:w};return Object.defineProperty($,"prefixName",{get:function(){return d.current}}),Object.defineProperty($,"sortKeyColumns",{get:function(){return C.current}}),Object.defineProperty($,"action",{get:function(){return o.current}}),$}var fn=h.createContext({}),$i=function(e){var t=Ki(e.initValue);return u.jsx(fn.Provider,{value:t,children:e.children})},ki=function(e){return S({},e.componentCls,{marginBlockEnd:16,backgroundColor:Qa(e.colorTextBase,.02),borderRadius:e.borderRadius,border:"none","&-container":{paddingBlock:e.paddingSM,paddingInline:e.paddingLG},"&-info":{display:"flex",alignItems:"center",transition:"all 0.3s",color:e.colorTextTertiary,"&-content":{flex:1},"&-option":{minWidth:48,paddingInlineStart:16}}})};function Di(n){return He("ProTableAlert",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[ki(t)]})}var _i=function(e){var t=e.intl,r=e.onCleanSelected;return[u.jsx("a",{onClick:r,children:t.getMessage("alert.clear","清空")},"0")]};function Oi(n){var e=n.selectedRowKeys,t=e===void 0?[]:e,r=n.onCleanSelected,a=n.alwaysShowAlert,s=n.selectedRows,l=n.alertInfoRender,o=l===void 0?function(R){var w=R.intl;return u.jsxs(Nn,{children:[w.getMessage("alert.selected","已选择"),t.length,w.getMessage("alert.item","项"),"  "]})}:l,c=n.alertOptionRender,d=c===void 0?_i:c,m=De(),f=d&&d({onCleanSelected:r,selectedRowKeys:t,selectedRows:s,intl:m}),y=h.useContext(Ae.ConfigContext),b=y.getPrefixCls,v=b("pro-table-alert"),C=Di(v),x=C.wrapSSR,g=C.hashId;if(o===!1)return null;var p=o({intl:m,selectedRowKeys:t,selectedRows:s,onCleanSelected:r});return p===!1||t.length<1&&!a?null:x(u.jsx("div",{className:"".concat(v," ").concat(g).trim(),children:u.jsx("div",{className:"".concat(v,"-container ").concat(g).trim(),children:u.jsxs("div",{className:"".concat(v,"-info ").concat(g).trim(),children:[u.jsx("div",{className:"".concat(v,"-info-content ").concat(g).trim(),children:p}),f?u.jsx("div",{className:"".concat(v,"-info-option ").concat(g).trim(),children:f}):null]})})}))}function zi(n){var e=n.replace(/[A-Z]/g,function(t){return"-".concat(t.toLowerCase())});return e.startsWith("-")&&(e=e.slice(1)),e}var Vi=function(e,t){return!e&&t!==!1?(t==null?void 0:t.filterType)==="light"?"LightFilter":"QueryFilter":"Form"},Hi=function(e,t,r){return!e&&r==="LightFilter"?Ve(i({},t),["labelWidth","defaultCollapsed","filterType"]):e?{}:Ve(i({labelWidth:t?t==null?void 0:t.labelWidth:void 0,defaultCollapsed:!0},t),["filterType"])},Wi=function(e,t){return e?Ve(t,["ignoreRules"]):i({ignoreRules:!0},t)},Ui=function(e){var t=e.onSubmit,r=e.formRef,a=e.dateFormatter,s=a===void 0?"string":a,l=e.type,o=e.columns,c=e.action,d=e.ghost,m=e.manualRequest,f=e.onReset,y=e.submitButtonLoading,b=e.search,v=e.form,C=e.bordered,x=h.useContext(Cn),g=x.hashId,p=l==="form",R=function(){var T=be(le().mark(function N(W,L){return le().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:t&&t(W,L);case 1:case"end":return O.stop()}},N)}));return function(W,L){return T.apply(this,arguments)}}(),w=h.useContext(Ae.ConfigContext),k=w.getPrefixCls,z=h.useMemo(function(){return o.filter(function(T){return!(T===cn.EXPAND_COLUMN||T===cn.SELECTION_COLUMN||(T.hideInSearch||T.search===!1)&&l!=="form"||l==="form"&&T.hideInForm)}).map(function(T){var N,W=!T.valueType||["textarea","jsonCode","code"].includes(T==null?void 0:T.valueType)&&l==="table"?"text":T==null?void 0:T.valueType,L=(T==null?void 0:T.key)||(T==null||(N=T.dataIndex)===null||N===void 0?void 0:N.toString());return i(i(i({},T),{},{width:void 0},T.search&&ze(T.search)==="object"?T.search:{}),{},{valueType:W,proFieldProps:i(i({},T.proFieldProps),{},{proFieldKey:L?"table-field-".concat(L):void 0})})})},[o,l]),M=k("pro-table-search"),E=k("pro-table-form"),K=h.useMemo(function(){return Vi(p,b)},[b,p]),$=h.useMemo(function(){return{submitter:{submitButtonProps:{loading:y}}}},[y]);return u.jsx("div",{className:Se(g,S(S(S(S(S(S(S(S(S({},k("pro-card"),!0),"".concat(k("pro-card"),"-border"),!!C),"".concat(k("pro-card"),"-bordered"),!!C),"".concat(k("pro-card"),"-ghost"),!!d),M,!0),E,p),k("pro-table-search-".concat(zi(K))),!0),"".concat(M,"-ghost"),d),b==null?void 0:b.className,b!==!1&&(b==null?void 0:b.className))),children:u.jsx(kr,i(i(i(i({layoutType:K,columns:z,type:l},$),Hi(p,b,K)),Wi(p,v||{})),{},{formRef:r,action:c,dateFormatter:s,onInit:function(N,W){if(r.current=W,l!=="form"){var L,P,O,A=(L=c.current)===null||L===void 0?void 0:L.pageInfo,q=N,ee=q.current,_=ee===void 0?A==null?void 0:A.current:ee,H=q.pageSize,U=H===void 0?A==null?void 0:A.pageSize:H;if((P=c.current)===null||P===void 0||(O=P.setPageInfo)===null||O===void 0||O.call(P,i(i({},A),{},{current:parseInt(_,10),pageSize:parseInt(U,10)})),m)return;R(N,!0)}},onReset:function(N){f==null||f(N)},onFinish:function(N){R(N,!1)},initialValues:v==null?void 0:v.initialValues}))})},Gi=function(n){jt(t,n);var e=Nt(t);function t(){var r;Bt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Je(r),"onSubmit",function(o,c){var d=r.props,m=d.pagination,f=d.beforeSearchSubmit,y=f===void 0?function(k){return k}:f,b=d.action,v=d.onSubmit,C=d.onFormSearchSubmit,x=m?Ye({current:m.current,pageSize:m.pageSize}):{},g=i(i({},o),{},{_timestamp:Date.now()},x),p=Ve(y(g),Object.keys(x));if(C(p),!c){var R,w;(R=b.current)===null||R===void 0||(w=R.setPageInfo)===null||w===void 0||w.call(R,{current:1})}v&&!c&&(v==null||v(o))}),S(Je(r),"onReset",function(o){var c,d,m=r.props,f=m.pagination,y=m.beforeSearchSubmit,b=y===void 0?function(R){return R}:y,v=m.action,C=m.onFormSearchSubmit,x=m.onReset,g=f?Ye({current:f.current,pageSize:f.pageSize}):{},p=Ve(b(i(i({},o),g)),Object.keys(g));C(p),(c=v.current)===null||c===void 0||(d=c.setPageInfo)===null||d===void 0||d.call(c,{current:1}),x==null||x()}),S(Je(r),"isEqual",function(o){var c=r.props,d=c.columns,m=c.loading,f=c.formRef,y=c.type,b=c.cardBordered,v=c.dateFormatter,C=c.form,x=c.search,g=c.manualRequest,p={columns:d,loading:m,formRef:f,type:y,cardBordered:b,dateFormatter:v,form:C,search:x,manualRequest:g};return!Er(p,{columns:o.columns,formRef:o.formRef,loading:o.loading,type:o.type,cardBordered:o.cardBordered,dateFormatter:o.dateFormatter,form:o.form,search:o.search,manualRequest:o.manualRequest})}),S(Je(r),"shouldComponentUpdate",function(o){return r.isEqual(o)}),S(Je(r),"render",function(){var o=r.props,c=o.columns,d=o.loading,m=o.formRef,f=o.type,y=o.action,b=o.cardBordered,v=o.dateFormatter,C=o.form,x=o.search,g=o.pagination,p=o.ghost,R=o.manualRequest,w=g?Ye({current:g.current,pageSize:g.pageSize}):{};return u.jsx(Ui,{submitButtonLoading:d,columns:c,type:f,ghost:p,formRef:m,onSubmit:r.onSubmit,manualRequest:R,onReset:r.onReset,dateFormatter:v,search:x,form:i(i({autoFocusFirstInput:!1},C),{},{extraUrlParams:i(i({},w),C==null?void 0:C.extraUrlParams)}),action:y,bordered:Or("search",b)})}),r}return Mt(t)}(se.Component),qi=function(e){return S(S(S({},e.componentCls,{width:"auto","&-title":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px"},"&-overlay":S(S(S(S({},"".concat(e.antCls,"-popover-inner-content"),{width:"200px",paddingBlock:0,paddingInline:0,paddingBlockEnd:8}),"".concat(e.antCls,"-tree-node-content-wrapper:hover"),{backgroundColor:"transparent"}),"".concat(e.antCls,"-tree-draggable-icon"),{cursor:"grab"}),"".concat(e.antCls,"-tree-treenode"),S(S({alignItems:"center","&:hover":S({},"".concat(e.componentCls,"-list-item-option"),{display:"block"})},"".concat(e.antCls,"-tree-checkbox"),{marginInlineEnd:"4px"}),"".concat(e.antCls,"-tree-title"),{width:"100%"}))}),"".concat(e.componentCls,"-action-rest-button"),{color:e.colorPrimary}),"".concat(e.componentCls,"-list"),S(S(S({display:"flex",flexDirection:"column",width:"100%",paddingBlockStart:8},"&".concat(e.componentCls,"-list-group"),{paddingBlockStart:0}),"&-title",{marginBlockStart:"6px",marginBlockEnd:"6px",paddingInlineStart:"24px",color:e.colorTextSecondary,fontSize:"12px"}),"&-item",{display:"flex",alignItems:"center",maxHeight:24,justifyContent:"space-between","&-title":{flex:1,maxWidth:80,textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"},"&-option":{display:"none",float:"right",cursor:"pointer","> span":{"> span.anticon":{color:e.colorPrimary}},"> span + span":{marginInlineStart:4}}}))};function Qi(n){return He("ColumnSetting",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[qi(t)]})}var Xi=["key","dataIndex","children"],Ji=["disabled"],ct=function(e){var t=e.title,r=e.show,a=e.children,s=e.columnKey,l=e.fixed,o=h.useContext(fn),c=o.columnsMap,d=o.setColumnsMap;return r?u.jsx(Sn,{title:t,children:u.jsx("span",{onClick:function(f){f.stopPropagation(),f.preventDefault();var y=c[s]||{},b=i(i({},c),{},S({},s,i(i({},y),{},{fixed:l})));d(b)},children:a})}):null},Yi=function(e){var t=e.columnKey,r=e.isLeaf,a=e.title,s=e.className,l=e.fixed,o=e.showListItemOption,c=De(),d=h.useContext(Cn),m=d.hashId,f=u.jsxs("span",{className:"".concat(s,"-list-item-option ").concat(m).trim(),children:[u.jsx(ct,{columnKey:t,fixed:"left",title:c.getMessage("tableToolBar.leftPin","固定在列首"),show:l!=="left",children:u.jsx(Ma,{})}),u.jsx(ct,{columnKey:t,fixed:void 0,title:c.getMessage("tableToolBar.noPin","不固定"),show:!!l,children:u.jsx(Ba,{})}),u.jsx(ct,{columnKey:t,fixed:"right",title:c.getMessage("tableToolBar.rightPin","固定在列尾"),show:l!=="right",children:u.jsx(La,{})})]});return u.jsxs("span",{className:"".concat(s,"-list-item ").concat(m).trim(),children:[u.jsx("div",{className:"".concat(s,"-list-item-title ").concat(m).trim(),children:a}),o&&!r?f:null]},t)},dt=function(e){var t,r,a,s=e.list,l=e.draggable,o=e.checkable,c=e.showListItemOption,d=e.className,m=e.showTitle,f=m===void 0?!0:m,y=e.title,b=e.listHeight,v=b===void 0?280:b,C=h.useContext(Cn),x=C.hashId,g=h.useContext(fn),p=g.columnsMap,R=g.setColumnsMap,w=g.sortKeyColumns,k=g.setSortKeyColumns,z=s&&s.length>0,M=h.useMemo(function(){if(!z)return{};var T=[],N=new Map,W=function L(P,O){return P.map(function(A){var q,ee=A.key;A.dataIndex;var _=A.children,H=we(A,Xi),U=Mn(ee,[O==null?void 0:O.columnKey,H.index].filter(Boolean).join("-")),D=p[U||"null"]||{show:!0};D.show!==!1&&!_&&T.push(U);var I=i(i({key:U},Ve(H,["className"])),{},{selectable:!1,disabled:D.disable===!0,disableCheckbox:typeof D.disable=="boolean"?D.disable:(q=D.disable)===null||q===void 0?void 0:q.checkbox,isLeaf:O?!0:void 0});if(_){var j;I.children=L(_,i(i({},D),{},{columnKey:U})),(j=I.children)!==null&&j!==void 0&&j.every(function(B){return T==null?void 0:T.includes(B.key)})&&T.push(U)}return N.set(ee,I),I})};return{list:W(s),keys:T,map:N}},[p,s,z]),E=Re(function(T,N,W){var L=i({},p),P=Oe(w),O=P.findIndex(function(_){return _===T}),A=P.findIndex(function(_){return _===N}),q=W>=O;if(!(O<0)){var ee=P[O];P.splice(O,1),W===0?P.unshift(ee):P.splice(q?A:A+1,0,ee),P.forEach(function(_,H){L[_]=i(i({},L[_]||{}),{},{order:H})}),R(L),k(P)}}),K=Re(function(T){var N=i({},p),W=function L(P){var O,A=i({},N[P]);if(A.show=T.checked,(O=M.map)!==null&&O!==void 0&&(O=O.get(P))!==null&&O!==void 0&&O.children){var q;(q=M.map.get(P))===null||q===void 0||(q=q.children)===null||q===void 0||q.forEach(function(ee){return L(ee.key)})}N[P]=A};W(T.node.key),R(i({},N))});if(!z)return null;var $=u.jsx(Na,{itemHeight:24,draggable:l&&!!((t=M.list)!==null&&t!==void 0&&t.length)&&((r=M.list)===null||r===void 0?void 0:r.length)>1,checkable:o,onDrop:function(N){var W=N.node.key,L=N.dragNode.key,P=N.dropPosition,O=N.dropToGap,A=P===-1||!O?P+1:P;E(L,W,A)},blockNode:!0,onCheck:function(N,W){return K(W)},checkedKeys:M.keys,showLine:!1,titleRender:function(N){var W=i(i({},N),{},{children:void 0});if(!W.title)return null;var L=Ge(W.title,W),P=u.jsx(pr.Text,{style:{width:80},ellipsis:{tooltip:L},children:L});return u.jsx(Yi,i(i({className:d},Ve(W,["key"])),{},{showListItemOption:c,title:P,columnKey:W.key}))},height:v,treeData:(a=M.list)===null||a===void 0?void 0:a.map(function(T){T.disabled;var N=we(T,Ji);return N})});return u.jsxs(u.Fragment,{children:[f&&u.jsx("span",{className:"".concat(d,"-list-title ").concat(x).trim(),children:y}),$]})},Zi=function(e){var t=e.localColumns,r=e.className,a=e.draggable,s=e.checkable,l=e.showListItemOption,o=e.listsHeight,c=h.useContext(Cn),d=c.hashId,m=[],f=[],y=[],b=De();t.forEach(function(x){if(!x.hideInSetting){var g=x.fixed;if(g==="left"){f.push(x);return}if(g==="right"){m.push(x);return}y.push(x)}});var v=m&&m.length>0,C=f&&f.length>0;return u.jsxs("div",{className:Se("".concat(r,"-list"),d,S({},"".concat(r,"-list-group"),v||C)),children:[u.jsx(dt,{title:b.getMessage("tableToolBar.leftFixedTitle","固定在左侧"),list:f,draggable:a,checkable:s,showListItemOption:l,className:r,listHeight:o}),u.jsx(dt,{list:y,draggable:a,checkable:s,showListItemOption:l,title:b.getMessage("tableToolBar.noFixedTitle","不固定"),showTitle:C||v,className:r,listHeight:o}),u.jsx(dt,{title:b.getMessage("tableToolBar.rightFixedTitle","固定在右侧"),list:m,draggable:a,checkable:s,showListItemOption:l,className:r,listHeight:o})]})};function es(n){var e,t,r,a,s=h.useRef(null),l=h.useContext(fn),o=n.columns,c=n.checkedReset,d=c===void 0?!0:c,m=l.columnsMap,f=l.setColumnsMap,y=l.clearPersistenceStorage;h.useEffect(function(){var K;if((K=l.propsRef.current)!==null&&K!==void 0&&(K=K.columnsState)!==null&&K!==void 0&&K.value){var $;s.current=JSON.parse(JSON.stringify((($=l.propsRef.current)===null||$===void 0||($=$.columnsState)===null||$===void 0?void 0:$.value)||{}))}},[]);var b=Re(function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,$={},T=function N(W){W.forEach(function(L){var P=L.key,O=L.fixed,A=L.index,q=L.children,ee=L.disable,_=Mn(P,A);if(_){var H,U;$[_]={show:ee?(H=m[_])===null||H===void 0?void 0:H.show:K,fixed:O,disable:ee,order:(U=m[_])===null||U===void 0?void 0:U.order}}q&&N(q)})};T(o),f($)}),v=Re(function(K){K.target.checked?b():b(!1)}),C=Re(function(){var K;y==null||y(),f(((K=l.propsRef.current)===null||K===void 0||(K=K.columnsState)===null||K===void 0?void 0:K.defaultValue)||s.current||l.defaultColumnKeyMap)}),x=Object.values(m).filter(function(K){return!K||K.show===!1}),g=x.length>0&&x.length!==o.length,p=De(),R=h.useContext(Ae.ConfigContext),w=R.getPrefixCls,k=w("pro-table-column-setting"),z=Qi(k),M=z.wrapSSR,E=z.hashId;return M(u.jsx(hr,{arrow:!1,title:u.jsxs("div",{className:"".concat(k,"-title ").concat(E).trim(),children:[n.checkable===!1?u.jsx("div",{}):u.jsx(Ea,{indeterminate:g,checked:x.length===0&&x.length!==o.length,onChange:function($){v($)},children:p.getMessage("tableToolBar.columnDisplay","列展示")}),d?u.jsx("a",{onClick:C,className:"".concat(k,"-action-rest-button ").concat(E).trim(),children:p.getMessage("tableToolBar.reset","重置")}):null,n!=null&&n.extra?u.jsx(Nn,{size:12,align:"center",children:n.extra}):null]}),overlayClassName:"".concat(k,"-overlay ").concat(E).trim(),trigger:"click",placement:"bottomRight",content:u.jsx(Zi,{checkable:(e=n.checkable)!==null&&e!==void 0?e:!0,draggable:(t=n.draggable)!==null&&t!==void 0?t:!0,showListItemOption:(r=n.showListItemOption)!==null&&r!==void 0?r:!0,className:k,localColumns:o,listsHeight:n.listsHeight}),children:n.children||u.jsx(Sn,{title:p.getMessage("tableToolBar.columnSetting","列设置"),children:(a=n.settingIcon)!==null&&a!==void 0?a:u.jsx(ja,{})})}))}var ns=function(e){var t=h.useContext(Cn),r=t.hashId,a=e.items,s=a===void 0?[]:a,l=e.type,o=l===void 0?"inline":l,c=e.prefixCls,d=e.activeKey,m=e.defaultActiveKey,f=Ee(d||m,{value:d,onChange:e.onChange}),y=ue(f,2),b=y[0],v=y[1];if(s.length<1)return null;var C=s.find(function(g){return g.key===b})||s[0];if(o==="inline")return u.jsx("div",{className:Se("".concat(c,"-menu"),"".concat(c,"-inline-menu"),r),children:s.map(function(g,p){return u.jsx("div",{onClick:function(){v(g.key)},className:Se("".concat(c,"-inline-menu-item"),C.key===g.key?"".concat(c,"-inline-menu-item-active"):void 0,r),children:g.label},g.key||p)})});if(o==="tab")return u.jsx(En,{items:s.map(function(g){var p;return i(i({},g),{},{key:(p=g.key)===null||p===void 0?void 0:p.toString()})}),activeKey:C.key,onTabClick:function(p){return v(p)},children:nt(Zn,"4.23.0")<0?s==null?void 0:s.map(function(g,p){return h.createElement(En.TabPane,i(i({},g),{},{key:g.key||p,tab:g.label}))}):null});var x=Br({selectedKeys:[C.key],onClick:function(p){v(p.key)},items:s.map(function(g,p){return{key:g.key||p,disabled:g.disabled,label:g.label}})});return u.jsx("div",{className:Se("".concat(c,"-menu"),"".concat(c,"-dropdownmenu")),children:u.jsx(Cr,i(i({trigger:["click"]},x),{},{children:u.jsxs(Nn,{className:"".concat(c,"-dropdownmenu-label"),children:[C.label,u.jsx(ht,{})]})}))})},ts=function(e){return S({},e.componentCls,S(S(S({lineHeight:"1","&-container":{display:"flex",justifyContent:"space-between",paddingBlock:e.padding,paddingInline:0,"&-mobile":{flexDirection:"column"}},"&-title":{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.colorTextHeading,fontWeight:"500",fontSize:e.fontSizeLG},"&-search:not(:last-child)":{display:"flex",alignItems:"center",justifyContent:"flex-start"},"&-setting-item":{marginBlock:0,marginInline:4,color:e.colorIconHover,fontSize:e.fontSizeLG,cursor:"pointer","> span":{display:"block",width:"100%",height:"100%"},"&:hover":{color:e.colorPrimary}},"&-left":S(S({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.marginXS,justifyContent:"flex-start",maxWidth:"calc(100% - 200px)"},"".concat(e.antCls,"-tabs"),{width:"100%"}),"&-has-tabs",{overflow:"hidden"}),"&-right":{flex:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:e.marginXS},"&-extra-line":{marginBlockEnd:e.margin},"&-setting-items":{display:"flex",gap:e.marginXS,lineHeight:"32px",alignItems:"center"},"&-filter":S({"&:not(:last-child)":{marginInlineEnd:e.margin},display:"flex",alignItems:"center"},"div$".concat(e.antCls,"-pro-table-search"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0}),"&-inline-menu-item":{display:"inline-block",marginInlineEnd:e.marginLG,cursor:"pointer",opacity:"0.75","&-active":{fontWeight:"bold",opacity:"1"}}},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),S({marginBlockEnd:0,"&::before":{borderBlockEnd:0}},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:0,"${token.antCls}-tabs-tab":{paddingBlockStart:0}})),"&-dropdownmenu-label",{fontWeight:"bold",fontSize:e.fontSizeIcon,textAlign:"center",cursor:"pointer"}),"@media (max-width: 768px)",S({},e.componentCls,{"&-container":{display:"flex",flexWrap:"wrap",flexDirection:"column"},"&-left":{marginBlockEnd:"16px",maxWidth:"100%"}})))};function rs(n){return He("ProTableListToolBar",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[ts(t)]})}function as(n){if(se.isValidElement(n))return n;if(n){var e=n,t=e.icon,r=e.tooltip,a=e.onClick,s=e.key;return t&&r?u.jsx(Sn,{title:r,children:u.jsx("span",{onClick:function(){a&&a(s)},children:t},s)}):u.jsx("span",{onClick:function(){a&&a(s)},children:t},s)}return null}var ls=function(e){var t,r=e.prefixCls,a=e.tabs,s=e.multipleLine,l=e.filtersNode;return s?u.jsx("div",{className:"".concat(r,"-extra-line"),children:a!=null&&a.items&&a!==null&&a!==void 0&&a.items.length?u.jsx(En,{style:{width:"100%"},defaultActiveKey:a.defaultActiveKey,activeKey:a.activeKey,items:a.items.map(function(o,c){var d;return i(i({label:o.tab},o),{},{key:((d=o.key)===null||d===void 0?void 0:d.toString())||(c==null?void 0:c.toString())})}),onChange:a.onChange,tabBarExtraContent:l,children:(t=a.items)===null||t===void 0?void 0:t.map(function(o,c){return nt(Zn,"4.23.0")<0?h.createElement(En.TabPane,i(i({},o),{},{key:o.key||c,tab:o.tab})):null})}):l}):null},os=function(e){var t=e.prefixCls,r=e.title,a=e.subTitle,s=e.tooltip,l=e.className,o=e.style,c=e.search,d=e.onSearch,m=e.multipleLine,f=m===void 0?!1:m,y=e.filter,b=e.actions,v=b===void 0?[]:b,C=e.settings,x=C===void 0?[]:C,g=e.tabs,p=e.menu,R=h.useContext(Ae.ConfigContext),w=R.getPrefixCls,k=Gn.useToken(),z=k.token,M=w("pro-table-list-toolbar",t),E=rs(M),K=E.wrapSSR,$=E.hashId,T=De(),N=h.useState(!1),W=ue(N,2),L=W[0],P=W[1],O=T.getMessage("tableForm.inputPlaceholder","请输入"),A=h.useMemo(function(){return c?se.isValidElement(c)?c:u.jsx(br.Search,i(i({style:{width:200},placeholder:O},c),{},{onSearch:be(le().mark(function B(){var F,V,Y,X,J,G,ce=arguments;return le().wrap(function(he){for(;;)switch(he.prev=he.next){case 0:for(Y=ce.length,X=new Array(Y),J=0;J<Y;J++)X[J]=ce[J];return he.next=3,(F=(V=c).onSearch)===null||F===void 0?void 0:F.call.apply(F,[V].concat(X));case 3:G=he.sent,G!==!1&&(d==null||d(X==null?void 0:X[0]));case 5:case"end":return he.stop()}},B)}))})):null},[O,d,c]),q=h.useMemo(function(){return y?u.jsx("div",{className:"".concat(M,"-filter ").concat($).trim(),children:y}):null},[y,$,M]),ee=h.useMemo(function(){return p||r||a||s},[p,a,r,s]),_=h.useMemo(function(){return Array.isArray(v)?v.length<1?null:u.jsx("div",{style:{display:"flex",alignItems:"center",gap:z.marginXS},children:v.map(function(B,F){return se.isValidElement(B)?se.cloneElement(B,i({key:F},B==null?void 0:B.props)):u.jsx(se.Fragment,{children:B},F)})}):v},[v]),H=h.useMemo(function(){return!!(ee&&A||!f&&q||_||x!=null&&x.length)},[_,q,ee,f,A,x==null?void 0:x.length]),U=h.useMemo(function(){return s||r||a||p||!ee&&A},[ee,p,A,a,r,s]),D=h.useMemo(function(){return!U&&H?u.jsx("div",{className:"".concat(M,"-left ").concat($).trim()}):!p&&(ee||!A)?u.jsx("div",{className:"".concat(M,"-left ").concat($).trim(),children:u.jsx("div",{className:"".concat(M,"-title ").concat($).trim(),children:u.jsx(jn,{tooltip:s,label:r,subTitle:a})})}):u.jsxs("div",{className:Se("".concat(M,"-left"),$,S(S(S({},"".concat(M,"-left-has-tabs"),(p==null?void 0:p.type)==="tab"),"".concat(M,"-left-has-dropdown"),(p==null?void 0:p.type)==="dropdown"),"".concat(M,"-left-has-inline-menu"),(p==null?void 0:p.type)==="inline")),children:[ee&&!p&&u.jsx("div",{className:"".concat(M,"-title ").concat($).trim(),children:u.jsx(jn,{tooltip:s,label:r,subTitle:a})}),p&&u.jsx(ns,i(i({},p),{},{prefixCls:M})),!ee&&A?u.jsx("div",{className:"".concat(M,"-search ").concat($).trim(),children:A}):null]})},[U,H,ee,$,p,M,A,a,r,s]),I=h.useMemo(function(){return H?u.jsxs("div",{className:"".concat(M,"-right ").concat($).trim(),style:L?{}:{alignItems:"center"},children:[f?null:q,ee&&A?u.jsx("div",{className:"".concat(M,"-search ").concat($).trim(),children:A}):null,_,x!=null&&x.length?u.jsx("div",{className:"".concat(M,"-setting-items ").concat($).trim(),children:x.map(function(B,F){var V=as(B);return u.jsx("div",{className:"".concat(M,"-setting-item ").concat($).trim(),children:V},F)})}):null]}):null},[H,M,$,L,ee,A,f,q,_,x]),j=h.useMemo(function(){if(!H&&!U)return null;var B=Se("".concat(M,"-container"),$,S({},"".concat(M,"-container-mobile"),L));return u.jsxs("div",{className:B,children:[D,I]})},[U,H,$,L,D,M,I]);return K(u.jsx(Sr,{onResize:function(F){F.width<375!==L&&P(F.width<375)},children:u.jsxs("div",{style:o,className:Se(M,$,l),children:[j,u.jsx(ls,{filtersNode:q,prefixCls:M,tabs:g,multipleLine:f})]})}))},is=function(e){var t=e.icon,r=t===void 0?u.jsx(Aa,{}):t,a=h.useContext(fn),s=De(),l=Br({selectedKeys:[a.tableSize],onClick:function(c){var d,m=c.key;(d=a.setTableSize)===null||d===void 0||d.call(a,m)},style:{width:80},items:[{key:"large",label:s.getMessage("tableToolBar.densityLarger","宽松")},{key:"middle",label:s.getMessage("tableToolBar.densityMiddle","中等")},{key:"small",label:s.getMessage("tableToolBar.densitySmall","紧凑")}]});return u.jsx(Cr,i(i({},l),{},{trigger:["click"],children:u.jsx(Sn,{title:s.getMessage("tableToolBar.density","表格密度"),children:r})}))};const ss=se.memo(is);var us=function(){var e=De(),t=h.useState(!1),r=ue(t,2),a=r[0],s=r[1];return h.useEffect(function(){mr()&&(document.onfullscreenchange=function(){s(!!document.fullscreenElement)})},[]),a?u.jsx(Sn,{title:e.getMessage("tableToolBar.exitFullScreen","全屏"),children:u.jsx(Ka,{})}):u.jsx(Sn,{title:e.getMessage("tableToolBar.fullScreen","全屏"),children:u.jsx($a,{})})};const zr=se.memo(us);var cs=["headerTitle","tooltip","toolBarRender","action","options","selectedRowKeys","selectedRows","toolbar","onSearch","columns","optionsRender"];function ds(n,e){var t,r=n.intl;return{reload:{text:r.getMessage("tableToolBar.reload","刷新"),icon:(t=e.reloadIcon)!==null&&t!==void 0?t:u.jsx(ka,{})},density:{text:r.getMessage("tableToolBar.density","表格密度"),icon:u.jsx(ss,{icon:e.densityIcon})},fullScreen:{text:r.getMessage("tableToolBar.fullScreen","全屏"),icon:u.jsx(zr,{})}}}function fs(n,e,t,r){return Object.keys(n).filter(function(a){return a}).map(function(a){var s=n[a];if(!s)return null;var l=s===!0?e[a]:function(c){s==null||s(c,t.current)};if(typeof l!="function"&&(l=function(){}),a==="setting")return h.createElement(es,i(i({},n[a]),{},{columns:r,key:a}));if(a==="fullScreen")return u.jsx("span",{onClick:l,children:u.jsx(zr,{})},a);var o=ds(e,n)[a];return o?u.jsx("span",{onClick:l,children:u.jsx(Sn,{title:o.text,children:o.icon})},a):null}).filter(function(a){return a})}function vs(n){var e=n.headerTitle,t=n.tooltip,r=n.toolBarRender,a=n.action,s=n.options,l=n.selectedRowKeys,o=n.selectedRows,c=n.toolbar,d=n.onSearch,m=n.columns,f=n.optionsRender,y=we(n,cs),b=h.useContext(fn),v=De(),C=h.useMemo(function(){var p={reload:function(){var z;return a==null||(z=a.current)===null||z===void 0?void 0:z.reload()},density:!0,setting:!0,search:!1,fullScreen:function(){var z,M;return a==null||(z=a.current)===null||z===void 0||(M=z.fullScreen)===null||M===void 0?void 0:M.call(z)}};if(s===!1)return[];var R=i(i({},p),{},{fullScreen:!1},s),w=fs(R,i(i({},p),{},{intl:v}),a,m);return f?f(i({headerTitle:e,tooltip:t,toolBarRender:r,action:a,options:s,selectedRowKeys:l,selectedRows:o,toolbar:c,onSearch:d,columns:m,optionsRender:f},y),w):w},[a,m,e,v,d,f,s,y,l,o,r,c,t]),x=r?r(a==null?void 0:a.current,{selectedRowKeys:l,selectedRows:o}):[],g=h.useMemo(function(){if(!s||!s.search)return!1;var p={value:b.keyWords,onChange:function(w){return b.setKeyWords(w.target.value)}};return s.search===!0?p:i(i({},p),s.search)},[b,s]);return h.useEffect(function(){b.keyWords===void 0&&(d==null||d(""))},[b.keyWords,d]),u.jsx(os,i({title:e,tooltip:t||y.tip,search:g,onSearch:d,actions:x,settings:C},c))}var ms=function(n){jt(t,n);var e=Nt(t);function t(){var r;Bt(this,t);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];return r=e.call.apply(e,[this].concat(s)),S(Je(r),"onSearch",function(o){var c,d,m,f,y=r.props,b=y.options,v=y.onFormSearchSubmit,C=y.actionRef;if(!(!b||!b.search)){var x=b.search===!0?{}:b.search,g=x.name,p=g===void 0?"keyword":g,R=(c=b.search)===null||c===void 0||(d=c.onSearch)===null||d===void 0?void 0:d.call(c,o);R!==!1&&(C==null||(m=C.current)===null||m===void 0||(f=m.setPageInfo)===null||f===void 0||f.call(m,{current:1}),v(Ye(S({_timestamp:Date.now()},p,o))))}}),S(Je(r),"isEquals",function(o){var c=r.props,d=c.hideToolbar,m=c.tableColumn,f=c.options,y=c.tooltip,b=c.toolbar,v=c.selectedRows,C=c.selectedRowKeys,x=c.headerTitle,g=c.actionRef,p=c.toolBarRender;return Er({hideToolbar:d,tableColumn:m,options:f,tooltip:y,toolbar:b,selectedRows:v,selectedRowKeys:C,headerTitle:x,actionRef:g,toolBarRender:p},{hideToolbar:o.hideToolbar,tableColumn:o.tableColumn,options:o.options,tooltip:o.tooltip,toolbar:o.toolbar,selectedRows:o.selectedRows,selectedRowKeys:o.selectedRowKeys,headerTitle:o.headerTitle,actionRef:o.actionRef,toolBarRender:o.toolBarRender},["render","renderFormItem"])}),S(Je(r),"shouldComponentUpdate",function(o){return o.searchNode?!0:!r.isEquals(o)}),S(Je(r),"render",function(){var o=r.props,c=o.hideToolbar,d=o.tableColumn,m=o.options,f=o.searchNode,y=o.tooltip,b=o.toolbar,v=o.selectedRows,C=o.selectedRowKeys,x=o.headerTitle,g=o.actionRef,p=o.toolBarRender,R=o.optionsRender;return c?null:u.jsx(vs,{tooltip:y,columns:d,options:m,headerTitle:x,action:g,onSearch:r.onSearch,selectedRows:v,selectedRowKeys:C,toolBarRender:p,toolbar:i({filter:f},b),optionsRender:R})}),r}return Mt(t)}(se.Component),hs=new yr("turn",{"0%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(90deg)"},"50%":{transform:"rotate(180deg)"},"75%":{transform:"rotate(270deg)"},"100%":{transform:"rotate(360deg)"}}),ps=function(e){return S(S(S({},e.componentCls,S(S(S(S(S(S(S(S(S({zIndex:1},"".concat(e.antCls,"-table-wrapper ").concat(e.antCls,"-table-pagination").concat(e.antCls,"-pagination"),{marginBlockEnd:0}),"&:not(:root):fullscreen",{minHeight:"100vh",overflow:"auto",background:e.colorBgContainer}),"&-extra",{marginBlockEnd:16}),"&-polling",S({},"".concat(e.componentCls,"-list-toolbar-setting-item"),{".anticon.anticon-reload":{transform:"rotate(0deg)",animationName:hs,animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite"}})),"td".concat(e.antCls,"-table-cell"),{">a":{fontSize:e.fontSize}}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-tbody").concat(e.antCls,"-table-wrapper:only-child").concat(e.antCls,"-table"),{marginBlock:0,marginInline:0}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-middle ").concat(e.componentCls),S({marginBlock:0,marginInline:-8},"".concat(e.proComponentsCls,"-card"),{backgroundColor:"initial"})),"& &-search",S(S(S(S({marginBlockEnd:"16px",background:e.colorBgContainer,"&-ghost":{background:"transparent"}},"&".concat(e.componentCls,"-form"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:16,overflow:"unset"}),"&-light-filter",{marginBlockEnd:0,paddingBlock:0,paddingInline:0}),"&-form-option",S(S(S({},"".concat(e.antCls,"-form-item"),{}),"".concat(e.antCls,"-form-item-label"),{}),"".concat(e.antCls,"-form-item-control-input"),{})),"@media (max-width: 575px)",S({},e.componentCls,S({height:"auto !important",paddingBlockEnd:"24px"},"".concat(e.antCls,"-form-item-label"),{minWidth:"80px",textAlign:"start"})))),"&-toolbar",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"64px",paddingInline:24,paddingBlock:0,"&-option":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"&-title":{flex:"1",color:e.colorTextLabel,fontWeight:"500",fontSize:"16px",lineHeight:"24px",opacity:"0.85"}})),"@media (max-width: ".concat(e.screenXS,")px"),S({},e.componentCls,S({},"".concat(e.antCls,"-table"),{width:"100%",overflowX:"auto","&-thead > tr,&-tbody > tr":{"> th,> td":{whiteSpace:"pre",">span":{display:"block"}}}}))),"@media (max-width: 575px)",S({},"".concat(e.componentCls,"-toolbar"),{flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",height:"auto",marginBlockEnd:"16px",marginInlineStart:"16px",paddingBlock:8,paddingInline:8,paddingBlockStart:"16px",lineHeight:"normal","&-title":{marginBlockEnd:16},"&-option":{display:"flex",justifyContent:"space-between",width:"100%"},"&-default-option":{display:"flex",flex:"1",alignItems:"center",justifyContent:"flex-end"}}))};function gs(n){return He("ProTable",function(e){var t=i(i({},e),{},{componentCls:".".concat(n)});return[ps(t)]})}var ys=["data","success","total"],bs=function(e){var t=e.pageInfo;if(t){var r=t.current,a=t.defaultCurrent,s=t.pageSize,l=t.defaultPageSize;return{current:r||a||1,total:0,pageSize:s||l||20}}return{current:1,total:0,pageSize:20}},Ss=function(e,t,r){var a,s=h.useRef(!1),l=h.useRef(null),o=r||{},c=o.onLoad,d=o.manual,m=o.polling,f=o.onRequestError,y=o.debounceTime,b=y===void 0?20:y,v=o.effects,C=v===void 0?[]:v,x=h.useRef(d),g=h.useRef(),p=Ee(t,{value:r==null?void 0:r.dataSource,onChange:r==null?void 0:r.onDataSourceChange}),R=ue(p,2),w=R[0],k=R[1],z=Ee(!1,{value:ze(r==null?void 0:r.loading)==="object"?r==null||(a=r.loading)===null||a===void 0?void 0:a.spinning:r==null?void 0:r.loading,onChange:r==null?void 0:r.onLoadingChange}),M=ue(z,2),E=M[0],K=M[1],$=Ee(function(){return bs(r)},{onChange:r==null?void 0:r.onPageInfoChange}),T=ue($,2),N=T[0],W=T[1],L=Re(function(F){(F.current!==N.current||F.pageSize!==N.pageSize||F.total!==N.total)&&W(F)}),P=Ee(!1),O=ue(P,2),A=O[0],q=O[1],ee=function(V,Y){mt.unstable_batchedUpdates(function(){k(V),(N==null?void 0:N.total)!==Y&&L(i(i({},N),{},{total:Y||V.length}))})},_=qn(N==null?void 0:N.current),H=qn(N==null?void 0:N.pageSize),U=qn(m),D=Re(function(){mt.unstable_batchedUpdates(function(){K(!1),q(!1)})}),I=function(){var F=be(le().mark(function V(Y){var X,J,G,ce,ne,he,ae,re,me,de,Be,ie;return le().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!x.current){oe.next=3;break}return x.current=!1,oe.abrupt("return");case 3:return Y?q(!0):K(!0),X=N||{},J=X.pageSize,G=X.current,oe.prev=5,ce=(r==null?void 0:r.pageInfo)!==!1?{current:G,pageSize:J}:void 0,oe.next=9,e==null?void 0:e(ce);case 9:if(oe.t0=oe.sent,oe.t0){oe.next=12;break}oe.t0={};case 12:if(ne=oe.t0,he=ne.data,ae=he===void 0?[]:he,re=ne.success,me=ne.total,de=me===void 0?0:me,Be=we(ne,ys),re!==!1){oe.next=21;break}return oe.abrupt("return",[]);case 21:return ie=Mi(ae,[r.postData].filter(function(Le){return Le})),ee(ie,de),c==null||c(ie,Be),oe.abrupt("return",ie);case 27:if(oe.prev=27,oe.t1=oe.catch(5),f!==void 0){oe.next=31;break}throw new Error(oe.t1);case 31:w===void 0&&k([]),f(oe.t1);case 33:return oe.prev=33,D(),oe.finish(33);case 36:return oe.abrupt("return",[]);case 37:case"end":return oe.stop()}},V,null,[[5,27,33,36]])}));return function(Y){return F.apply(this,arguments)}}(),j=wr(function(){var F=be(le().mark(function V(Y){var X,J,G;return le().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(g.current&&clearTimeout(g.current),e){ne.next=3;break}return ne.abrupt("return");case 3:return X=new AbortController,l.current=X,ne.prev=5,ne.next=8,Promise.race([I(Y),new Promise(function(he,ae){var re,me;(re=l.current)===null||re===void 0||(re=re.signal)===null||re===void 0||(me=re.addEventListener)===null||me===void 0||me.call(re,"abort",function(){ae("aborted"),j.cancel(),D()})})]);case 8:if(J=ne.sent,!X.signal.aborted){ne.next=11;break}return ne.abrupt("return");case 11:return G=Ge(m,J),G&&!s.current&&(g.current=setTimeout(function(){j.run(G)},Math.max(G,2e3))),ne.abrupt("return",J);case 16:if(ne.prev=16,ne.t0=ne.catch(5),ne.t0!=="aborted"){ne.next=20;break}return ne.abrupt("return");case 20:throw ne.t0;case 21:case"end":return ne.stop()}},V,null,[[5,16]])}));return function(V){return F.apply(this,arguments)}}(),b||30),B=function(){var V;(V=l.current)===null||V===void 0||V.abort(),j.cancel(),D()};return h.useEffect(function(){return m||clearTimeout(g.current),!U&&m&&j.run(!0),function(){clearTimeout(g.current)}},[m]),h.useEffect(function(){return s.current=!1,function(){s.current=!0}},[]),h.useEffect(function(){var F=N||{},V=F.current,Y=F.pageSize;(!_||_===V)&&(!H||H===Y)||r.pageInfo&&w&&(w==null?void 0:w.length)>Y||V!==void 0&&w&&w.length<=Y&&(B(),j.run(!1))},[N==null?void 0:N.current]),h.useEffect(function(){H&&(B(),j.run(!1))},[N==null?void 0:N.pageSize]),pt(function(){return B(),j.run(!1),d||(x.current=!1),function(){B()}},[].concat(Oe(C),[d])),{dataSource:w,setDataSource:k,loading:ze(r==null?void 0:r.loading)==="object"?i(i({},r==null?void 0:r.loading),{},{spinning:E}):E,reload:function(){var F=be(le().mark(function Y(){return le().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return B(),J.abrupt("return",j.run(!1));case 2:case"end":return J.stop()}},Y)}));function V(){return F.apply(this,arguments)}return V}(),pageInfo:N,pollingLoading:A,reset:function(){var F=be(le().mark(function Y(){var X,J,G,ce,ne,he,ae,re;return le().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:X=r||{},J=X.pageInfo,G=J||{},ce=G.defaultCurrent,ne=ce===void 0?1:ce,he=G.defaultPageSize,ae=he===void 0?20:he,re={current:ne,total:0,pageSize:ae},L(re);case 4:case"end":return de.stop()}},Y)}));function V(){return F.apply(this,arguments)}return V}(),setPageInfo:function(){var F=be(le().mark(function Y(X){return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:L(i(i({},N),X));case 1:case"end":return G.stop()}},Y)}));function V(Y){return F.apply(this,arguments)}return V}()}},Cs=function(e){return function(t,r){var a,s,l=t.fixed,o=t.index,c=r.fixed,d=r.index;if(l==="left"&&c!=="left"||c==="right"&&l!=="right")return-2;if(c==="left"&&l!=="left"||l==="right"&&c!=="right")return 2;var m=t.key||"".concat(o),f=r.key||"".concat(d);if((a=e[m])!==null&&a!==void 0&&a.order||(s=e[f])!==null&&s!==void 0&&s.order){var y,b;return(((y=e[m])===null||y===void 0?void 0:y.order)||0)-(((b=e[f])===null||b===void 0?void 0:b.order)||0)}return(t.index||0)-(r.index||0)}},xs=["children"],Rs=["",null,void 0],or=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(a){return a!==void 0}).map(function(a){return typeof a=="number"?a.toString():a}).flat(1)},ws=function(e){var t=h.useContext(Xa),r=e.columnProps,a=e.prefixName,s=e.text,l=e.counter,o=e.rowData,c=e.index,d=e.recordKey,m=e.subName,f=e.proFieldProps,y=e.editableUtils,b=et.useFormInstance(),v=d||c,C=h.useMemo(function(){var E,K;return(E=y==null||(K=y.getRealIndex)===null||K===void 0?void 0:K.call(y,o))!==null&&E!==void 0?E:c},[y,c,o]),x=h.useState(function(){var E,K;return or(a,a?m:[],a?C:v,(E=(K=r==null?void 0:r.key)!==null&&K!==void 0?K:r==null?void 0:r.dataIndex)!==null&&E!==void 0?E:c)}),g=ue(x,2),p=g[0],R=g[1],w=h.useMemo(function(){return p.slice(0,-1)},[p]);h.useEffect(function(){var E,K,$=or(a,a?m:[],a?C:v,(E=(K=r==null?void 0:r.key)!==null&&K!==void 0?K:r==null?void 0:r.dataIndex)!==null&&E!==void 0?E:c);$.join("-")!==p.join("-")&&R($)},[r==null?void 0:r.dataIndex,r==null?void 0:r.key,c,d,a,v,m,p,C]);var k=h.useMemo(function(){return[b,i(i({},r),{},{rowKey:w,rowIndex:c,isEditable:!0})]},[r,b,c,w]),z=h.useCallback(function(E){var K=E.children,$=we(E,xs);return u.jsx(bl,i(i({popoverProps:{getPopupContainer:t.getPopupContainer||function(){return l.rootDomRef.current||document.body}},errorType:"popover",name:p},$),{},{children:K}),v)},[v,p]),M=h.useCallback(function(){var E,K,$=i({},Ct.apply(void 0,[r==null?void 0:r.formItemProps].concat(Oe(k))));$.messageVariables=i({label:(r==null?void 0:r.title)||"此项",type:(r==null?void 0:r.valueType)||"文本"},$==null?void 0:$.messageVariables),$.initialValue=(E=(K=a?null:s)!==null&&K!==void 0?K:$==null?void 0:$.initialValue)!==null&&E!==void 0?E:r==null?void 0:r.initialValue;var T=u.jsx(Xn,i({cacheForSwr:!0,name:p,proFormFieldKey:v,ignoreFormItem:!0,fieldProps:Ct.apply(void 0,[r==null?void 0:r.fieldProps].concat(Oe(k)))},f),p.join("-"));return r!=null&&r.renderFormItem&&(T=r.renderFormItem(i(i({},r),{},{index:c,isEditable:!0,type:"table"}),{defaultRender:function(){return u.jsx(u.Fragment,{children:T})},type:"form",recordKey:d,record:i(i({},o),b==null?void 0:b.getFieldValue([v])),isEditable:!0},b,e.editableUtils),r.ignoreFormItem)?u.jsx(u.Fragment,{children:T}):u.jsx(z,i(i({},$),{},{children:T}),p.join("-"))},[r,k,a,s,v,p,f,z,c,d,o,b,e.editableUtils]);return p.length===0?null:typeof(r==null?void 0:r.renderFormItem)=="function"||typeof(r==null?void 0:r.fieldProps)=="function"||typeof(r==null?void 0:r.formItemProps)=="function"?u.jsx(Ze.Item,{noStyle:!0,shouldUpdate:function(K,$){if(K===$)return!1;var T=[w].flat(1);try{return JSON.stringify(en(K,T))!==JSON.stringify(en($,T))}catch{return!0}},children:function(){return M()}}):M()};function Vr(n){var e,t,r=n.text,a=n.valueType,s=n.rowData,l=n.columnProps,o=n.index;if((!a||["textarea","text"].includes(a.toString()))&&!(l!=null&&l.valueEnum)&&n.mode==="read")return Rs.includes(r)?n.columnEmptyText:r;if(typeof a=="function"&&s)return Vr(i(i({},n),{},{valueType:a(s,n.type)||"text"}));var c=(l==null?void 0:l.key)||(l==null||(e=l.dataIndex)===null||e===void 0?void 0:e.toString()),d=l!=null&&l.dependencies?[n.prefixName,n.prefixName?o==null?void 0:o.toString():(t=n.recordKey)===null||t===void 0?void 0:t.toString(),l==null?void 0:l.dependencies].filter(Boolean).flat(1):[],m={valueEnum:Ge(l==null?void 0:l.valueEnum,s),request:l==null?void 0:l.request,dependencies:l!=null&&l.dependencies?[d]:void 0,originDependencies:l!=null&&l.dependencies?[l==null?void 0:l.dependencies]:void 0,params:Ge(l==null?void 0:l.params,s,l),readonly:l==null?void 0:l.readonly,text:a==="index"||a==="indexBorder"?n.index:r,mode:n.mode,renderFormItem:void 0,valueType:a,record:s,proFieldProps:{emptyText:n.columnEmptyText,proFieldKey:c?"table-field-".concat(c):void 0}};return n.mode!=="edit"?u.jsx(Xn,i({mode:"read",ignoreFormItem:!0,fieldProps:Ct(l==null?void 0:l.fieldProps,null,l)},m)):u.jsx(ws,i(i({},n),{},{proFieldProps:m}),n.recordKey)}var Ts=function(e){var t,r=e.title,a=typeof(e==null?void 0:e.ellipsis)=="boolean"?e==null?void 0:e.ellipsis:e==null||(t=e.ellipsis)===null||t===void 0?void 0:t.showTitle;return r&&typeof r=="function"?r(e,"table",u.jsx(jn,{label:null,tooltip:e.tooltip||e.tip})):u.jsx(jn,{label:r,tooltip:e.tooltip||e.tip,ellipsis:a})};function Ps(n,e,t,r){return typeof r=="boolean"?r===!1:(r==null?void 0:r(n,e,t))===!1}var Is=function(e,t,r){var a=Array.isArray(r)?en(t,r):t[r],s=String(a);return String(s)===String(e)};function Fs(n){var e=n.columnProps,t=n.text,r=n.rowData,a=n.index,s=n.columnEmptyText,l=n.counter,o=n.type,c=n.subName,d=n.marginSM,m=n.editableUtils,f=l.action,y=l.prefixName,b=m.isEditable(i(i({},r),{},{index:a})),v=b.isEditable,C=b.recordKey,x=e.renderText,g=x===void 0?function(E){return E}:x,p=g(t,r,a,f),R=v&&!Ps(t,r,a,e==null?void 0:e.editable)?"edit":"read",w=Vr({text:p,valueType:e.valueType||"text",index:a,rowData:r,subName:c,columnProps:i(i({},e),{},{entry:r,entity:r}),counter:l,columnEmptyText:s,type:o,recordKey:C,mode:R,prefixName:y,editableUtils:m}),k=R==="edit"?w:xl(w,e,p);if(R==="edit")return e.valueType==="option"?u.jsx("div",{style:{display:"flex",alignItems:"center",gap:d,justifyContent:e.align==="center"?"center":"flex-start"},children:m.actionRender(i(i({},r),{},{index:e.index||a}))}):k;if(!e.render){var z=se.isValidElement(k)||["string","number"].includes(ze(k));return!Ja(k)&&z?k:null}var M=e.render(k,r,a,i(i({},f),m),i(i({},e),{},{isEditable:v,type:"table"}));return Bi(M)?M:M&&e.valueType==="option"&&Array.isArray(M)?u.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8},children:M}):M}function Hr(n,e){var t,r=n.columns,a=n.counter,s=n.columnEmptyText,l=n.type,o=n.editableUtils,c=n.marginSM,d=n.rowKey,m=d===void 0?"id":d,f=n.childrenColumnName,y=f===void 0?"children":f,b=new Map;return r==null||(t=r.map(function(v,C){if(v===cn.EXPAND_COLUMN||v===cn.SELECTION_COLUMN)return v;var x=v,g=x.key,p=x.dataIndex,R=x.valueEnum,w=x.valueType,k=w===void 0?"text":w,z=x.children,M=x.onFilter,E=x.filters,K=E===void 0?[]:E,$=Mn(g||(p==null?void 0:p.toString()),[e==null?void 0:e.key,C].filter(Boolean).join("-")),T=!R&&!k&&!z;if(T)return i({index:C},v);var N=v===cn.EXPAND_COLUMN||v===cn.SELECTION_COLUMN;if(N)return{index:C,isExtraColumns:!0,hideInSearch:!0,hideInTable:!1,hideInForm:!0,hideInSetting:!0,extraColumn:v};var W=a.columnsMap[$]||{fixed:v.fixed},L=function(){return M===!0?function(q,ee){return Is(q,ee,p)}:Lr(M)},P=m,O=i(i({index:C,key:$},v),{},{title:Ts(v),valueEnum:R,filters:K===!0?ll(Ge(R,void 0)).filter(function(A){return A&&A.value!=="all"}):K,onFilter:L(),fixed:W.fixed,width:v.width||(v.fixed?200:void 0),children:v.children?Hr(i(i({},n),{},{columns:(v==null?void 0:v.children)||[]}),i(i({},v),{},{key:$})):void 0,render:function(q,ee,_){typeof m=="function"&&(P=m(ee,_));var H;if(ze(ee)==="object"&&ee!==null&&Reflect.has(ee,P)){var U;H=ee[P];var D=b.get(H)||[];(U=ee[y])===null||U===void 0||U.forEach(function(j){var B=j[P];b.has(B)||b.set(B,D.concat([_,y]))})}var I={columnProps:v,text:q,rowData:ee,index:_,columnEmptyText:s,counter:a,type:l,marginSM:c,subName:b.get(H),editableUtils:o};return Fs(I)}});return Pl(O)}))===null||t===void 0?void 0:t.filter(function(v){return!v.hideInTable})}var Es=["rowKey","tableClassName","defaultClassName","action","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","hideToolbar","searchNode","style","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey"],js=["cardBordered","request","className","params","defaultData","headerTitle","postData","ghost","pagination","actionRef","columns","toolBarRender","optionsRender","onLoad","onRequestError","style","cardProps","tableStyle","tableClassName","columnsStateMap","onColumnsStateChange","options","search","name","onLoadingChange","rowSelection","beforeSearchSubmit","tableAlertRender","defaultClassName","formRef","type","columnEmptyText","toolbar","rowKey","manualRequest","polling","tooltip","revalidateOnFocus","searchFormRender"];function Ns(n){var e=n.rowKey,t=n.tableClassName,r=n.defaultClassName,a=n.action,s=n.tableColumn,l=n.type,o=n.pagination,c=n.rowSelection,d=n.size;n.defaultSize;var m=n.tableStyle,f=n.toolbarDom,y=n.hideToolbar,b=n.searchNode,v=n.style,C=n.cardProps,x=n.alertDom;n.name;var g=n.onSortChange,p=n.onFilterChange,R=n.options,w=n.isLightFilter,k=n.className,z=n.cardBordered,M=n.editableUtils,E=n.getRowKey,K=we(n,Es),$=h.useContext(fn),T=h.useMemo(function(){var D=function I(j){return j.map(function(B){var F=Mn(B.key,B.index),V=$.columnsMap[F];return V&&V.show===!1?!1:B.children?i(i({},B),{},{children:I(B.children)}):B}).filter(Boolean)};return D(s)},[$.columnsMap,s]),N=h.useMemo(function(){var D=[],I=function j(B){for(var F=0;F<B.length;F++){var V=B[F];V.children?j(V.children):D.push(V)}};return I(T),D==null?void 0:D.every(function(j){return!!j.filters&&!!j.onFilter||j.filters===void 0&&j.onFilter===void 0})},[T]),W=function(I){var j=M.newLineRecord||{},B=j.options,F=j.defaultValue,V=(B==null?void 0:B.position)==="top";if(B!=null&&B.parentKey){var Y,X,J={data:I,getRowKey:E,row:i(i({},F),{},{map_row_parentKey:(Y=$e(B.parentKey))===null||Y===void 0?void 0:Y.toString()}),key:B==null?void 0:B.recordKey,childrenColumnName:((X=n.expandable)===null||X===void 0?void 0:X.childrenColumnName)||"children"};return An(J,V?"top":"update")}if(V)return[F].concat(Oe(a.dataSource));if(o&&o!==null&&o!==void 0&&o.current&&o!==null&&o!==void 0&&o.pageSize){var G=Oe(a.dataSource);return(o==null?void 0:o.pageSize)>G.length?(G.push(F),G):(G.splice((o==null?void 0:o.current)*(o==null?void 0:o.pageSize)-1,0,F),G)}return[].concat(Oe(a.dataSource),[F])},L=function(){return i(i({},K),{},{size:d,rowSelection:c===!1?void 0:c,className:t,style:m,columns:T.map(function(I){return I.isExtraColumns?I.extraColumn:I}),loading:a.loading,dataSource:M.newLineRecord?W(a.dataSource):a.dataSource,pagination:o,onChange:function(j,B,F,V){var Y;if((Y=K.onChange)===null||Y===void 0||Y.call(K,j,B,F,V),N||p(Ye(B)),Array.isArray(F)){var X=F.reduce(function(ne,he){return i(i({},ne),{},S({},"".concat(he.field),he.order))},{});g(Ye(X))}else{var J,G=(J=F.column)===null||J===void 0?void 0:J.sorter,ce=(G==null?void 0:G.toString())===G;g(Ye(S({},"".concat(ce?G:F.field),F.order)))}}})},P=h.useMemo(function(){return n.search===!1&&!n.headerTitle&&n.toolBarRender===!1},[]),O=u.jsx(Ya.Provider,{value:{grid:!1,colProps:void 0,rowProps:void 0},children:u.jsx(cn,i(i({},L()),{},{rowKey:e}))}),A=n.tableViewRender?n.tableViewRender(i(i({},L()),{},{rowSelection:c!==!1?c:void 0}),O):O,q=h.useMemo(function(){if(n.editable&&!n.name){var D,I,j;return u.jsxs(u.Fragment,{children:[f,x,h.createElement(et,i(i({},(D=n.editable)===null||D===void 0?void 0:D.formProps),{},{formRef:(I=n.editable)===null||I===void 0||(I=I.formProps)===null||I===void 0?void 0:I.formRef,component:!1,form:(j=n.editable)===null||j===void 0?void 0:j.form,onValuesChange:M.onValuesChange,key:"table",submitter:!1,omitNil:!1,dateFormatter:n.dateFormatter}),A)]})}return u.jsxs(u.Fragment,{children:[f,x,A]})},[x,n.loading,!!n.editable,A,f]),ee=h.useMemo(function(){return C===!1||P===!0||n.name?{}:y?{padding:0}:f?{paddingBlockStart:0}:f&&o===!1?{paddingBlockStart:0}:{padding:0}},[P,o,n.name,C,f,y]),_=C===!1||P===!0||n.name?q:u.jsx(_n,i(i({ghost:n.ghost,bordered:Or("table",z),bodyStyle:ee},C),{},{children:q})),H=function(){return n.tableRender?n.tableRender(n,_,{toolbar:f||void 0,alert:x||void 0,table:A||void 0}):_},U=u.jsxs("div",{className:Se(k,S({},"".concat(r,"-polling"),a.pollingLoading)),style:v,ref:$.rootDomRef,children:[w?null:b,l!=="form"&&n.tableExtraRender&&u.jsx("div",{className:Se(k,"".concat(r,"-extra")),children:n.tableExtraRender(n,a.dataSource||[])}),l!=="form"&&H()]});return!R||!(R!=null&&R.fullScreen)?U:u.jsx(Ae,{getPopupContainer:function(){return $.rootDomRef.current||document.body},children:U})}var Ms={},Bs=function(e){var t;e.cardBordered;var r=e.request,a=e.className,s=e.params,l=s===void 0?Ms:s,o=e.defaultData,c=e.headerTitle,d=e.postData,m=e.ghost,f=e.pagination,y=e.actionRef,b=e.columns,v=b===void 0?[]:b,C=e.toolBarRender,x=e.optionsRender,g=e.onLoad,p=e.onRequestError;e.style,e.cardProps,e.tableStyle,e.tableClassName,e.columnsStateMap,e.onColumnsStateChange;var R=e.options,w=e.search,k=e.name,z=e.onLoadingChange,M=e.rowSelection,E=M===void 0?!1:M,K=e.beforeSearchSubmit,$=e.tableAlertRender,T=e.defaultClassName,N=e.formRef,W=e.type,L=W===void 0?"table":W,P=e.columnEmptyText,O=P===void 0?"-":P,A=e.toolbar,q=e.rowKey,ee=e.manualRequest,_=e.polling,H=e.tooltip,U=e.revalidateOnFocus,D=U===void 0?!1:U,I=e.searchFormRender,j=we(e,js),B=gs(e.defaultClassName),F=B.wrapSSR,V=B.hashId,Y=Se(T,a,V),X=h.useRef(),J=h.useRef(),G=N||J;h.useImperativeHandle(y,function(){return X.current});var ce=Ee(E?(E==null?void 0:E.defaultSelectedRowKeys)||[]:void 0,{value:E?E.selectedRowKeys:void 0}),ne=ue(ce,2),he=ne[0],ae=ne[1],re=Ee(function(){if(!(ee||w!==!1))return{}}),me=ue(re,2),de=me[0],Be=me[1],ie=Ee({}),vn=ue(ie,2),oe=vn[0],Le=vn[1],mn=Ee({}),Bn=ue(mn,2),an=Bn[0],hn=Bn[1];h.useEffect(function(){var Z=Ai(v),te=Z.sort,fe=Z.filter;Le(fe),hn(te)},[]);var xn=De(),Ln=ze(f)==="object"?f:{defaultCurrent:1,defaultPageSize:20,pageSize:20,current:1},Te=h.useContext(fn),On=h.useMemo(function(){if(r)return function(){var Z=be(le().mark(function te(fe){var Ce,_e;return le().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return Ce=i(i(i({},fe||{}),de),l),delete Ce._timestamp,Ue.next=4,r(Ce,an,oe);case 4:return _e=Ue.sent,Ue.abrupt("return",_e);case 6:case"end":return Ue.stop()}},te)}));return function(te){return Z.apply(this,arguments)}}()},[de,l,oe,an,r]),pe=Ss(On,o,{pageInfo:f===!1?!1:Ln,loading:e.loading,dataSource:e.dataSource,onDataSourceChange:e.onDataSourceChange,onLoad:g,onLoadingChange:z,onRequestError:p,postData:d,revalidateOnFocus:D,manual:de===void 0,polling:_,effects:[wn(l),wn(de),wn(oe),wn(an)],debounceTime:e.debounceTime,onPageInfoChange:function(te){var fe,Ce;!f||!On||(f==null||(fe=f.onChange)===null||fe===void 0||fe.call(f,te.current,te.pageSize),f==null||(Ce=f.onShowSizeChange)===null||Ce===void 0||Ce.call(f,te.current,te.pageSize))}});h.useEffect(function(){var Z;if(!(e.manualRequest||!e.request||!D||(Z=e.form)!==null&&Z!==void 0&&Z.ignoreRules)){var te=function(){document.visibilityState==="visible"&&pe.reload()};return document.addEventListener("visibilitychange",te),function(){return document.removeEventListener("visibilitychange",te)}}},[]);var zn=se.useRef(new Map),pn=se.useMemo(function(){return typeof q=="function"?q:function(Z,te){var fe;return te===-1?Z==null?void 0:Z[q]:e.name?te==null?void 0:te.toString():(fe=Z==null?void 0:Z[q])!==null&&fe!==void 0?fe:te==null?void 0:te.toString()}},[e.name,q]);h.useMemo(function(){var Z;if((Z=pe.dataSource)!==null&&Z!==void 0&&Z.length){var te=pe.dataSource.map(function(fe){var Ce=pn(fe,-1);return zn.current.set(Ce,fe),Ce});return te}return[]},[pe.dataSource,pn]);var ln=h.useMemo(function(){var Z=f===!1?!1:i({},f),te=i(i({},pe.pageInfo),{},{setPageInfo:function(Ce){var _e=Ce.pageSize,tn=Ce.current,Ue=pe.pageInfo;if(_e===Ue.pageSize||Ue.current===1){pe.setPageInfo({pageSize:_e,current:tn});return}r&&pe.setDataSource([]),pe.setPageInfo({pageSize:_e,current:L==="list"?tn:1})}});return r&&Z&&(delete Z.onChange,delete Z.onShowSizeChange),ji(Z,te,xn)},[f,pe,xn]);pt(function(){var Z;e.request&&!Yo(l)&&pe.dataSource&&!Ei(pe.dataSource,o)&&(pe==null||(Z=pe.pageInfo)===null||Z===void 0?void 0:Z.current)!==1&&pe.setPageInfo({current:1})},[l]),Te.setPrefixName(e.name);var Fe=h.useCallback(function(){E&&E.onChange&&E.onChange([],[],{type:"none"}),ae([])},[E,ae]);Te.propsRef.current=e;var ye=Ll(i(i({},e.editable),{},{tableName:e.name,getRowKey:pn,childrenColumnName:((t=e.expandable)===null||t===void 0?void 0:t.childrenColumnName)||"children",dataSource:pe.dataSource||[],setDataSource:function(te){var fe,Ce;(fe=e.editable)===null||fe===void 0||(Ce=fe.onValuesChange)===null||Ce===void 0||Ce.call(fe,void 0,te),pe.setDataSource(te)}})),Pe=Gn===null||Gn===void 0?void 0:Gn.useToken(),nn=Pe.token;Ni(X,pe,{fullScreen:function(){var te;if(!(!((te=Te.rootDomRef)!==null&&te!==void 0&&te.current)||!document.fullscreenEnabled))if(document.fullscreenElement)document.exitFullscreen();else{var fe;(fe=Te.rootDomRef)===null||fe===void 0||fe.current.requestFullscreen()}},onCleanSelected:function(){Fe()},resetAll:function(){var te;Fe(),Le({}),hn({}),Te.setKeyWords(void 0),pe.setPageInfo({current:1}),G==null||(te=G.current)===null||te===void 0||te.resetFields(),Be({})},editableUtils:ye}),Te.setAction(X.current);var je=h.useMemo(function(){var Z;return Hr({columns:v,counter:Te,columnEmptyText:O,type:L,marginSM:nn.marginSM,editableUtils:ye,rowKey:q,childrenColumnName:(Z=e.expandable)===null||Z===void 0?void 0:Z.childrenColumnName}).sort(Cs(Te.columnsMap))},[v,Te==null?void 0:Te.sortKeyColumns,Te==null?void 0:Te.columnsMap,O,L,ye.editableKeys&&ye.editableKeys.join(",")]);Rr(function(){if(je&&je.length>0){var Z=je.map(function(te){return Mn(te.key,te.index)});Te.setSortKeyColumns(Z)}},[je],["render","renderFormItem"],100),pt(function(){var Z=pe.pageInfo,te=f||{},fe=te.current,Ce=fe===void 0?Z==null?void 0:Z.current:fe,_e=te.pageSize,tn=_e===void 0?Z==null?void 0:Z.pageSize:_e;f&&(Ce||tn)&&(tn!==(Z==null?void 0:Z.pageSize)||Ce!==(Z==null?void 0:Z.current))&&pe.setPageInfo({pageSize:tn||Z.pageSize,current:Ce||Z.current})},[f&&f.pageSize,f&&f.current]);var We=i(i({selectedRowKeys:he},E),{},{onChange:function(te,fe,Ce){E&&E.onChange&&E.onChange(te,fe,Ce),ae(te)}}),qe=w!==!1&&(w==null?void 0:w.filterType)==="light",on=h.useCallback(function(Z){if(R&&R.search){var te,fe,Ce=R.search===!0?{}:R.search,_e=Ce.name,tn=_e===void 0?"keyword":_e,Ue=(te=R.search)===null||te===void 0||(fe=te.onSearch)===null||fe===void 0?void 0:fe.call(te,Te.keyWords);if(Ue!==!1){Be(i(i({},Z),{},S({},tn,Te.keyWords)));return}}Be(Z)},[Te.keyWords,R,Be]),Vn=h.useMemo(function(){if(ze(pe.loading)==="object"){var Z;return((Z=pe.loading)===null||Z===void 0?void 0:Z.spinning)||!1}return pe.loading},[pe.loading]),Kt=h.useMemo(function(){var Z=w===!1&&L!=="form"?null:u.jsx(Gi,{pagination:ln,beforeSearchSubmit:K,action:X,columns:v,onFormSearchSubmit:function(fe){on(fe)},ghost:m,onReset:e.onReset,onSubmit:e.onSubmit,loading:!!Vn,manualRequest:ee,search:w,form:e.form,formRef:G,type:e.type||"table",cardBordered:e.cardBordered,dateFormatter:e.dateFormatter});return I&&Z?u.jsx(u.Fragment,{children:I(e,Z)}):Z},[K,G,m,Vn,ee,on,ln,e,v,w,I,L]),$t=h.useMemo(function(){return he==null?void 0:he.map(function(Z){var te;return(te=zn.current)===null||te===void 0?void 0:te.get(Z)})},[pe.dataSource,he]),kt=h.useMemo(function(){return R===!1&&!c&&!C&&!A&&!qe},[R,c,C,A,qe]),qr=C===!1?null:u.jsx(ms,{headerTitle:c,hideToolbar:kt,selectedRows:$t,selectedRowKeys:he,tableColumn:je,tooltip:H,toolbar:A,onFormSearchSubmit:function(te){Be(i(i({},de),te))},searchNode:qe?Kt:null,options:R,optionsRender:x,actionRef:X,toolBarRender:C}),Qr=E!==!1?u.jsx(Oi,{selectedRowKeys:he,selectedRows:$t,onCleanSelected:Fe,alertOptionRender:j.tableAlertOptionRender,alertInfoRender:$,alwaysShowAlert:E==null?void 0:E.alwaysShowAlert}):null;return F(u.jsx(Ns,i(i({},e),{},{name:k,defaultClassName:T,size:Te.tableSize,onSizeChange:Te.setTableSize,pagination:ln,searchNode:Kt,rowSelection:E!==!1?We:void 0,className:Y,tableColumn:je,isLightFilter:qe,action:pe,alertDom:Qr,toolbarDom:qr,hideToolbar:kt,onSortChange:function(te){an!==te&&hn(te??{})},onFilterChange:function(te){te!==oe&&Le(te)},editableUtils:ye,getRowKey:pn})))},Wr=function(e){var t=h.useContext(Ae.ConfigContext),r=t.getPrefixCls,a=e.ErrorBoundary===!1?se.Fragment:e.ErrorBoundary||fl;return u.jsx($i,{initValue:e,children:u.jsx(Ir,{needDeps:!0,children:u.jsx(a,{children:u.jsx(Bs,i({defaultClassName:"".concat(r("pro-table"))},e))})})})};Wr.Summary=cn.Summary;const ir="basic-table";function Ls(n){const e=na(),{autoHeight:t=!0,offsetBottom:r}=n,a=h.useRef(null),s=cl(a),[l,o]=h.useState(t?0:void 0);h.useEffect(()=>{const d=n.pagination===!1;if(t&&a.current&&(s!=null&&s.height)){const m=s.height,f=a.current.getElementsByClassName(ir)[0];if(!f)return;const y=a.current.getBoundingClientRect();if(y.top>window.innerHeight){o(void 0);return}const b=f.querySelector("div.ant-table-body");if(!b)return;const v=b.getBoundingClientRect(),C=v.top-y.top,g=r||(d?16:56),p=Math.max(400,m-C-g);if(p-v.height<=10)return;b.setAttribute("style",`overflow-y: auto;min-height: ${p}px;max-height: ${p}px;`)}},[s,t,r,n.pagination]);const c=()=>n.loading===!1?!1:n.loading===!0?!0:{indicator:u.jsx(Yn,{spin:!0}),...n.loading};return u.jsx("div",{className:"h-full",ref:a,children:u.jsx(Wr,{cardBordered:!0,rowKey:"id",dateFormatter:"string",...n,options:{fullScreen:!0,...n.options},rootClassName:Vt(ir,n.rootClassName),className:Vt(e.basicTable,n.className),scroll:{y:l,...n.scroll},loading:c()})})}var ke,ve,kn,Ke,gn,Tn,sn,Qe,Dn,Pn,In,yn,bn,un,Fn,ge,Kn,xt,Rt,wt,Tt,Pt,It,Ft,Ur,dr,As=(dr=class extends ta{constructor(e,t){super();Ne(this,ge);Ne(this,ke);Ne(this,ve);Ne(this,kn);Ne(this,Ke);Ne(this,gn);Ne(this,Tn);Ne(this,sn);Ne(this,Qe);Ne(this,Dn);Ne(this,Pn);Ne(this,In);Ne(this,yn);Ne(this,bn);Ne(this,un);Ne(this,Fn,new Set);this.options=t,xe(this,ke,e),xe(this,Qe,null),xe(this,sn,Ht()),this.options.experimental_prefetchInRender||Q(this,sn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Q(this,ve).addObserver(this),sr(Q(this,ve),this.options)?Ie(this,ge,Kn).call(this):this.updateResult(),Ie(this,ge,Tt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Et(Q(this,ve),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Et(Q(this,ve),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ie(this,ge,Pt).call(this),Ie(this,ge,It).call(this),Q(this,ve).removeObserver(this)}setOptions(e,t){const r=this.options,a=Q(this,ve);if(this.options=Q(this,ke).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Xe(this.options.enabled,Q(this,ve))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ie(this,ge,Ft).call(this),Q(this,ve).setOptions(this.options),r._defaulted&&!ft(this.options,r)&&Q(this,ke).getQueryCache().notify({type:"observerOptionsUpdated",query:Q(this,ve),observer:this});const s=this.hasListeners();s&&ur(Q(this,ve),a,this.options,r)&&Ie(this,ge,Kn).call(this),this.updateResult(t),s&&(Q(this,ve)!==a||Xe(this.options.enabled,Q(this,ve))!==Xe(r.enabled,Q(this,ve))||Wn(this.options.staleTime,Q(this,ve))!==Wn(r.staleTime,Q(this,ve)))&&Ie(this,ge,xt).call(this);const l=Ie(this,ge,Rt).call(this);s&&(Q(this,ve)!==a||Xe(this.options.enabled,Q(this,ve))!==Xe(r.enabled,Q(this,ve))||l!==Q(this,un))&&Ie(this,ge,wt).call(this,l)}getOptimisticResult(e){const t=Q(this,ke).getQueryCache().build(Q(this,ke),e),r=this.createResult(t,e);return $s(this,r)&&(xe(this,Ke,r),xe(this,Tn,this.options),xe(this,gn,Q(this,ve).state)),r}getCurrentResult(){return Q(this,Ke)}trackResult(e,t){const r={};return Object.keys(e).forEach(a=>{Object.defineProperty(r,a,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(a),t==null||t(a),e[a])})}),r}trackProp(e){Q(this,Fn).add(e)}getCurrentQuery(){return Q(this,ve)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=Q(this,ke).defaultQueryOptions(e),r=Q(this,ke).getQueryCache().build(Q(this,ke),t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return Ie(this,ge,Kn).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),Q(this,Ke)))}createResult(e,t){var E;const r=Q(this,ve),a=this.options,s=Q(this,Ke),l=Q(this,gn),o=Q(this,Tn),d=e!==r?e.state:Q(this,kn),{state:m}=e;let f={...m},y=!1,b;if(t._optimisticResults){const K=this.hasListeners(),$=!K&&sr(e,t),T=K&&ur(e,r,t,a);($||T)&&(f={...f,...oa(m.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:v,errorUpdatedAt:C,status:x}=f;if(t.select&&f.data!==void 0)if(s&&f.data===(l==null?void 0:l.data)&&t.select===Q(this,Dn))b=Q(this,Pn);else try{xe(this,Dn,t.select),b=t.select(f.data),b=Ut(s==null?void 0:s.data,b,t),xe(this,Pn,b),xe(this,Qe,null)}catch(K){xe(this,Qe,K)}else b=f.data;if(t.placeholderData!==void 0&&b===void 0&&x==="pending"){let K;if(s!=null&&s.isPlaceholderData&&t.placeholderData===(o==null?void 0:o.placeholderData))K=s.data;else if(K=typeof t.placeholderData=="function"?t.placeholderData((E=Q(this,In))==null?void 0:E.state.data,Q(this,In)):t.placeholderData,t.select&&K!==void 0)try{K=t.select(K),xe(this,Qe,null)}catch($){xe(this,Qe,$)}K!==void 0&&(x="success",b=Ut(s==null?void 0:s.data,K,t),y=!0)}Q(this,Qe)&&(v=Q(this,Qe),b=Q(this,Pn),C=Date.now(),x="error");const g=f.fetchStatus==="fetching",p=x==="pending",R=x==="error",w=p&&g,k=b!==void 0,M={status:x,fetchStatus:f.fetchStatus,isPending:p,isSuccess:x==="success",isError:R,isInitialLoading:w,isLoading:w,data:b,dataUpdatedAt:f.dataUpdatedAt,error:v,errorUpdatedAt:C,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:g,isRefetching:g&&!p,isLoadingError:R&&!k,isPaused:f.fetchStatus==="paused",isPlaceholderData:y,isRefetchError:R&&k,isStale:At(e,t),refetch:this.refetch,promise:Q(this,sn)};if(this.options.experimental_prefetchInRender){const K=N=>{M.status==="error"?N.reject(M.error):M.data!==void 0&&N.resolve(M.data)},$=()=>{const N=xe(this,sn,M.promise=Ht());K(N)},T=Q(this,sn);switch(T.status){case"pending":e.queryHash===r.queryHash&&K(T);break;case"fulfilled":(M.status==="error"||M.data!==T.value)&&$();break;case"rejected":(M.status!=="error"||M.error!==T.reason)&&$();break}}return M}updateResult(e){const t=Q(this,Ke),r=this.createResult(Q(this,ve),this.options);if(xe(this,gn,Q(this,ve).state),xe(this,Tn,this.options),Q(this,gn).data!==void 0&&xe(this,In,Q(this,ve)),ft(r,t))return;xe(this,Ke,r);const a={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:l}=this.options,o=typeof l=="function"?l():l;if(o==="all"||!o&&!Q(this,Fn).size)return!0;const c=new Set(o??Q(this,Fn));return this.options.throwOnError&&c.add("error"),Object.keys(Q(this,Ke)).some(d=>{const m=d;return Q(this,Ke)[m]!==t[m]&&c.has(m)})};(e==null?void 0:e.listeners)!==!1&&s()&&(a.listeners=!0),Ie(this,ge,Ur).call(this,{...a,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ie(this,ge,Tt).call(this)}},ke=new WeakMap,ve=new WeakMap,kn=new WeakMap,Ke=new WeakMap,gn=new WeakMap,Tn=new WeakMap,sn=new WeakMap,Qe=new WeakMap,Dn=new WeakMap,Pn=new WeakMap,In=new WeakMap,yn=new WeakMap,bn=new WeakMap,un=new WeakMap,Fn=new WeakMap,ge=new WeakSet,Kn=function(e){Ie(this,ge,Ft).call(this);let t=Q(this,ve).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ra)),t},xt=function(){Ie(this,ge,Pt).call(this);const e=Wn(this.options.staleTime,Q(this,ve));if(vt||Q(this,Ke).isStale||!Wt(e))return;const r=aa(Q(this,Ke).dataUpdatedAt,e)+1;xe(this,yn,setTimeout(()=>{Q(this,Ke).isStale||this.updateResult()},r))},Rt=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Q(this,ve)):this.options.refetchInterval)??!1},wt=function(e){Ie(this,ge,It).call(this),xe(this,un,e),!(vt||Xe(this.options.enabled,Q(this,ve))===!1||!Wt(Q(this,un))||Q(this,un)===0)&&xe(this,bn,setInterval(()=>{(this.options.refetchIntervalInBackground||la.isFocused())&&Ie(this,ge,Kn).call(this)},Q(this,un)))},Tt=function(){Ie(this,ge,xt).call(this),Ie(this,ge,wt).call(this,Ie(this,ge,Rt).call(this))},Pt=function(){Q(this,yn)&&(clearTimeout(Q(this,yn)),xe(this,yn,void 0))},It=function(){Q(this,bn)&&(clearInterval(Q(this,bn)),xe(this,bn,void 0))},Ft=function(){const e=Q(this,ke).getQueryCache().build(Q(this,ke),this.options);if(e===Q(this,ve))return;const t=Q(this,ve);xe(this,ve,e),xe(this,kn,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Ur=function(e){vr.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(Q(this,Ke))}),Q(this,ke).getQueryCache().notify({query:Q(this,ve),type:"observerResultsUpdated"})})},dr);function Ks(n,e){return Xe(e.enabled,n)!==!1&&n.state.data===void 0&&!(n.state.status==="error"&&e.retryOnMount===!1)}function sr(n,e){return Ks(n,e)||n.state.data!==void 0&&Et(n,e,e.refetchOnMount)}function Et(n,e,t){if(Xe(e.enabled,n)!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&At(n,e)}return!1}function ur(n,e,t,r){return(n!==e||Xe(r.enabled,n)===!1)&&(!t.suspense||n.state.status!=="error")&&At(n,t)}function At(n,e){return Xe(e.enabled,n)!==!1&&n.isStaleByTime(Wn(e.staleTime,n))}function $s(n,e){return!ft(n.getCurrentResult(),e)}var Gr=h.createContext(!1),ks=()=>h.useContext(Gr);Gr.Provider;function Ds(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}var _s=h.createContext(Ds()),Os=()=>h.useContext(_s),zs=(n,e)=>{(n.suspense||n.throwOnError)&&(e.isReset()||(n.retryOnMount=!1))},Vs=n=>{h.useEffect(()=>{n.clearReset()},[n])},Hs=({result:n,errorResetBoundary:e,throwOnError:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&r&&ca(t,[n.error,r]),Ws=n=>{n.suspense&&(n.staleTime===void 0&&(n.staleTime=1e3),typeof n.gcTime=="number"&&(n.gcTime=Math.max(n.gcTime,1e3)))},Us=(n,e)=>n.isLoading&&n.isFetching&&!e,Gs=(n,e)=>(n==null?void 0:n.suspense)&&e.isPending,cr=(n,e,t)=>e.fetchOptimistic(n).catch(()=>{t.clearReset()});function qs(n,e,t){var m,f,y,b,v;const r=ia(),a=ks(),s=Os(),l=r.defaultQueryOptions(n);(f=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||f.call(m,l),l._optimisticResults=a?"isRestoring":"optimistic",Ws(l),zs(l,s),Vs(s);const o=!r.getQueryCache().get(l.queryHash),[c]=h.useState(()=>new e(r,l)),d=c.getOptimisticResult(l);if(h.useSyncExternalStore(h.useCallback(C=>{const x=a?()=>{}:c.subscribe(vr.batchCalls(C));return c.updateResult(),x},[c,a]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h.useEffect(()=>{c.setOptions(l,{listeners:!1})},[l,c]),Gs(l,d))throw cr(l,c,s);if(Hs({result:d,errorResetBoundary:s,throwOnError:l.throwOnError,query:r.getQueryCache().get(l.queryHash)}))throw d.error;if((b=(y=r.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||b.call(y,l,d),l.experimental_prefetchInRender&&!vt&&Us(d,a)){const C=o?cr(l,c,s):(v=r.getQueryCache().get(l.queryHash))==null?void 0:v.promise;C==null||C.catch(da).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?d:c.trackResult(d)}function Qs(n,e){return qs(n,As)}const Xs=[{dataIndex:"index",title:"角色编号",valueType:"indexBorder",width:80},{title:"角色名称",dataIndex:"name",disable:!0,ellipsis:!0,width:120,formItemProps:{rules:[{required:!0,message:"此项为必填项"}]}},{disable:!0,title:"角色标识",dataIndex:"code",width:120,filters:!0,onFilter:!0,ellipsis:!0},{disable:!0,title:"状态",dataIndex:"status",valueType:"select",width:80,render:(n,e)=>u.jsx(_a,{color:e.status===1?"success":"default",children:n}),valueEnum:{1:{text:"启用"},0:{text:"停用"}}},{title:"备注",dataIndex:"remark",search:!1},{title:"创建时间",dataIndex:"createTime",valueType:"dateTime",search:!1,width:180}];function iu(){var g;const{t:n}=sa(),e=ol(),t=Qs({queryKey:["role-menu"],queryFn:pa}),r=lt({mutationFn:va}),a=lt({mutationFn:ma}),s=lt({mutationFn:ha}),[l,o]=h.useState(!1),[c,d]=h.useState(""),[m,f]=h.useState({}),y=h.useRef(),b=async(p,R)=>{var k,z;const w=await s.mutateAsync(p);await((k=R==null?void 0:R.reload)==null?void 0:k.call(R)),(z=window.$message)==null||z.success(`操作成功 userId = ${w.result}`)},v=[...Xs,{title:n("common.action"),valueType:"option",key:"option",width:120,render:(p,R,w,k)=>[u.jsx(Gt,{type:"link",size:"small",disabled:!e("update"),onClick:async()=>{const z=await a.mutateAsync({id:R.id});o(!0),d("编辑角色"),f({...R,menus:z.result})},children:n("common.edit")},"editable"),u.jsx(gr,{title:n("common.confirmDelete"),onConfirm:()=>b(R.id,k),okText:n("common.confirm"),cancelText:n("common.cancel"),children:u.jsx(Gt,{type:"link",size:"small",disabled:!e("delete"),children:n("common.delete")})},"delete")]}],C=()=>{o(!1),f({})},x=()=>{var p;(p=y.current)==null||p.reload()};return u.jsxs(ya,{className:"h-full",children:[u.jsx(Ls,{columns:v,actionRef:y,request:async p=>{const R=await r.mutateAsync(p);return{...R,data:R.result.list,total:R.result.total}},pagination:{position:["bottomRight"],defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:p=>`共 ${p} 条`},headerTitle:"角色管理（仅演示，操作后不生效）",toolBarRender:()=>[u.jsx(Un,{icon:u.jsx(Da,{}),type:"primary",disabled:!e("add"),onClick:()=>{o(!0),d("新增角色")},children:"新增角色"},"add-role")]}),u.jsx(fa,{title:c,open:l,onCloseChange:C,detailData:m,refreshTable:x,treeData:dl(((g=t.data)==null?void 0:g.result)||[])})]})}export{iu as default};
