import{u as w,j as o,B as f,c as i,D as M}from"./index-DJDYVK2o.js";import{f as k,D as R,a as S}from"./detail-CE0_vpEm.js";import{u as $}from"./index-CfUWwJ0V.js";import{a}from"./react-DUVzRXT7.js";import{B as g}from"./index-6BpDNjUc.js";import{B as P}from"./index-A5irw2CO.js";import{getConstantColumns as I}from"./constants-BpCF9RbF.js";import{aP as O,d as z,aQ as A}from"./antd-DxuFB7J3.js";import"./faker-Dcf0Eyuj.js";import"./index-DeBLS4LG.js";import"./index-0qjF_P79.js";import"./BaseForm-CYpHNqZU.js";import"./index-1DHUpAbY.js";import"./index-CeWkITjB.js";import"./index-Ap-HCnKR.js";import"./index-CUml_GCb.js";function Y(){const{t:e}=w(),{hasAccessByCodes:m}=$(),[h,l]=a.useState(!1),[x,c]=a.useState(""),[y,u]=a.useState({}),[C,D]=a.useState([]),d=a.useRef(null),T=async(n,t)=>{var s,p;const r=await S(n);await((s=t==null?void 0:t.reload)==null?void 0:s.call(t)),(p=window.$message)==null||p.success(`${e("common.deleteSuccess")} id = ${r.result}`)},j=[...I(e),{title:e("common.action"),valueType:"option",key:"option",width:120,fixed:"right",render:(n,t,r,s)=>[o.jsx(f,{type:"link",size:"small",disabled:!m(i.update),onClick:async()=>{l(!0),c(e("system.menu.editMenu")),u({...t})},children:e("common.edit")},"editable"),o.jsx(O,{title:e("common.confirmDelete"),onConfirm:()=>T(t.id,s),okText:e("common.confirm"),cancelText:e("common.cancel"),children:o.jsx(f,{type:"link",size:"small",disabled:!m(i.delete),children:e("common.delete")})},"delete")]}],B=()=>{l(!1),u({})},b=()=>{var n;(n=d.current)==null||n.reload()};return o.jsxs(g,{className:"h-full",children:[o.jsx(P,{columns:j,actionRef:d,request:async n=>{const t=await k(n),r=M(t.result.list);return D(t.result.list.filter(s=>Number(s.menuType)===0).map(s=>({...s,name:e(s.name)}))),{...t,data:r,total:t.result.total}},headerTitle:`${e("common.menu.menu")} （${e("common.demoOnly")}）`,toolBarRender:()=>[o.jsx(z,{icon:o.jsx(A,{}),type:"primary",disabled:!m(i.add),onClick:()=>{l(!0),c(e("system.menu.addMenu"))},children:e("common.add")},"add-role")]}),o.jsx(R,{title:x,open:h,flatParentMenus:C,onCloseChange:B,detailData:y,refreshTable:b})]})}export{Y as default};
