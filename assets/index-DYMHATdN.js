import{u as k,j as o,B as f,c as i,y as w}from"./index-jpWX0MXq.js";import{f as M,D as R,a as I}from"./detail-BC9Pa4LR.js";import{u as S}from"./index-7xc74kBn.js";import{a}from"./react-B2eEhSVY.js";import{B as $}from"./index-CziQPL13.js";import{B as g}from"./index-CJiJ404y.js";import{getConstantColumns as O}from"./constants-C_al5qpD.js";import{aI as P,k as z,aJ as A}from"./antd-C3AkHkw7.js";import"./faker-Dcf0Eyuj.js";import"./index-B0zmMycq.js";import"./index-CkzziYjv.js";import"./BaseForm-BlxxxcRg.js";import"./index-rqsPtctM.js";import"./index-CDNiwJXv.js";import"./index-7DMUwYVH.js";import"./index-DKVvvQBM.js";function Y(){const{t:e}=k(),{hasAccessByCodes:m}=S(),[h,l]=a.useState(!1),[x,c]=a.useState(""),[y,u]=a.useState({}),[C,T]=a.useState([]),d=a.useRef(null),j=async(n,t)=>{var s,p;const r=await I(n);await((s=t==null?void 0:t.reload)==null?void 0:s.call(t)),(p=window.$message)==null||p.success(`${e("common.deleteSuccess")} userId = ${r.result}`)},B=[...O(e),{title:e("common.action"),valueType:"option",key:"option",width:120,fixed:"right",render:(n,t,r,s)=>[o.jsx(f,{type:"link",size:"small",disabled:!m(i.update),onClick:async()=>{l(!0),c(e("system.menu.editMenu")),u({...t})},children:e("common.edit")},"editable"),o.jsx(P,{title:e("common.confirmDelete"),onConfirm:()=>j(t.id,s),okText:e("common.confirm"),cancelText:e("common.cancel"),children:o.jsx(f,{type:"link",size:"small",disabled:!m(i.delete),children:e("common.delete")})},"delete")]}],D=()=>{l(!1),u({})},b=()=>{var n;(n=d.current)==null||n.reload()};return o.jsxs($,{className:"h-full",children:[o.jsx(g,{columns:B,actionRef:d,request:async n=>{const t=await M(n),r=w(t.result.list);return T(t.result.list.filter(s=>Number(s.menuType)===0).map(s=>({...s,name:e(s.name)}))),{...t,data:r,total:t.result.total}},headerTitle:`${e("common.menu.menu")} （${e("common.demoOnly")}）`,toolBarRender:()=>[o.jsx(z,{icon:o.jsx(A,{}),type:"primary",disabled:!m(i.add),onClick:()=>{l(!0),c(e("system.menu.addMenu"))},children:e("common.add")},"add-role")]}),o.jsx(R,{title:x,open:h,flatParentMenus:C,onCloseChange:D,detailData:y,refreshTable:b})]})}export{Y as default};
