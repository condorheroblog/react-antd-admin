import{j as o,r as i,u as C,y}from"./index-BGyuhmuP.js";import{R as j,a as P}from"./react-XqWWy1gx.js";import{getMenuTypeOptions as F}from"./constants-CoLf68NT.js";import{aC as g,aD as f,aA as h}from"./antd-Dy5x7wqK.js";import{M as v}from"./index-BZ1VrYo_.js";import{W as u}from"./index-BKZwdBeI.js";import{F as w,P as M}from"./index-cFxgujD0.js";import{P as q,W as a}from"./BaseForm-C6Vn72NL.js";import{F as L}from"./index-DQrueZE8.js";var T=["fieldProps","request","params","proFieldProps"],I=function(l,d){var p=l.fieldProps,n=l.request,s=l.params,e=l.proFieldProps,m=g(l,T),c=P.useContext(w);return o.jsx(q,f({valueType:"cascader",fieldProps:f({getPopupContainer:c.getPopupContainer},p),ref:d,request:n,params:s,filedConfig:{customLightMode:!0},proFieldProps:e},m))};const S=j.forwardRef(I);function N(r){return i.get("menu-list",{searchParams:r,ignoreLoading:!0}).json()}function k(r){return i.post("menu-item",{json:r,ignoreLoading:!0}).json()}function A(r){return i.put("menu-item",{json:r,ignoreLoading:!0}).json()}function U(r){return i.delete("menu-item",{json:r,ignoreLoading:!0}).json()}function O({title:r,open:l,flatParentMenus:d,onCloseChange:p,detailData:n,refreshTable:s}){const{t:e}=C(),[m]=h.useForm(),c=async t=>{var x,b;return n.id?(await A(t),(x=window.$message)==null||x.success(e("common.updateSuccess"))):(await k(t),(b=window.$message)==null||b.success(e("common.addSuccess"))),s==null||s(),!0};return P.useEffect(()=>{l&&m.setFieldsValue(n)},[l]),o.jsxs(v,{title:r,open:l,onOpenChange:t=>{t===!1&&p()},labelCol:{md:5,xl:3},layout:"horizontal",form:m,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0},grid:!0,width:{xl:800,md:500},onFinish:c,initialValues:{menuType:0,status:1},children:[o.jsx(u.Group,{fieldProps:{buttonStyle:"solid"},name:"menuType",label:e("system.menu.menuType"),radioType:"button",required:!0,options:F(e)}),o.jsx(S,{name:"parentId",label:e("system.menu.parentMenu"),fieldProps:{showSearch:!0,autoClearSearchValue:!0,fieldNames:{label:"name",value:"id",children:"children"}},request:async()=>y(d)}),o.jsx(M,{name:["menuType"],children:({menuType:t})=>{if(Number(t)===0)return o.jsxs(o.Fragment,{children:[o.jsx(a,{allowClear:!0,rules:[{required:!0}],labelCol:{md:5,xl:6},colProps:{md:24,xl:12},name:"name",label:e("system.menu.name"),tooltip:e("form.length",{length:24})}),o.jsx(a,{allowClear:!0,rules:[{required:!0}],labelCol:{md:5,xl:6},colProps:{md:24,xl:12},name:"path",label:e("system.menu.routePath")}),o.jsx(L,{allowClear:!0,rules:[{required:!0}],labelCol:{md:5,xl:6},colProps:{md:24,xl:12},name:"order",label:e("system.menu.menuOrder")}),o.jsx(a,{allowClear:!0,rules:[{required:!0}],labelCol:{md:5,xl:6},colProps:{md:24,xl:12},name:"icon",label:e("system.menu.menuIcon")}),o.jsx(a,{allowClear:!0,rules:[{required:!0}],labelCol:{md:5,xl:6},colProps:{md:24,xl:12},name:"component",label:e("system.menu.componentUrl")}),o.jsx(u.Group,{name:"status",label:e("common.status"),radioType:"button",labelCol:{md:5,xl:6},colProps:{md:24,xl:12},options:[{label:e("common.enabled"),value:1},{label:e("common.deactivated"),value:0}]}),o.jsx(u.Group,{name:"keepAlive",label:e("system.menu.keepAlive"),radioType:"button",labelCol:{md:5,xl:6},colProps:{md:24,xl:12},options:[{label:e("common.enabled"),value:1},{label:e("common.deactivated"),value:0}]}),o.jsx(u.Group,{name:"hideInMenu",label:e("system.menu.hideInMenu"),radioType:"button",labelCol:{md:5,xl:6},colProps:{md:24,xl:12},options:[{label:e("common.enabled"),value:1},{label:e("common.deactivated"),value:0}]}),o.jsx(a,{allowClear:!0,labelCol:{md:5,xl:6},colProps:{md:24,xl:12},name:"currentActiveMenu",label:e("system.menu.currentActiveMenu")}),o.jsx(a,{allowClear:!0,labelCol:{md:5,xl:6},colProps:{md:24,xl:12},name:"iframeLink",label:e("system.menu.iframeLink")}),o.jsx(a,{allowClear:!0,labelCol:{md:5,xl:6},colProps:{md:24,xl:12},name:"externalLink",label:e("system.menu.externalLink")})]})}})]})}const B=Object.freeze(Object.defineProperty({__proto__:null,Detail:O},Symbol.toStringTag,{value:"Module"}));export{O as D,U as a,B as d,N as f};
