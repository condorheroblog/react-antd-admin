import{u as k,j as o,B as f,c as i,D as w}from"./index-Cu2kO6lS.js";import{f as M,D as R,a as I}from"./detail-DLrdAOEb.js";import{u as S}from"./index-Do8iES_6.js";import{a}from"./react-B2eEhSVY.js";import{B as $}from"./index-DGSq0kzj.js";import{B as g}from"./index-DI1Ns9aq.js";import{getConstantColumns as O}from"./constants-DL5LYzYP.js";import{aH as P,k as z,aI as A}from"./antd-bHmztw5J.js";import"./faker-Dcf0Eyuj.js";import"./index-D4wmYR0l.js";import"./index-BSdwXTWa.js";import"./BaseForm-DVyki7v_.js";import"./index-m1T0Ifwd.js";import"./index-7WlSREKB.js";import"./index-55coOEym.js";import"./index-liwNPJVH.js";function Y(){const{t:e}=k(),{hasAccessByCodes:m}=S(),[h,l]=a.useState(!1),[x,c]=a.useState(""),[y,u]=a.useState({}),[C,D]=a.useState([]),d=a.useRef(null),T=async(n,t)=>{var s,p;const r=await I(n);await((s=t==null?void 0:t.reload)==null?void 0:s.call(t)),(p=window.$message)==null||p.success(`${e("common.deleteSuccess")} userId = ${r.result}`)},j=[...O(e),{title:e("common.action"),valueType:"option",key:"option",width:120,fixed:"right",render:(n,t,r,s)=>[o.jsx(f,{type:"link",size:"small",disabled:!m(i.update),onClick:async()=>{l(!0),c(e("system.menu.editMenu")),u({...t})},children:e("common.edit")},"editable"),o.jsx(P,{title:e("common.confirmDelete"),onConfirm:()=>T(t.id,s),okText:e("common.confirm"),cancelText:e("common.cancel"),children:o.jsx(f,{type:"link",size:"small",disabled:!m(i.delete),children:e("common.delete")})},"delete")]}],B=()=>{l(!1),u({})},b=()=>{var n;(n=d.current)==null||n.reload()};return o.jsxs($,{className:"h-full",children:[o.jsx(g,{columns:j,actionRef:d,request:async n=>{const t=await M(n),r=w(t.result.list);return D(t.result.list.filter(s=>Number(s.menuType)===0).map(s=>({...s,name:e(s.name)}))),{...t,data:r,total:t.result.total}},headerTitle:`${e("common.menu.menu")} （${e("common.demoOnly")}）`,toolBarRender:()=>[o.jsx(z,{icon:o.jsx(A,{}),type:"primary",disabled:!m(i.add),onClick:()=>{l(!0),c(e("system.menu.addMenu"))},children:e("common.add")},"add-role")]}),o.jsx(R,{title:x,open:h,flatParentMenus:C,onCloseChange:B,detailData:y,refreshTable:b})]})}export{Y as default};
