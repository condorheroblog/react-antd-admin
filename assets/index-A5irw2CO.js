import{y as Ar,V as yt,W as bt,X as St,Y as Ct,Z as sr,j as s,$ as xt,u as wt,a0 as cr}from"./index-DJDYVK2o.js";import{aS as Rt,aT as er,aU as nr,aV as rr,aW as h,j as ze,h as tr,ap as Pt,aK as o,aJ as be,aH as Ve,aX as We,aI as de,y as je,P as Lr,aY as En,T as $r,Y as Tt,aZ as It,a_ as Pe,aL as Se,aM as le,a$ as tn,l as Be,s as dr,b0 as Ke,aP as Ft,b1 as In,b2 as jt,b3 as pe,b4 as kr,au as qe,av as Te,b5 as ar,b6 as Mn,a6 as cn,b7 as Nt,b8 as Et,b9 as Ae,I as Dr,Q as vn,ba as Mt,a5 as Hn,bb as _r,bc as fr,d as kn,D as Bt,bd as dn,n as an,x as Kt,al as At,am as Lt,a2 as $t,a3 as kt,a1 as Dt,U as zr,be as _t,$ as zt,a0 as Ot,ar as Vt,r as vr}from"./antd-DxuFB7J3.js";import{a as g,R as se}from"./react-DUVzRXT7.js";import{L as fn,a as Wt,P as Bn}from"./index-Ap-HCnKR.js";import{u as Le,a as Ht,o as Ut,r as De,b as Kn,g as Gt,d as Oe,e as Ee,f as Or,h as ye,i as Vr,j as Wr,m as Hr,k as Dn,c as qt,l as Xt,n as Jt,p as Qt,q as ln,s as Ur,P as Gr,t as Yt,v as mr,w as sn,x as Zt,y as qr,z as Pn,A as Un,F as ea,B as na,G as ra}from"./index-0qjF_P79.js";import{u as Tn,B as lr,a as Xr,P as Fn,o as ta,i as Jr,g as An,r as Ln,b as Qr,t as mn,M as Gn,c as Yr,d as jn,e as qn,f as Zr,h as aa,j as la,S as gr,k as oa,U as pr,l as ia,m as _n,n as hr,p as yr,q as ua}from"./BaseForm-CYpHNqZU.js";import{i as et,D as sa}from"./index-CUml_GCb.js";import{M as ca}from"./index-DeBLS4LG.js";function da(n){var e=g.useRef(0),r=Ar(g.useState(n),2),t=r[0],a=r[1],i=g.useCallback(function(l){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){a(l)})},[]);return yt(function(){cancelAnimationFrame(e.current)}),[t,i]}var fa=bt(g.useLayoutEffect),va=Ct?fa:St;function ma(n){var e=Ar(da(function(){var a=sr(n);return a?{width:a.clientWidth,height:a.clientHeight}:void 0}),2),r=e[0],t=e[1];return va(function(){var a=sr(n);if(a){var i=new Rt(function(l){l.forEach(function(u){var c=u.target,d=c.clientWidth,v=c.clientHeight;t({width:d,height:v})})});return i.observe(a),function(){i.disconnect()}}},[],n),r}var ga=function(n){er(r,n);var e=nr(r);function r(){var t;rr(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i)),h(ze(t),"state",{hasError:!1,errorInfo:""}),t}return tr(r,[{key:"componentDidCatch",value:function(a,i){console.log(a,i)}},{key:"render",value:function(){return this.state.hasError?s.jsx(Pt,{status:"error",title:"Something went wrong.",extra:this.state.errorInfo}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(a){return{hasError:!0,errorInfo:a.message}}}]),r}(se.Component),pa=function(e){var r="".concat(e.antCls,"-progress-bg");return h({},e.componentCls,{"&-multiple":{paddingBlockStart:6,paddingBlockEnd:12,paddingInline:8},"&-progress":{"&-success":h({},r,{backgroundColor:e.colorSuccess}),"&-error":h({},r,{backgroundColor:e.colorError}),"&-warning":h({},r,{backgroundColor:e.colorWarning})},"&-rule":{display:"flex",alignItems:"center","&-icon":{"&-default":{display:"flex",alignItems:"center",justifyContent:"center",width:"14px",height:"22px","&-circle":{width:"6px",height:"6px",backgroundColor:e.colorTextSecondary,borderRadius:"4px"}},"&-loading":{color:e.colorPrimary},"&-error":{color:e.colorError},"&-success":{color:e.colorSuccess}},"&-text":{color:e.colorText}}})};function ha(n){return Le("InlineErrorFormItem",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[pa(r)]})}var ya=["rules","name","children","popoverProps"],ba=["errorType","rules","name","popoverProps","children"],nt={marginBlockStart:-5,marginBlockEnd:-5,marginInlineStart:0,marginInlineEnd:0},Sa=function(e){var r=e.inputProps,t=e.input,a=e.extra,i=e.errorList,l=e.popoverProps,u=g.useState(!1),c=de(u,2),d=c[0],v=c[1],f=g.useState([]),b=de(f,2),S=b[0],m=b[1],w=g.useContext(je.ConfigContext),C=w.getPrefixCls,p=C(),y=Ht(),R=ha("".concat(p,"-form-item-with-help")),x=R.wrapSSR,$=R.hashId;g.useEffect(function(){r.validateStatus!=="validating"&&m(r.errors)},[r.errors,r.validateStatus]);var O=Ut(S.length<1?!1:d,function(I){I!==d&&v(I)}),M=r.validateStatus==="validating";return s.jsx(Lr,o(o(o({trigger:(l==null?void 0:l.trigger)||["click"],placement:(l==null?void 0:l.placement)||"topLeft"},O),{},{getPopupContainer:l==null?void 0:l.getPopupContainer,getTooltipContainer:l==null?void 0:l.getTooltipContainer,content:x(s.jsx("div",{className:"".concat(p,"-form-item ").concat($," ").concat(y.hashId).trim(),style:{margin:0,padding:0},children:s.jsxs("div",{className:"".concat(p,"-form-item-with-help ").concat($," ").concat(y.hashId).trim(),children:[M?s.jsx(En,{}):null,i]})}))},l),{},{children:s.jsxs(s.Fragment,{children:[t,a]})}),"popover")},Ca=function(e){var r=e.rules,t=e.name,a=e.children,i=e.popoverProps,l=be(e,ya);return s.jsx(Ve.Item,o(o({name:t,rules:r,hasFeedback:!1,shouldUpdate:function(c,d){if(c===d)return!1;var v=[t].flat(1);v.length>1&&v.pop();try{return JSON.stringify(We(c,v))!==JSON.stringify(We(d,v))}catch{return!0}},_internalItemRender:{mark:"pro_table_render",render:function(c,d){return s.jsx(Sa,o({inputProps:c,popoverProps:i},d))}}},l),{},{style:o(o({},nt),l==null?void 0:l.style),children:a}))},xa=function(e){var r=e.errorType,t=e.rules,a=e.name,i=e.popoverProps,l=e.children,u=be(e,ba);return a&&t!==null&&t!==void 0&&t.length&&r==="popover"?s.jsx(Ca,o(o({name:a,rules:t,popoverProps:i},u),{},{children:l})):s.jsx(Ve.Item,o(o({rules:t,shouldUpdate:a?function(c,d){if(c===d)return!1;var v=[a].flat(1);v.length>1&&v.pop();try{return JSON.stringify(We(c,v))!==JSON.stringify(We(d,v))}catch{return!0}}:void 0},u),{},{style:o(o({},nt),u.style),name:a,children:l}))},wa=function(e){var r;return!!(e!=null&&(r=e.valueType)!==null&&r!==void 0&&r.toString().startsWith("date")||(e==null?void 0:e.valueType)==="select"||e!=null&&e.valueEnum)},Ra=function(e){var r;return((r=e.ellipsis)===null||r===void 0?void 0:r.showTitle)===!1?!1:e.ellipsis},Pa=function(e,r,t){if(r.copyable||r.ellipsis){var a=r.copyable&&t?{text:t,tooltips:["",""]}:void 0,i=wa(r),l=Ra(r)&&t?{tooltip:(r==null?void 0:r.tooltip)!==!1&&i?s.jsx("div",{className:"pro-table-tooltip-text",children:e}):t}:!1;return s.jsx($r.Text,{style:{width:"100%",margin:0,padding:0},title:"",copyable:a,ellipsis:l,children:e})}return e},Xn=function(e,r,t){return r===void 0?e:De(e,r,t)},rt=function(e){var r=Kn(Gt(),"4.24.0")>-1?{menu:e}:{overlay:s.jsx(Tt,o({},e))};return Oe(r)};function Ta(){var n=g.useState(!0),e=de(n,2),r=e[1],t=g.useCallback(function(){return r(function(a){return!a})},[]);return t}function Ia(n,e){var r=g.useMemo(function(){var t={current:e};return new Proxy(t,{set:function(i,l,u){return Object.is(i[l],u)||(i[l]=u,n(r)),!0}})},[]);return r}function Fa(n){var e=Ta(),r=Ia(e,n);return r}var tt=function(e){if(e&&e!==!0)return e},ja=function(e){var r={};return Object.keys(e||{}).forEach(function(t){var a;Array.isArray(e[t])&&((a=e[t])===null||a===void 0?void 0:a.length)===0||e[t]!==void 0&&(r[t]=e[t])}),r},Na=["map_row_parentKey"],Ea=["map_row_parentKey","map_row_key"],Ma=["map_row_key"],zn=function(e){return(dr.warn||dr.warning)(e)},Ne=function(e){return Array.isArray(e)?e.join(","):e};function yn(n,e){var r,t=n.getRowKey,a=n.row,i=n.data,l=n.childrenColumnName,u=l===void 0?"children":l,c=(r=Ne(n.key))===null||r===void 0?void 0:r.toString(),d=new Map;function v(b,S,m){b.forEach(function(w,C){var p=(m||0)*10+C,y=t(w,p).toString();w&&Ke(w)==="object"&&u in w&&v(w[u]||[],y,p);var R=o(o({},w),{},{map_row_key:y,children:void 0,map_row_parentKey:S});delete R.children,S||delete R.map_row_parentKey,d.set(y,R)})}e==="top"&&d.set(c,o(o({},d.get(c)),a)),v(i),e==="update"&&d.set(c,o(o({},d.get(c)),a)),e==="delete"&&d.delete(c);var f=function(S){var m=new Map,w=[],C=function(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;S.forEach(function(R){if(R.map_row_parentKey&&!R.map_row_key){var x=R.map_row_parentKey,$=be(R,Na);if(m.has(x)||m.set(x,[]),y){var O;(O=m.get(x))===null||O===void 0||O.push($)}}})};return C(e==="top"),S.forEach(function(p){if(p.map_row_parentKey&&p.map_row_key){var y,R=p.map_row_parentKey,x=p.map_row_key,$=be(p,Ea);m.has(x)&&($[u]=m.get(x)),m.has(R)||m.set(R,[]),(y=m.get(R))===null||y===void 0||y.push($)}}),C(e==="update"),S.forEach(function(p){if(!p.map_row_parentKey){var y=p.map_row_key,R=be(p,Ma);if(y&&m.has(y)){var x=o(o({},R),{},h({},u,m.get(y)));w.push(x);return}w.push(R)}}),w};return f(d)}function Ba(n,e){var r=n.recordKey,t=n.onSave,a=n.row,i=n.children,l=n.newLineConfig,u=n.editorType,c=n.tableName,d=g.useContext(Wr),v=Ve.useFormInstance(),f=Pe(!1),b=de(f,2),S=b[0],m=b[1],w=ye(Se(le().mark(function C(){var p,y,R,x,$,O,M,I,D;return le().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.prev=0,y=u==="Map",R=[c,Array.isArray(r)?r[0]:r].map(function(F){return F==null?void 0:F.toString()}).flat(1).filter(Boolean),m(!0),T.next=6,v.validateFields(R,{recursive:!0});case 6:return x=(d==null||(p=d.getFieldFormatValue)===null||p===void 0?void 0:p.call(d,R))||v.getFieldValue(R),Array.isArray(r)&&r.length>1&&($=jt(r),O=$.slice(1),M=We(x,O),In(x,O,M)),I=y?In({},R,x):x,T.next=11,t==null?void 0:t(r,Hr({},a,I),a,l);case 11:return D=T.sent,m(!1),T.abrupt("return",D);case 16:throw T.prev=16,T.t0=T.catch(0),console.log(T.t0),m(!1),T.t0;case 21:case"end":return T.stop()}},C,null,[[0,16]])})));return g.useImperativeHandle(e,function(){return{save:w}},[w]),s.jsxs("a",{onClick:function(){var C=Se(le().mark(function p(y){return le().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return y.stopPropagation(),y.preventDefault(),x.prev=2,x.next=5,w();case 5:x.next=9;break;case 7:x.prev=7,x.t0=x.catch(2);case 9:case"end":return x.stop()}},p,null,[[2,7]])}));return function(p){return C.apply(this,arguments)}}(),children:[S?s.jsx(En,{style:{marginInlineEnd:8}}):null,i||"保存"]},"save")}var Ka=function(e){var r=e.recordKey,t=e.onDelete,a=e.preEditRowRef,i=e.row,l=e.children,u=e.deletePopconfirmMessage,c=Pe(function(){return!1}),d=de(c,2),v=d[0],f=d[1],b=ye(Se(le().mark(function S(){var m;return le().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,f(!0),C.next=4,t==null?void 0:t(r,i);case 4:return m=C.sent,f(!1),C.abrupt("return",m);case 9:return C.prev=9,C.t0=C.catch(0),console.log(C.t0),f(!1),C.abrupt("return",null);case 14:return C.prev=14,a&&(a.current=null),C.finish(14);case 17:case"end":return C.stop()}},S,null,[[0,9,14,17]])})));return l!==!1?s.jsx(Ft,{title:u,onConfirm:function(){return b()},children:s.jsxs("a",{children:[v?s.jsx(En,{style:{marginInlineEnd:8}}):null,l||"删除"]})},"delete"):null},Aa=function(e){var r=e.recordKey,t=e.tableName,a=e.newLineConfig,i=e.editorType,l=e.onCancel,u=e.cancelEditable,c=e.row,d=e.cancelText,v=e.preEditRowRef,f=g.useContext(Wr),b=Ve.useFormInstance();return s.jsx("a",{onClick:function(){var S=Se(le().mark(function m(w){var C,p,y,R,x,$,O;return le().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return w.stopPropagation(),w.preventDefault(),p=i==="Map",y=[t,r].flat(1).filter(Boolean),R=(f==null||(C=f.getFieldFormatValue)===null||C===void 0?void 0:C.call(f,y))||(b==null?void 0:b.getFieldValue(y)),x=p?In({},y,R):R,I.next=8,l==null?void 0:l(r,x,c,a);case 8:return $=I.sent,I.next=11,u(r);case 11:if((v==null?void 0:v.current)===null){I.next=15;break}b.setFieldsValue(In({},y,v==null?void 0:v.current)),I.next=17;break;case 15:return I.next=17,(O=e.onDelete)===null||O===void 0?void 0:O.call(e,r,c);case 17:return v&&(v.current=null),I.abrupt("return",$);case 19:case"end":return I.stop()}},m)}));return function(m){return S.apply(this,arguments)}}(),children:d||"取消"},"cancel")};function La(n,e){var r=e.recordKey,t=e.newLineConfig,a=e.saveText,i=e.deleteText,l=g.forwardRef(Ba),u=g.createRef();return{save:s.jsx(l,o(o({},e),{},{row:n,ref:u,children:a}),"save"+r),saveRef:u,delete:(t==null?void 0:t.options.recordKey)!==r?s.jsx(Ka,o(o({},e),{},{row:n,children:i}),"delete"+r):void 0,cancel:s.jsx(Aa,o(o({},e),{},{row:n}),"cancel"+r)}}function $a(n){var e=Ee(),r=g.useRef(null),t=g.useState(void 0),a=de(t,2),i=a[0],l=a[1],u=function(){var j=new Map,K=function B(N,V){N==null||N.forEach(function(X,G){var q,W=V==null?G.toString():V+"_"+G.toString();j.set(W,Ne(n.getRowKey(X,-1))),j.set((q=Ne(n.getRowKey(X,-1)))===null||q===void 0?void 0:q.toString(),W),n.childrenColumnName&&X!==null&&X!==void 0&&X[n.childrenColumnName]&&B(X[n.childrenColumnName],W)})};return K(n.dataSource),j},c=g.useMemo(function(){return u()},[]),d=g.useRef(c),v=g.useRef(void 0);Or(function(){d.current=u()},[n.dataSource]),v.current=i;var f=n.type||"single",b=It(n.dataSource,"children",n.getRowKey),S=de(b,1),m=S[0],w=Pe([],{value:n.editableKeys,onChange:n.onChange?function(z){var j,K,B;n==null||(j=n.onChange)===null||j===void 0||j.call(n,(K=z==null?void 0:z.filter(function(N){return N!==void 0}))!==null&&K!==void 0?K:[],(B=z==null?void 0:z.map(function(N){return m(N)}).filter(function(N){return N!==void 0}))!==null&&B!==void 0?B:[])}:void 0}),C=de(w,2),p=C[0],y=C[1],R=g.useMemo(function(){var z=f==="single"?p==null?void 0:p.slice(0,1):p;return new Set(z)},[(p||[]).join(","),f]),x=Tn(p),$=ye(function(z){var j,K,B,N,V=(j=n.getRowKey(z,z.index))===null||j===void 0||(K=j.toString)===null||K===void 0?void 0:K.call(j),X=(B=n.getRowKey(z,-1))===null||B===void 0||(N=B.toString)===null||N===void 0?void 0:N.call(B),G=p==null?void 0:p.map(function(ie){return ie==null?void 0:ie.toString()}),q=(x==null?void 0:x.map(function(ie){return ie==null?void 0:ie.toString()}))||[],W=n.tableName&&!!(q!=null&&q.includes(X))||!!(q!=null&&q.includes(V));return{recordKey:X,isEditable:n.tableName&&(G==null?void 0:G.includes(X))||(G==null?void 0:G.includes(V)),preIsEditable:W}}),O=ye(function(z,j){var K,B;return R.size>0&&f==="single"&&n.onlyOneLineEditorAlertMessage!==!1?(zn(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1):(R.add(z),y(Array.from(R)),r.current=(K=j??((B=n.dataSource)===null||B===void 0?void 0:B.find(function(N,V){return n.getRowKey(N,V)===z})))!==null&&K!==void 0?K:null,!0)}),M=ye(function(){var z=Se(le().mark(function j(K,B){var N,V;return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:if(N=Ne(K).toString(),V=d.current.get(N),!(!R.has(N)&&V&&(B??!0)&&n.tableName)){G.next=5;break}return M(V,!1),G.abrupt("return");case 5:return i&&i.options.recordKey===K&&l(void 0),R.delete(N),R.delete(Ne(K)),y(Array.from(R)),G.abrupt("return",!0);case 10:case"end":return G.stop()}},j)}));return function(j,K){return z.apply(this,arguments)}}()),I=Vr(Se(le().mark(function z(){var j,K,B,N,V=arguments;return le().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:for(K=V.length,B=new Array(K),N=0;N<K;N++)B[N]=V[N];(j=n.onValuesChange)===null||j===void 0||j.call.apply(j,[n].concat(B));case 2:case"end":return G.stop()}},z)})),64),D=ye(function(z,j){var K;if(n.onValuesChange){var B=n.dataSource;p==null||p.forEach(function(q){if((i==null?void 0:i.options.recordKey)!==q){var W=q.toString(),ie=We(j,[n.tableName||"",W].flat(1).filter(function(Q){return Q||Q===0}));ie&&(B=yn({data:B,getRowKey:n.getRowKey,row:ie,key:W,childrenColumnName:n.childrenColumnName||"children"},"update"))}});var N=z,V=(K=Object.keys(N||{}).pop())===null||K===void 0?void 0:K.toString(),X=o(o({},i==null?void 0:i.defaultValue),We(j,[n.tableName||"",V.toString()].flat(1).filter(function(q){return q||q===0}))),G=d.current.has(Ne(V))?B.find(function(q,W){var ie,Q=(ie=n.getRowKey(q,W))===null||ie===void 0?void 0:ie.toString();return Q===V}):X;I.run(G||X,B)}}),L=g.useRef(new Map);g.useEffect(function(){L.current.forEach(function(z,j){R.has(j)||L.current.delete(j)})},[L,R]);var T=ye(function(){var z=Se(le().mark(function j(K,B){var N,V,X,G;return le().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(N=Ne(K),V=d.current.get(K.toString()),!(!R.has(N)&&V&&(B??!0)&&n.tableName)){W.next=6;break}return W.next=5,T(V,!1);case 5:return W.abrupt("return",W.sent);case 6:return X=L.current.get(N)||L.current.get(N.toString()),W.prev=7,W.next=10,X==null||(G=X.current)===null||G===void 0?void 0:G.save();case 10:W.next=15;break;case 12:return W.prev=12,W.t0=W.catch(7),W.abrupt("return",!1);case 15:return R.delete(N),R.delete(N.toString()),y(Array.from(R)),W.abrupt("return",!0);case 19:case"end":return W.stop()}},j,null,[[7,12]])}));return function(j,K){return z.apply(this,arguments)}}()),F=ye(function(z,j){if(j!=null&&j.parentKey&&!d.current.has(Ne(j==null?void 0:j.parentKey).toString()))return console.warn("can't find record by key",j==null?void 0:j.parentKey),!1;if(v.current&&n.onlyAddOneLineAlertMessage!==!1)return zn(n.onlyAddOneLineAlertMessage||e.getMessage("editableTable.onlyAddOneLine","只能新增一行")),!1;if(R.size>0&&f==="single"&&n.onlyOneLineEditorAlertMessage!==!1)return zn(n.onlyOneLineEditorAlertMessage||e.getMessage("editableTable.onlyOneLineEditor","只能同时编辑一行")),!1;var K=n.getRowKey(z,-1);if(!K&&K!==0)throw tn(!!K,`请设置 recordCreatorProps.record 并返回一个唯一的key  
  https://procomponents.ant.design/components/editable-table#editable-%E6%96%B0%E5%BB%BA%E8%A1%8C`),new Error("请设置 recordCreatorProps.record 并返回一个唯一的key");if(R.add(K),y(Array.from(R)),(j==null?void 0:j.newRecordType)==="dataSource"||n.tableName){var B,N={data:n.dataSource,getRowKey:n.getRowKey,row:o(o({},z),{},{map_row_parentKey:j!=null&&j.parentKey?(B=Ne(j==null?void 0:j.parentKey))===null||B===void 0?void 0:B.toString():void 0}),key:K,childrenColumnName:n.childrenColumnName||"children"};n.setDataSource(yn(N,(j==null?void 0:j.position)==="top"?"top":"update"))}else l({defaultValue:z,options:o(o({},j),{},{recordKey:K})});return!0}),U=(n==null?void 0:n.saveText)||e.getMessage("editableTable.action.save","保存"),E=(n==null?void 0:n.deleteText)||e.getMessage("editableTable.action.delete","删除"),P=(n==null?void 0:n.cancelText)||e.getMessage("editableTable.action.cancel","取消"),k=ye(function(){var z=Se(le().mark(function j(K,B,N,V){var X,G,q,W,ie,Q,ve;return le().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return ee.next=2,n==null||(X=n.onSave)===null||X===void 0?void 0:X.call(n,K,B,N,V);case 2:return W=ee.sent,ee.next=5,M(K);case 5:if(ie=V||v.current||{},Q=ie.options,!(!(Q!=null&&Q.parentKey)&&(Q==null?void 0:Q.recordKey)===K)){ee.next=9;break}return(Q==null?void 0:Q.position)==="top"?n.setDataSource([B].concat(Be(n.dataSource))):n.setDataSource([].concat(Be(n.dataSource),[B])),ee.abrupt("return",W);case 9:return ve={data:n.dataSource,getRowKey:n.getRowKey,row:Q?o(o({},B),{},{map_row_parentKey:(G=Ne((q=Q==null?void 0:Q.parentKey)!==null&&q!==void 0?q:""))===null||G===void 0?void 0:G.toString()}):B,key:K,childrenColumnName:n.childrenColumnName||"children"},n.setDataSource(yn(ve,(Q==null?void 0:Q.position)==="top"?"top":"update")),ee.next=13,M(K);case 13:return ee.abrupt("return",W);case 14:case"end":return ee.stop()}},j)}));return function(j,K,B,N){return z.apply(this,arguments)}}()),A=ye(function(){var z=Se(le().mark(function j(K,B){var N,V,X;return le().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return V={data:n.dataSource,getRowKey:n.getRowKey,row:B,key:K,childrenColumnName:n.childrenColumnName||"children"},q.next=3,n==null||(N=n.onDelete)===null||N===void 0?void 0:N.call(n,K,B);case 3:return X=q.sent,q.next=6,M(K,!1);case 6:return n.setDataSource(yn(V,"delete")),q.abrupt("return",X);case 8:case"end":return q.stop()}},j)}));return function(j,K){return z.apply(this,arguments)}}()),_=ye(function(){var z=Se(le().mark(function j(K,B,N,V){var X,G;return le().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,n==null||(X=n.onCancel)===null||X===void 0?void 0:X.call(n,K,B,N,V);case 2:return G=W.sent,W.abrupt("return",G);case 4:case"end":return W.stop()}},j)}));return function(j,K,B,N){return z.apply(this,arguments)}}()),Z=n.actionRender&&typeof n.actionRender=="function",H=Z?n.actionRender:function(){},re=ye(H),te=function(j){var K=n.getRowKey(j,j.index),B={saveText:U,cancelText:P,deleteText:E,addEditRecord:F,recordKey:K,cancelEditable:M,index:j.index,tableName:n.tableName,newLineConfig:i,onCancel:_,onDelete:A,onSave:k,editableKeys:p,setEditableRowKeys:y,preEditRowRef:r,deletePopconfirmMessage:n.deletePopconfirmMessage||"".concat(e.getMessage("deleteThisLine","删除此项"),"?")},N=La(j,B);return n.tableName?L.current.set(d.current.get(Ne(K))||Ne(K),N.saveRef):L.current.set(Ne(K),N.saveRef),Z?re(j,B,{save:N.save,delete:N.delete,cancel:N.cancel}):[N.save,N.delete,N.cancel]};return{editableKeys:p,setEditableRowKeys:y,isEditable:$,actionRender:te,startEditable:O,cancelEditable:M,addEditRecord:F,saveEditable:T,newLineRecord:i,preEditableKeys:x,onValuesChange:D,getRealIndex:n.getRealIndex}}var ka=function(e){var r=e.componentCls,t=e.antCls;return h({},"".concat(r,"-actions"),h(h({marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,listStyle:"none",display:"flex",gap:e.marginXS,background:e.colorBgContainer,borderBlockStart:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit),minHeight:42},"& > *",{alignItems:"center",justifyContent:"center",flex:1,display:"flex",cursor:"pointer",color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),"& > li > div",{flex:1,width:"100%",marginBlock:e.marginSM,marginInline:0,color:e.colorTextSecondary,textAlign:"center",a:{color:e.colorTextSecondary,transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}},div:h(h({position:"relative",display:"block",minWidth:32,fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimaryHover,transition:"color 0.3s"}},"a:not(".concat(t,`-btn),
            > .anticon`),{display:"inline-block",width:"100%",color:e.colorTextSecondary,lineHeight:"22px",transition:"color 0.3s","&:hover":{color:e.colorPrimaryHover}}),".anticon",{fontSize:e.cardActionIconSize,lineHeight:"22px"}),"&:not(:last-child)":{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}}))};function Da(n){return Le("ProCardActions",function(e){var r=o(o({},e),{},{componentCls:".".concat(n),cardActionIconSize:16});return[ka(r)]})}var _a=function(e){var r=e.actions,t=e.prefixCls,a=Da(t),i=a.wrapSSR,l=a.hashId;return Array.isArray(r)&&r!==null&&r!==void 0&&r.length?i(s.jsx("ul",{className:pe("".concat(t,"-actions"),l),children:r.map(function(u,c){return s.jsx("li",{style:{width:"".concat(100/r.length,"%"),padding:0,margin:0},className:pe("".concat(t,"-actions-item"),l),children:u},"action-".concat(c))})})):i(s.jsx("ul",{className:pe("".concat(t,"-actions"),l),children:r}))},za=new kr("card-loading",{"0%":{backgroundPosition:"0 50%"},"50%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),Oa=function(e){return h({},e.componentCls,h(h({"&-loading":{overflow:"hidden"},"&-loading &-body":{userSelect:"none"}},"".concat(e.componentCls,"-loading-content"),{width:"100%",p:{marginBlock:0,marginInline:0}}),"".concat(e.componentCls,"-loading-block"),{height:"14px",marginBlock:"4px",background:"linear-gradient(90deg, rgba(54, 61, 64, 0.2), rgba(54, 61, 64, 0.4), rgba(54, 61, 64, 0.2))",backgroundSize:"600% 600%",borderRadius:e.borderRadius,animationName:za,animationDuration:"1.4s",animationTimingFunction:"ease",animationIterationCount:"infinite"}))};function Va(n){return Le("ProCardLoading",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Oa(r)]})}var Wa=function(e){var r=e.style,t=e.prefix,a=Va(t||"ant-pro-card"),i=a.wrapSSR;return i(s.jsxs("div",{className:"".concat(t,"-loading-content"),style:r,children:[s.jsx(qe,{gutter:8,children:s.jsx(Te,{span:22,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})}),s.jsxs(qe,{gutter:8,children:[s.jsx(Te,{span:8,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:15,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})]}),s.jsxs(qe,{gutter:8,children:[s.jsx(Te,{span:6,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:18,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})]}),s.jsxs(qe,{gutter:8,children:[s.jsx(Te,{span:13,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:9,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})]}),s.jsxs(qe,{gutter:8,children:[s.jsx(Te,{span:4,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:3,children:s.jsx("div",{className:"".concat(t,"-loading-block")})}),s.jsx(Te,{span:16,children:s.jsx("div",{className:"".concat(t,"-loading-block")})})]})]}))},Ha=["tab","children"],Ua=["key","tab","tabKey","disabled","destroyInactiveTabPane","children","className","style","cardProps"];function Ga(n){return n.filter(function(e){return e})}function qa(n,e,r){if(n)return n.map(function(a){return o(o({},a),{},{children:s.jsx(bn,o(o({},r==null?void 0:r.cardProps),{},{children:a.children}))})});tn(!r,"Tabs.TabPane is deprecated. Please use `items` directly.");var t=ar(e).map(function(a){if(se.isValidElement(a)){var i=a.key,l=a.props,u=l||{},c=u.tab,d=u.children,v=be(u,Ha),f=o(o({key:String(i)},v),{},{children:s.jsx(bn,o(o({},r==null?void 0:r.cardProps),{},{children:d})),label:c});return f}return null});return Ga(t)}var Xa=function(e){var r=g.useContext(je.ConfigContext),t=r.getPrefixCls;if(Mn.startsWith("5"))return s.jsx(s.Fragment,{});var a=e.key,i=e.tab,l=e.tabKey,u=e.disabled,c=e.destroyInactiveTabPane,d=e.children,v=e.className,f=e.style,b=e.cardProps,S=be(e,Ua),m=t("pro-card-tabpane"),w=pe(m,v);return s.jsx(cn.TabPane,o(o({tabKey:l,tab:i,className:w,style:f,disabled:u,destroyInactiveTabPane:c},S),{},{children:s.jsx(bn,o(o({},b),{},{children:d}))}),a)},br=function(e){return{backgroundColor:e.controlItemBgActive,borderColor:e.controlOutline}},Ja=function(e){var r=e.componentCls;return h(h(h({},r,o(o({position:"relative",display:"flex",flexDirection:"column",boxSizing:"border-box",width:"100%",marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0,backgroundColor:e.colorBgContainer,borderRadius:e.borderRadius,transition:"all 0.3s"},Dn===null||Dn===void 0?void 0:Dn(e)),{},h(h(h(h(h(h(h(h(h(h({"&-box-shadow":{boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017",borderColor:"transparent"},"&-col":{width:"100%"},"&-border":{border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-hoverable":h({cursor:"pointer",transition:"box-shadow 0.3s, border-color 0.3s","&:hover":{borderColor:"transparent",boxShadow:"0 1px 2px -2px #00000029, 0 3px 6px #0000001f, 0 5px 12px 4px #00000017"}},"&".concat(r,"-checked:hover"),{borderColor:e.controlOutline}),"&-checked":o(o({},br(e)),{},{"&::after":{visibility:"visible",position:"absolute",insetBlockStart:2,insetInlineEnd:2,opacity:1,width:0,height:0,border:"6px solid ".concat(e.colorPrimary),borderBlockEnd:"6px solid transparent",borderInlineStart:"6px solid transparent",borderStartEndRadius:2,content:'""'}}),"&:focus":o({},br(e)),"&&-ghost":h({backgroundColor:"transparent"},"> ".concat(r),{"&-header":{paddingInlineEnd:0,paddingBlockEnd:e.padding,paddingInlineStart:0},"&-body":{paddingBlock:0,paddingInline:0,backgroundColor:"transparent"}}),"&&-split > &-body":{paddingBlock:0,paddingInline:0},"&&-contain-card > &-body":{display:"flex"}},"".concat(r,"-body-direction-column"),{flexDirection:"column"}),"".concat(r,"-body-wrap"),{flexWrap:"wrap"}),"&&-collapse",h({},"> ".concat(r),{"&-header":{paddingBlockEnd:e.padding,borderBlockEnd:0},"&-body":{display:"none"}})),"".concat(r,"-header"),{display:"flex",alignItems:"center",justifyContent:"space-between",paddingInline:e.paddingLG,paddingBlock:e.padding,paddingBlockEnd:0,"&-border":{"&":{paddingBlockEnd:e.padding},borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)},"&-collapsible":{cursor:"pointer"}}),"".concat(r,"-title"),{color:e.colorText,fontWeight:500,fontSize:e.fontSizeLG,lineHeight:e.lineHeight}),"".concat(r,"-extra"),{color:e.colorText}),"".concat(r,"-type-inner"),h({},"".concat(r,"-header"),{backgroundColor:e.colorFillAlter})),"".concat(r,"-collapsible-icon"),{marginInlineEnd:e.marginXS,color:e.colorIconHover,":hover":{color:e.colorPrimaryHover},"& svg":{transition:"transform ".concat(e.motionDurationMid)}}),"".concat(r,"-body"),{display:"block",boxSizing:"border-box",height:"100%",paddingInline:e.paddingLG,paddingBlock:e.padding,"&-center":{display:"flex",alignItems:"center",justifyContent:"center"}}),"&&-size-small",h(h({},r,{"&-header":{paddingInline:e.paddingSM,paddingBlock:e.paddingXS,paddingBlockEnd:0,"&-border":{paddingBlockEnd:e.paddingXS}},"&-title":{fontSize:e.fontSize},"&-body":{paddingInline:e.paddingSM,paddingBlock:e.paddingSM}}),"".concat(r,"-header").concat(r,"-header-collapsible"),{paddingBlock:e.paddingXS})))),"".concat(r,"-col"),h(h({},"&".concat(r,"-split-vertical"),{borderInlineEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)}),"&".concat(r,"-split-horizontal"),{borderBlockEnd:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorSplit)})),"".concat(r,"-tabs"),h(h(h(h(h(h({},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),h({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:e.marginXS,paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-bottom > ").concat(e.antCls,"-tabs-nav"),h({marginBlockEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingInlineStart:e.padding})),"".concat(e.antCls,"-tabs-left"),h({},"".concat(e.antCls,"-tabs-content-holder"),h({},"".concat(e.antCls,"-tabs-content"),h({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-left > ").concat(e.antCls,"-tabs-nav"),h({marginInlineEnd:0},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})),"".concat(e.antCls,"-tabs-right"),h({},"".concat(e.antCls,"-tabs-content-holder"),h({},"".concat(e.antCls,"-tabs-content"),h({},"".concat(e.antCls,"-tabs-tabpane"),{paddingInlineStart:0})))),"".concat(e.antCls,"-tabs-right > ").concat(e.antCls,"-tabs-nav"),h({},"".concat(e.antCls,"-tabs-nav-list"),{paddingBlockStart:e.padding})))},at=24,Qa=function(e,r){var t=r.componentCls;return e===0?h({},"".concat(t,"-col-0"),{display:"none"}):h({},"".concat(t,"-col-").concat(e),{flexShrink:0,width:"".concat(e/at*100,"%")})},Ya=function(e){return Array(at+1).fill(1).map(function(r,t){return Qa(t,e)})};function Za(n){return Le("ProCard",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Ja(r),Ya(r)]})}var el=["className","style","bodyStyle","headStyle","title","subTitle","extra","wrap","layout","loading","gutter","tooltip","split","headerBordered","bordered","boxShadow","children","size","actions","ghost","hoverable","direction","collapsed","collapsible","collapsibleIconRender","colStyle","defaultCollapsed","onCollapse","checked","onChecked","tabs","type"],bn=se.forwardRef(function(n,e){var r,t=n.className,a=n.style,i=n.bodyStyle,l=n.headStyle,u=n.title,c=n.subTitle,d=n.extra,v=n.wrap,f=v===void 0?!1:v,b=n.layout,S=n.loading,m=n.gutter,w=m===void 0?0:m,C=n.tooltip,p=n.split,y=n.headerBordered,R=y===void 0?!1:y,x=n.bordered,$=x===void 0?!1:x,O=n.boxShadow,M=O===void 0?!1:O,I=n.children,D=n.size,L=n.actions,T=n.ghost,F=T===void 0?!1:T,U=n.hoverable,E=U===void 0?!1:U,P=n.direction,k=n.collapsed,A=n.collapsible,_=A===void 0?!1:A,Z=n.collapsibleIconRender,H=n.colStyle,re=n.defaultCollapsed,te=re===void 0?!1:re,z=n.onCollapse,j=n.checked,K=n.onChecked,B=n.tabs,N=n.type,V=be(n,el),X=g.useContext(je.ConfigContext),G=X.getPrefixCls,q=Nt()||{lg:!0,md:!0,sm:!0,xl:!1,xs:!1,xxl:!1},W=Pe(te,{value:k,onChange:z}),ie=de(W,2),Q=ie[0],ve=ie[1],ne=["xxl","xl","lg","md","sm","xs"],ee=qa(B==null?void 0:B.items,I,B),fe=function(ge){var xe=[0,0],He=Array.isArray(ge)?ge:[ge,0];return He.forEach(function(Re,$e){if(Ke(Re)==="object")for(var _e=0;_e<ne.length;_e+=1){var Qe=ne[_e];if(q[Qe]&&Re[Qe]!==void 0){xe[$e]=Re[Qe];break}}else xe[$e]=Re||0}),xe},ue=function(ge,xe){return ge?xe:{}},Ie=function(ge){var xe=ge;if(Ke(ge)==="object")for(var He=0;He<ne.length;He+=1){var Re=ne[He];if(q!=null&&q[Re]&&(ge==null?void 0:ge[Re])!==void 0){xe=ge[Re];break}}var $e=ue(typeof xe=="string"&&/\d%|\dpx/i.test(xe),{width:xe,flexShrink:0});return{span:xe,colSpanStyle:$e}},oe=G("pro-card"),Ze=Za(oe),ae=Ze.wrapSSR,Fe=Ze.hashId,en=fe(w),pn=de(en,2),Xe=pn[0],nn=pn[1],on=!1,hn=se.Children.toArray(I),Ce=hn.map(function(we,ge){var xe;if(we!=null&&(xe=we.type)!==null&&xe!==void 0&&xe.isProCard){on=!0;var He=we.props.colSpan,Re=Ie(He),$e=Re.span,_e=Re.colSpanStyle,Qe=pe(["".concat(oe,"-col")],Fe,h(h(h({},"".concat(oe,"-split-vertical"),p==="vertical"&&ge!==hn.length-1),"".concat(oe,"-split-horizontal"),p==="horizontal"&&ge!==hn.length-1),"".concat(oe,"-col-").concat($e),typeof $e=="number"&&$e>=0&&$e<=24)),wn=ae(s.jsx("div",{style:o(o(o(o({},_e),ue(Xe>0,{paddingInlineEnd:Xe/2,paddingInlineStart:Xe/2})),ue(nn>0,{paddingBlockStart:nn/2,paddingBlockEnd:nn/2})),H),className:Qe,children:se.cloneElement(we)}));return se.cloneElement(wn,{key:"pro-card-col-".concat((we==null?void 0:we.key)||ge)})}return we}),Cn=pe("".concat(oe),t,Fe,(r={},h(h(h(h(h(h(h(h(h(h(r,"".concat(oe,"-border"),$),"".concat(oe,"-box-shadow"),M),"".concat(oe,"-contain-card"),on),"".concat(oe,"-loading"),S),"".concat(oe,"-split"),p==="vertical"||p==="horizontal"),"".concat(oe,"-ghost"),F),"".concat(oe,"-hoverable"),E),"".concat(oe,"-size-").concat(D),D),"".concat(oe,"-type-").concat(N),N),"".concat(oe,"-collapse"),Q),h(r,"".concat(oe,"-checked"),j))),me=pe("".concat(oe,"-body"),Fe,h(h(h({},"".concat(oe,"-body-center"),b==="center"),"".concat(oe,"-body-direction-column"),p==="horizontal"||P==="column"),"".concat(oe,"-body-wrap"),f&&on)),xn=i,rn=se.isValidElement(S)?S:s.jsx(Wa,{prefix:oe,style:(i==null?void 0:i.padding)===0||(i==null?void 0:i.padding)==="0px"?{padding:24}:void 0}),Je=_&&k===void 0&&(Z?Z({collapsed:Q}):s.jsx(Et,{rotate:Q?void 0:90,className:"".concat(oe,"-collapsible-icon ").concat(Fe).trim()}));return ae(s.jsxs("div",o(o({className:Cn,style:a,ref:e,onClick:function(ge){var xe;K==null||K(ge),V==null||(xe=V.onClick)===null||xe===void 0||xe.call(V,ge)}},Ae(V,["prefixCls","colSpan"])),{},{children:[(u||d||Je)&&s.jsxs("div",{className:pe("".concat(oe,"-header"),Fe,h(h({},"".concat(oe,"-header-border"),R||N==="inner"),"".concat(oe,"-header-collapsible"),Je)),style:l,onClick:function(){Je&&ve(!Q)},children:[s.jsxs("div",{className:"".concat(oe,"-title ").concat(Fe).trim(),children:[Je,s.jsx(fn,{label:u,tooltip:C,subTitle:c})]}),d&&s.jsx("div",{className:"".concat(oe,"-extra ").concat(Fe).trim(),onClick:function(ge){return ge.stopPropagation()},children:d})]}),B?s.jsx("div",{className:"".concat(oe,"-tabs ").concat(Fe).trim(),children:s.jsx(cn,o(o({onChange:B.onChange},Ae(B,["cardProps"])),{},{items:ee,children:S?rn:I}))}):s.jsx("div",{className:me,style:xn,children:S?rn:Ce}),L?s.jsx(_a,{actions:L,prefixCls:oe}):null]})))}),nl=function(e){var r=e.componentCls;return h({},r,{"&-divider":{flex:"none",width:e.lineWidth,marginInline:e.marginXS,marginBlock:e.marginLG,backgroundColor:e.colorSplit,"&-horizontal":{width:"initial",height:e.lineWidth,marginInline:e.marginLG,marginBlock:e.marginXS}},"&&-size-small &-divider":{marginBlock:e.marginLG,marginInline:e.marginXS,"&-horizontal":{marginBlock:e.marginXS,marginInline:e.marginLG}}})};function rl(n){return Le("ProCardDivider",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[nl(r)]})}var tl=function(e){var r=g.useContext(je.ConfigContext),t=r.getPrefixCls,a=t("pro-card"),i="".concat(a,"-divider"),l=rl(a),u=l.wrapSSR,c=l.hashId,d=e.className,v=e.style,f=v===void 0?{}:v,b=e.type,S=pe(i,d,c,h({},"".concat(i,"-").concat(b),b));return u(s.jsx("div",{className:S,style:f}))},al=function(e){return s.jsx(bn,o({bodyStyle:{padding:0}},e))},Sn=bn;Sn.isProCard=!0;Sn.Divider=tl;Sn.TabPane=Xa;Sn.Group=al;var ll=["children","value","valuePropName","onChange","fieldProps","space","type","transform","convertValue","lightProps"],ol=["children","space","valuePropName"],il={space:vn,group:Dr.Group};function ul(n){var e=arguments.length<=1?void 0:arguments[1];return e&&e.target&&n in e.target?e.target[n]:e}var sl=function(e){var r=e.children,t=e.value,a=t===void 0?[]:t,i=e.valuePropName,l=e.onChange,u=e.fieldProps,c=e.space,d=e.type,v=d===void 0?"space":d;e.transform,e.convertValue,e.lightProps;var f=be(e,ll),b=ye(function(x,$){var O,M=Be(a);M[$]=ul(i||"value",x),l==null||l(M),u==null||(O=u.onChange)===null||O===void 0||O.call(u,M)}),S=-1,m=ar(De(r,a,e)).map(function(x){if(se.isValidElement(x)){var $,O,M;S+=1;var I=S,D=(x==null||($=x.type)===null||$===void 0?void 0:$.displayName)==="ProFormComponent"||(x==null||(O=x.props)===null||O===void 0?void 0:O.readonly),L=D?o(o({key:I,ignoreFormItem:!0},x.props||{}),{},{fieldProps:o(o({},x==null||(M=x.props)===null||M===void 0?void 0:M.fieldProps),{},{onChange:function(){b(arguments.length<=0?void 0:arguments[0],I)}}),value:a==null?void 0:a[I],onChange:void 0}):o(o({key:I},x.props||{}),{},{value:a==null?void 0:a[I],onChange:function(F){var U,E;b(F,I),(U=(E=x.props).onChange)===null||U===void 0||U.call(E,F)}});return se.cloneElement(x,L)}return x}),w=il[v],C=Xt(f),p=C.RowWrapper,y=g.useMemo(function(){return o({},v==="group"?{compact:!0}:{})},[v]),R=g.useCallback(function(x){var $=x.children;return s.jsx(w,o(o(o({},y),c),{},{align:"start",wrap:!0,children:$}))},[w,c,y]);return s.jsx(p,{Wrapper:R,children:m})},cl=se.forwardRef(function(n,e){var r=n.children,t=n.space,a=n.valuePropName,i=be(n,ol);return g.useImperativeHandle(e,function(){return{}}),s.jsx(sl,o(o(o({space:t,valuePropName:a},i.fieldProps),{},{onChange:void 0},i),{},{children:r}))}),dl=qt(cl),fl=function(e){return h({},e.componentCls,{lineHeight:"30px","&::before":{display:"block",height:0,visibility:"hidden",content:"'.'"},"&-small":{lineHeight:e.lineHeight},"&-container":{display:"flex",flexWrap:"wrap",gap:e.marginXS},"&-item":h({whiteSpace:"nowrap"},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"&-line":{minWidth:"198px"},"&-line:not(:first-child)":{marginBlockStart:"16px",marginBlockEnd:8},"&-collapse-icon":{width:e.controlHeight,height:e.controlHeight,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},"&-effective":h({},"".concat(e.componentCls,"-collapse-icon"),{backgroundColor:e.colorBgTextHover})})};function vl(n){return Le("LightFilter",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[fl(r)]})}var ml=["size","collapse","collapseLabel","initialValues","onValuesChange","form","placement","formRef","bordered","ignoreRules","footerRender"],gl=function(e){var r=e.items,t=e.prefixCls,a=e.size,i=a===void 0?"middle":a,l=e.collapse,u=e.collapseLabel,c=e.onValuesChange,d=e.bordered,v=e.values,f=e.footerRender,b=e.placement,S=Ee(),m="".concat(t,"-light-filter"),w=vl(m),C=w.wrapSSR,p=w.hashId,y=g.useState(!1),R=de(y,2),x=R[0],$=R[1],O=g.useState(function(){return o({},v)}),M=de(O,2),I=M[0],D=M[1];g.useEffect(function(){D(o({},v))},[v]);var L=g.useMemo(function(){var E=[],P=[];return r.forEach(function(k){var A=k.props||{},_=A.secondary;_||l?E.push(k):P.push(k)}),{collapseItems:E,outsideItems:P}},[e.items]),T=L.collapseItems,F=L.outsideItems,U=function(){return u||(l?s.jsx(Mt,{className:"".concat(m,"-collapse-icon ").concat(p).trim()}):s.jsx(Qt,{size:i,label:S.getMessage("form.lightFilter.more","更多筛选")}))};return C(s.jsx("div",{className:pe(m,p,"".concat(m,"-").concat(i),h({},"".concat(m,"-effective"),Object.keys(v).some(function(E){return Array.isArray(v[E])?v[E].length>0:v[E]}))),children:s.jsxs("div",{className:"".concat(m,"-container ").concat(p).trim(),children:[F.map(function(E,P){if(!(E!=null&&E.props))return E;var k=E.key,A=(E==null?void 0:E.props)||{},_=A.fieldProps,Z=_!=null&&_.placement?_==null?void 0:_.placement:b;return s.jsx("div",{className:"".concat(m,"-item ").concat(p).trim(),children:se.cloneElement(E,{fieldProps:o(o({},E.props.fieldProps),{},{placement:Z}),proFieldProps:o(o({},E.props.proFieldProps),{},{light:!0,label:E.props.label,bordered:d}),bordered:d})},k||P)}),T.length?s.jsx("div",{className:"".concat(m,"-item ").concat(p).trim(),children:s.jsx(Jt,{padding:24,open:x,onOpenChange:function(P){$(P)},placement:b,label:U(),footerRender:f,footer:{onConfirm:function(){c(o({},I)),$(!1)},onClear:function(){var P={};T.forEach(function(k){var A=k.props.name;P[A]=void 0}),c(P)}},children:T.map(function(E){var P=E.key,k=E.props,A=k.name,_=k.fieldProps,Z=o(o({},_),{},{onChange:function(te){return D(o(o({},I),{},h({},A,te!=null&&te.target?te.target.value:te))),!1}});I.hasOwnProperty(A)&&(Z[E.props.valuePropName||"value"]=I[A]);var H=_!=null&&_.placement?_==null?void 0:_.placement:b;return s.jsx("div",{className:"".concat(m,"-line ").concat(p).trim(),children:se.cloneElement(E,{fieldProps:o(o({},Z),{},{placement:H})})},P)})})},"more"):null]})}))};function pl(n){var e=n.size,r=n.collapse,t=n.collapseLabel,a=n.initialValues,i=n.onValuesChange,l=n.form,u=n.placement,c=n.formRef,d=n.bordered;n.ignoreRules;var v=n.footerRender,f=be(n,ml),b=g.useContext(je.ConfigContext),S=b.getPrefixCls,m=S("pro-form"),w=g.useState(function(){return o({},a)}),C=de(w,2),p=C[0],y=C[1],R=g.useRef();return g.useImperativeHandle(c,function(){return R.current},[R.current]),s.jsx(lr,o(o({size:e,initialValues:a,form:l,contentRender:function($){return s.jsx(gl,{prefixCls:m,items:$==null?void 0:$.flatMap(function(O){var M;return!O||!(O!=null&&O.type)?O:(O==null||(M=O.type)===null||M===void 0?void 0:M.displayName)==="ProForm-Group"?O.props.children:O}),size:e,bordered:d,collapse:r,collapseLabel:t,placement:u,values:p||{},footerRender:v,onValuesChange:function(M){var I,D,L=o(o({},p),M);y(L),(I=R.current)===null||I===void 0||I.setFieldsValue(L),(D=R.current)===null||D===void 0||D.submit(),i&&i(M,L)}})},formRef:R,formItemProps:{colon:!1,labelAlign:"left"},fieldProps:{style:{width:void 0}}},Ae(f,["labelWidth"])),{},{onValuesChange:function($,O){var M;y(O),i==null||i($,O),(M=R.current)===null||M===void 0||M.submit()}}))}var hl=function(e,r,t,a){return e?s.jsxs(s.Fragment,{children:[t.getMessage("tableForm.collapsed","展开"),a&&"(".concat(a,")"),s.jsx(Hn,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]}):s.jsxs(s.Fragment,{children:[t.getMessage("tableForm.expand","收起"),s.jsx(Hn,{style:{marginInlineStart:"0.5em",transition:"0.3s all",transform:"rotate(".concat(e?0:.5,"turn)")}})]})},yl=function(e){var r=e.setCollapsed,t=e.collapsed,a=t===void 0?!1:t,i=e.submitter,l=e.style,u=e.hiddenNum,c=g.useContext(je.ConfigContext),d=c.getPrefixCls,v=Ee(),f=g.useContext(ln),b=f.hashId,S=tt(e.collapseRender)||hl;return s.jsxs(vn,{style:l,size:16,children:[i,e.collapseRender!==!1&&s.jsx("a",{className:"".concat(d("pro-query-filter-collapse-button")," ").concat(b).trim(),onClick:function(){return r(!a)},children:S==null?void 0:S(a,e,v,u)})]})},bl=function(e){return h({},e.componentCls,h(h(h(h({"&&":{padding:24}},"".concat(e.antCls,"-form-item"),{marginBlock:0}),"".concat(e.proComponentsCls,"-form-group-title"),{marginBlock:0}),"&-row",{rowGap:24,"&-split":h(h({},"".concat(e.proComponentsCls,"-form-group"),{display:"flex",alignItems:"center",gap:e.marginXS}),"&:last-child",{marginBlockEnd:12}),"&-split-line":{"&:after":{position:"absolute",width:"100%",content:'""',height:1,insetBlockEnd:-12,borderBlockEnd:"1px dashed ".concat(e.colorSplit)}}}),"&-collapse-button",{display:"flex",alignItems:"center",color:e.colorPrimary}))};function Sl(n){return Le("QueryFilter",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[bl(r)]})}var Cl=["collapsed","layout","defaultCollapsed","defaultColsNumber","defaultFormItemsNumber","span","searchGutter","searchText","resetText","optionRender","collapseRender","onReset","onCollapse","labelWidth","style","split","preserve","ignoreRules","showHiddenNum","submitterColSpanProps"],un,xl={xs:513,sm:513,md:785,lg:992,xl:1057,xxl:1/0},Sr={vertical:[[513,1,"vertical"],[785,2,"vertical"],[1057,3,"vertical"],[1/0,4,"vertical"]],default:[[513,1,"vertical"],[701,2,"vertical"],[1062,3,"horizontal"],[1352,3,"horizontal"],[1/0,4,"horizontal"]]},wl=function(e,r,t){if(t&&typeof t=="number")return{span:t,layout:e};var a=t?["xs","sm","md","lg","xl","xxl"].map(function(l){return[xl[l],24/t[l],"horizontal"]}):Sr[e||"default"],i=(a||Sr.default).find(function(l){return r<l[0]+16});return i?{span:24/i[1],layout:i==null?void 0:i[2]}:{span:8,layout:"horizontal"}},Rl=function(e,r){return e==null?void 0:e.flatMap(function(t){var a,i;if((t==null||(a=t.type)===null||a===void 0?void 0:a.displayName)==="ProForm-Group"&&!((i=t.props)!==null&&i!==void 0&&i.title))return t.props.children;if(r&&se.isValidElement(t)){var l;return se.cloneElement(t,o(o({},t.props),{},{formItemProps:o(o({},(l=t.props)===null||l===void 0?void 0:l.formItemProps),{},{rules:[]})}))}return t})},Pl=function(e){var r,t,a,i,l=Ee(),u=g.useContext(ln),c=u.hashId,d=e.resetText||l.getMessage("tableForm.reset","重置"),v=e.searchText||l.getMessage("tableForm.search","搜索"),f=Pe(function(){return e.defaultCollapsed&&!!e.submitter},{value:e.collapsed,onChange:e.onCollapse}),b=de(f,2),S=b[0],m=b[1],w=e.optionRender,C=e.collapseRender,p=e.split,y=e.items,R=e.spanSize,x=e.showLength,$=e.searchGutter,O=e.showHiddenNum,M=g.useMemo(function(){return!e.submitter||w===!1?null:se.cloneElement(e.submitter,o({searchConfig:{resetText:d,submitText:v},render:w&&function(H,re){return w(o(o({},e),{},{resetText:d,searchText:v}),e,re)}},e.submitter.props))},[e,d,v,w]),I=0,D=0,L=!1,T=0,F=0,U=Rl(y,e.ignoreRules).map(function(H,re){var te,z,j,K,B=se.isValidElement(H)&&(te=H==null||(z=H.props)===null||z===void 0?void 0:z.colSize)!==null&&te!==void 0?te:1,N=Math.min(R.span*(B||1),24);if(I+=N,T+=B,re===0){var V;L=N===24&&!(H!=null&&(V=H.props)!==null&&V!==void 0&&V.hidden)}var X=(H==null||(j=H.props)===null||j===void 0?void 0:j.hidden)||S&&(L||T>x)&&!!re;D+=1;var G=se.isValidElement(H)&&(H.key||"".concat((K=H.props)===null||K===void 0?void 0:K.name))||re;return se.isValidElement(H)&&X?e.preserve?{itemDom:se.cloneElement(H,{hidden:!0,key:G||re}),hidden:!0,colSpan:N}:{itemDom:null,colSpan:0,hidden:!0}:{itemDom:H,colSpan:N,hidden:!1}}),E=U.map(function(H,re){var te,z,j=H.itemDom,K=H.colSpan,B=j==null||(te=j.props)===null||te===void 0?void 0:te.hidden;if(B)return j;var N=se.isValidElement(j)&&(j.key||"".concat((z=j.props)===null||z===void 0?void 0:z.name))||re;return 24-F%24<K&&(I+=24-F%24,F+=24-F%24),F+=K,p&&F%24===0&&re<D-1?s.jsx(Te,{span:K,className:"".concat(e.baseClassName,"-row-split-line ").concat(e.baseClassName,"-row-split ").concat(c).trim(),children:j},N):s.jsx(Te,{className:"".concat(e.baseClassName,"-row-split ").concat(c).trim(),span:K,children:j},N)}),P=O&&U.filter(function(H){return H.hidden}).length,k=g.useMemo(function(){return!(I<24||T<=x)},[T,x,I]),A=g.useMemo(function(){var H,re,te=F%24+((H=(re=e.submitterColSpanProps)===null||re===void 0?void 0:re.span)!==null&&H!==void 0?H:R.span);if(te>24){var z,j;return 24-((z=(j=e.submitterColSpanProps)===null||j===void 0?void 0:j.span)!==null&&z!==void 0?z:R.span)}return 24-te},[F,F%24+((r=(t=e.submitterColSpanProps)===null||t===void 0?void 0:t.span)!==null&&r!==void 0?r:R.span),(a=e.submitterColSpanProps)===null||a===void 0?void 0:a.span]),_=g.useContext(je.ConfigContext),Z=_.getPrefixCls("pro-query-filter");return s.jsxs(qe,{gutter:$,justify:"start",className:pe("".concat(Z,"-row"),c),children:[E,M&&s.jsx(Te,o(o({span:R.span,offset:A,className:pe((i=e.submitterColSpanProps)===null||i===void 0?void 0:i.className)},e.submitterColSpanProps),{},{style:{textAlign:"end"},children:s.jsx(Ve.Item,{label:" ",colon:!1,shouldUpdate:!1,className:"".concat(Z,"-actions ").concat(c).trim(),children:s.jsx(yl,{hiddenNum:P,collapsed:S,collapseRender:k?C:!1,submitter:M,setCollapsed:m},"pro-form-query-filter-actions")})}),"submitter")]},"resize-observer-row")},Tl=et()?(un=document)===null||un===void 0||(un=un.body)===null||un===void 0?void 0:un.clientWidth:1024;function Il(n){var e=n.collapsed,r=n.layout,t=n.defaultCollapsed,a=t===void 0?!0:t,i=n.defaultColsNumber,l=n.defaultFormItemsNumber,u=n.span,c=n.searchGutter,d=c===void 0?24:c;n.searchText,n.resetText;var v=n.optionRender,f=n.collapseRender,b=n.onReset,S=n.onCollapse,m=n.labelWidth,w=m===void 0?"80":m,C=n.style,p=n.split,y=n.preserve,R=y===void 0?!0:y,x=n.ignoreRules,$=n.showHiddenNum,O=$===void 0?!1:$,M=n.submitterColSpanProps,I=be(n,Cl),D=g.useContext(je.ConfigContext),L=D.getPrefixCls("pro-query-filter"),T=Sl(L),F=T.wrapSSR,U=T.hashId,E=Pe(function(){return typeof(C==null?void 0:C.width)=="number"?C==null?void 0:C.width:Tl}),P=de(E,2),k=P[0],A=P[1],_=g.useMemo(function(){return wl(r,k+16,u)},[r,k,u]),Z=g.useMemo(function(){if(l!==void 0)return l;if(i!==void 0){var re=24/_.span-1;return i>re?re:i}return Math.max(1,24/_.span-1)},[i,l,_.span]),H=g.useMemo(function(){if(w&&_.layout!=="vertical"&&w!=="auto")return{labelCol:{flex:"0 0 ".concat(w,"px")},wrapperCol:{style:{maxWidth:"calc(100% - ".concat(w,"px)")}},style:{flexWrap:"nowrap"}}},[_.layout,w]);return F(s.jsx(_r,{onResize:function(te){k!==te.width&&te.width>17&&A(te.width)},children:s.jsx(lr,o(o({isKeyPressSubmit:!0,preserve:R},I),{},{className:pe(L,U,I.className),onReset:b,style:C,layout:_.layout,fieldProps:{style:{width:"100%"}},formItemProps:H,groupProps:{titleStyle:{display:"inline-block",marginInlineEnd:16}},contentRender:function(te,z,j){return s.jsx(Pl,{spanSize:_,collapsed:e,form:j,submitterColSpanProps:M,collapseRender:f,defaultCollapsed:a,onCollapse:S,optionRender:v,submitter:z,items:te,split:p,baseClassName:L,resetText:n.resetText,searchText:n.searchText,searchGutter:d,preserve:R,ignoreRules:x,showLength:Z,showHiddenNum:O})}}))},"resize-observer"))}var Fl=["onFinish","step","formRef","title","stepProps"];function jl(n){var e=g.useRef(),r=g.useContext(lt),t=g.useContext(ot),a=o(o({},n),t),i=a.onFinish,l=a.step,u=a.formRef;a.title,a.stepProps;var c=be(a,Fl);return tn(!c.submitter,"StepForm 不包含提交按钮，请在 StepsForm 上"),g.useImperativeHandle(u,function(){return e.current},[u==null?void 0:u.current]),g.useEffect(function(){if(a.name||a.step){var d=(a.name||a.step).toString();return r==null||r.regForm(d,a),function(){r==null||r.unRegForm(d)}}},[]),r&&r!==null&&r!==void 0&&r.formArrayRef&&(r.formArrayRef.current[l||0]=e),s.jsx(lr,o({formRef:e,onFinish:function(){var d=Se(le().mark(function v(f){var b;return le().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c.name&&(r==null||r.onFormFinish(c.name,f)),!i){m.next=9;break}return r==null||r.setLoading(!0),m.next=5,i==null?void 0:i(f);case 5:return b=m.sent,b&&(r==null||r.next()),r==null||r.setLoading(!1),m.abrupt("return");case 9:r!=null&&r.lastStep||r==null||r.next();case 10:case"end":return m.stop()}},v)}));return function(v){return d.apply(this,arguments)}}(),onInit:function(v,f){var b;e.current=f,r&&r!==null&&r!==void 0&&r.formArrayRef&&(r.formArrayRef.current[l||0]=e),c==null||(b=c.onInit)===null||b===void 0||b.call(c,v,f)},layout:"vertical"},Ae(c,["layoutType","columns"])))}var Nl=function(e){return h({},e.componentCls,{"&-container":{width:"max-content",minWidth:"420px",maxWidth:"100%",margin:"auto"},"&-steps-container":h({maxWidth:"1160px",margin:"auto"},"".concat(e.antCls,"-steps-vertical"),{height:"100%"}),"&-step":{display:"none",marginBlockStart:"32px","&-active":{display:"block"},"> form":{maxWidth:"100%"}}})};function El(n){return Le("StepsForm",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Nl(r)]})}var Ml=["current","onCurrentChange","submitter","stepsFormRender","stepsRender","stepFormRender","stepsProps","onFinish","formProps","containerStyle","formRef","formMapRef","layoutRender"],lt=se.createContext(void 0),Bl={horizontal:function(e){var r=e.stepsDom,t=e.formDom;return s.jsxs(s.Fragment,{children:[s.jsx(qe,{gutter:{xs:8,sm:16,md:24},children:s.jsx(Te,{span:24,children:r})}),s.jsx(qe,{gutter:{xs:8,sm:16,md:24},children:s.jsx(Te,{span:24,children:t})})]})},vertical:function(e){var r=e.stepsDom,t=e.formDom;return s.jsxs(qe,{align:"stretch",wrap:!0,gutter:{xs:8,sm:16,md:24},children:[s.jsx(Te,{xxl:4,xl:6,lg:7,md:8,sm:10,xs:12,children:se.cloneElement(r,{style:{height:"100%"}})}),s.jsx(Te,{children:s.jsx("div",{style:{display:"flex",alignItems:"center",width:"100%",height:"100%"},children:t})})]})}},ot=se.createContext(null);function Kl(n){var e=g.useContext(je.ConfigContext),r=e.getPrefixCls,t=r("pro-steps-form"),a=El(t),i=a.wrapSSR,l=a.hashId;n.current,n.onCurrentChange;var u=n.submitter,c=n.stepsFormRender,d=n.stepsRender,v=n.stepFormRender,f=n.stepsProps,b=n.onFinish,S=n.formProps,m=n.containerStyle,w=n.formRef,C=n.formMapRef,p=n.layoutRender,y=be(n,Ml),R=g.useRef(new Map),x=g.useRef(new Map),$=g.useRef([]),O=g.useState([]),M=de(O,2),I=M[0],D=M[1],L=g.useState(!1),T=de(L,2),F=T[0],U=T[1],E=Ee(),P=Pe(0,{value:n.current,onChange:n.onCurrentChange}),k=de(P,2),A=k[0],_=k[1],Z=g.useMemo(function(){return Bl[(f==null?void 0:f.direction)||"horizontal"]},[f==null?void 0:f.direction]),H=g.useMemo(function(){return A===I.length-1},[I.length,A]),re=g.useCallback(function(ne,ee){x.current.has(ne)||D(function(fe){return[].concat(Be(fe),[ne])}),x.current.set(ne,ee)},[]),te=g.useCallback(function(ne){D(function(ee){return ee.filter(function(fe){return fe!==ne})}),x.current.delete(ne),R.current.delete(ne)},[]);g.useImperativeHandle(C,function(){return $.current},[$.current]),g.useImperativeHandle(w,function(){var ne;return(ne=$.current[A||0])===null||ne===void 0?void 0:ne.current},[A,$.current]);var z=g.useCallback(function(){var ne=Se(le().mark(function ee(fe,ue){var Ie,oe;return le().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(R.current.set(fe,ue),!(!H||!b)){ae.next=3;break}return ae.abrupt("return");case 3:return U(!0),Ie=Hr.apply(void 0,[{}].concat(Be(Array.from(R.current.values())))),ae.prev=5,ae.next=8,b(Ie);case 8:oe=ae.sent,oe&&(_(0),$.current.forEach(function(Fe){var en;return(en=Fe.current)===null||en===void 0?void 0:en.resetFields()})),ae.next=15;break;case 12:ae.prev=12,ae.t0=ae.catch(5),console.log(ae.t0);case 15:return ae.prev=15,U(!1),ae.finish(15);case 18:case"end":return ae.stop()}},ee,null,[[5,12,15,18]])}));return function(ee,fe){return ne.apply(this,arguments)}}(),[H,b,U,_]),j=g.useMemo(function(){var ne=Kn(Mn,"4.24.0")>-1,ee=ne?{items:I.map(function(fe){var ue=x.current.get(fe);return o({key:fe,title:ue==null?void 0:ue.title},ue==null?void 0:ue.stepProps)})}:{};return s.jsx("div",{className:"".concat(t,"-steps-container ").concat(l).trim(),style:{maxWidth:Math.min(I.length*320,1160)},children:s.jsx(fr,o(o(o({},f),ee),{},{current:A,onChange:void 0,children:!ne&&I.map(function(fe){var ue=x.current.get(fe);return s.jsx(fr.Step,o({title:ue==null?void 0:ue.title},ue==null?void 0:ue.stepProps),fe)})}))})},[I,l,t,A,f]),K=ye(function(){var ne,ee=$.current[A];(ne=ee.current)===null||ne===void 0||ne.submit()}),B=ye(function(){A<1||_(A-1)}),N=g.useMemo(function(){return u!==!1&&s.jsx(kn,o(o({type:"primary",loading:F},u==null?void 0:u.submitButtonProps),{},{onClick:function(){var ee;u==null||(ee=u.onSubmit)===null||ee===void 0||ee.call(u),K()},children:E.getMessage("stepsForm.next","下一步")}),"next")},[E,F,K,u]),V=g.useMemo(function(){return u!==!1&&s.jsx(kn,o(o({},u==null?void 0:u.resetButtonProps),{},{onClick:function(){var ee;B(),u==null||(ee=u.onReset)===null||ee===void 0||ee.call(u)},children:E.getMessage("stepsForm.prev","上一步")}),"pre")},[E,B,u]),X=g.useMemo(function(){return u!==!1&&s.jsx(kn,o(o({type:"primary",loading:F},u==null?void 0:u.submitButtonProps),{},{onClick:function(){var ee;u==null||(ee=u.onSubmit)===null||ee===void 0||ee.call(u),K()},children:E.getMessage("stepsForm.submit","提交")}),"submit")},[E,F,K,u]),G=ye(function(){A>I.length-2||_(A+1)}),q=g.useMemo(function(){var ne=[],ee=A||0;if(ee<1?I.length===1?ne.push(X):ne.push(N):ee+1===I.length?ne.push(V,X):ne.push(V,N),ne=ne.filter(se.isValidElement),u&&u.render){var fe,ue={form:(fe=$.current[A])===null||fe===void 0?void 0:fe.current,onSubmit:K,step:A,onPre:B};return u.render(ue,ne)}return u&&(u==null?void 0:u.render)===!1?null:ne},[I.length,N,K,V,B,A,X,u]),W=g.useMemo(function(){return ar(n.children).map(function(ne,ee){var fe=ne.props,ue=fe.name||"".concat(ee),Ie=A===ee,oe=Ie?{contentRender:v,submitter:!1}:{};return s.jsx("div",{className:pe("".concat(t,"-step"),l,h({},"".concat(t,"-step-active"),Ie)),children:s.jsx(ot.Provider,{value:o(o(o(o({},oe),S),fe),{},{name:ue,step:ee}),children:ne})},ue)})},[S,l,t,n.children,A,v]),ie=g.useMemo(function(){return d?d(I.map(function(ne){var ee;return{key:ne,title:(ee=x.current.get(ne))===null||ee===void 0?void 0:ee.title}}),j):j},[I,j,d]),Q=g.useMemo(function(){return s.jsxs("div",{className:"".concat(t,"-container ").concat(l).trim(),style:m,children:[W,c?null:s.jsx(vn,{children:q})]})},[m,W,l,t,c,q]),ve=g.useMemo(function(){var ne={stepsDom:ie,formDom:Q};return c?c(p?p(ne):Z(ne),q):p?p(ne):Z(ne)},[ie,Q,Z,c,q,p]);return i(s.jsx("div",{className:pe(t,l),children:s.jsx(Ve.Provider,o(o({},y),{},{children:s.jsx(lt.Provider,{value:{loading:F,setLoading:U,regForm:re,keyArray:I,next:G,formArrayRef:$,formMapRef:x,lastStep:H,unRegForm:te,onFormFinish:z},children:ve})}))}))}function $n(n){return s.jsx(Ur,{needDeps:!0,children:s.jsx(Kl,o({},n))})}$n.StepForm=jl;$n.useForm=Ve.useForm;var Al=function(e){var r=e.children;return s.jsx(s.Fragment,{children:r})},Ll=["steps","columns","forceUpdate","grid"],$l=function(e){var r=e.steps,t=e.columns,a=e.forceUpdate,i=e.grid,l=be(e,Ll),u=Xr(l),c=g.useCallback(function(v){var f,b;(f=(b=u.current).onCurrentChange)===null||f===void 0||f.call(b,v),a([])},[a,u]),d=g.useMemo(function(){return r==null?void 0:r.map(function(v,f){return g.createElement(it,o(o({grid:i},v),{},{key:f,layoutType:"StepForm",columns:t[f]}))})},[t,i,r]);return s.jsx($n,o(o({},l),{},{onCurrentChange:c,children:d}))},kl=function(e,r){if(e.valueType==="dependency"){var t,a,i,l=(t=e.getFieldProps)===null||t===void 0?void 0:t.call(e);return tn(Array.isArray((a=e.name)!==null&&a!==void 0?a:l==null?void 0:l.name),'SchemaForm: fieldProps.name should be NamePath[] when valueType is "dependency"'),tn(typeof e.columns=="function",'SchemaForm: columns should be a function when valueType is "dependency"'),Array.isArray((i=e.name)!==null&&i!==void 0?i:l==null?void 0:l.name)?g.createElement(Gr,o(o({name:e.name},l),{},{key:e.key}),function(u){return!e.columns||typeof e.columns!="function"?null:r.genItems(e.columns(u))}):null}return!0},Dl=function(e){if(e.valueType==="divider"){var r;return g.createElement(Bt,o(o({},(r=e.getFieldProps)===null||r===void 0?void 0:r.call(e)),{},{key:e.key}))}return!0},_l=["key"],zl=function(e,r){var t=r.action,a=r.formRef,i=r.type,l=r.originItem,u=o(o({},Ae(e,["dataIndex","width","render","renderFormItem","renderText","title"])),{},{name:e.name||e.key||e.dataIndex,width:e.width,render:e!=null&&e.render?function(f,b,S){var m,w,C,p;return e==null||(m=e.render)===null||m===void 0?void 0:m.call(e,f,b,S,t==null?void 0:t.current,o(o({type:i},e),{},{key:(w=e.key)===null||w===void 0?void 0:w.toString(),formItemProps:(C=e.getFormItemProps)===null||C===void 0?void 0:C.call(e),fieldProps:(p=e.getFieldProps)===null||p===void 0?void 0:p.call(e)}))}:void 0}),c=function(){var b=u.key,S=be(u,_l);return s.jsx(Fn,o(o({},S),{},{ignoreFormItem:!0}),b)},d=e!=null&&e.renderFormItem?function(f,b){var S,m,w,C,p=Oe(o(o({},b),{},{onChange:void 0}));return e==null||(S=e.renderFormItem)===null||S===void 0?void 0:S.call(e,o(o({type:i},e),{},{key:(m=e.key)===null||m===void 0?void 0:m.toString(),formItemProps:(w=e.getFormItemProps)===null||w===void 0?void 0:w.call(e),fieldProps:(C=e.getFieldProps)===null||C===void 0?void 0:C.call(e),originProps:l}),o(o({},p),{},{defaultRender:c,type:i}),a.current)}:void 0,v=function(){if(e!=null&&e.renderFormItem){var b=d==null?void 0:d(null,{});if(!b||e.ignoreFormItem)return b}return g.createElement(Fn,o(o({},u),{},{key:[e.key,e.index||0].join("-"),renderFormItem:d}))};return e.dependencies?s.jsx(Gr,{name:e.dependencies||[],children:v},e.key):v()},Ol=function(e,r){var t=r.genItems;if(e.valueType==="formList"&&e.dataIndex){var a,i;return!e.columns||!Array.isArray(e.columns)?null:g.createElement(Yt,o(o({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,name:e.dataIndex,label:e.label,initialValue:e.initialValue,colProps:e.colProps,rowProps:e.rowProps},(i=e.getFieldProps)===null||i===void 0?void 0:i.call(e)),t(e.columns))}return!0},Vl=function(e,r){var t=r.genItems;if(e.valueType==="formSet"&&e.dataIndex){var a,i;return!e.columns||!Array.isArray(e.columns)?null:g.createElement(dl,o(o({},(a=e.getFormItemProps)===null||a===void 0?void 0:a.call(e)),{},{key:e.key,initialValue:e.initialValue,name:e.dataIndex,label:e.label,colProps:e.colProps,rowProps:e.rowProps},(i=e.getFieldProps)===null||i===void 0?void 0:i.call(e)),t(e.columns))}return!0},Wl=function(e,r){var t=r.genItems;if(e.valueType==="group"){var a;return!e.columns||!Array.isArray(e.columns)?null:s.jsx(Wt,o(o({label:e.label,colProps:e.colProps,rowProps:e.rowProps},(a=e.getFieldProps)===null||a===void 0?void 0:a.call(e)),{},{children:t(e.columns)}),e.key)}return!0},Hl=function(e){return e.valueType&&typeof e.valueType=="string"&&["index","indexBorder","option"].includes(e==null?void 0:e.valueType)?null:!0},Cr=[Hl,Wl,Ol,Vl,Dl,kl],Ul=function(e,r){for(var t=0;t<Cr.length;t++){var a=Cr[t],i=a(e,r);if(i!==!0)return i}return zl(e,r)},Gl=["columns","layoutType","type","action","shouldUpdate","formRef"],ql={DrawerForm:sa,QueryFilter:Il,LightFilter:pl,StepForm:$n.StepForm,StepsForm:$l,ModalForm:ca,Embed:Al,Form:Bn};function it(n){var e=n.columns,r=n.layoutType,t=r===void 0?"Form":r,a=n.type,i=a===void 0?"form":a,l=n.action,u=n.shouldUpdate,c=u===void 0?function(E,P){return sn(E)!==sn(P)}:u,d=n.formRef,v=be(n,Gl),f=ql[t]||Bn,b=Ve.useForm(),S=de(b,1),m=S[0],w=Ve.useFormInstance(),C=g.useState([]),p=de(C,2),y=p[1],R=g.useState(function(){return[]}),x=de(R,2),$=x[0],O=x[1],M=Fa(n.form||w||m),I=g.useRef(),D=Xr(n),L=ye(function(E){return E.filter(function(P){return!(P.hideInForm&&i==="form")}).sort(function(P,k){return k.order||P.order?(k.order||0)-(P.order||0):(k.index||0)-(P.index||0)}).map(function(P,k){var A=De(P.title,P,"form",s.jsx(fn,{label:P.title,tooltip:P.tooltip||P.tip})),_=Oe({title:A,label:A,name:P.name,valueType:De(P.valueType,{}),key:P.key||P.dataIndex||k,columns:P.columns,valueEnum:P.valueEnum,dataIndex:P.dataIndex||P.key,initialValue:P.initialValue,width:P.width,index:P.index,readonly:P.readonly,colSize:P.colSize,colProps:P.colProps,rowProps:P.rowProps,className:P.className,tooltip:P.tooltip||P.tip,dependencies:P.dependencies,proFieldProps:P.proFieldProps,ignoreFormItem:P.ignoreFormItem,getFieldProps:P.fieldProps?function(){return De(P.fieldProps,M.current,P)}:void 0,getFormItemProps:P.formItemProps?function(){return De(P.formItemProps,M.current,P)}:void 0,render:P.render,renderFormItem:P.renderFormItem,renderText:P.renderText,request:P.request,params:P.params,transform:P.transform,convertValue:P.convertValue,debounceTime:P.debounceTime,defaultKeyWords:P.defaultKeyWords});return Ul(_,{action:l,type:i,originItem:P,formRef:M,genItems:L})}).filter(function(P){return!!P})}),T=g.useCallback(function(E,P){var k=D.current.onValuesChange;(c===!0||typeof c=="function"&&c(P,I.current))&&O([]),I.current=P,k==null||k(E,P)},[D,c]),F=mr(function(){if(M.current&&!(e.length&&Array.isArray(e[0])))return L(e)},[e,v==null?void 0:v.open,l,i,$,!!M.current]),U=mr(function(){return t==="StepsForm"?{forceUpdate:y,columns:e}:{}},[e,t]);return g.useImperativeHandle(d,function(){return M.current},[M.current]),s.jsx(f,o(o(o({},U),v),{},{onInit:function(P,k){var A;d&&(d.current=k),v==null||(A=v.onInit)===null||A===void 0||A.call(v,P,k),M.current=k},form:n.form||m,formRef:M,onValuesChange:T,children:F}))}var Xl=ta(Object.keys,Object),Jl=Object.prototype,Ql=Jl.hasOwnProperty;function ut(n){if(!Jr(n))return Xl(n);var e=[];for(var r in Object(n))Ql.call(n,r)&&r!="constructor"&&e.push(r);return e}var Jn=An(Ln,"DataView"),Qn=An(Ln,"Promise"),Yn=An(Ln,"Set"),Zn=An(Ln,"WeakMap"),xr="[object Map]",Yl="[object Object]",wr="[object Promise]",Rr="[object Set]",Pr="[object WeakMap]",Tr="[object DataView]",Zl=mn(Jn),eo=mn(Gn),no=mn(Qn),ro=mn(Yn),to=mn(Zn),Ge=Qr;(Jn&&Ge(new Jn(new ArrayBuffer(1)))!=Tr||Gn&&Ge(new Gn)!=xr||Qn&&Ge(Qn.resolve())!=wr||Yn&&Ge(new Yn)!=Rr||Zn&&Ge(new Zn)!=Pr)&&(Ge=function(n){var e=Qr(n),r=e==Yl?n.constructor:void 0,t=r?mn(r):"";if(t)switch(t){case Zl:return Tr;case eo:return xr;case no:return wr;case ro:return Rr;case to:return Pr}return e});var ao="[object Map]",lo="[object Set]",oo=Object.prototype,io=oo.hasOwnProperty;function uo(n){if(n==null)return!0;if(Yr(n)&&(jn(n)||typeof n=="string"||typeof n.splice=="function"||qn(n)||Zr(n)||aa(n)))return!n.length;var e=Ge(n);if(e==ao||e==lo)return!n.size;if(Jr(n))return!ut(n).length;for(var r in n)if(io.call(n,r))return!1;return!0}var so="__lodash_hash_undefined__";function co(n){return this.__data__.set(n,so),this}function fo(n){return this.__data__.has(n)}function Nn(n){var e=-1,r=n==null?0:n.length;for(this.__data__=new la;++e<r;)this.add(n[e])}Nn.prototype.add=Nn.prototype.push=co;Nn.prototype.has=fo;function vo(n,e){for(var r=-1,t=n==null?0:n.length;++r<t;)if(e(n[r],r,n))return!0;return!1}function mo(n,e){return n.has(e)}var go=1,po=2;function st(n,e,r,t,a,i){var l=r&go,u=n.length,c=e.length;if(u!=c&&!(l&&c>u))return!1;var d=i.get(n),v=i.get(e);if(d&&v)return d==e&&v==n;var f=-1,b=!0,S=r&po?new Nn:void 0;for(i.set(n,e),i.set(e,n);++f<u;){var m=n[f],w=e[f];if(t)var C=l?t(w,m,f,e,n,i):t(m,w,f,n,e,i);if(C!==void 0){if(C)continue;b=!1;break}if(S){if(!vo(e,function(p,y){if(!mo(S,y)&&(m===p||a(m,p,r,t,i)))return S.push(y)})){b=!1;break}}else if(!(m===w||a(m,w,r,t,i))){b=!1;break}}return i.delete(n),i.delete(e),b}function ho(n){var e=-1,r=Array(n.size);return n.forEach(function(t,a){r[++e]=[a,t]}),r}function yo(n){var e=-1,r=Array(n.size);return n.forEach(function(t){r[++e]=t}),r}var bo=1,So=2,Co="[object Boolean]",xo="[object Date]",wo="[object Error]",Ro="[object Map]",Po="[object Number]",To="[object RegExp]",Io="[object Set]",Fo="[object String]",jo="[object Symbol]",No="[object ArrayBuffer]",Eo="[object DataView]",Ir=gr?gr.prototype:void 0,On=Ir?Ir.valueOf:void 0;function Mo(n,e,r,t,a,i,l){switch(r){case Eo:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case No:return!(n.byteLength!=e.byteLength||!i(new pr(n),new pr(e)));case Co:case xo:case Po:return oa(+n,+e);case wo:return n.name==e.name&&n.message==e.message;case To:case Fo:return n==e+"";case Ro:var u=ho;case Io:var c=t&bo;if(u||(u=yo),n.size!=e.size&&!c)return!1;var d=l.get(n);if(d)return d==e;t|=So,l.set(n,e);var v=st(u(n),u(e),t,a,i,l);return l.delete(n),v;case jo:if(On)return On.call(n)==On.call(e)}return!1}function Bo(n,e){for(var r=-1,t=e.length,a=n.length;++r<t;)n[a+r]=e[r];return n}function Ko(n,e,r){var t=e(n);return jn(n)?t:Bo(t,r(n))}function Ao(n,e){for(var r=-1,t=n==null?0:n.length,a=0,i=[];++r<t;){var l=n[r];e(l,r,n)&&(i[a++]=l)}return i}function Lo(){return[]}var $o=Object.prototype,ko=$o.propertyIsEnumerable,Fr=Object.getOwnPropertySymbols,Do=Fr?function(n){return n==null?[]:(n=Object(n),Ao(Fr(n),function(e){return ko.call(n,e)}))}:Lo;function _o(n){return Yr(n)?ia(n):ut(n)}function jr(n){return Ko(n,_o,Do)}var zo=1,Oo=Object.prototype,Vo=Oo.hasOwnProperty;function Wo(n,e,r,t,a,i){var l=r&zo,u=jr(n),c=u.length,d=jr(e),v=d.length;if(c!=v&&!l)return!1;for(var f=c;f--;){var b=u[f];if(!(l?b in e:Vo.call(e,b)))return!1}var S=i.get(n),m=i.get(e);if(S&&m)return S==e&&m==n;var w=!0;i.set(n,e),i.set(e,n);for(var C=l;++f<c;){b=u[f];var p=n[b],y=e[b];if(t)var R=l?t(y,p,b,e,n,i):t(p,y,b,n,e,i);if(!(R===void 0?p===y||a(p,y,r,t,i):R)){w=!1;break}C||(C=b=="constructor")}if(w&&!C){var x=n.constructor,$=e.constructor;x!=$&&"constructor"in n&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof $=="function"&&$ instanceof $)&&(w=!1)}return i.delete(n),i.delete(e),w}var Ho=1,Nr="[object Arguments]",Er="[object Array]",Rn="[object Object]",Uo=Object.prototype,Mr=Uo.hasOwnProperty;function Go(n,e,r,t,a,i){var l=jn(n),u=jn(e),c=l?Er:Ge(n),d=u?Er:Ge(e);c=c==Nr?Rn:c,d=d==Nr?Rn:d;var v=c==Rn,f=d==Rn,b=c==d;if(b&&qn(n)){if(!qn(e))return!1;l=!0,v=!1}if(b&&!v)return i||(i=new _n),l||Zr(n)?st(n,e,r,t,a,i):Mo(n,e,c,r,t,a,i);if(!(r&Ho)){var S=v&&Mr.call(n,"__wrapped__"),m=f&&Mr.call(e,"__wrapped__");if(S||m){var w=S?n.value():n,C=m?e.value():e;return i||(i=new _n),a(w,C,r,t,i)}}return b?(i||(i=new _n),Wo(n,e,r,t,a,i)):!1}function ct(n,e,r,t,a){return n===e?!0:n==null||e==null||!hr(n)&&!hr(e)?n!==n&&e!==e:Go(n,e,r,t,ct,a)}function qo(n,e){return ct(n,e)}function Xo(n,e,r){var t,a;if(n===!1)return!1;var i=e.total,l=e.current,u=e.pageSize,c=e.setPageInfo,d=Ke(n)==="object"?n:{};return o(o({showTotal:function(f,b){return"".concat(r.getMessage("pagination.total.range","第")," ").concat(b[0],"-").concat(b[1]," ").concat(r.getMessage("pagination.total.total","条/总共")," ").concat(f," ").concat(r.getMessage("pagination.total.item","条"))},total:i},d),{},{current:n!==!0&&n&&(t=n.current)!==null&&t!==void 0?t:l,pageSize:n!==!0&&n&&(a=n.pageSize)!==null&&a!==void 0?a:u,onChange:function(f,b){var S=n,m=S.onChange;m==null||m(f,b||20),(b!==u||l!==f)&&c({pageSize:b,current:f})}})}function Jo(n,e,r){var t=o(o({},r.editableUtils),{},{pageInfo:e.pageInfo,reload:function(){var a=Se(le().mark(function l(u){return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!u){d.next=3;break}return d.next=3,e.setPageInfo({current:1});case 3:return d.next=5,e==null?void 0:e.reload();case 5:case"end":return d.stop()}},l)}));function i(l){return a.apply(this,arguments)}return i}(),reloadAndRest:function(){var a=Se(le().mark(function l(){return le().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return r.onCleanSelected(),c.next=3,e.setPageInfo({current:1});case 3:return c.next=5,e==null?void 0:e.reload();case 5:case"end":return c.stop()}},l)}));function i(){return a.apply(this,arguments)}return i}(),reset:function(){var a=Se(le().mark(function l(){var u;return le().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,r.resetAll();case 2:return d.next=4,e==null||(u=e.reset)===null||u===void 0?void 0:u.call(e);case 4:return d.next=6,e==null?void 0:e.reload();case 6:case"end":return d.stop()}},l)}));function i(){return a.apply(this,arguments)}return i}(),fullScreen:function(){return r.fullScreen()},clearSelected:function(){return r.onCleanSelected()},setPageInfo:function(i){return e.setPageInfo(i)}});n.current=t}function Qo(n,e){return e.filter(function(r){return r}).length<1?n:e.reduce(function(r,t){return t(r)},n)}var dt=function(e,r){return r===void 0?!1:typeof r=="boolean"?r:r[e]},Yo=function(e){var r;return e&&Ke(e)==="object"&&(e==null||(r=e.props)===null||r===void 0?void 0:r.colSpan)},gn=function(e,r){return e?Array.isArray(e)?e.join("-"):e.toString():"".concat(r)};function Zo(n){return Array.isArray(n)?n.join(","):n==null?void 0:n.toString()}function ei(n){var e={},r={};return n.forEach(function(t){var a=Zo(t.dataIndex);if(a){if(t.filters){var i=t.defaultFilteredValue;i===void 0?e[a]=null:e[a]=t.defaultFilteredValue}t.sorter&&t.defaultSortOrder&&(r[a]=t.defaultSortOrder)}}),{sort:r,filter:e}}function ni(){var n,e,r,t,a,i,l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=g.useRef(),c=g.useRef(null),d=g.useRef(),v=g.useRef(),f=g.useState(""),b=de(f,2),S=b[0],m=b[1],w=g.useRef([]),C=Pe(function(){return l.size||l.defaultSize||"middle"},{value:l.size,onChange:l.onSizeChange}),p=de(C,2),y=p[0],R=p[1],x=g.useMemo(function(){var T,F;if(l!=null&&(T=l.columnsState)!==null&&T!==void 0&&T.defaultValue)return l.columnsState.defaultValue;var U={};return(F=l.columns)===null||F===void 0||F.forEach(function(E,P){var k=E.key,A=E.dataIndex,_=E.fixed,Z=E.disable,H=gn(k??A,P);H&&(U[H]={show:!0,fixed:_,disable:Z})}),U},[l.columns]),$=Pe(function(){var T,F,U=l.columnsState||{},E=U.persistenceType,P=U.persistenceKey;if(P&&E&&typeof window<"u"){var k=window[E];try{var A=k==null?void 0:k.getItem(P);if(A){var _;if(l!=null&&(_=l.columnsState)!==null&&_!==void 0&&_.defaultValue){var Z;return yr({},l==null||(Z=l.columnsState)===null||Z===void 0?void 0:Z.defaultValue,JSON.parse(A))}return JSON.parse(A)}}catch(H){console.warn(H)}}return l.columnsStateMap||((T=l.columnsState)===null||T===void 0?void 0:T.value)||((F=l.columnsState)===null||F===void 0?void 0:F.defaultValue)||x},{value:((n=l.columnsState)===null||n===void 0?void 0:n.value)||l.columnsStateMap,onChange:((e=l.columnsState)===null||e===void 0?void 0:e.onChange)||l.onColumnsStateChange}),O=de($,2),M=O[0],I=O[1];g.useEffect(function(){var T=l.columnsState||{},F=T.persistenceType,U=T.persistenceKey;if(U&&F&&typeof window<"u"){var E=window[F];try{var P=E==null?void 0:E.getItem(U);if(P){var k;if(l!=null&&(k=l.columnsState)!==null&&k!==void 0&&k.defaultValue){var A;I(yr({},l==null||(A=l.columnsState)===null||A===void 0?void 0:A.defaultValue,JSON.parse(P)))}else I(JSON.parse(P))}else I(x)}catch(_){console.warn(_)}}},[(r=l.columnsState)===null||r===void 0?void 0:r.persistenceKey,(t=l.columnsState)===null||t===void 0?void 0:t.persistenceType,x]),tn(!l.columnsStateMap,"columnsStateMap已经废弃，请使用 columnsState.value 替换"),tn(!l.columnsStateMap,"columnsStateMap has been discarded, please use columnsState.value replacement");var D=g.useCallback(function(){var T=l.columnsState||{},F=T.persistenceType,U=T.persistenceKey;if(!(!U||!F||typeof window>"u")){var E=window[F];try{E==null||E.removeItem(U)}catch(P){console.warn(P)}}},[l.columnsState]);g.useEffect(function(){var T,F;if(!(!((T=l.columnsState)!==null&&T!==void 0&&T.persistenceKey)||!((F=l.columnsState)!==null&&F!==void 0&&F.persistenceType))&&!(typeof window>"u")){var U=l.columnsState,E=U.persistenceType,P=U.persistenceKey,k=window[E];try{k==null||k.setItem(P,JSON.stringify(M))}catch(A){console.warn(A),D()}}},[(a=l.columnsState)===null||a===void 0?void 0:a.persistenceKey,M,(i=l.columnsState)===null||i===void 0?void 0:i.persistenceType]);var L={action:u.current,setAction:function(F){u.current=F},sortKeyColumns:w.current,setSortKeyColumns:function(F){w.current=F},propsRef:v,columnsMap:M,keyWords:S,setKeyWords:function(F){return m(F)},setTableSize:R,tableSize:y,prefixName:d.current,setPrefixName:function(F){d.current=F},setColumnsMap:I,columns:l.columns,rootDomRef:c,clearPersistenceStorage:D,defaultColumnKeyMap:x};return Object.defineProperty(L,"prefixName",{get:function(){return d.current}}),Object.defineProperty(L,"sortKeyColumns",{get:function(){return w.current}}),Object.defineProperty(L,"action",{get:function(){return u.current}}),L}var Ye=g.createContext({}),ri=function(e){var r=ni(e.initValue);return s.jsx(Ye.Provider,{value:r,children:e.children})},ti=function(e){return h({},e.componentCls,{marginBlockEnd:16,backgroundColor:Zt(e.colorTextBase,.02),borderRadius:e.borderRadius,border:"none","&-container":{paddingBlock:e.paddingSM,paddingInline:e.paddingLG},"&-info":{display:"flex",alignItems:"center",transition:"all 0.3s",color:e.colorTextTertiary,"&-content":{flex:1},"&-option":{minWidth:48,paddingInlineStart:16}}})};function ai(n){return Le("ProTableAlert",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[ti(r)]})}var li=function(e){var r=e.intl,t=e.onCleanSelected;return[s.jsx("a",{onClick:t,children:r.getMessage("alert.clear","清空")},"0")]};function oi(n){var e=n.selectedRowKeys,r=e===void 0?[]:e,t=n.onCleanSelected,a=n.alwaysShowAlert,i=n.selectedRows,l=n.alertInfoRender,u=l===void 0?function(R){var x=R.intl;return s.jsxs(vn,{children:[x.getMessage("alert.selected","已选择"),r.length,x.getMessage("alert.item","项"),"  "]})}:l,c=n.alertOptionRender,d=c===void 0?li:c,v=Ee(),f=d&&d({onCleanSelected:t,selectedRowKeys:r,selectedRows:i,intl:v}),b=g.useContext(je.ConfigContext),S=b.getPrefixCls,m=S("pro-table-alert"),w=ai(m),C=w.wrapSSR,p=w.hashId;if(u===!1)return null;var y=u({intl:v,selectedRowKeys:r,selectedRows:i,onCleanSelected:t});return y===!1||r.length<1&&!a?null:C(s.jsx("div",{className:"".concat(m," ").concat(p).trim(),children:s.jsx("div",{className:"".concat(m,"-container ").concat(p).trim(),children:s.jsxs("div",{className:"".concat(m,"-info ").concat(p).trim(),children:[s.jsx("div",{className:"".concat(m,"-info-content ").concat(p).trim(),children:y}),f?s.jsx("div",{className:"".concat(m,"-info-option ").concat(p).trim(),children:f}):null]})})}))}function ii(n){var e=n.replace(/[A-Z]/g,function(r){return"-".concat(r.toLowerCase())});return e.startsWith("-")&&(e=e.slice(1)),e}var ui=function(e,r){return!e&&r!==!1?(r==null?void 0:r.filterType)==="light"?"LightFilter":"QueryFilter":"Form"},si=function(e,r,t){return!e&&t==="LightFilter"?Ae(o({},r),["labelWidth","defaultCollapsed","filterType"]):e?{}:Ae(o({labelWidth:r?r==null?void 0:r.labelWidth:void 0,defaultCollapsed:!0},r),["filterType"])},ci=function(e,r){return e?Ae(r,["ignoreRules"]):o({ignoreRules:!0},r)},di=function(e){var r=e.onSubmit,t=e.formRef,a=e.dateFormatter,i=a===void 0?"string":a,l=e.type,u=e.columns,c=e.action,d=e.ghost,v=e.manualRequest,f=e.onReset,b=e.submitButtonLoading,S=e.search,m=e.form,w=e.bordered,C=g.useContext(ln),p=C.hashId,y=l==="form",R=function(){var T=Se(le().mark(function F(U,E){return le().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:r&&r(U,E);case 1:case"end":return k.stop()}},F)}));return function(U,E){return T.apply(this,arguments)}}(),x=g.useContext(je.ConfigContext),$=x.getPrefixCls,O=g.useMemo(function(){return u.filter(function(T){return!(T===dn.EXPAND_COLUMN||T===dn.SELECTION_COLUMN||(T.hideInSearch||T.search===!1)&&l!=="form"||l==="form"&&T.hideInForm)}).map(function(T){var F,U=!T.valueType||["textarea","jsonCode","code"].includes(T==null?void 0:T.valueType)&&l==="table"?"text":T==null?void 0:T.valueType,E=(T==null?void 0:T.key)||(T==null||(F=T.dataIndex)===null||F===void 0?void 0:F.toString());return o(o(o({},T),{},{width:void 0},T.search&&Ke(T.search)==="object"?T.search:{}),{},{valueType:U,proFieldProps:o(o({},T.proFieldProps),{},{proFieldKey:E?"table-field-".concat(E):void 0})})})},[u,l]),M=$("pro-table-search"),I=$("pro-table-form"),D=g.useMemo(function(){return ui(y,S)},[S,y]),L=g.useMemo(function(){return{submitter:{submitButtonProps:{loading:b}}}},[b]);return s.jsx("div",{className:pe(p,h(h(h(h(h(h(h(h(h({},$("pro-card"),!0),"".concat($("pro-card"),"-border"),!!w),"".concat($("pro-card"),"-bordered"),!!w),"".concat($("pro-card"),"-ghost"),!!d),M,!0),I,y),$("pro-table-search-".concat(ii(D))),!0),"".concat(M,"-ghost"),d),S==null?void 0:S.className,S!==!1&&(S==null?void 0:S.className))),children:s.jsx(it,o(o(o(o({layoutType:D,columns:O,type:l},L),si(y,S,D)),ci(y,m||{})),{},{formRef:t,action:c,dateFormatter:i,onInit:function(F,U){if(t.current=U,l!=="form"){var E,P,k,A=(E=c.current)===null||E===void 0?void 0:E.pageInfo,_=F,Z=_.current,H=Z===void 0?A==null?void 0:A.current:Z,re=_.pageSize,te=re===void 0?A==null?void 0:A.pageSize:re;if((P=c.current)===null||P===void 0||(k=P.setPageInfo)===null||k===void 0||k.call(P,o(o({},A),{},{current:parseInt(H,10),pageSize:parseInt(te,10)})),v)return;R(F,!0)}},onReset:function(F){f==null||f(F)},onFinish:function(F){R(F,!1)},initialValues:m==null?void 0:m.initialValues}))})},fi=function(n){er(r,n);var e=nr(r);function r(){var t;rr(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i)),h(ze(t),"onSubmit",function(u,c){var d=t.props,v=d.pagination,f=d.beforeSearchSubmit,b=f===void 0?function($){return $}:f,S=d.action,m=d.onSubmit,w=d.onFormSearchSubmit,C=v?Oe({current:v.current,pageSize:v.pageSize}):{},p=o(o({},u),{},{_timestamp:Date.now()},C),y=Ae(b(p),Object.keys(C));if(w(y),!c){var R,x;(R=S.current)===null||R===void 0||(x=R.setPageInfo)===null||x===void 0||x.call(R,{current:1})}m&&!c&&(m==null||m(u))}),h(ze(t),"onReset",function(u){var c,d,v=t.props,f=v.pagination,b=v.beforeSearchSubmit,S=b===void 0?function(R){return R}:b,m=v.action,w=v.onFormSearchSubmit,C=v.onReset,p=f?Oe({current:f.current,pageSize:f.pageSize}):{},y=Ae(S(o(o({},u),p)),Object.keys(p));w(y),(c=m.current)===null||c===void 0||(d=c.setPageInfo)===null||d===void 0||d.call(c,{current:1}),C==null||C()}),h(ze(t),"isEqual",function(u){var c=t.props,d=c.columns,v=c.loading,f=c.formRef,b=c.type,S=c.cardBordered,m=c.dateFormatter,w=c.form,C=c.search,p=c.manualRequest,y={columns:d,loading:v,formRef:f,type:b,cardBordered:S,dateFormatter:m,form:w,search:C,manualRequest:p};return!qr(y,{columns:u.columns,formRef:u.formRef,loading:u.loading,type:u.type,cardBordered:u.cardBordered,dateFormatter:u.dateFormatter,form:u.form,search:u.search,manualRequest:u.manualRequest})}),h(ze(t),"shouldComponentUpdate",function(u){return t.isEqual(u)}),h(ze(t),"render",function(){var u=t.props,c=u.columns,d=u.loading,v=u.formRef,f=u.type,b=u.action,S=u.cardBordered,m=u.dateFormatter,w=u.form,C=u.search,p=u.pagination,y=u.ghost,R=u.manualRequest,x=p?Oe({current:p.current,pageSize:p.pageSize}):{};return s.jsx(di,{submitButtonLoading:d,columns:c,type:f,ghost:y,formRef:v,onSubmit:t.onSubmit,manualRequest:R,onReset:t.onReset,dateFormatter:m,search:C,form:o(o({autoFocusFirstInput:!1},w),{},{extraUrlParams:o(o({},x),w==null?void 0:w.extraUrlParams)}),action:b,bordered:dt("search",S)})}),t}return tr(r)}(se.Component),vi=function(e){return h(h(h({},e.componentCls,{width:"auto","&-title":{display:"flex",alignItems:"center",justifyContent:"space-between",height:"32px"},"&-overlay":h(h(h(h({},"".concat(e.antCls,"-popover-inner-content"),{width:"200px",paddingBlock:0,paddingInline:0,paddingBlockEnd:8}),"".concat(e.antCls,"-tree-node-content-wrapper:hover"),{backgroundColor:"transparent"}),"".concat(e.antCls,"-tree-draggable-icon"),{cursor:"grab"}),"".concat(e.antCls,"-tree-treenode"),h(h({alignItems:"center","&:hover":h({},"".concat(e.componentCls,"-list-item-option"),{display:"block"})},"".concat(e.antCls,"-tree-checkbox"),{marginInlineEnd:"4px"}),"".concat(e.antCls,"-tree-title"),{width:"100%"}))}),"".concat(e.componentCls,"-action-rest-button"),{color:e.colorPrimary}),"".concat(e.componentCls,"-list"),h(h(h({display:"flex",flexDirection:"column",width:"100%",paddingBlockStart:8},"&".concat(e.componentCls,"-list-group"),{paddingBlockStart:0}),"&-title",{marginBlockStart:"6px",marginBlockEnd:"6px",paddingInlineStart:"24px",color:e.colorTextSecondary,fontSize:"12px"}),"&-item",{display:"flex",alignItems:"center",maxHeight:24,justifyContent:"space-between","&-title":{flex:1,maxWidth:80,textOverflow:"ellipsis",overflow:"hidden",wordBreak:"break-all",whiteSpace:"nowrap"},"&-option":{display:"none",float:"right",cursor:"pointer","> span":{"> span.anticon":{color:e.colorPrimary}},"> span + span":{marginInlineStart:4}}}))};function mi(n){return Le("ColumnSetting",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[vi(r)]})}var gi=["key","dataIndex","children"],pi=["disabled"],Vn=function(e){var r=e.title,t=e.show,a=e.children,i=e.columnKey,l=e.fixed,u=g.useContext(Ye),c=u.columnsMap,d=u.setColumnsMap;return t?s.jsx(an,{title:r,children:s.jsx("span",{onClick:function(f){f.stopPropagation(),f.preventDefault();var b=c[i]||{},S=o(o({},c),{},h({},i,o(o({},b),{},{fixed:l})));d(S)},children:a})}):null},hi=function(e){var r=e.columnKey,t=e.isLeaf,a=e.title,i=e.className,l=e.fixed,u=e.showListItemOption,c=Ee(),d=g.useContext(ln),v=d.hashId,f=s.jsxs("span",{className:"".concat(i,"-list-item-option ").concat(v).trim(),children:[s.jsx(Vn,{columnKey:r,fixed:"left",title:c.getMessage("tableToolBar.leftPin","固定在列首"),show:l!=="left",children:s.jsx($t,{})}),s.jsx(Vn,{columnKey:r,fixed:void 0,title:c.getMessage("tableToolBar.noPin","不固定"),show:!!l,children:s.jsx(kt,{})}),s.jsx(Vn,{columnKey:r,fixed:"right",title:c.getMessage("tableToolBar.rightPin","固定在列尾"),show:l!=="right",children:s.jsx(Dt,{})})]});return s.jsxs("span",{className:"".concat(i,"-list-item ").concat(v).trim(),children:[s.jsx("div",{className:"".concat(i,"-list-item-title ").concat(v).trim(),children:a}),u&&!t?f:null]},r)},Wn=function(e){var r,t,a,i=e.list,l=e.draggable,u=e.checkable,c=e.showListItemOption,d=e.className,v=e.showTitle,f=v===void 0?!0:v,b=e.title,S=e.listHeight,m=S===void 0?280:S,w=g.useContext(ln),C=w.hashId,p=g.useContext(Ye),y=p.columnsMap,R=p.setColumnsMap,x=p.sortKeyColumns,$=p.setSortKeyColumns,O=i&&i.length>0,M=g.useMemo(function(){if(!O)return{};var T=[],F=new Map,U=function E(P,k){return P.map(function(A){var _,Z=A.key;A.dataIndex;var H=A.children,re=be(A,gi),te=gn(Z,[k==null?void 0:k.columnKey,re.index].filter(Boolean).join("-")),z=y[te||"null"]||{show:!0};z.show!==!1&&!H&&T.push(te);var j=o(o({key:te},Ae(re,["className"])),{},{selectable:!1,disabled:z.disable===!0,disableCheckbox:typeof z.disable=="boolean"?z.disable:(_=z.disable)===null||_===void 0?void 0:_.checkbox,isLeaf:k?!0:void 0});if(H){var K;j.children=E(H,o(o({},z),{},{columnKey:te})),(K=j.children)!==null&&K!==void 0&&K.every(function(B){return T==null?void 0:T.includes(B.key)})&&T.push(te)}return F.set(Z,j),j})};return{list:U(i),keys:T,map:F}},[y,i,O]),I=ye(function(T,F,U){var E=o({},y),P=Be(x),k=P.findIndex(function(H){return H===T}),A=P.findIndex(function(H){return H===F}),_=U>=k;if(!(k<0)){var Z=P[k];P.splice(k,1),U===0?P.unshift(Z):P.splice(_?A:A+1,0,Z),P.forEach(function(H,re){E[H]=o(o({},E[H]||{}),{},{order:re})}),R(E),$(P)}}),D=ye(function(T){var F=o({},y),U=function E(P){var k,A=o({},F[P]);if(A.show=T.checked,(k=M.map)!==null&&k!==void 0&&(k=k.get(P))!==null&&k!==void 0&&k.children){var _;(_=M.map.get(P))===null||_===void 0||(_=_.children)===null||_===void 0||_.forEach(function(Z){return E(Z.key)})}F[P]=A};U(T.node.key),R(o({},F))});if(!O)return null;var L=s.jsx(Lt,{itemHeight:24,draggable:l&&!!((r=M.list)!==null&&r!==void 0&&r.length)&&((t=M.list)===null||t===void 0?void 0:t.length)>1,checkable:u,onDrop:function(F){var U=F.node.key,E=F.dragNode.key,P=F.dropPosition,k=F.dropToGap,A=P===-1||!k?P+1:P;I(E,U,A)},blockNode:!0,onCheck:function(F,U){return D(U)},checkedKeys:M.keys,showLine:!1,titleRender:function(F){var U=o(o({},F),{},{children:void 0});if(!U.title)return null;var E=De(U.title,U),P=s.jsx($r.Text,{style:{width:80},ellipsis:{tooltip:E},children:E});return s.jsx(hi,o(o({className:d},Ae(U,["key"])),{},{showListItemOption:c,title:P,columnKey:U.key}))},height:m,treeData:(a=M.list)===null||a===void 0?void 0:a.map(function(T){T.disabled;var F=be(T,pi);return F})});return s.jsxs(s.Fragment,{children:[f&&s.jsx("span",{className:"".concat(d,"-list-title ").concat(C).trim(),children:b}),L]})},yi=function(e){var r=e.localColumns,t=e.className,a=e.draggable,i=e.checkable,l=e.showListItemOption,u=e.listsHeight,c=g.useContext(ln),d=c.hashId,v=[],f=[],b=[],S=Ee();r.forEach(function(C){if(!C.hideInSetting){var p=C.fixed;if(p==="left"){f.push(C);return}if(p==="right"){v.push(C);return}b.push(C)}});var m=v&&v.length>0,w=f&&f.length>0;return s.jsxs("div",{className:pe("".concat(t,"-list"),d,h({},"".concat(t,"-list-group"),m||w)),children:[s.jsx(Wn,{title:S.getMessage("tableToolBar.leftFixedTitle","固定在左侧"),list:f,draggable:a,checkable:i,showListItemOption:l,className:t,listHeight:u}),s.jsx(Wn,{list:b,draggable:a,checkable:i,showListItemOption:l,title:S.getMessage("tableToolBar.noFixedTitle","不固定"),showTitle:w||m,className:t,listHeight:u}),s.jsx(Wn,{title:S.getMessage("tableToolBar.rightFixedTitle","固定在右侧"),list:v,draggable:a,checkable:i,showListItemOption:l,className:t,listHeight:u})]})};function bi(n){var e,r,t,a,i=g.useRef(null),l=g.useContext(Ye),u=n.columns,c=n.checkedReset,d=c===void 0?!0:c,v=l.columnsMap,f=l.setColumnsMap,b=l.clearPersistenceStorage;g.useEffect(function(){var D;if((D=l.propsRef.current)!==null&&D!==void 0&&(D=D.columnsState)!==null&&D!==void 0&&D.value){var L;i.current=JSON.parse(JSON.stringify(((L=l.propsRef.current)===null||L===void 0||(L=L.columnsState)===null||L===void 0?void 0:L.value)||{}))}},[]);var S=ye(function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,L={},T=function F(U){U.forEach(function(E){var P=E.key,k=E.fixed,A=E.index,_=E.children,Z=E.disable,H=gn(P,A);if(H){var re,te;L[H]={show:Z?(re=v[H])===null||re===void 0?void 0:re.show:D,fixed:k,disable:Z,order:(te=v[H])===null||te===void 0?void 0:te.order}}_&&F(_)})};T(u),f(L)}),m=ye(function(D){D.target.checked?S():S(!1)}),w=ye(function(){var D;b==null||b(),f(((D=l.propsRef.current)===null||D===void 0||(D=D.columnsState)===null||D===void 0?void 0:D.defaultValue)||i.current||l.defaultColumnKeyMap)}),C=Object.values(v).filter(function(D){return!D||D.show===!1}),p=C.length>0&&C.length!==u.length,y=Ee(),R=g.useContext(je.ConfigContext),x=R.getPrefixCls,$=x("pro-table-column-setting"),O=mi($),M=O.wrapSSR,I=O.hashId;return M(s.jsx(Lr,{arrow:!1,title:s.jsxs("div",{className:"".concat($,"-title ").concat(I).trim(),children:[n.checkable===!1?s.jsx("div",{}):s.jsx(At,{indeterminate:p,checked:C.length===0&&C.length!==u.length,onChange:function(L){m(L)},children:y.getMessage("tableToolBar.columnDisplay","列展示")}),d?s.jsx("a",{onClick:w,className:"".concat($,"-action-rest-button ").concat(I).trim(),children:y.getMessage("tableToolBar.reset","重置")}):null,n!=null&&n.extra?s.jsx(vn,{size:12,align:"center",children:n.extra}):null]}),overlayClassName:"".concat($,"-overlay ").concat(I).trim(),trigger:"click",placement:"bottomRight",content:s.jsx(yi,{checkable:(e=n.checkable)!==null&&e!==void 0?e:!0,draggable:(r=n.draggable)!==null&&r!==void 0?r:!0,showListItemOption:(t=n.showListItemOption)!==null&&t!==void 0?t:!0,className:$,localColumns:u,listsHeight:n.listsHeight}),children:n.children||s.jsx(an,{title:y.getMessage("tableToolBar.columnSetting","列设置"),children:(a=n.settingIcon)!==null&&a!==void 0?a:s.jsx(Kt,{})})}))}var Si=function(e){var r=g.useContext(ln),t=r.hashId,a=e.items,i=a===void 0?[]:a,l=e.type,u=l===void 0?"inline":l,c=e.prefixCls,d=e.activeKey,v=e.defaultActiveKey,f=Pe(d||v,{value:d,onChange:e.onChange}),b=de(f,2),S=b[0],m=b[1];if(i.length<1)return null;var w=i.find(function(p){return p.key===S})||i[0];if(u==="inline")return s.jsx("div",{className:pe("".concat(c,"-menu"),"".concat(c,"-inline-menu"),t),children:i.map(function(p,y){return s.jsx("div",{onClick:function(){m(p.key)},className:pe("".concat(c,"-inline-menu-item"),w.key===p.key?"".concat(c,"-inline-menu-item-active"):void 0,t),children:p.label},p.key||y)})});if(u==="tab")return s.jsx(cn,{items:i.map(function(p){var y;return o(o({},p),{},{key:(y=p.key)===null||y===void 0?void 0:y.toString()})}),activeKey:w.key,onTabClick:function(y){return m(y)},children:Kn(Mn,"4.23.0")<0?i==null?void 0:i.map(function(p,y){return g.createElement(cn.TabPane,o(o({},p),{},{key:p.key||y,tab:p.label}))}):null});var C=rt({selectedKeys:[w.key],onClick:function(y){m(y.key)},items:i.map(function(p,y){return{key:p.key||y,disabled:p.disabled,label:p.label}})});return s.jsx("div",{className:pe("".concat(c,"-menu"),"".concat(c,"-dropdownmenu")),children:s.jsx(zr,o(o({trigger:["click"]},C),{},{children:s.jsxs(vn,{className:"".concat(c,"-dropdownmenu-label"),children:[w.label,s.jsx(Hn,{})]})}))})},Ci=function(e){return h({},e.componentCls,h(h(h({lineHeight:"1","&-container":{display:"flex",justifyContent:"space-between",paddingBlock:e.padding,paddingInline:0,"&-mobile":{flexDirection:"column"}},"&-title":{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.colorTextHeading,fontWeight:"500",fontSize:e.fontSizeLG},"&-search:not(:last-child)":{display:"flex",alignItems:"center",justifyContent:"flex-start"},"&-setting-item":{marginBlock:0,marginInline:4,color:e.colorIconHover,fontSize:e.fontSizeLG,cursor:"pointer","> span":{display:"block",width:"100%",height:"100%"},"&:hover":{color:e.colorPrimary}},"&-left":h(h({display:"flex",flexWrap:"wrap",alignItems:"center",gap:e.marginXS,justifyContent:"flex-start",maxWidth:"calc(100% - 200px)"},"".concat(e.antCls,"-tabs"),{width:"100%"}),"&-has-tabs",{overflow:"hidden"}),"&-right":{flex:1,display:"flex",flexWrap:"wrap",justifyContent:"flex-end",gap:e.marginXS},"&-extra-line":{marginBlockEnd:e.margin},"&-setting-items":{display:"flex",gap:e.marginXS,lineHeight:"32px",alignItems:"center"},"&-filter":h({"&:not(:last-child)":{marginInlineEnd:e.margin},display:"flex",alignItems:"center"},"div$".concat(e.antCls,"-pro-table-search"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:0}),"&-inline-menu-item":{display:"inline-block",marginInlineEnd:e.marginLG,cursor:"pointer",opacity:"0.75","&-active":{fontWeight:"bold",opacity:"1"}}},"".concat(e.antCls,"-tabs-top > ").concat(e.antCls,"-tabs-nav"),h({marginBlockEnd:0,"&::before":{borderBlockEnd:0}},"".concat(e.antCls,"-tabs-nav-list"),{marginBlockStart:0,"${token.antCls}-tabs-tab":{paddingBlockStart:0}})),"&-dropdownmenu-label",{fontWeight:"bold",fontSize:e.fontSizeIcon,textAlign:"center",cursor:"pointer"}),"@media (max-width: 768px)",h({},e.componentCls,{"&-container":{display:"flex",flexWrap:"wrap",flexDirection:"column"},"&-left":{marginBlockEnd:"16px",maxWidth:"100%"}})))};function xi(n){return Le("ProTableListToolBar",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Ci(r)]})}function wi(n){if(se.isValidElement(n))return n;if(n){var e=n,r=e.icon,t=e.tooltip,a=e.onClick,i=e.key;return r&&t?s.jsx(an,{title:t,children:s.jsx("span",{onClick:function(){a&&a(i)},children:r},i)}):s.jsx("span",{onClick:function(){a&&a(i)},children:r},i)}return null}var Ri=function(e){var r,t=e.prefixCls,a=e.tabs,i=e.multipleLine,l=e.filtersNode;return i?s.jsx("div",{className:"".concat(t,"-extra-line"),children:a!=null&&a.items&&a!==null&&a!==void 0&&a.items.length?s.jsx(cn,{style:{width:"100%"},defaultActiveKey:a.defaultActiveKey,activeKey:a.activeKey,items:a.items.map(function(u,c){var d;return o(o({label:u.tab},u),{},{key:((d=u.key)===null||d===void 0?void 0:d.toString())||(c==null?void 0:c.toString())})}),onChange:a.onChange,tabBarExtraContent:l,children:(r=a.items)===null||r===void 0?void 0:r.map(function(u,c){return Kn(Mn,"4.23.0")<0?g.createElement(cn.TabPane,o(o({},u),{},{key:u.key||c,tab:u.tab})):null})}):l}):null},Pi=function(e){var r=e.prefixCls,t=e.title,a=e.subTitle,i=e.tooltip,l=e.className,u=e.style,c=e.search,d=e.onSearch,v=e.multipleLine,f=v===void 0?!1:v,b=e.filter,S=e.actions,m=S===void 0?[]:S,w=e.settings,C=w===void 0?[]:w,p=e.tabs,y=e.menu,R=g.useContext(je.ConfigContext),x=R.getPrefixCls,$=Pn.useToken(),O=$.token,M=x("pro-table-list-toolbar",r),I=xi(M),D=I.wrapSSR,L=I.hashId,T=Ee(),F=g.useState(!1),U=de(F,2),E=U[0],P=U[1],k=T.getMessage("tableForm.inputPlaceholder","请输入"),A=g.useMemo(function(){return c?se.isValidElement(c)?c:s.jsx(Dr.Search,o(o({style:{width:200},placeholder:k},c),{},{onSearch:Se(le().mark(function B(){var N,V,X,G,q,W,ie=arguments;return le().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:for(X=ie.length,G=new Array(X),q=0;q<X;q++)G[q]=ie[q];return ve.next=3,(N=(V=c).onSearch)===null||N===void 0?void 0:N.call.apply(N,[V].concat(G));case 3:W=ve.sent,W!==!1&&(d==null||d(G==null?void 0:G[0]));case 5:case"end":return ve.stop()}},B)}))})):null},[k,d,c]),_=g.useMemo(function(){return b?s.jsx("div",{className:"".concat(M,"-filter ").concat(L).trim(),children:b}):null},[b,L,M]),Z=g.useMemo(function(){return y||t||a||i},[y,a,t,i]),H=g.useMemo(function(){return Array.isArray(m)?m.length<1?null:s.jsx("div",{style:{display:"flex",alignItems:"center",gap:O.marginXS},children:m.map(function(B,N){return se.isValidElement(B)?se.cloneElement(B,o({key:N},B==null?void 0:B.props)):s.jsx(se.Fragment,{children:B},N)})}):m},[m]),re=g.useMemo(function(){return!!(Z&&A||!f&&_||H||C!=null&&C.length)},[H,_,Z,f,A,C==null?void 0:C.length]),te=g.useMemo(function(){return i||t||a||y||!Z&&A},[Z,y,A,a,t,i]),z=g.useMemo(function(){return!te&&re?s.jsx("div",{className:"".concat(M,"-left ").concat(L).trim()}):!y&&(Z||!A)?s.jsx("div",{className:"".concat(M,"-left ").concat(L).trim(),children:s.jsx("div",{className:"".concat(M,"-title ").concat(L).trim(),children:s.jsx(fn,{tooltip:i,label:t,subTitle:a})})}):s.jsxs("div",{className:pe("".concat(M,"-left"),L,h(h(h({},"".concat(M,"-left-has-tabs"),(y==null?void 0:y.type)==="tab"),"".concat(M,"-left-has-dropdown"),(y==null?void 0:y.type)==="dropdown"),"".concat(M,"-left-has-inline-menu"),(y==null?void 0:y.type)==="inline")),children:[Z&&!y&&s.jsx("div",{className:"".concat(M,"-title ").concat(L).trim(),children:s.jsx(fn,{tooltip:i,label:t,subTitle:a})}),y&&s.jsx(Si,o(o({},y),{},{prefixCls:M})),!Z&&A?s.jsx("div",{className:"".concat(M,"-search ").concat(L).trim(),children:A}):null]})},[te,re,Z,L,y,M,A,a,t,i]),j=g.useMemo(function(){return re?s.jsxs("div",{className:"".concat(M,"-right ").concat(L).trim(),style:E?{}:{alignItems:"center"},children:[f?null:_,Z&&A?s.jsx("div",{className:"".concat(M,"-search ").concat(L).trim(),children:A}):null,H,C!=null&&C.length?s.jsx("div",{className:"".concat(M,"-setting-items ").concat(L).trim(),children:C.map(function(B,N){var V=wi(B);return s.jsx("div",{className:"".concat(M,"-setting-item ").concat(L).trim(),children:V},N)})}):null]}):null},[re,M,L,E,Z,A,f,_,H,C]),K=g.useMemo(function(){if(!re&&!te)return null;var B=pe("".concat(M,"-container"),L,h({},"".concat(M,"-container-mobile"),E));return s.jsxs("div",{className:B,children:[z,j]})},[te,re,L,E,z,M,j]);return D(s.jsx(_r,{onResize:function(N){N.width<375!==E&&P(N.width<375)},children:s.jsxs("div",{style:u,className:pe(M,L,l),children:[K,s.jsx(Ri,{filtersNode:_,prefixCls:M,tabs:p,multipleLine:f})]})}))},Ti=function(e){var r=e.icon,t=r===void 0?s.jsx(_t,{}):r,a=g.useContext(Ye),i=Ee(),l=rt({selectedKeys:[a.tableSize],onClick:function(c){var d,v=c.key;(d=a.setTableSize)===null||d===void 0||d.call(a,v)},style:{width:80},items:[{key:"large",label:i.getMessage("tableToolBar.densityLarger","宽松")},{key:"middle",label:i.getMessage("tableToolBar.densityMiddle","中等")},{key:"small",label:i.getMessage("tableToolBar.densitySmall","紧凑")}]});return s.jsx(zr,o(o({},l),{},{trigger:["click"],children:s.jsx(an,{title:i.getMessage("tableToolBar.density","表格密度"),children:t})}))};const Ii=se.memo(Ti);var Fi=function(){var e=Ee(),r=g.useState(!1),t=de(r,2),a=t[0],i=t[1];return g.useEffect(function(){et()&&(document.onfullscreenchange=function(){i(!!document.fullscreenElement)})},[]),a?s.jsx(an,{title:e.getMessage("tableToolBar.exitFullScreen","全屏"),children:s.jsx(zt,{})}):s.jsx(an,{title:e.getMessage("tableToolBar.fullScreen","全屏"),children:s.jsx(Ot,{})})};const ft=se.memo(Fi);var ji=["headerTitle","tooltip","toolBarRender","action","options","selectedRowKeys","selectedRows","toolbar","onSearch","columns","optionsRender"];function Ni(n,e){var r,t=n.intl;return{reload:{text:t.getMessage("tableToolBar.reload","刷新"),icon:(r=e.reloadIcon)!==null&&r!==void 0?r:s.jsx(Vt,{})},density:{text:t.getMessage("tableToolBar.density","表格密度"),icon:s.jsx(Ii,{icon:e.densityIcon})},fullScreen:{text:t.getMessage("tableToolBar.fullScreen","全屏"),icon:s.jsx(ft,{})}}}function Ei(n,e,r,t){return Object.keys(n).filter(function(a){return a}).map(function(a){var i=n[a];if(!i)return null;var l=i===!0?e[a]:function(c){i==null||i(c,r.current)};if(typeof l!="function"&&(l=function(){}),a==="setting")return g.createElement(bi,o(o({},n[a]),{},{columns:t,key:a}));if(a==="fullScreen")return s.jsx("span",{onClick:l,children:s.jsx(ft,{})},a);var u=Ni(e,n)[a];return u?s.jsx("span",{onClick:l,children:s.jsx(an,{title:u.text,children:u.icon})},a):null}).filter(function(a){return a})}function Mi(n){var e=n.headerTitle,r=n.tooltip,t=n.toolBarRender,a=n.action,i=n.options,l=n.selectedRowKeys,u=n.selectedRows,c=n.toolbar,d=n.onSearch,v=n.columns,f=n.optionsRender,b=be(n,ji),S=g.useContext(Ye),m=Ee(),w=g.useMemo(function(){var y={reload:function(){var O;return a==null||(O=a.current)===null||O===void 0?void 0:O.reload()},density:!0,setting:!0,search:!1,fullScreen:function(){var O,M;return a==null||(O=a.current)===null||O===void 0||(M=O.fullScreen)===null||M===void 0?void 0:M.call(O)}};if(i===!1)return[];var R=o(o({},y),{},{fullScreen:!1},i),x=Ei(R,o(o({},y),{},{intl:m}),a,v);return f?f(o({headerTitle:e,tooltip:r,toolBarRender:t,action:a,options:i,selectedRowKeys:l,selectedRows:u,toolbar:c,onSearch:d,columns:v,optionsRender:f},b),x):x},[a,v,e,m,d,f,i,b,l,u,t,c,r]),C=t?t(a==null?void 0:a.current,{selectedRowKeys:l,selectedRows:u}):[],p=g.useMemo(function(){if(!i||!i.search)return!1;var y={value:S.keyWords,onChange:function(x){return S.setKeyWords(x.target.value)}};return i.search===!0?y:o(o({},y),i.search)},[S,i]);return g.useEffect(function(){S.keyWords===void 0&&(d==null||d(""))},[S.keyWords,d]),s.jsx(Pi,o({title:e,tooltip:r||b.tip,search:p,onSearch:d,actions:C,settings:w},c))}var Bi=function(n){er(r,n);var e=nr(r);function r(){var t;rr(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=e.call.apply(e,[this].concat(i)),h(ze(t),"onSearch",function(u){var c,d,v,f,b=t.props,S=b.options,m=b.onFormSearchSubmit,w=b.actionRef;if(!(!S||!S.search)){var C=S.search===!0?{}:S.search,p=C.name,y=p===void 0?"keyword":p,R=(c=S.search)===null||c===void 0||(d=c.onSearch)===null||d===void 0?void 0:d.call(c,u);R!==!1&&(w==null||(v=w.current)===null||v===void 0||(f=v.setPageInfo)===null||f===void 0||f.call(v,{current:1}),m(Oe(h({_timestamp:Date.now()},y,u))))}}),h(ze(t),"isEquals",function(u){var c=t.props,d=c.hideToolbar,v=c.tableColumn,f=c.options,b=c.tooltip,S=c.toolbar,m=c.selectedRows,w=c.selectedRowKeys,C=c.headerTitle,p=c.actionRef,y=c.toolBarRender;return qr({hideToolbar:d,tableColumn:v,options:f,tooltip:b,toolbar:S,selectedRows:m,selectedRowKeys:w,headerTitle:C,actionRef:p,toolBarRender:y},{hideToolbar:u.hideToolbar,tableColumn:u.tableColumn,options:u.options,tooltip:u.tooltip,toolbar:u.toolbar,selectedRows:u.selectedRows,selectedRowKeys:u.selectedRowKeys,headerTitle:u.headerTitle,actionRef:u.actionRef,toolBarRender:u.toolBarRender},["render","renderFormItem"])}),h(ze(t),"shouldComponentUpdate",function(u){return u.searchNode?!0:!t.isEquals(u)}),h(ze(t),"render",function(){var u=t.props,c=u.hideToolbar,d=u.tableColumn,v=u.options,f=u.searchNode,b=u.tooltip,S=u.toolbar,m=u.selectedRows,w=u.selectedRowKeys,C=u.headerTitle,p=u.actionRef,y=u.toolBarRender,R=u.optionsRender;return c?null:s.jsx(Mi,{tooltip:b,columns:d,options:v,headerTitle:C,action:p,onSearch:t.onSearch,selectedRows:m,selectedRowKeys:w,toolBarRender:y,toolbar:o({filter:f},S),optionsRender:R})}),t}return tr(r)}(se.Component),Ki=new kr("turn",{"0%":{transform:"rotate(0deg)"},"25%":{transform:"rotate(90deg)"},"50%":{transform:"rotate(180deg)"},"75%":{transform:"rotate(270deg)"},"100%":{transform:"rotate(360deg)"}}),Ai=function(e){return h(h(h({},e.componentCls,h(h(h(h(h(h(h(h(h({zIndex:1},"".concat(e.antCls,"-table-wrapper ").concat(e.antCls,"-table-pagination").concat(e.antCls,"-pagination"),{marginBlockEnd:0}),"&:not(:root):fullscreen",{minHeight:"100vh",overflow:"auto",background:e.colorBgContainer}),"&-extra",{marginBlockEnd:16}),"&-polling",h({},"".concat(e.componentCls,"-list-toolbar-setting-item"),{".anticon.anticon-reload":{transform:"rotate(0deg)",animationName:Ki,animationDuration:"1s",animationTimingFunction:"linear",animationIterationCount:"infinite"}})),"td".concat(e.antCls,"-table-cell"),{">a":{fontSize:e.fontSize}}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-tbody").concat(e.antCls,"-table-wrapper:only-child").concat(e.antCls,"-table"),{marginBlock:0,marginInline:0}),"".concat(e.antCls,"-table").concat(e.antCls,"-table-middle ").concat(e.componentCls),h({marginBlock:0,marginInline:-8},"".concat(e.proComponentsCls,"-card"),{backgroundColor:"initial"})),"& &-search",h(h(h(h({marginBlockEnd:"16px",background:e.colorBgContainer,"&-ghost":{background:"transparent"}},"&".concat(e.componentCls,"-form"),{marginBlock:0,marginInline:0,paddingBlock:0,paddingInline:16,overflow:"unset"}),"&-light-filter",{marginBlockEnd:0,paddingBlock:0,paddingInline:0}),"&-form-option",h(h(h({},"".concat(e.antCls,"-form-item"),{}),"".concat(e.antCls,"-form-item-label"),{}),"".concat(e.antCls,"-form-item-control-input"),{})),"@media (max-width: 575px)",h({},e.componentCls,h({height:"auto !important",paddingBlockEnd:"24px"},"".concat(e.antCls,"-form-item-label"),{minWidth:"80px",textAlign:"start"})))),"&-toolbar",{display:"flex",alignItems:"center",justifyContent:"space-between",height:"64px",paddingInline:24,paddingBlock:0,"&-option":{display:"flex",alignItems:"center",justifyContent:"flex-end"},"&-title":{flex:"1",color:e.colorTextLabel,fontWeight:"500",fontSize:"16px",lineHeight:"24px",opacity:"0.85"}})),"@media (max-width: ".concat(e.screenXS,")px"),h({},e.componentCls,h({},"".concat(e.antCls,"-table"),{width:"100%",overflowX:"auto","&-thead > tr,&-tbody > tr":{"> th,> td":{whiteSpace:"pre",">span":{display:"block"}}}}))),"@media (max-width: 575px)",h({},"".concat(e.componentCls,"-toolbar"),{flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",height:"auto",marginBlockEnd:"16px",marginInlineStart:"16px",paddingBlock:8,paddingInline:8,paddingBlockStart:"16px",lineHeight:"normal","&-title":{marginBlockEnd:16},"&-option":{display:"flex",justifyContent:"space-between",width:"100%"},"&-default-option":{display:"flex",flex:"1",alignItems:"center",justifyContent:"flex-end"}}))};function Li(n){return Le("ProTable",function(e){var r=o(o({},e),{},{componentCls:".".concat(n)});return[Ai(r)]})}var $i=["data","success","total"],ki=function(e){var r=e.pageInfo;if(r){var t=r.current,a=r.defaultCurrent,i=r.pageSize,l=r.defaultPageSize;return{current:t||a||1,total:0,pageSize:i||l||20}}return{current:1,total:0,pageSize:20}},Di=function(e,r,t){var a,i=g.useRef(!1),l=g.useRef(null),u=t||{},c=u.onLoad,d=u.manual,v=u.polling,f=u.onRequestError,b=u.debounceTime,S=b===void 0?20:b,m=u.effects,w=m===void 0?[]:m,C=g.useRef(d),p=g.useRef(),y=Pe(r,{value:t==null?void 0:t.dataSource,onChange:t==null?void 0:t.onDataSourceChange}),R=de(y,2),x=R[0],$=R[1],O=Pe(!1,{value:Ke(t==null?void 0:t.loading)==="object"?t==null||(a=t.loading)===null||a===void 0?void 0:a.spinning:t==null?void 0:t.loading,onChange:t==null?void 0:t.onLoadingChange}),M=de(O,2),I=M[0],D=M[1],L=Pe(function(){return ki(t)},{onChange:t==null?void 0:t.onPageInfoChange}),T=de(L,2),F=T[0],U=T[1],E=ye(function(N){(N.current!==F.current||N.pageSize!==F.pageSize||N.total!==F.total)&&U(N)}),P=Pe(!1),k=de(P,2),A=k[0],_=k[1],Z=function(V,X){vr.unstable_batchedUpdates(function(){$(V),(F==null?void 0:F.total)!==X&&E(o(o({},F),{},{total:X||V.length}))})},H=Tn(F==null?void 0:F.current),re=Tn(F==null?void 0:F.pageSize),te=Tn(v),z=ye(function(){vr.unstable_batchedUpdates(function(){D(!1),_(!1)})}),j=function(){var N=Se(le().mark(function V(X){var G,q,W,ie,Q,ve,ne,ee,fe,ue,Ie,oe;return le().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(!C.current){ae.next=3;break}return C.current=!1,ae.abrupt("return");case 3:return X?_(!0):D(!0),G=F||{},q=G.pageSize,W=G.current,ae.prev=5,ie=(t==null?void 0:t.pageInfo)!==!1?{current:W,pageSize:q}:void 0,ae.next=9,e==null?void 0:e(ie);case 9:if(ae.t0=ae.sent,ae.t0){ae.next=12;break}ae.t0={};case 12:if(Q=ae.t0,ve=Q.data,ne=ve===void 0?[]:ve,ee=Q.success,fe=Q.total,ue=fe===void 0?0:fe,Ie=be(Q,$i),ee!==!1){ae.next=21;break}return ae.abrupt("return",[]);case 21:return oe=Qo(ne,[t.postData].filter(function(Fe){return Fe})),Z(oe,ue),c==null||c(oe,Ie),ae.abrupt("return",oe);case 27:if(ae.prev=27,ae.t1=ae.catch(5),f!==void 0){ae.next=31;break}throw new Error(ae.t1);case 31:x===void 0&&$([]),f(ae.t1);case 33:return ae.prev=33,z(),ae.finish(33);case 36:return ae.abrupt("return",[]);case 37:case"end":return ae.stop()}},V,null,[[5,27,33,36]])}));return function(X){return N.apply(this,arguments)}}(),K=Vr(function(){var N=Se(le().mark(function V(X){var G,q,W;return le().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(p.current&&clearTimeout(p.current),e){Q.next=3;break}return Q.abrupt("return");case 3:return G=new AbortController,l.current=G,Q.prev=5,Q.next=8,Promise.race([j(X),new Promise(function(ve,ne){var ee,fe;(ee=l.current)===null||ee===void 0||(ee=ee.signal)===null||ee===void 0||(fe=ee.addEventListener)===null||fe===void 0||fe.call(ee,"abort",function(){ne("aborted"),K.cancel(),z()})})]);case 8:if(q=Q.sent,!G.signal.aborted){Q.next=11;break}return Q.abrupt("return");case 11:return W=De(v,q),W&&!i.current&&(p.current=setTimeout(function(){K.run(W)},Math.max(W,2e3))),Q.abrupt("return",q);case 16:if(Q.prev=16,Q.t0=Q.catch(5),Q.t0!=="aborted"){Q.next=20;break}return Q.abrupt("return");case 20:throw Q.t0;case 21:case"end":return Q.stop()}},V,null,[[5,16]])}));return function(V){return N.apply(this,arguments)}}(),S||30),B=function(){var V;(V=l.current)===null||V===void 0||V.abort(),K.cancel(),z()};return g.useEffect(function(){return v||clearTimeout(p.current),!te&&v&&K.run(!0),function(){clearTimeout(p.current)}},[v]),g.useEffect(function(){return i.current=!1,function(){i.current=!0}},[]),g.useEffect(function(){var N=F||{},V=N.current,X=N.pageSize;(!H||H===V)&&(!re||re===X)||t.pageInfo&&x&&(x==null?void 0:x.length)>X||V!==void 0&&x&&x.length<=X&&(B(),K.run(!1))},[F==null?void 0:F.current]),g.useEffect(function(){re&&(B(),K.run(!1))},[F==null?void 0:F.pageSize]),Un(function(){return B(),K.run(!1),d||(C.current=!1),function(){B()}},[].concat(Be(w),[d])),{dataSource:x,setDataSource:$,loading:Ke(t==null?void 0:t.loading)==="object"?o(o({},t==null?void 0:t.loading),{},{spinning:I}):I,reload:function(){var N=Se(le().mark(function X(){return le().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return B(),q.abrupt("return",K.run(!1));case 2:case"end":return q.stop()}},X)}));function V(){return N.apply(this,arguments)}return V}(),pageInfo:F,pollingLoading:A,reset:function(){var N=Se(le().mark(function X(){var G,q,W,ie,Q,ve,ne,ee;return le().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:G=t||{},q=G.pageInfo,W=q||{},ie=W.defaultCurrent,Q=ie===void 0?1:ie,ve=W.defaultPageSize,ne=ve===void 0?20:ve,ee={current:Q,total:0,pageSize:ne},E(ee);case 4:case"end":return ue.stop()}},X)}));function V(){return N.apply(this,arguments)}return V}(),setPageInfo:function(){var N=Se(le().mark(function X(G){return le().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:E(o(o({},F),G));case 1:case"end":return W.stop()}},X)}));function V(X){return N.apply(this,arguments)}return V}()}},_i=function(e){return function(r,t){var a,i,l=r.fixed,u=r.index,c=t.fixed,d=t.index;if(l==="left"&&c!=="left"||c==="right"&&l!=="right")return-2;if(c==="left"&&l!=="left"||l==="right"&&c!=="right")return 2;var v=r.key||"".concat(u),f=t.key||"".concat(d);if((a=e[v])!==null&&a!==void 0&&a.order||(i=e[f])!==null&&i!==void 0&&i.order){var b,S;return(((b=e[v])===null||b===void 0?void 0:b.order)||0)-(((S=e[f])===null||S===void 0?void 0:S.order)||0)}return(r.index||0)-(t.index||0)}},zi=["children"],Oi=["",null,void 0],Br=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter(function(a){return a!==void 0}).map(function(a){return typeof a=="number"?a.toString():a}).flat(1)},Vi=function(e){var r=g.useContext(ea),t=e.columnProps,a=e.prefixName,i=e.text,l=e.counter,u=e.rowData,c=e.index,d=e.recordKey,v=e.subName,f=e.proFieldProps,b=e.editableUtils,S=Bn.useFormInstance(),m=d||c,w=g.useMemo(function(){var I,D;return(I=b==null||(D=b.getRealIndex)===null||D===void 0?void 0:D.call(b,u))!==null&&I!==void 0?I:c},[b,c,u]),C=g.useState(function(){var I,D;return Br(a,a?v:[],a?w:m,(I=(D=t==null?void 0:t.key)!==null&&D!==void 0?D:t==null?void 0:t.dataIndex)!==null&&I!==void 0?I:c)}),p=de(C,2),y=p[0],R=p[1],x=g.useMemo(function(){return y.slice(0,-1)},[y]);g.useEffect(function(){var I,D,L=Br(a,a?v:[],a?w:m,(I=(D=t==null?void 0:t.key)!==null&&D!==void 0?D:t==null?void 0:t.dataIndex)!==null&&I!==void 0?I:c);L.join("-")!==y.join("-")&&R(L)},[t==null?void 0:t.dataIndex,t==null?void 0:t.key,c,d,a,m,v,y,w]);var $=g.useMemo(function(){return[S,o(o({},t),{},{rowKey:x,rowIndex:c,isEditable:!0})]},[t,S,c,x]),O=g.useCallback(function(I){var D=I.children,L=be(I,zi);return s.jsx(xa,o(o({popoverProps:{getPopupContainer:r.getPopupContainer||function(){return l.rootDomRef.current||document.body}},errorType:"popover",name:y},L),{},{children:D}),m)},[m,y]),M=g.useCallback(function(){var I,D,L=o({},Xn.apply(void 0,[t==null?void 0:t.formItemProps].concat(Be($))));L.messageVariables=o({label:(t==null?void 0:t.title)||"此项",type:(t==null?void 0:t.valueType)||"文本"},L==null?void 0:L.messageVariables),L.initialValue=(I=(D=a?null:i)!==null&&D!==void 0?D:L==null?void 0:L.initialValue)!==null&&I!==void 0?I:t==null?void 0:t.initialValue;var T=s.jsx(Fn,o({cacheForSwr:!0,name:y,proFormFieldKey:m,ignoreFormItem:!0,fieldProps:Xn.apply(void 0,[t==null?void 0:t.fieldProps].concat(Be($)))},f),y.join("-"));return t!=null&&t.renderFormItem&&(T=t.renderFormItem(o(o({},t),{},{index:c,isEditable:!0,type:"table"}),{defaultRender:function(){return s.jsx(s.Fragment,{children:T})},type:"form",recordKey:d,record:o(o({},u),S==null?void 0:S.getFieldValue([m])),isEditable:!0},S,e.editableUtils),t.ignoreFormItem)?s.jsx(s.Fragment,{children:T}):s.jsx(O,o(o({},L),{},{children:T}),y.join("-"))},[t,$,a,i,m,y,f,O,c,d,u,S,e.editableUtils]);return y.length===0?null:typeof(t==null?void 0:t.renderFormItem)=="function"||typeof(t==null?void 0:t.fieldProps)=="function"||typeof(t==null?void 0:t.formItemProps)=="function"?s.jsx(Ve.Item,{noStyle:!0,shouldUpdate:function(D,L){if(D===L)return!1;var T=[x].flat(1);try{return JSON.stringify(We(D,T))!==JSON.stringify(We(L,T))}catch{return!0}},children:function(){return M()}}):M()};function vt(n){var e,r,t=n.text,a=n.valueType,i=n.rowData,l=n.columnProps,u=n.index;if((!a||["textarea","text"].includes(a.toString()))&&!(l!=null&&l.valueEnum)&&n.mode==="read")return Oi.includes(t)?n.columnEmptyText:t;if(typeof a=="function"&&i)return vt(o(o({},n),{},{valueType:a(i,n.type)||"text"}));var c=(l==null?void 0:l.key)||(l==null||(e=l.dataIndex)===null||e===void 0?void 0:e.toString()),d=l!=null&&l.dependencies?[n.prefixName,n.prefixName?u==null?void 0:u.toString():(r=n.recordKey)===null||r===void 0?void 0:r.toString(),l==null?void 0:l.dependencies].filter(Boolean).flat(1):[],v={valueEnum:De(l==null?void 0:l.valueEnum,i),request:l==null?void 0:l.request,dependencies:l!=null&&l.dependencies?[d]:void 0,originDependencies:l!=null&&l.dependencies?[l==null?void 0:l.dependencies]:void 0,params:De(l==null?void 0:l.params,i,l),readonly:l==null?void 0:l.readonly,text:a==="index"||a==="indexBorder"?n.index:t,mode:n.mode,renderFormItem:void 0,valueType:a,record:i,proFieldProps:{emptyText:n.columnEmptyText,proFieldKey:c?"table-field-".concat(c):void 0}};return n.mode!=="edit"?s.jsx(Fn,o({mode:"read",ignoreFormItem:!0,fieldProps:Xn(l==null?void 0:l.fieldProps,null,l)},v)):s.jsx(Vi,o(o({},n),{},{proFieldProps:v}),n.recordKey)}var Wi=function(e){var r,t=e.title,a=typeof(e==null?void 0:e.ellipsis)=="boolean"?e==null?void 0:e.ellipsis:e==null||(r=e.ellipsis)===null||r===void 0?void 0:r.showTitle;return t&&typeof t=="function"?t(e,"table",s.jsx(fn,{label:null,tooltip:e.tooltip||e.tip})):s.jsx(fn,{label:t,tooltip:e.tooltip||e.tip,ellipsis:a})};function Hi(n,e,r,t){return typeof t=="boolean"?t===!1:(t==null?void 0:t(n,e,r))===!1}var Ui=function(e,r,t){var a=Array.isArray(t)?We(r,t):r[t],i=String(a);return String(i)===String(e)};function Gi(n){var e=n.columnProps,r=n.text,t=n.rowData,a=n.index,i=n.columnEmptyText,l=n.counter,u=n.type,c=n.subName,d=n.marginSM,v=n.editableUtils,f=l.action,b=l.prefixName,S=v.isEditable(o(o({},t),{},{index:a})),m=S.isEditable,w=S.recordKey,C=e.renderText,p=C===void 0?function(I){return I}:C,y=p(r,t,a,f),R=m&&!Hi(r,t,a,e==null?void 0:e.editable)?"edit":"read",x=vt({text:y,valueType:e.valueType||"text",index:a,rowData:t,subName:c,columnProps:o(o({},e),{},{entry:t,entity:t}),counter:l,columnEmptyText:i,type:u,recordKey:w,mode:R,prefixName:b,editableUtils:v}),$=R==="edit"?x:Pa(x,e,y);if(R==="edit")return e.valueType==="option"?s.jsx("div",{style:{display:"flex",alignItems:"center",gap:d,justifyContent:e.align==="center"?"center":"flex-start"},children:v.actionRender(o(o({},t),{},{index:e.index||a}))}):$;if(!e.render){var O=se.isValidElement($)||["string","number"].includes(Ke($));return!na($)&&O?$:null}var M=e.render($,t,a,o(o({},f),v),o(o({},e),{},{isEditable:m,type:"table"}));return Yo(M)?M:M&&e.valueType==="option"&&Array.isArray(M)?s.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",gap:8},children:M}):M}function mt(n,e){var r,t=n.columns,a=n.counter,i=n.columnEmptyText,l=n.type,u=n.editableUtils,c=n.marginSM,d=n.rowKey,v=d===void 0?"id":d,f=n.childrenColumnName,b=f===void 0?"children":f,S=new Map;return t==null||(r=t.map(function(m,w){if(m===dn.EXPAND_COLUMN||m===dn.SELECTION_COLUMN)return m;var C=m,p=C.key,y=C.dataIndex,R=C.valueEnum,x=C.valueType,$=x===void 0?"text":x,O=C.children,M=C.onFilter,I=C.filters,D=I===void 0?[]:I,L=gn(p||(y==null?void 0:y.toString()),[e==null?void 0:e.key,w].filter(Boolean).join("-")),T=!R&&!$&&!O;if(T)return o({index:w},m);var F=a.columnsMap[L]||{fixed:m.fixed},U=function(){return M===!0?function(A,_){return Ui(A,_,y)}:tt(M)},E=v,P=o(o({index:w,key:L},m),{},{title:Wi(m),valueEnum:R,filters:D===!0?ua(De(R,void 0)).filter(function(k){return k&&k.value!=="all"}):D,onFilter:U(),fixed:F.fixed,width:m.width||(m.fixed?200:void 0),children:m.children?mt(o(o({},n),{},{columns:(m==null?void 0:m.children)||[]}),o(o({},m),{},{key:L})):void 0,render:function(A,_,Z){typeof v=="function"&&(E=v(_,Z));var H;if(Ke(_)==="object"&&_!==null&&Reflect.has(_,E)){var re;H=_[E];var te=S.get(H)||[];(re=_[b])===null||re===void 0||re.forEach(function(j){var K=j[E];S.has(K)||S.set(K,te.concat([Z,b]))})}var z={columnProps:m,text:A,rowData:_,index:Z,columnEmptyText:i,counter:a,type:l,marginSM:c,subName:S.get(H),editableUtils:u};return Gi(z)}});return ja(P)}))===null||r===void 0?void 0:r.filter(function(m){return!m.hideInTable})}var qi=["rowKey","tableClassName","defaultClassName","action","tableColumn","type","pagination","rowSelection","size","defaultSize","tableStyle","toolbarDom","hideToolbar","searchNode","style","cardProps","alertDom","name","onSortChange","onFilterChange","options","isLightFilter","className","cardBordered","editableUtils","getRowKey"],Xi=["cardBordered","request","className","params","defaultData","headerTitle","postData","ghost","pagination","actionRef","columns","toolBarRender","optionsRender","onLoad","onRequestError","style","cardProps","tableStyle","tableClassName","columnsStateMap","onColumnsStateChange","options","search","name","onLoadingChange","rowSelection","beforeSearchSubmit","tableAlertRender","defaultClassName","formRef","type","columnEmptyText","toolbar","rowKey","manualRequest","polling","tooltip","revalidateOnFocus","searchFormRender"];function Ji(n){var e=n.rowKey,r=n.tableClassName,t=n.defaultClassName,a=n.action,i=n.tableColumn,l=n.type,u=n.pagination,c=n.rowSelection,d=n.size;n.defaultSize;var v=n.tableStyle,f=n.toolbarDom,b=n.hideToolbar,S=n.searchNode,m=n.style,w=n.cardProps,C=n.alertDom;n.name;var p=n.onSortChange,y=n.onFilterChange,R=n.options,x=n.isLightFilter,$=n.className,O=n.cardBordered,M=n.editableUtils,I=n.getRowKey,D=be(n,qi),L=g.useContext(Ye),T=g.useMemo(function(){var z=function j(K){return K.map(function(B){var N=gn(B.key,B.index),V=L.columnsMap[N];return V&&V.show===!1?!1:B.children?o(o({},B),{},{children:j(B.children)}):B}).filter(Boolean)};return z(i)},[L.columnsMap,i]),F=g.useMemo(function(){var z=[],j=function K(B){for(var N=0;N<B.length;N++){var V=B[N];V.children?K(V.children):z.push(V)}};return j(T),z==null?void 0:z.every(function(K){return!!K.filters&&!!K.onFilter||K.filters===void 0&&K.onFilter===void 0})},[T]),U=function(j){var K=M.newLineRecord||{},B=K.options,N=K.defaultValue,V=(B==null?void 0:B.position)==="top";if(B!=null&&B.parentKey){var X,G,q={data:j,getRowKey:I,row:o(o({},N),{},{map_row_parentKey:(X=Ne(B.parentKey))===null||X===void 0?void 0:X.toString()}),key:B==null?void 0:B.recordKey,childrenColumnName:((G=n.expandable)===null||G===void 0?void 0:G.childrenColumnName)||"children"};return yn(q,V?"top":"update")}if(V)return[N].concat(Be(a.dataSource));if(u&&u!==null&&u!==void 0&&u.current&&u!==null&&u!==void 0&&u.pageSize){var W=Be(a.dataSource);return(u==null?void 0:u.pageSize)>W.length?(W.push(N),W):(W.splice((u==null?void 0:u.current)*(u==null?void 0:u.pageSize)-1,0,N),W)}return[].concat(Be(a.dataSource),[N])},E=function(){return o(o({},D),{},{size:d,rowSelection:c===!1?void 0:c,className:r,style:v,columns:T,loading:a.loading,dataSource:M.newLineRecord?U(a.dataSource):a.dataSource,pagination:u,onChange:function(K,B,N,V){var X;if((X=D.onChange)===null||X===void 0||X.call(D,K,B,N,V),F||y(Oe(B)),Array.isArray(N)){var G=N.reduce(function(Q,ve){return o(o({},Q),{},h({},"".concat(ve.field),ve.order))},{});p(Oe(G))}else{var q,W=(q=N.column)===null||q===void 0?void 0:q.sorter,ie=(W==null?void 0:W.toString())===W;p(Oe(h({},"".concat(ie?W:N.field),N.order)))}}})},P=g.useMemo(function(){return n.search===!1&&!n.headerTitle&&n.toolBarRender===!1},[]),k=s.jsx(ra.Provider,{value:{grid:!1,colProps:void 0,rowProps:void 0},children:s.jsx(dn,o(o({},E()),{},{rowKey:e}))}),A=n.tableViewRender?n.tableViewRender(o(o({},E()),{},{rowSelection:c!==!1?c:void 0}),k):k,_=g.useMemo(function(){if(n.editable&&!n.name){var z,j,K;return s.jsxs(s.Fragment,{children:[f,C,g.createElement(Bn,o(o({},(z=n.editable)===null||z===void 0?void 0:z.formProps),{},{formRef:(j=n.editable)===null||j===void 0||(j=j.formProps)===null||j===void 0?void 0:j.formRef,component:!1,form:(K=n.editable)===null||K===void 0?void 0:K.form,onValuesChange:M.onValuesChange,key:"table",submitter:!1,omitNil:!1,dateFormatter:n.dateFormatter}),A)]})}return s.jsxs(s.Fragment,{children:[f,C,A]})},[C,n.loading,!!n.editable,A,f]),Z=g.useMemo(function(){return w===!1||P===!0||n.name?{}:b?{padding:0}:f?{paddingBlockStart:0}:f&&u===!1?{paddingBlockStart:0}:{padding:0}},[P,u,n.name,w,f,b]),H=w===!1||P===!0||n.name?_:s.jsx(Sn,o(o({ghost:n.ghost,bordered:dt("table",O),bodyStyle:Z},w),{},{children:_})),re=function(){return n.tableRender?n.tableRender(n,H,{toolbar:f||void 0,alert:C||void 0,table:A||void 0}):H},te=s.jsxs("div",{className:pe($,h({},"".concat(t,"-polling"),a.pollingLoading)),style:m,ref:L.rootDomRef,children:[x?null:S,l!=="form"&&n.tableExtraRender&&s.jsx("div",{className:pe($,"".concat(t,"-extra")),children:n.tableExtraRender(n,a.dataSource||[])}),l!=="form"&&re()]});return!R||!(R!=null&&R.fullScreen)?te:s.jsx(je,{getPopupContainer:function(){return L.rootDomRef.current||document.body},children:te})}var Qi={},Yi=function(e){var r;e.cardBordered;var t=e.request,a=e.className,i=e.params,l=i===void 0?Qi:i,u=e.defaultData,c=e.headerTitle,d=e.postData,v=e.ghost,f=e.pagination,b=e.actionRef,S=e.columns,m=S===void 0?[]:S,w=e.toolBarRender,C=e.optionsRender,p=e.onLoad,y=e.onRequestError;e.style,e.cardProps,e.tableStyle,e.tableClassName,e.columnsStateMap,e.onColumnsStateChange;var R=e.options,x=e.search,$=e.name,O=e.onLoadingChange,M=e.rowSelection,I=M===void 0?!1:M,D=e.beforeSearchSubmit,L=e.tableAlertRender,T=e.defaultClassName,F=e.formRef,U=e.type,E=U===void 0?"table":U,P=e.columnEmptyText,k=P===void 0?"-":P,A=e.toolbar,_=e.rowKey,Z=e.manualRequest,H=e.polling,re=e.tooltip,te=e.revalidateOnFocus,z=te===void 0?!1:te,j=e.searchFormRender,K=be(e,Xi),B=Li(e.defaultClassName),N=B.wrapSSR,V=B.hashId,X=pe(T,a,V),G=g.useRef(),q=g.useRef(),W=F||q;g.useImperativeHandle(b,function(){return G.current});var ie=Pe(I?(I==null?void 0:I.defaultSelectedRowKeys)||[]:void 0,{value:I?I.selectedRowKeys:void 0}),Q=de(ie,2),ve=Q[0],ne=Q[1],ee=Pe(function(){if(!(Z||x!==!1))return{}}),fe=de(ee,2),ue=fe[0],Ie=fe[1],oe=Pe({}),Ze=de(oe,2),ae=Ze[0],Fe=Ze[1],en=Pe({}),pn=de(en,2),Xe=pn[0],nn=pn[1];g.useEffect(function(){var J=ei(m),Y=J.sort,ce=J.filter;Fe(ce),nn(Y)},[]);var on=Ee(),hn=Ke(f)==="object"?f:{defaultCurrent:1,defaultPageSize:20,pageSize:20,current:1},Ce=g.useContext(Ye),Cn=g.useMemo(function(){if(t)return function(){var J=Se(le().mark(function Y(ce){var he,Me;return le().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return he=o(o(o({},ce||{}),ue),l),delete he._timestamp,ke.next=4,t(he,Xe,ae);case 4:return Me=ke.sent,ke.abrupt("return",Me);case 6:case"end":return ke.stop()}},Y)}));return function(Y){return J.apply(this,arguments)}}()},[ue,l,ae,Xe,t]),me=Di(Cn,u,{pageInfo:f===!1?!1:hn,loading:e.loading,dataSource:e.dataSource,onDataSourceChange:e.onDataSourceChange,onLoad:p,onLoadingChange:O,onRequestError:y,postData:d,revalidateOnFocus:z,manual:ue===void 0,polling:H,effects:[sn(l),sn(ue),sn(ae),sn(Xe)],debounceTime:e.debounceTime,onPageInfoChange:function(Y){var ce,he;!f||!Cn||(f==null||(ce=f.onChange)===null||ce===void 0||ce.call(f,Y.current,Y.pageSize),f==null||(he=f.onShowSizeChange)===null||he===void 0||he.call(f,Y.current,Y.pageSize))}});g.useEffect(function(){var J;if(!(e.manualRequest||!e.request||!z||(J=e.form)!==null&&J!==void 0&&J.ignoreRules)){var Y=function(){document.visibilityState==="visible"&&me.reload()};return document.addEventListener("visibilitychange",Y),function(){return document.removeEventListener("visibilitychange",Y)}}},[]);var xn=se.useRef(new Map),rn=se.useMemo(function(){return typeof _=="function"?_:function(J,Y){var ce;return Y===-1?J==null?void 0:J[_]:e.name?Y==null?void 0:Y.toString():(ce=J==null?void 0:J[_])!==null&&ce!==void 0?ce:Y==null?void 0:Y.toString()}},[e.name,_]);g.useMemo(function(){var J;if((J=me.dataSource)!==null&&J!==void 0&&J.length){var Y=me.dataSource.map(function(ce){var he=rn(ce,-1);return xn.current.set(he,ce),he});return Y}return[]},[me.dataSource,rn]);var Je=g.useMemo(function(){var J=f===!1?!1:o({},f),Y=o(o({},me.pageInfo),{},{setPageInfo:function(he){var Me=he.pageSize,Ue=he.current,ke=me.pageInfo;if(Me===ke.pageSize||ke.current===1){me.setPageInfo({pageSize:Me,current:Ue});return}t&&me.setDataSource([]),me.setPageInfo({pageSize:Me,current:E==="list"?Ue:1})}});return t&&J&&(delete J.onChange,delete J.onShowSizeChange),Xo(J,Y,on)},[f,me,on]);Un(function(){var J;e.request&&!uo(l)&&me.dataSource&&!qo(me.dataSource,u)&&(me==null||(J=me.pageInfo)===null||J===void 0?void 0:J.current)!==1&&me.setPageInfo({current:1})},[l]),Ce.setPrefixName(e.name);var we=g.useCallback(function(){I&&I.onChange&&I.onChange([],[],{type:"none"}),ne([])},[I,ne]);Ce.propsRef.current=e;var ge=$a(o(o({},e.editable),{},{tableName:e.name,getRowKey:rn,childrenColumnName:((r=e.expandable)===null||r===void 0?void 0:r.childrenColumnName)||"children",dataSource:me.dataSource||[],setDataSource:function(Y){var ce,he;(ce=e.editable)===null||ce===void 0||(he=ce.onValuesChange)===null||he===void 0||he.call(ce,void 0,Y),me.setDataSource(Y)}})),xe=Pn===null||Pn===void 0?void 0:Pn.useToken(),He=xe.token;Jo(G,me,{fullScreen:function(){var Y;if(!(!((Y=Ce.rootDomRef)!==null&&Y!==void 0&&Y.current)||!document.fullscreenEnabled))if(document.fullscreenElement)document.exitFullscreen();else{var ce;(ce=Ce.rootDomRef)===null||ce===void 0||ce.current.requestFullscreen()}},onCleanSelected:function(){we()},resetAll:function(){var Y;we(),Fe({}),nn({}),Ce.setKeyWords(void 0),me.setPageInfo({current:1}),W==null||(Y=W.current)===null||Y===void 0||Y.resetFields(),Ie({})},editableUtils:ge}),Ce.setAction(G.current);var Re=g.useMemo(function(){var J;return mt({columns:m,counter:Ce,columnEmptyText:k,type:E,marginSM:He.marginSM,editableUtils:ge,rowKey:_,childrenColumnName:(J=e.expandable)===null||J===void 0?void 0:J.childrenColumnName}).sort(_i(Ce.columnsMap))},[m,Ce==null?void 0:Ce.sortKeyColumns,Ce==null?void 0:Ce.columnsMap,k,E,ge.editableKeys&&ge.editableKeys.join(",")]);Or(function(){if(Re&&Re.length>0){var J=Re.map(function(Y){return gn(Y.key,Y.index)});Ce.setSortKeyColumns(J)}},[Re],["render","renderFormItem"],100),Un(function(){var J=me.pageInfo,Y=f||{},ce=Y.current,he=ce===void 0?J==null?void 0:J.current:ce,Me=Y.pageSize,Ue=Me===void 0?J==null?void 0:J.pageSize:Me;f&&(he||Ue)&&(Ue!==(J==null?void 0:J.pageSize)||he!==(J==null?void 0:J.current))&&me.setPageInfo({pageSize:Ue||J.pageSize,current:he||J.current})},[f&&f.pageSize,f&&f.current]);var $e=o(o({selectedRowKeys:ve},I),{},{onChange:function(Y,ce,he){I&&I.onChange&&I.onChange(Y,ce,he),ne(Y)}}),_e=x!==!1&&(x==null?void 0:x.filterType)==="light",Qe=g.useCallback(function(J){if(R&&R.search){var Y,ce,he=R.search===!0?{}:R.search,Me=he.name,Ue=Me===void 0?"keyword":Me,ke=(Y=R.search)===null||Y===void 0||(ce=Y.onSearch)===null||ce===void 0?void 0:ce.call(Y,Ce.keyWords);if(ke!==!1){Ie(o(o({},J),{},h({},Ue,Ce.keyWords)));return}}Ie(J)},[Ce.keyWords,R,Ie]),wn=g.useMemo(function(){if(Ke(me.loading)==="object"){var J;return((J=me.loading)===null||J===void 0?void 0:J.spinning)||!1}return me.loading},[me.loading]),or=g.useMemo(function(){var J=x===!1&&E!=="form"?null:s.jsx(fi,{pagination:Je,beforeSearchSubmit:D,action:G,columns:m,onFormSearchSubmit:function(ce){Qe(ce)},ghost:v,onReset:e.onReset,onSubmit:e.onSubmit,loading:!!wn,manualRequest:Z,search:x,form:e.form,formRef:W,type:e.type||"table",cardBordered:e.cardBordered,dateFormatter:e.dateFormatter});return j&&J?s.jsx(s.Fragment,{children:j(e,J)}):J},[D,W,v,wn,Z,Qe,Je,e,m,x,j,E]),ir=g.useMemo(function(){return ve==null?void 0:ve.map(function(J){var Y;return(Y=xn.current)===null||Y===void 0?void 0:Y.get(J)})},[me.dataSource,ve]),ur=g.useMemo(function(){return R===!1&&!c&&!w&&!A&&!_e},[R,c,w,A,_e]),pt=w===!1?null:s.jsx(Bi,{headerTitle:c,hideToolbar:ur,selectedRows:ir,selectedRowKeys:ve,tableColumn:Re,tooltip:re,toolbar:A,onFormSearchSubmit:function(Y){Ie(o(o({},ue),Y))},searchNode:_e?or:null,options:R,optionsRender:C,actionRef:G,toolBarRender:w}),ht=I!==!1?s.jsx(oi,{selectedRowKeys:ve,selectedRows:ir,onCleanSelected:we,alertOptionRender:K.tableAlertOptionRender,alertInfoRender:L,alwaysShowAlert:I==null?void 0:I.alwaysShowAlert}):null;return N(s.jsx(Ji,o(o({},e),{},{name:$,defaultClassName:T,size:Ce.tableSize,onSizeChange:Ce.setTableSize,pagination:Je,searchNode:or,rowSelection:I!==!1?$e:void 0,className:X,tableColumn:Re,isLightFilter:_e,action:me,alertDom:ht,toolbarDom:pt,hideToolbar:ur,onSortChange:function(Y){Xe!==Y&&nn(Y??{})},onFilterChange:function(Y){Y!==ae&&Fe(Y)},editableUtils:ge,getRowKey:rn})))},gt=function(e){var r=g.useContext(je.ConfigContext),t=r.getPrefixCls,a=e.ErrorBoundary===!1?se.Fragment:e.ErrorBoundary||ga;return s.jsx(ri,{initValue:e,children:s.jsx(Ur,{needDeps:!0,children:s.jsx(a,{children:s.jsx(Yi,o({defaultClassName:"".concat(t("pro-table"))},e))})})})};gt.Summary=dn.Summary;const Kr="basic-table";function iu(n){const e=xt(),{t:r}=wt(),{autoHeight:t=!0,offsetBottom:a}=n,i=g.useRef(null),l=ma(i),[u,c]=g.useState(t?0:void 0);g.useEffect(()=>{const f=n.pagination===!1;if(t&&i.current&&(l!=null&&l.height)){const b=l.height,S=i.current.getElementsByClassName(Kr)[0];if(!S)return;const m=i.current.getBoundingClientRect();if(m.top>window.innerHeight){c(void 0);return}const w=S.querySelector("div.ant-table-body");if(!w)return;const C=w.getBoundingClientRect(),p=C.top-m.top,R=a||(f?16:56),x=Math.max(400,b-p-R);if(x-C.height<=10)return;w.setAttribute("style",`overflow-y: auto;min-height: ${x}px;max-height: ${x}px;`)}},[l,t,a,n.pagination]);const d=()=>n.loading===!1?!1:n.loading===!0?!0:{indicator:s.jsx(En,{spin:!0}),...n.loading},v=()=>n.pagination===!1?!1:{position:["bottomRight"],defaultPageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:f=>r("common.pagination",{total:f}),...n.pagination};return s.jsx("div",{className:"h-full",ref:i,children:s.jsx(gt,{cardBordered:!0,rowKey:"id",dateFormatter:"string",...n,options:{fullScreen:!0,...n.options},rootClassName:cr(Kr,n.rootClassName),className:cr(e.basicTable,n.className),scroll:{y:u,...n.scroll},loading:d(),pagination:v(),expandable:{...n.expandable}})})}export{iu as B};
