import{Y,Z,$ as te,a0 as V,a1 as B,a2 as O,a3 as re,u as ne,j as d,B as se}from"./index-B4D4TeV5.js";import{U as ae,P as oe}from"./rules-ChV9k-MN.js";import{g as ie,a as E,L as U}from"./react-UQ1dNgW8.js";import{F as le}from"./form-mode-context-D78nou8v.js";import{aH as C,S as ce,T as ue,I as H,bb as pe,B as me}from"./antd-BreSrAtA.js";import"./faker-Dcf0Eyuj.js";var q,z;function fe(){return z||(z=1,q={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),q}var de=fe();const he=ie(de);var ye=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function J(e){var r={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},t=e.match(/<\/?([^\s]+?)[/\s>]/);if(t&&(r.name=t[1],(he[t[1]]||e.charAt(e.length-2)==="/")&&(r.voidElement=!0),r.name.startsWith("!--"))){var n=e.indexOf("-->");return{type:"comment",comment:n!==-1?e.slice(4,n):""}}for(var o=new RegExp(ye),s=null;(s=o.exec(e))!==null;)if(s[0].trim())if(s[1]){var c=s[1].trim(),u=[c,""];c.indexOf("=")>-1&&(u=c.split("=")),r.attrs[u[0]]=u[1],o.lastIndex--}else s[2]&&(r.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return r}var xe=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,ge=/^\s*$/,ve=Object.create(null);function G(e,r){switch(r.type){case"text":return e+r.content;case"tag":return e+="<"+r.name+(r.attrs?function(t){var n=[];for(var o in t)n.push(o+'="'+t[o]+'"');return n.length?" "+n.join(" "):""}(r.attrs):"")+(r.voidElement?"/>":">"),r.voidElement?e:e+r.children.reduce(G,"")+"</"+r.name+">";case"comment":return e+"<!--"+r.comment+"-->"}}var Ee={parse:function(e,r){r||(r={}),r.components||(r.components=ve);var t,n=[],o=[],s=-1,c=!1;if(e.indexOf("<")!==0){var u=e.indexOf("<");n.push({type:"text",content:u===-1?e:e.substring(0,u)})}return e.replace(xe,function(x,A){if(c){if(x!=="</"+t.name+">")return;c=!1}var g,h=x.charAt(1)!=="/",N=x.startsWith("<!--"),y=A+x.length,l=e.charAt(y);if(N){var k=J(x);return s<0?(n.push(k),n):((g=o[s]).children.push(k),n)}if(h&&(s++,(t=J(x)).type==="tag"&&r.components[t.name]&&(t.type="component",c=!0),t.voidElement||c||!l||l==="<"||t.children.push({type:"text",content:e.slice(y,e.indexOf("<",y))}),s===0&&n.push(t),(g=o[s-1])&&g.children.push(t),o[s]=t),(!h||t.voidElement)&&(s>-1&&(t.voidElement||t.name===x.slice(2,-1))&&(s--,t=s===-1?n:o[s]),!c&&l!=="<"&&l)){g=s===-1?n:o[s].children;var i=e.indexOf("<",y),m=e.slice(y,i===-1?void 0:i);ge.test(m)&&(m=" "),(i>-1&&s+g.length>=0||m!==" ")&&g.push({type:"text",content:m})}}),n},stringify:function(e){return e.reduce(function(r,t){return r+G("",t)},"")}};const M=(e,r)=>{var n;if(!e)return!1;const t=((n=e.props)==null?void 0:n.children)??e.children;return r?t.length>0:!!t},W=e=>{var t,n;if(!e)return[];const r=((t=e.props)==null?void 0:t.children)??e.children;return(n=e.props)!=null&&n.i18nIsDynamicList?S(r):r},be=e=>Array.isArray(e)&&e.every(E.isValidElement),S=e=>Array.isArray(e)?e:[e],je=(e,r)=>{const t={...r};return t.props=Object.assign(e.props,r.props),t},K=(e,r,t,n)=>{if(!e)return"";let o="";const s=S(e),c=r!=null&&r.transSupportBasicHtmlNodes?r.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((u,x)=>{if(V(u)){o+=`${u}`;return}if(E.isValidElement(u)){const{props:A,type:g}=u,h=Object.keys(A).length,N=c.indexOf(g)>-1,y=A.children;if(!y&&N&&!h){o+=`<${g}/>`;return}if(!y&&(!N||h)||A.i18nIsDynamicList){o+=`<${x}></${x}>`;return}if(N&&h===1&&V(y)){o+=`<${g}>${y}</${g}>`;return}const l=K(y,r,t,n);o+=`<${x}>${l}</${x}>`;return}if(u===null){B(t,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:n});return}if(O(u)){const{format:A,...g}=u,h=Object.keys(g);if(h.length===1){const N=A?`${h[0]}, ${A}`:h[0];o+=`{{${N}}}`;return}B(t,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:n,child:u});return}B(t,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:n,child:u})}),o},Ae=(e,r,t,n,o,s)=>{if(r==="")return[];const c=n.transKeepBasicHtmlNodesFor||[],u=r&&new RegExp(c.map(i=>`<${i}`).join("|")).test(r);if(!e&&!u&&!s)return[r];const x={},A=i=>{S(i).forEach(p=>{V(p)||(M(p)?A(W(p)):O(p)&&!E.isValidElement(p)&&Object.assign(x,p))})};A(e);const g=Ee.parse(`<0>${r}</0>`),h={...x,...o},N=(i,m,p)=>{var f;const j=W(i),T=l(j,m.children,p);return be(j)&&T.length===0||(f=i.props)!=null&&f.i18nIsDynamicList?j:T},y=(i,m,p,j,T)=>{i.dummy?(i.children=m,p.push(E.cloneElement(i,{key:j},T?void 0:m))):p.push(...E.Children.map([i],f=>{const a={...f.props};return delete a.i18nIsDynamicList,E.createElement(f.type,{...a,key:j,ref:f.ref},T?null:m)}))},l=(i,m,p)=>{const j=S(i);return S(m).reduce((f,a,w)=>{var L,F;const I=((F=(L=a.children)==null?void 0:L[0])==null?void 0:F.content)&&t.services.interpolator.interpolate(a.children[0].content,h,t.language);if(a.type==="tag"){let $=j[parseInt(a.name,10)];p.length===1&&!$&&($=p[0][a.name]),$||($={});const v=Object.keys(a.attrs).length!==0?je({props:a.attrs},$):$,P=E.isValidElement(v),_=P&&M(a,!0)&&!a.voidElement,D=u&&O(v)&&v.dummy&&!P,R=O(e)&&Object.hasOwnProperty.call(e,a.name);if(V(v)){const b=t.services.interpolator.interpolate(v,h,t.language);f.push(b)}else if(M(v)||_){const b=N(v,a,p);y(v,b,f,w)}else if(D){const b=l(j,a.children,p);y(v,b,f,w)}else if(Number.isNaN(parseFloat(a.name)))if(R){const b=N(v,a,p);y(v,b,f,w,a.voidElement)}else if(n.transSupportBasicHtmlNodes&&c.indexOf(a.name)>-1)if(a.voidElement)f.push(E.createElement(a.name,{key:`${a.name}-${w}`}));else{const b=l(j,a.children,p);f.push(E.createElement(a.name,{key:`${a.name}-${w}`},b))}else if(a.voidElement)f.push(`<${a.name} />`);else{const b=l(j,a.children,p);f.push(`<${a.name}>${b}</${a.name}>`)}else if(O(v)&&!P){const b=a.children[0]?I:null;b&&f.push(b)}else y(v,I,f,w,a.children.length!==1||!I)}else if(a.type==="text"){const $=n.transWrapTextNodes,v=s?n.unescape(t.services.interpolator.interpolate(a.content,h,t.language)):t.services.interpolator.interpolate(a.content,h,t.language);$?f.push(E.createElement($,{key:`${a.name}-${w}`},v)):f.push(v)}return f},[])},k=l([{dummy:!0,children:e||[]}],g,S(e||[]));return W(k[0])},Q=(e,r,t)=>{const n=e.key||r,o=E.cloneElement(e,{key:n});if(!o.props||!o.props.children||t.indexOf(`${r}/>`)<0&&t.indexOf(`${r} />`)<0)return o;function s(){return E.createElement(E.Fragment,null,o)}return E.createElement(s,{key:n})},Ne=(e,r)=>e.map((t,n)=>Q(t,n,r)),$e=(e,r)=>{const t={};return Object.keys(e).forEach(n=>{Object.assign(t,{[n]:Q(e[n],n,r)})}),t},we=(e,r,t,n)=>e?Array.isArray(e)?Ne(e,r):O(e)?$e(e,r):(Y(t,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:n}),null):null;function ke({children:e,count:r,parent:t,i18nKey:n,context:o,tOptions:s={},values:c,defaults:u,components:x,ns:A,i18n:g,t:h,shouldUnescape:N,...y}){var v,P,_,D,R,b;const l=g||Z();if(!l)return Y(l,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:n}),e;const k=h||l.t.bind(l)||(ee=>ee),i={...te(),...(v=l.options)==null?void 0:v.react};let m=A||k.ns||((P=l.options)==null?void 0:P.defaultNS);m=V(m)?[m]:m||["translation"];const p=K(e,i,l,n),j=u||p||i.transEmptyNodeValue||n,{hashTransKey:T}=i,f=n||(T?T(p||j):p||j);(D=(_=l.options)==null?void 0:_.interpolation)!=null&&D.defaultVariables&&(c=c&&Object.keys(c).length>0?{...c,...l.options.interpolation.defaultVariables}:{...l.options.interpolation.defaultVariables});const a=c||r!==void 0&&!((b=(R=l.options)==null?void 0:R.interpolation)!=null&&b.alwaysFormat)||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},w={...s,context:o||s.context,count:r,...c,...a,defaultValue:j,ns:m},I=f?k(f,w):j,L=we(x,I,l,n),F=Ae(L||e,I,l,i,w,N),$=t??i.defaultTransParent;return $?E.createElement($,y,F):F}function Te({children:e,count:r,parent:t,i18nKey:n,context:o,tOptions:s={},values:c,defaults:u,components:x,ns:A,i18n:g,t:h,shouldUnescape:N,...y}){var p;const{i18n:l,defaultNS:k}=E.useContext(re)||{},i=g||l||Z(),m=h||(i==null?void 0:i.t.bind(i));return ke({children:e,count:r,parent:t,i18nKey:n,context:o,tOptions:s,values:c,defaults:u,components:x,ns:A||(m==null?void 0:m.ns)||k||((p=i==null?void 0:i.options)==null?void 0:p.defaultNS),i18n:i,t:h,shouldUnescape:N,...y})}const{Title:X}=ue,Ce={username:"",password:"",confirmPassword:""};function Le(){const[e]=E.useState(!1),[r]=C.useForm(),{t}=ne(),{setFormMode:n}=E.useContext(le),o=async()=>{var s;(s=window.$message)==null||s.success("注册成功")};return d.jsxs(d.Fragment,{children:[d.jsxs(ce,{direction:"vertical",children:[d.jsx(X,{level:3,children:"Hello, Welcome to"}),d.jsx(X,{className:"mt-0",level:5,children:"React Antd Admin"})]}),d.jsxs(C,{name:"registerForm",form:r,layout:"vertical",initialValues:Ce,onFinish:o,children:[d.jsx(C.Item,{label:t("authority.username"),name:"username",rules:ae(t),children:d.jsx(H,{placeholder:t("form.username.required")})}),d.jsx(C.Item,{label:t("authority.password"),name:"password",rules:oe(t),children:d.jsx(H.Password,{placeholder:t("form.password.required")})}),d.jsx(C.Item,{name:"confirm",label:t("authority.confirmPassword"),dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:t("form.confirmPassword.required")},({getFieldValue:s})=>({validator(c,u){return!u||s("password")===u?Promise.resolve():Promise.reject(new Error(t("form.confirmPassword.invalid")))}})],children:d.jsx(H.Password,{placeholder:t("form.confirmPassword.required")})}),d.jsx(C.Item,{rules:[()=>({validator(s,c){return c!==!0?Promise.reject(new Error(t("form.agree.required"))):Promise.resolve()}})],name:"termsAgreement",valuePropName:"checked",children:d.jsx(pe,{children:d.jsx("div",{className:"flex flex-wrap text-xs",children:d.jsx(Te,{i18nKey:"authority.agree",components:[d.jsx(U,{to:"/terms-of-service",target:"_blank"},0),d.jsx(U,{to:"/privacy-policy",target:"_blank"},1)]})})})}),d.jsx(C.Item,{children:d.jsx(me,{block:!0,type:"primary",htmlType:"submit",loading:e,children:t("authority.register")})}),d.jsxs("div",{className:"text-sm text-center",children:[t("authority.alreadyHaveAnAccount"),d.jsx(se,{type:"link",className:"px-1",onPointerDown:()=>{n("login")},children:t("authority.goToLogin")})]})]})]})}export{Le as RegisterPassword};
